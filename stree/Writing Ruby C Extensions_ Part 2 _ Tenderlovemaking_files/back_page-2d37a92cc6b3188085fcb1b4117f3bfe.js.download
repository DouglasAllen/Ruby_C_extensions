/*

 lodash 3.9.3 (Custom Build) <https://lodash.com/>
 Build: `lodash modern -o ./lodash.js`
 Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>
 Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 Available under MIT license <https://lodash.com/license>
 AngularJS v1.5.5
 (c) 2010-2016 Google, Inc. http://angularjs.org
 License: MIT
 AngularJS v1.5.5
 (c) 2010-2016 Google, Inc. http://angularjs.org
 License: MIT

                                 Apache License
                         Version 2.0, January 2004
                      http://www.apache.org/licenses/

 TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION

 1. Definitions.

    "License" shall mean the terms and conditions for use, reproduction,
    and distribution as defined by Sections 1 through 9 of this document.

    "Licensor" shall mean the copyright owner or entity authorized by
    the copyright owner that is granting the License.

    "Legal Entity" shall mean the union of the acting entity and all
    other entities that control, are controlled by, or are under common
    control with that entity. For the purposes of this definition,
    "control" means (i) the power, direct or indirect, to cause the
    direction or management of such entity, whether by contract or
    otherwise, or (ii) ownership of fifty percent (50%) or more of the
    outstanding shares, or (iii) beneficial ownership of such entity.

    "You" (or "Your") shall mean an individual or Legal Entity
    exercising permissions granted by this License.

    "Source" form shall mean the preferred form for making modifications,
    including but not limited to software source code, documentation
    source, and configuration files.

    "Object" form shall mean any form resulting from mechanical
    transformation or translation of a Source form, including but
    not limited to compiled object code, generated documentation,
    and conversions to other media types.

    "Work" shall mean the work of authorship, whether in Source or
    Object form, made available under the License, as indicated by a
    copyright notice that is included in or attached to the work
    (an example is provided in the Appendix below).

    "Derivative Works" shall mean any work, whether in Source or Object
    form, that is based on (or derived from) the Work and for which the
    editorial revisions, annotations, elaborations, or other modifications
    represent, as a whole, an original work of authorship. For the purposes
    of this License, Derivative Works shall not include works that remain
    separable from, or merely link (or bind by name) to the interfaces of,
    the Work and Derivative Works thereof.

    "Contribution" shall mean any work of authorship, including
    the original version of the Work and any modifications or additions
    to that Work or Derivative Works thereof, that is intentionally
    submitted to Licensor for inclusion in the Work by the copyright owner
    or by an individual or Legal Entity authorized to submit on behalf of
    the copyright owner. For the purposes of this definition, "submitted"
    means any form of electronic, verbal, or written communication sent
    to the Licensor or its representatives, including but not limited to
    communication on electronic mailing lists, source code control systems,
    and issue tracking systems that are managed by, or on behalf of, the
    Licensor for the purpose of discussing and improving the Work, but
    excluding communication that is conspicuously marked or otherwise
    designated in writing by the copyright owner as "Not a Contribution."

    "Contributor" shall mean Licensor and any individual or Legal Entity
    on behalf of whom a Contribution has been received by Licensor and
    subsequently incorporated within the Work.

 2. Grant of Copyright License. Subject to the terms and conditions of
    this License, each Contributor hereby grants to You a perpetual,
    worldwide, non-exclusive, no-charge, royalty-free, irrevocable
    copyright license to reproduce, prepare Derivative Works of,
    publicly display, publicly perform, sublicense, and distribute the
    Work and such Derivative Works in Source or Object form.

 3. Grant of Patent License. Subject to the terms and conditions of
    this License, each Contributor hereby grants to You a perpetual,
    worldwide, non-exclusive, no-charge, royalty-free, irrevocable
    (except as stated in this section) patent license to make, have made,
    use, offer to sell, sell, import, and otherwise transfer the Work,
    where such license applies only to those patent claims licensable
    by such Contributor that are necessarily infringed by their
    Contribution(s) alone or by combination of their Contribution(s)
    with the Work to which such Contribution(s) was submitted. If You
    institute patent litigation against any entity (including a
    cross-claim or counterclaim in a lawsuit) alleging that the Work
    or a Contribution incorporated within the Work constitutes direct
    or contributory patent infringement, then any patent licenses
    granted to You under this License for that Work shall terminate
    as of the date such litigation is filed.

 4. Redistribution. You may reproduce and distribute copies of the
    Work or Derivative Works thereof in any medium, with or without
    modifications, and in Source or Object form, provided that You
    meet the following conditions:

    (a) You must give any other recipients of the Work or
        Derivative Works a copy of this License; and

    (b) You must cause any modified files to carry prominent notices
        stating that You changed the files; and

    (c) You must retain, in the Source form of any Derivative Works
        that You distribute, all copyright, patent, trademark, and
        attribution notices from the Source form of the Work,
        excluding those notices that do not pertain to any part of
        the Derivative Works; and

    (d) If the Work includes a "NOTICE" text file as part of its
        distribution, then any Derivative Works that You distribute must
        include a readable copy of the attribution notices contained
        within such NOTICE file, excluding those notices that do not
        pertain to any part of the Derivative Works, in at least one
        of the following places: within a NOTICE text file distributed
        as part of the Derivative Works; within the Source form or
        documentation, if provided along with the Derivative Works; or,
        within a display generated by the Derivative Works, if and
        wherever such third-party notices normally appear. The contents
        of the NOTICE file are for informational purposes only and
        do not modify the License. You may add Your own attribution
        notices within Derivative Works that You distribute, alongside
        or as an addendum to the NOTICE text from the Work, provided
        that such additional attribution notices cannot be construed
        as modifying the License.

    You may add Your own copyright statement to Your modifications and
    may provide additional or different license terms and conditions
    for use, reproduction, or distribution of Your modifications, or
    for any such Derivative Works as a whole, provided Your use,
    reproduction, and distribution of the Work otherwise complies with
    the conditions stated in this License.

 5. Submission of Contributions. Unless You explicitly state otherwise,
    any Contribution intentionally submitted for inclusion in the Work
    by You to the Licensor shall be under the terms and conditions of
    this License, without any additional terms or conditions.
    Notwithstanding the above, nothing herein shall supersede or modify
    the terms of any separate license agreement you may have executed
    with Licensor regarding such Contributions.

 6. Trademarks. This License does not grant permission to use the trade
    names, trademarks, service marks, or product names of the Licensor,
    except as required for reasonable and customary use in describing the
    origin of the Work and reproducing the content of the NOTICE file.

 7. Disclaimer of Warranty. Unless required by applicable law or
    agreed to in writing, Licensor provides the Work (and each
    Contributor provides its Contributions) on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
    implied, including, without limitation, any warranties or conditions
    of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
    PARTICULAR PURPOSE. You are solely responsible for determining the
    appropriateness of using or redistributing the Work and assume any
    risks associated with Your exercise of permissions under this License.

 8. Limitation of Liability. In no event and under no legal theory,
    whether in tort (including negligence), contract, or otherwise,
    unless required by applicable law (such as deliberate and grossly
    negligent acts) or agreed to in writing, shall any Contributor be
    liable to You for damages, including any direct, indirect, special,
    incidental, or consequential damages of any character arising as a
    result of this License or out of the use or inability to use the
    Work (including but not limited to damages for loss of goodwill,
    work stoppage, computer failure or malfunction, or any and all
    other commercial damages or losses), even if such Contributor
    has been advised of the possibility of such damages.

 9. Accepting Warranty or Additional Liability. While redistributing
    the Work or Derivative Works thereof, You may choose to offer,
    and charge a fee for, acceptance of support, warranty, indemnity,
    or other liability obligations and/or rights consistent with this
    License. However, in accepting such obligations, You may act only
    on Your own behalf and on Your sole responsibility, not on behalf
    of any other Contributor, and only if You agree to indemnify,
    defend, and hold each Contributor harmless for any liability
    incurred by, or claims asserted against, such Contributor by reason
    of your accepting any such warranty or additional liability.

 END OF TERMS AND CONDITIONS

 APPENDIX: How to apply the Apache License to your work.

    To apply the Apache License to your work, attach the following
    boilerplate notice, with the fields enclosed by brackets "[]"
    replaced with your own identifying information. (Don't include
    the brackets!)  The text should be enclosed in the appropriate
    comment syntax for the file format. We also recommend that a
    file or class name and description of purpose be included on the
    same "printed page" as the copyright notice for easier
    identification within third-party archives.

 Copyright 2015-2016 Netflix, Inc., Microsoft Corp. and contributors

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 FastClick: polyfill to remove click delays on browsers with touch UIs.

 @codingstandard ftlabs-jsv2
 @copyright The Financial Times Limited [All Rights Reserved]
 @license MIT License (see LICENSE.txt)
*/
(function(d){"undefined"===typeof d&&(d={});"undefined"===typeof d.performance&&(d.performance={});d._perfRefForUserTimingPolyfill=d.performance;d.performance.userTimingJsNow=!1;d.performance.userTimingJsNowPrefixed=!1;d.performance.userTimingJsUserTiming=!1;d.performance.userTimingJsUserTimingPrefixed=!1;d.performance.userTimingJsPerformanceTimeline=!1;d.performance.userTimingJsPerformanceTimelinePrefixed=!1;var a=[],b=[],c=null,l,g;if("function"!==typeof d.performance.now){d.performance.userTimingJsNow=
!0;b=["webkitNow","msNow","mozNow"];for(l=0;l<b.length;l++)if("function"===typeof d.performance[b[l]]){d.performance.now=d.performance[b[l]];d.performance.userTimingJsNowPrefixed=!0;break}var k=+new Date;d.performance.timing&&d.performance.timing.navigationStart&&(k=d.performance.timing.navigationStart);"function"!==typeof d.performance.now&&(d.performance.now=Date.now?function(){return Date.now()-k}:function(){return+new Date-k})}var e=function(){},f=function(){},m=[],h=!1,n=!1;if("function"!==typeof d.performance.getEntries||
"function"!==typeof d.performance.mark){"function"===typeof d.performance.getEntries&&"function"!==typeof d.performance.mark&&(n=!0);d.performance.userTimingJsPerformanceTimeline=!0;a=["webkit","moz"];b=["getEntries","getEntriesByName","getEntriesByType"];for(l=0;l<b.length;l++)for(g=0;g<a.length;g++)c=a[g]+b[l].substr(0,1).toUpperCase()+b[l].substr(1),"function"===typeof d.performance[c]&&(d.performance[b[l]]=d.performance[c],d.performance.userTimingJsPerformanceTimelinePrefixed=!0);var e=function(a){m.push(a);
"measure"===a.entryType&&(h=!0)},q=function(){h&&(m.sort(function(a,b){return a.startTime-b.startTime}),h=!1)},f=function(a,b){for(l=0;l<m.length;)m[l].entryType!==a?l++:"undefined"!==typeof b&&m[l].name!==b?l++:m.splice(l,1)};if("function"!==typeof d.performance.getEntries||n){var r=d.performance.getEntries;d.performance.getEntries=function(){q();var a=m.slice(0);n&&r&&(Array.prototype.push.apply(a,r.call(d.performance)),a.sort(function(a,b){return a.startTime-b.startTime}));return a}}if("function"!==
typeof d.performance.getEntriesByType||n){var t=d.performance.getEntriesByType;d.performance.getEntriesByType=function(a){if("undefined"===typeof a||"mark"!==a&&"measure"!==a)return n&&t?t.call(d.performance,a):[];"measure"===a&&q();var b=[];for(l=0;l<m.length;l++)m[l].entryType===a&&b.push(m[l]);return b}}if("function"!==typeof d.performance.getEntriesByName||n){var u=d.performance.getEntriesByName;d.performance.getEntriesByName=function(a,b){if(b&&"mark"!==b&&"measure"!==b)return n&&u?u.call(d.performance,
a,b):[];"undefined"!==typeof b&&"measure"===b&&q();var c=[];for(l=0;l<m.length;l++)"undefined"!==typeof b&&m[l].entryType!==b||m[l].name!==a||c.push(m[l]);n&&u&&(Array.prototype.push.apply(c,u.call(d.performance,a,b)),c.sort(function(a,b){return a.startTime-b.startTime}));return c}}}if("function"!==typeof d.performance.mark){d.performance.userTimingJsUserTiming=!0;a=["webkit","moz","ms"];b=["mark","measure","clearMarks","clearMeasures"];for(l=0;l<b.length;l++)for(g=0;g<a.length;g++)c=a[g]+b[l].substr(0,
1).toUpperCase()+b[l].substr(1),"function"===typeof d.performance[c]&&(d.performance[b[l]]=d.performance[c],d.performance.userTimingJsUserTimingPrefixed=!0);var x={};"function"!==typeof d.performance.mark&&(d.performance.mark=function(a){var b=d.performance.now();if("undefined"===typeof a)throw new SyntaxError("Mark name must be specified");if(d.performance.timing&&a in d.performance.timing)throw new SyntaxError("Mark name is not allowed");x[a]||(x[a]=[]);x[a].push(b);e({entryType:"mark",name:a,startTime:b,
duration:0})});"function"!==typeof d.performance.clearMarks&&(d.performance.clearMarks=function(a){a?x[a]=[]:x={};f("mark",a)});"function"!==typeof d.performance.measure&&(d.performance.measure=function(a,b,c){var f=d.performance.now();if("undefined"===typeof a)throw new SyntaxError("Measure must be specified");if(b){var h=0;if(d.performance.timing&&b in d.performance.timing){if("navigationStart"!==b&&0===d.performance.timing[b])throw Error(b+" has a timing of 0");h=d.performance.timing[b]-d.performance.timing.navigationStart}else if(b in
x)h=x[b][x[b].length-1];else throw Error(b+" mark not found");b=f;if(c)if(d.performance.timing&&c in d.performance.timing){if("navigationStart"!==c&&0===d.performance.timing[c])throw Error(c+" has a timing of 0");b=d.performance.timing[c]-d.performance.timing.navigationStart}else if(c in x)b=x[c][x[c].length-1];else throw Error(c+" mark not found");e({entryType:"measure",name:a,startTime:h,duration:b-h})}else e({entryType:"measure",name:a,startTime:0,duration:f})});"function"!==typeof d.performance.clearMeasures&&
(d.performance.clearMeasures=function(a){f("measure",a)})}"function"===typeof define&&define.amd?define([],function(){return d.performance}):"undefined"!==typeof module&&"undefined"!==typeof module.exports&&(module.exports=d.performance)})("undefined"!==typeof window?window:void 0);window.performance.mark("genius.startScriptEvaluation");window["com.genius.Genius"]||(window["com.genius.Genius"]={},window.require=function(){return window["com.genius.Genius"].require.apply(this,arguments)});
(function(d,a){function b(a){var b=W[a]={},d,c;a=a.split(/\s+/);d=0;for(c=a.length;d<c;d++)b[a[d]]=!0;return b}function c(b,d,c){if(c===a&&1===b.nodeType)if(c="data-"+d.replace(aa,"-$1").toLowerCase(),c=b.getAttribute(c),"string"===typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:p.isNumeric(c)?+c:ga.test(c)?p.parseJSON(c):c}catch(e){}p.data(b,d,c)}else c=a;return c}function l(a){for(var b in a)if(("data"!==b||!p.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function g(a,b,d){var c=
b+"defer",e=b+"queue",f=b+"mark",h=p._data(a,c);!h||"queue"!==d&&p._data(a,e)||"mark"!==d&&p._data(a,f)||setTimeout(function(){p._data(a,e)||p._data(a,f)||(p.removeData(a,c,!0),h.fire())},0)}function k(){return!1}function e(){return!0}function f(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function m(a,b,d){b=b||0;if(p.isFunction(b))return p.grep(a,function(a,c){return!!b.call(a,c,a)===d});if(b.nodeType)return p.grep(a,function(a,c){return a===b===d});if("string"===typeof b){var c=p.grep(a,
function(a){return 1===a.nodeType});if(Ma.test(b))return p.filter(b,c,!d);b=p.filter(b,c)}return p.grep(a,function(a,c){return 0<=p.inArray(a,b)===d})}function h(a){var b=z.split("|");a=a.createDocumentFragment();if(a.createElement)for(;b.length;)a.createElement(b.pop());return a}function n(a,b){return p.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function q(a,b){if(1===b.nodeType&&p.hasData(a)){var d,c,e;c=p._data(a);var f=p._data(b,
c),h=c.events;if(h)for(d in delete f.handle,f.events={},h)for(c=0,e=h[d].length;c<e;c++)p.event.add(b,d,h[d][c]);f.data&&(f.data=p.extend({},f.data))}}function r(a,b){var d;1===b.nodeType&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),d=b.nodeName.toLowerCase(),"object"===d?b.outerHTML=a.outerHTML:"input"!==d||"checkbox"!==a.type&&"radio"!==a.type?"option"===d?b.selected=a.defaultSelected:"input"===d||"textarea"===d?b.defaultValue=a.defaultValue:"script"===d&&b.text!==
a.text&&(b.text=a.text):(a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)),b.removeAttribute(p.expando),b.removeAttribute("_submit_attached"),b.removeAttribute("_change_attached"))}function t(a){return"undefined"!==typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!==typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function u(a){if("checkbox"===a.type||"radio"===a.type)a.defaultChecked=a.checked}function x(a){var b=(a.nodeName||"").toLowerCase();
"input"===b?u(a):"script"!==b&&"undefined"!==typeof a.getElementsByTagName&&p.grep(a.getElementsByTagName("input"),u)}function w(a,b,d){var c="width"===b?a.offsetWidth:a.offsetHeight,e="width"===b?1:0;if(0<c){if("border"!==d)for(;4>e;e+=2)d||(c-=parseFloat(p.css(a,"padding"+Na[e]))||0),c="margin"===d?c+(parseFloat(p.css(a,d+Na[e]))||0):c-(parseFloat(p.css(a,"border"+Na[e]+"Width"))||0);return c+"px"}c=Eb(a,b);if(0>c||null==c)c=a.style[b];if(hb.test(c))return c;c=parseFloat(c)||0;if(d)for(;4>e;e+=
2)c+=parseFloat(p.css(a,"padding"+Na[e]))||0,"padding"!==d&&(c+=parseFloat(p.css(a,"border"+Na[e]+"Width"))||0),"margin"===d&&(c+=parseFloat(p.css(a,d+Na[e]))||0);return c+"px"}function v(a){return function(b,d){"string"!==typeof b&&(d=b,b="*");if(p.isFunction(d))for(var c=b.toLowerCase().split(Tc),e=0,f=c.length,h,g;e<f;e++)h=c[e],(g=/^\+/.test(h))&&(h=h.substr(1)||"*"),h=a[h]=a[h]||[],h[g?"unshift":"push"](d)}}function C(b,d,c,e,f,h){f=f||d.dataTypes[0];h=h||{};h[f]=!0;f=b[f];for(var g=0,m=f?f.length:
0,k=b===Rb,n;g<m&&(k||!n);g++)n=f[g](d,c,e),"string"===typeof n&&(!k||h[n]?n=a:(d.dataTypes.unshift(n),n=C(b,d,c,e,n,h)));!k&&n||h["*"]||(n=C(b,d,c,e,"*",h));return n}function E(b,d){var c,e,f=p.ajaxSettings.flatOptions||{};for(c in d)d[c]!==a&&((f[c]?b:e||(e={}))[c]=d[c]);e&&p.extend(!0,b,e)}function y(a,b,d,c){if(p.isArray(b))p.each(b,function(b,e){d||ua.test(a)?c(a,e):y(a+"["+("object"===typeof e?b:"")+"]",e,d,c)});else if(d||"object"!==p.type(b))c(a,b);else for(var e in b)y(a+"["+e+"]",b[e],d,
c)}function B(){try{return new d.XMLHttpRequest}catch(a){}}function D(){setTimeout(F,0);return kc=p.now()}function F(){kc=a}function L(a,b){var d={};p.each(lc.concat.apply([],lc.slice(0,b)),function(){d[this]=a});return d}function K(a){if(!Yb[a]){var b=A.body,d=p("<"+a+">").appendTo(b),c=d.css("display");d.remove();if("none"===c||""===c)Va||(Va=A.createElement("iframe"),Va.frameBorder=Va.width=Va.height=0),b.appendChild(Va),rb&&Va.createElement||(rb=(Va.contentWindow||Va.contentDocument).document,
rb.write((p.support.boxModel?"<!doctype html>":"")+"<html><body>"),rb.close()),d=rb.createElement(a),rb.body.appendChild(d),c=p.css(d,"display"),b.removeChild(Va);Yb[a]=c}return Yb[a]}function J(a){return p.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var A=d.document,O=d.navigator,T=d.location,p=function(){function b(){if(!c.isReady){try{A.documentElement.doScroll("left")}catch(a){setTimeout(b,1);return}c.ready()}}var c=function(a,b){return new c.fn.init(a,b,h)},e=d.jQuery,f=d.$,
h,g=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,m=/\S/,k=/^\s+/,n=/\s+$/,l=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,q=/^[\],:{}\s]*$/,r=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,t=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,u=/(?:^|:|,)(?:\s*\[)+/g,x=/(webkit)[ \/]([\w.]+)/,p=/(opera)(?:.*version)?[ \/]([\w.]+)/,w=/(msie) ([\w.]+)/,F=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,y=/^-ms-/,L=function(a,b){return(b+"").toUpperCase()},E=O.userAgent,B,K,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,
J=Array.prototype.push,za=Array.prototype.slice,W=String.prototype.trim,T=Array.prototype.indexOf,ha={};c.fn=c.prototype={constructor:c,init:function(b,d,e){var f;if(!b)return this;if(b.nodeType)return this.context=this[0]=b,this.length=1,this;if("body"===b&&!d&&A.body)return this.context=A,this[0]=A.body,this.selector=b,this.length=1,this;if("string"===typeof b){f="<"===b.charAt(0)&&">"===b.charAt(b.length-1)&&3<=b.length?[null,b,null]:g.exec(b);if(!f||!f[1]&&d)return!d||d.jquery?(d||e).find(b):
this.constructor(d).find(b);if(f[1])return e=(d=d instanceof c?d[0]:d)?d.ownerDocument||d:A,(b=l.exec(b))?c.isPlainObject(d)?(b=[A.createElement(b[1])],c.fn.attr.call(b,d,!0)):b=[e.createElement(b[1])]:(b=c.buildFragment([f[1]],[e]),b=(b.cacheable?c.clone(b.fragment):b.fragment).childNodes),c.merge(this,b);if((d=A.getElementById(f[2]))&&d.parentNode){if(d.id!==f[2])return e.find(b);this.length=1;this[0]=d}this.context=A;this.selector=b;return this}if(c.isFunction(b))return e.ready(b);b.selector!==
a&&(this.selector=b.selector,this.context=b.context);return c.makeArray(b,this)},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return za.call(this,0)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a,b,d){var e=this.constructor();c.isArray(a)?J.apply(e,a):c.merge(e,a);e.prevObject=this;e.context=this.context;"find"===b?e.selector=this.selector+(this.selector?" ":"")+d:b&&(e.selector=this.selector+"."+b+
"("+d+")");return e},each:function(a,b){return c.each(this,a,b)},ready:function(a){c.bindReady();B.add(a);return this},eq:function(a){a=+a;return-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(za.apply(this,arguments),"slice",za.call(arguments).join(","))},map:function(a){return this.pushStack(c.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},
push:J,sort:[].sort,splice:[].splice};c.fn.init.prototype=c.fn;c.extend=c.fn.extend=function(){var b,d,e,f,h,g=arguments[0]||{},m=1,k=arguments.length,n=!1;"boolean"===typeof g&&(n=g,g=arguments[1]||{},m=2);"object"===typeof g||c.isFunction(g)||(g={});k===m&&(g=this,--m);for(;m<k;m++)if(null!=(b=arguments[m]))for(d in b)e=g[d],f=b[d],g!==f&&(n&&f&&(c.isPlainObject(f)||(h=c.isArray(f)))?(h?(h=!1,e=e&&c.isArray(e)?e:[]):e=e&&c.isPlainObject(e)?e:{},g[d]=c.extend(n,e,f)):f!==a&&(g[d]=f));return g};c.extend({noConflict:function(a){d.$===
c&&(d.$=f);a&&d.jQuery===c&&(d.jQuery=e);return c},isReady:!1,readyWait:1,holdReady:function(a){a?c.readyWait++:c.ready(!0)},ready:function(a){if(!0===a&&!--c.readyWait||!0!==a&&!c.isReady){if(!A.body)return setTimeout(c.ready,1);c.isReady=!0;!0!==a&&0<--c.readyWait||(B.fireWith(A,[c]),c.fn.trigger&&c(A).trigger("ready").off("ready"))}},bindReady:function(){if(!B){B=c.Callbacks("once memory");if("complete"===A.readyState)return setTimeout(c.ready,1);if(A.addEventListener)A.addEventListener("DOMContentLoaded",
K,!1),d.addEventListener("load",c.ready,!1);else if(A.attachEvent){A.attachEvent("onreadystatechange",K);d.attachEvent("onload",c.ready);var a=!1;try{a=null==d.frameElement}catch(e){}A.documentElement.doScroll&&a&&b()}}},isFunction:function(a){return"function"===c.type(a)},isArray:Array.isArray||function(a){return"array"===c.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):ha[C.call(a)]||
"object"},isPlainObject:function(b){if(!b||"object"!==c.type(b)||b.nodeType||c.isWindow(b))return!1;try{if(b.constructor&&!D.call(b,"constructor")&&!D.call(b.constructor.prototype,"isPrototypeOf"))return!1}catch(d){return!1}for(var e in b);return e===a||D.call(b,e)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw Error(a);},parseJSON:function(a){if("string"!==typeof a||!a)return null;a=c.trim(a);if(d.JSON&&d.JSON.parse)return d.JSON.parse(a);if(q.test(a.replace(r,
"@").replace(t,"]").replace(u,"")))return(new Function("return "+a))();c.error("Invalid JSON: "+a)},parseXML:function(b){if("string"!==typeof b||!b)return null;var e,f;try{d.DOMParser?(f=new DOMParser,e=f.parseFromString(b,"text/xml")):(e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(b))}catch(h){e=a}e&&e.documentElement&&!e.getElementsByTagName("parsererror").length||c.error("Invalid XML: "+b);return e},noop:function(){},globalEval:function(a){a&&m.test(a)&&(d.execScript||function(a){d.eval.call(d,
a)})(a)},camelCase:function(a){return a.replace(y,"ms-").replace(v,L)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(b,d,e){var f,h=0,g=b.length,m=g===a||c.isFunction(b);if(e)if(m)for(f in b){if(!1===d.apply(b[f],e))break}else for(;h<g&&!1!==d.apply(b[h++],e););else if(m)for(f in b){if(!1===d.call(b[f],f,b[f]))break}else for(;h<g&&!1!==d.call(b[h],h,b[h++]););return b},trim:W?function(a){return null==a?"":W.call(a)}:function(a){return null==a?
"":a.toString().replace(k,"").replace(n,"")},makeArray:function(a,b){var d=b||[];if(null!=a){var e=c.type(a);null==a.length||"string"===e||"function"===e||"regexp"===e||c.isWindow(a)?J.call(d,a):c.merge(d,a)}return d},inArray:function(a,b,c){var d;if(b){if(T)return T.call(b,a,c);d=b.length;for(c=c?0>c?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(b,c){var d=b.length,e=0;if("number"===typeof c.length)for(var f=c.length;e<f;e++)b[d++]=c[e];else for(;c[e]!==a;)b[d++]=
c[e++];b.length=d;return b},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,h=a.length;f<h;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(b,d,e){var f,h,g=[],m=0,k=b.length;if(b instanceof c||k!==a&&"number"===typeof k&&(0<k&&b[0]&&b[k-1]||0===k||c.isArray(b)))for(;m<k;m++)f=d(b[m],m,e),null!=f&&(g[g.length]=f);else for(h in b)f=d(b[h],h,e),null!=f&&(g[g.length]=f);return g.concat.apply([],g)},guid:1,proxy:function(b,d){if("string"===typeof d){var e=b[d];d=b;b=e}if(!c.isFunction(b))return a;
var f=za.call(arguments,2),e=function(){return b.apply(d,f.concat(za.call(arguments)))};e.guid=b.guid=b.guid||e.guid||c.guid++;return e},access:function(b,d,e,f,h,g,m){var k,n=null==e,l=0,q=b.length;if(e&&"object"===typeof e){for(l in e)c.access(b,d,l,e[l],1,g,f);h=1}else if(f!==a){k=m===a&&c.isFunction(f);n&&(k?(k=d,d=function(a,b,d){return k.call(c(a),d)}):(d.call(b,f),d=null));if(d)for(;l<q;l++)d(b[l],e,k?f.call(b[l],l,d(b[l],e)):f,m);h=1}return h?b:n?d.call(b):q?d(b[0],e):g},now:function(){return(new Date).getTime()},
uaMatch:function(a){a=a.toLowerCase();a=x.exec(a)||p.exec(a)||w.exec(a)||0>a.indexOf("compatible")&&F.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}c.extend(!0,a,this);a.superclass=this;a.fn=a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function(d,e){e&&e instanceof c&&!(e instanceof a)&&(e=a(e));return c.fn.init.call(this,d,e,b)};a.fn.init.prototype=a.fn;var b=a(A);return a},browser:{}});c.each("Boolean Number String Function Array Date RegExp Object".split(" "),
function(a,b){ha["[object "+b+"]"]=b.toLowerCase()});E=c.uaMatch(E);E.browser&&(c.browser[E.browser]=!0,c.browser.version=E.version);c.browser.webkit&&(c.browser.safari=!0);m.test("\u00a0")&&(k=/^[\s\xA0]+/,n=/[\s\xA0]+$/);h=c(A);A.addEventListener?K=function(){A.removeEventListener("DOMContentLoaded",K,!1);c.ready()}:A.attachEvent&&(K=function(){"complete"===A.readyState&&(A.detachEvent("onreadystatechange",K),c.ready())});return c}(),W={};p.Callbacks=function(c){c=c?W[c]||b(c):{};var d=[],e=[],
f,h,g,m,k,n,l=function(a){var b,e,f,h;b=0;for(e=a.length;b<e;b++)f=a[b],h=p.type(f),"array"===h?l(f):"function"===h&&(c.unique&&r.has(f)||d.push(f))},q=function(a,b){b=b||[];f=!c.memory||[a,b];g=h=!0;n=m||0;m=0;for(k=d.length;d&&n<k;n++)if(!1===d[n].apply(a,b)&&c.stopOnFalse){f=!0;break}g=!1;d&&(c.once?!0===f?r.disable():d=[]:e&&e.length&&(f=e.shift(),r.fireWith(f[0],f[1])))},r={add:function(){if(d){var a=d.length;l(arguments);g?k=d.length:f&&!0!==f&&(m=a,q(f[0],f[1]))}return this},remove:function(){if(d)for(var a=
arguments,b=0,e=a.length;b<e;b++)for(var f=0;f<d.length&&(a[b]!==d[f]||(g&&f<=k&&(k--,f<=n&&n--),d.splice(f--,1),!c.unique));f++);return this},has:function(a){if(d)for(var b=0,c=d.length;b<c;b++)if(a===d[b])return!0;return!1},empty:function(){d=[];return this},disable:function(){d=e=f=a;return this},disabled:function(){return!d},lock:function(){e=a;f&&!0!==f||r.disable();return this},locked:function(){return!e},fireWith:function(a,b){e&&(g?c.once||e.push([a,b]):c.once&&f||q(a,b));return this},fire:function(){r.fireWith(this,
arguments);return this},fired:function(){return!!h}};return r};var P=[].slice;p.extend({Deferred:function(a){var b=p.Callbacks("once memory"),d=p.Callbacks("once memory"),c=p.Callbacks("memory"),e="pending",f={resolve:b,reject:d,notify:c},h={done:b.add,fail:d.add,progress:c.add,state:function(){return e},isResolved:b.fired,isRejected:d.fired,then:function(a,b,d){g.done(a).fail(b).progress(d);return this},always:function(){g.done.apply(g,arguments).fail.apply(g,arguments);return this},pipe:function(a,
b,d){return p.Deferred(function(c){p.each({done:[a,"resolve"],fail:[b,"reject"],progress:[d,"notify"]},function(a,b){var d=b[0],e=b[1],f;if(p.isFunction(d))g[a](function(){if((f=d.apply(this,arguments))&&p.isFunction(f.promise))f.promise().then(c.resolve,c.reject,c.notify);else c[e+"With"](this===g?c:this,[f])});else g[a](c[e])})}).promise()},promise:function(a){if(null==a)a=h;else for(var b in h)a[b]=h[b];return a}},g=h.promise({}),m;for(m in f)g[m]=f[m].fire,g[m+"With"]=f[m].fireWith;g.done(function(){e=
"resolved"},d.disable,c.lock).fail(function(){e="rejected"},b.disable,c.lock);a&&a.call(g,g);return g},when:function(a){function b(a){return function(b){c[a]=1<arguments.length?P.call(arguments,0):b;--g||m.resolveWith(m,c)}}function d(a){return function(b){h[a]=1<arguments.length?P.call(arguments,0):b;m.notifyWith(k,h)}}var c=P.call(arguments,0),e=0,f=c.length,h=Array(f),g=f,m=1>=f&&a&&p.isFunction(a.promise)?a:p.Deferred(),k=m.promise();if(1<f){for(;e<f;e++)c[e]&&c[e].promise&&p.isFunction(c[e].promise)?
c[e].promise().then(b(e),m.reject,d(e)):--g;g||m.resolveWith(m,c)}else m!==a&&m.resolveWith(m,f?[a]:[]);return k}});p.support=function(){var a,b,c,e,f,h,g,m,k=A.createElement("div");k.setAttribute("className","t");k.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";b=k.getElementsByTagName("*");c=k.getElementsByTagName("a")[0];if(!b||!b.length||!c)return{};e=A.createElement("select");f=e.appendChild(A.createElement("option"));b=
k.getElementsByTagName("input")[0];a={leadingWhitespace:3===k.firstChild.nodeType,tbody:!k.getElementsByTagName("tbody").length,htmlSerialize:!!k.getElementsByTagName("link").length,style:/top/.test(c.getAttribute("style")),hrefNormalized:"/a"===c.getAttribute("href"),opacity:/^0.55/.test(c.style.opacity),cssFloat:!!c.style.cssFloat,checkOn:"on"===b.value,optSelected:f.selected,getSetAttribute:"t"!==k.className,enctype:!!A.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==A.createElement("nav").cloneNode(!0).outerHTML,
submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0};p.boxModel=a.boxModel="CSS1Compat"===A.compatMode;b.checked=!0;a.noCloneChecked=b.cloneNode(!0).checked;e.disabled=!0;a.optDisabled=!f.disabled;try{delete k.test}catch(n){a.deleteExpando=!1}!k.addEventListener&&k.attachEvent&&k.fireEvent&&(k.attachEvent("onclick",function(){a.noCloneEvent=!1}),k.cloneNode(!0).fireEvent("onclick"));
b=A.createElement("input");b.value="t";b.setAttribute("type","radio");a.radioValue="t"===b.value;b.setAttribute("checked","checked");b.setAttribute("name","t");k.appendChild(b);c=A.createDocumentFragment();c.appendChild(k.lastChild);a.checkClone=c.cloneNode(!0).cloneNode(!0).lastChild.checked;a.appendChecked=b.checked;c.removeChild(b);c.appendChild(k);if(k.attachEvent)for(g in{submit:1,change:1,focusin:1})b="on"+g,m=b in k,m||(k.setAttribute(b,"return;"),m="function"===typeof k[b]),a[g+"Bubbles"]=
m;c.removeChild(k);c=e=f=k=b=null;p(function(){var b,c,e,f,g=A.getElementsByTagName("body")[0];g&&(b=A.createElement("div"),b.style.cssText="padding:0;margin:0;border:0;visibility:hidden;width:0;height:0;position:static;top:0;margin-top:1px",g.insertBefore(b,g.firstChild),k=A.createElement("div"),b.appendChild(k),k.innerHTML="<table><tr><td style='padding:0;margin:0;border:0;display:none'></td><td>t</td></tr></table>",h=k.getElementsByTagName("td"),m=0===h[0].offsetHeight,h[0].style.display="",h[1].style.display=
"none",a.reliableHiddenOffsets=m&&0===h[0].offsetHeight,d.getComputedStyle&&(k.innerHTML="",c=A.createElement("div"),c.style.width="0",c.style.marginRight="0",k.style.width="2px",k.appendChild(c),a.reliableMarginRight=0===(parseInt((d.getComputedStyle(c,null)||{marginRight:0}).marginRight,10)||0)),"undefined"!==typeof k.style.zoom&&(k.innerHTML="",k.style.width=k.style.padding="1px",k.style.border=0,k.style.overflow="hidden",k.style.display="inline",k.style.zoom=1,a.inlineBlockNeedsLayout=3===k.offsetWidth,
k.style.display="block",k.style.overflow="visible",k.innerHTML="<div style='width:5px;'></div>",a.shrinkWrapBlocks=3!==k.offsetWidth),k.style.cssText="position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:0;visibility:hidden;",k.innerHTML="<div style='position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:5px solid #000;display:block;'><div style='padding:0;margin:0;border:0;display:block;overflow:hidden;'></div></div><table style='position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:5px solid #000;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",
c=k.firstChild,e=c.firstChild,f=c.nextSibling.firstChild.firstChild,f={doesNotAddBorder:5!==e.offsetTop,doesAddBorderForTableAndCells:5===f.offsetTop},e.style.position="fixed",e.style.top="20px",f.fixedPosition=20===e.offsetTop||15===e.offsetTop,e.style.position=e.style.top="",c.style.overflow="hidden",c.style.position="relative",f.subtractsBorderForOverflowNotVisible=-5===e.offsetTop,f.doesNotIncludeMarginInBodyOffset=1!==g.offsetTop,d.getComputedStyle&&(k.style.marginTop="1%",a.pixelMargin="1%"!==
(d.getComputedStyle(k,null)||{marginTop:0}).marginTop),"undefined"!==typeof b.style.zoom&&(b.style.zoom=1),g.removeChild(b),k=null,p.extend(a,f))});return a}();var ga=/^(?:\{.*\}|\[.*\])$/,aa=/([A-Z])/g;p.extend({cache:{},uuid:0,expando:"jQuery"+(p.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?p.cache[a[p.expando]]:a[p.expando];return!!a&&!l(a)},data:function(b,c,d,e){if(p.acceptData(b)){var f;
f=p.expando;var h="string"===typeof c,g=b.nodeType,m=g?p.cache:b,k=g?b[f]:b[f]&&f,n="events"===c;if(k&&m[k]&&(n||e||m[k].data)||!h||d!==a){k||(g?b[f]=k=++p.uuid:k=f);m[k]||(m[k]={},g||(m[k].toJSON=p.noop));if("object"===typeof c||"function"===typeof c)e?m[k]=p.extend(m[k],c):m[k].data=p.extend(m[k].data,c);f=b=m[k];e||(b.data||(b.data={}),b=b.data);d!==a&&(b[p.camelCase(c)]=d);if(n&&!b[c])return f.events;h?(d=b[c],null==d&&(d=b[p.camelCase(c)])):d=b;return d}}},removeData:function(a,b,c){if(p.acceptData(a)){var d,
e,f,h=p.expando,g=a.nodeType,m=g?p.cache:a,k=g?a[h]:h;if(m[k]){if(b&&(d=c?m[k]:m[k].data)){p.isArray(b)||(b in d?b=[b]:(b=p.camelCase(b),b=b in d?[b]:b.split(" ")));e=0;for(f=b.length;e<f;e++)delete d[b[e]];if(!(c?l:p.isEmptyObject)(d))return}if(!c&&(delete m[k].data,!l(m[k])))return;p.support.deleteExpando||!m.setInterval?delete m[k]:m[k]=null;g&&(p.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)}}},_data:function(a,b,c){return p.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=
p.noData[a.nodeName.toLowerCase()];if(b)return!(!0===b||a.getAttribute("classid")!==b)}return!0}});p.fn.extend({data:function(b,d){var e,f,h,g,m,k=this[0],n=0,l=null;if(b===a){if(this.length&&(l=p.data(k),1===k.nodeType&&!p._data(k,"parsedAttrs"))){h=k.attributes;for(m=h.length;n<m;n++)g=h[n].name,0===g.indexOf("data-")&&(g=p.camelCase(g.substring(5)),c(k,g,l[g]));p._data(k,"parsedAttrs",!0)}return l}if("object"===typeof b)return this.each(function(){p.data(this,b)});e=b.split(".",2);e[1]=e[1]?"."+
e[1]:"";f=e[1]+"!";return p.access(this,function(d){if(d===a)return l=this.triggerHandler("getData"+f,[e[0]]),l===a&&k&&(l=p.data(k,b),l=c(k,b,l)),l===a&&e[1]?this.data(e[0]):l;e[1]=d;this.each(function(){var a=p(this);a.triggerHandler("setData"+f,e);p.data(this,b,d);a.triggerHandler("changeData"+f,e)})},null,d,1<arguments.length,null,!1)},removeData:function(a){return this.each(function(){p.removeData(this,a)})}});p.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",p._data(a,b,(p._data(a,b)||0)+
1))},_unmark:function(a,b,c){!0!==a&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark";(a=a?0:(p._data(b,d)||1)-1)?p._data(b,d,a):(p.removeData(b,d,!0),g(b,c,"mark"))}},queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=p._data(a,b),c&&(!d||p.isArray(c)?d=p._data(a,b,p.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=p.queue(a,b),d=c.shift(),e={};"inprogress"===d&&(d=c.shift());d&&("fx"===b&&c.unshift("inprogress"),p._data(a,b+".run",e),d.call(a,function(){p.dequeue(a,
b)},e));c.length||(p.removeData(a,b+"queue "+b+".run",!0),g(a,b,"queue"))}});p.fn.extend({queue:function(b,c){var d=2;"string"!==typeof b&&(c=b,b="fx",d--);return arguments.length<d?p.queue(this[0],b):c===a?this:this.each(function(){var a=p.queue(this,b,c);"fx"===b&&"inprogress"!==a[0]&&p.dequeue(this,b)})},dequeue:function(a){return this.each(function(){p.dequeue(this,a)})},delay:function(a,b){a=p.fx?p.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},
clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(b,c){function d(){--g||e.resolveWith(f,[f])}"string"!==typeof b&&(c=b,b=a);b=b||"fx";for(var e=p.Deferred(),f=this,h=f.length,g=1,m=b+"defer",k=b+"queue",n=b+"mark",l;h--;)if(l=p.data(f[h],m,a,!0)||(p.data(f[h],k,a,!0)||p.data(f[h],n,a,!0))&&p.data(f[h],m,p.Callbacks("once memory"),!0))g++,l.add(d);d();return e.promise(c)}});var ya=/[\n\t\r]/g,ka=/\s+/,Ga=/\r/g,va=/^(?:button|input)$/i,Za=/^(?:button|input|object|select|textarea)$/i,
sb=/^a(?:rea)?$/i,I=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,ra=p.support.getSetAttribute,X,ha,tb;p.fn.extend({attr:function(a,b){return p.access(this,p.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){p.removeAttr(this,a)})},prop:function(a,b){return p.access(this,p.prop,a,b,1<arguments.length)},removeProp:function(b){b=p.propFix[b]||b;return this.each(function(){try{this[b]=a,delete this[b]}catch(c){}})},
addClass:function(a){var b,c,d,e,f,h,g;if(p.isFunction(a))return this.each(function(b){p(this).addClass(a.call(this,b,this.className))});if(a&&"string"===typeof a)for(b=a.split(ka),c=0,d=this.length;c<d;c++)if(e=this[c],1===e.nodeType)if(e.className||1!==b.length){f=" "+e.className+" ";h=0;for(g=b.length;h<g;h++)~f.indexOf(" "+b[h]+" ")||(f+=b[h]+" ");e.className=p.trim(f)}else e.className=a;return this},removeClass:function(b){var c,d,e,f,h,g,m;if(p.isFunction(b))return this.each(function(a){p(this).removeClass(b.call(this,
a,this.className))});if(b&&"string"===typeof b||b===a)for(c=(b||"").split(ka),d=0,e=this.length;d<e;d++)if(f=this[d],1===f.nodeType&&f.className)if(b){h=(" "+f.className+" ").replace(ya," ");g=0;for(m=c.length;g<m;g++)h=h.replace(" "+c[g]+" "," ");f.className=p.trim(h)}else f.className="";return this},toggleClass:function(a,b){var c=typeof a,d="boolean"===typeof b;return p.isFunction(a)?this.each(function(c){p(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===
c)for(var e,f=0,h=p(this),g=b,m=a.split(ka);e=m[f++];)g=d?g:!h.hasClass(e),h[g?"addClass":"removeClass"](e);else if("undefined"===c||"boolean"===c)this.className&&p._data(this,"__className__",this.className),this.className=this.className||!1===a?"":p._data(this,"__className__")||""})},hasClass:function(a){a=" "+a+" ";for(var b=0,c=this.length;b<c;b++)if(1===this[b].nodeType&&-1<(" "+this[b].className+" ").replace(ya," ").indexOf(a))return!0;return!1},val:function(b){var c,d,e,f=this[0];if(arguments.length)return e=
p.isFunction(b),this.each(function(d){var f=p(this);1===this.nodeType&&(d=e?b.call(this,d,f.val()):b,null==d?d="":"number"===typeof d?d+="":p.isArray(d)&&(d=p.map(d,function(a){return null==a?"":a+""})),c=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()],c&&"set"in c&&c.set(this,d,"value")!==a||(this.value=d))});if(f){if((c=p.valHooks[f.type]||p.valHooks[f.nodeName.toLowerCase()])&&"get"in c&&(d=c.get(f,"value"))!==a)return d;d=f.value;return"string"===typeof d?d.replace(Ga,""):null==
d?"":d}}});p.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d=a.selectedIndex,e=[],f=a.options,h="select-one"===a.type;if(0>d)return null;a=h?d:0;for(c=h?d+1:f.length;a<c;a++)if(b=f[a],!(!b.selected||(p.support.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&p.nodeName(b.parentNode,"optgroup"))){b=p(b).val();if(h)return b;e.push(b)}return h&&!e.length&&f.length?p(f[d]).val():
e},set:function(a,b){var c=p.makeArray(b);p(a).find("option").each(function(){this.selected=0<=p.inArray(p(this).val(),c)});c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(b,c,d,e){var f,h,g=b.nodeType;if(b&&3!==g&&8!==g&&2!==g){if(e&&c in p.attrFn)return p(b)[c](d);if("undefined"===typeof b.getAttribute)return p.prop(b,c,d);if(e=1!==g||!p.isXMLDoc(b))c=c.toLowerCase(),h=p.attrHooks[c]||(I.test(c)?ha:X);if(d!==a)if(null===
d)p.removeAttr(b,c);else{if(h&&"set"in h&&e&&(f=h.set(b,d,c))!==a)return f;b.setAttribute(c,""+d);return d}else{if(h&&"get"in h&&e&&null!==(f=h.get(b,c)))return f;f=b.getAttribute(c);return null===f?a:f}}},removeAttr:function(a,b){var c,d,e,f,h,g=0;if(b&&1===a.nodeType)for(d=b.toLowerCase().split(ka),f=d.length;g<f;g++)if(e=d[g])c=p.propFix[e]||e,(h=I.test(e))||p.attr(a,e,""),a.removeAttribute(ra?e:c),h&&c in a&&(a[c]=!1)},attrHooks:{type:{set:function(a,b){if(va.test(a.nodeName)&&a.parentNode)p.error("type property can't be changed");
else if(!p.support.radioValue&&"radio"===b&&p.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);c&&(a.value=c);return b}}},value:{get:function(a,b){return X&&p.nodeName(a,"button")?X.get(a,b):b in a?a.value:null},set:function(a,b,c){if(X&&p.nodeName(a,"button"))return X.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",
frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(b,c,d){var e,f,h;h=b.nodeType;if(b&&3!==h&&8!==h&&2!==h){if(h=1!==h||!p.isXMLDoc(b))c=p.propFix[c]||c,f=p.propHooks[c];return d!==a?f&&"set"in f&&(e=f.set(b,d,c))!==a?e:b[c]=d:f&&"get"in f&&null!==(e=f.get(b,c))?e:b[c]}},propHooks:{tabIndex:{get:function(b){var c=b.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):Za.test(b.nodeName)||sb.test(b.nodeName)&&b.href?0:a}}}});p.attrHooks.tabindex=p.propHooks.tabIndex;
ha={get:function(b,c){var d,e=p.prop(b,c);return!0===e||"boolean"!==typeof e&&(d=b.getAttributeNode(c))&&!1!==d.nodeValue?c.toLowerCase():a},set:function(a,b,c){!1===b?p.removeAttr(a,c):(b=p.propFix[c]||c,b in a&&(a[b]=!0),a.setAttribute(c,c.toLowerCase()));return c}};ra||(tb={name:!0,id:!0,coords:!0},X=p.valHooks.button={get:function(b,c){var d;return(d=b.getAttributeNode(c))&&(tb[c]?""!==d.nodeValue:d.specified)?d.nodeValue:a},set:function(a,b,c){var d=a.getAttributeNode(c);d||(d=A.createAttribute(c),
a.setAttributeNode(d));return d.nodeValue=b+""}},p.attrHooks.tabindex.set=X.set,p.each(["width","height"],function(a,b){p.attrHooks[b]=p.extend(p.attrHooks[b],{set:function(a,c){if(""===c)return a.setAttribute(b,"auto"),c}})}),p.attrHooks.contenteditable={get:X.get,set:function(a,b,c){""===b&&(b="false");X.set(a,b,c)}});p.support.hrefNormalized||p.each(["href","src","width","height"],function(b,c){p.attrHooks[c]=p.extend(p.attrHooks[c],{get:function(b){b=b.getAttribute(c,2);return null===b?a:b}})});
p.support.style||(p.attrHooks.style={get:function(b){return b.style.cssText.toLowerCase()||a},set:function(a,b){return a.style.cssText=""+b}});p.support.optSelected||(p.propHooks.selected=p.extend(p.propHooks.selected,{get:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex;return null}}));p.support.enctype||(p.propFix.enctype="encoding");p.support.checkOn||p.each(["radio","checkbox"],function(){p.valHooks[this]={get:function(a){return null===a.getAttribute("value")?
"on":a.value}}});p.each(["radio","checkbox"],function(){p.valHooks[this]=p.extend(p.valHooks[this],{set:function(a,b){if(p.isArray(b))return a.checked=0<=p.inArray(p(a).val(),b)}})});var Oa=/^(?:textarea|input|select)$/i,U=/^([^\.]*)?(?:\.(.+))?$/,ea=/(?:^|\s)hover(\.\S+)?\b/,Hb=/^key/,mb=/^(?:mouse|contextmenu)|click/,Wa=/^(?:focusinfocus|focusoutblur)$/,Y=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,Ha=function(a){if(a=Y.exec(a))a[1]=(a[1]||"").toLowerCase(),a[3]=a[3]&&new RegExp("(?:^|\\s)"+a[3]+"(?:\\s|$)");
return a},Pa=function(a){return p.event.special.hover?a:a.replace(ea,"mouseenter$1 mouseleave$1")};p.event={add:function(b,c,d,e,f){var h,g,m,k,n,l,q,r,t;if(3!==b.nodeType&&8!==b.nodeType&&c&&d&&(h=p._data(b))){d.handler&&(q=d,d=q.handler,f=q.selector);d.guid||(d.guid=p.guid++);m=h.events;m||(h.events=m={});g=h.handle;g||(h.handle=g=function(b){return"undefined"===typeof p||b&&p.event.triggered===b.type?a:p.event.dispatch.apply(g.elem,arguments)},g.elem=b);c=p.trim(Pa(c)).split(" ");for(h=0;h<c.length;h++)k=
U.exec(c[h])||[],n=k[1],l=(k[2]||"").split(".").sort(),t=p.event.special[n]||{},n=(f?t.delegateType:t.bindType)||n,t=p.event.special[n]||{},k=p.extend({type:n,origType:k[1],data:e,handler:d,guid:d.guid,selector:f,quick:f&&Ha(f),namespace:l.join(".")},q),r=m[n],r||(r=m[n]=[],r.delegateCount=0,t.setup&&!1!==t.setup.call(b,e,l,g)||(b.addEventListener?b.addEventListener(n,g,!1):b.attachEvent&&b.attachEvent("on"+n,g))),t.add&&(t.add.call(b,k),k.handler.guid||(k.handler.guid=d.guid)),f?r.splice(r.delegateCount++,
0,k):r.push(k),p.event.global[n]=!0;b=null}},global:{},remove:function(a,b,c,d,e){var f=p.hasData(a)&&p._data(a),h,g,m,k,n,l,q,r,t,u;if(f&&(q=f.events)){b=p.trim(Pa(b||"")).split(" ");for(h=0;h<b.length;h++)if(g=U.exec(b[h])||[],m=k=g[1],g=g[2],m){r=p.event.special[m]||{};m=(d?r.delegateType:r.bindType)||m;t=q[m]||[];n=t.length;g=g?new RegExp("(^|\\.)"+g.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(l=0;l<t.length;l++)u=t[l],!e&&k!==u.origType||c&&c.guid!==u.guid||g&&!g.test(u.namespace)||
d&&d!==u.selector&&("**"!==d||!u.selector)||(t.splice(l--,1),u.selector&&t.delegateCount--,r.remove&&r.remove.call(a,u));0===t.length&&n!==t.length&&(r.teardown&&!1!==r.teardown.call(a,g)||p.removeEvent(a,m,f.handle),delete q[m])}else for(m in q)p.event.remove(a,m+b[h],c,d,!0);if(p.isEmptyObject(q)){if(b=f.handle)b.elem=null;p.removeData(a,["events","handle"],!0)}}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(b,c,e,f){if(!e||3!==e.nodeType&&8!==e.nodeType){var h=b.type||b,g=
[],m,k,n,l,q;if(!Wa.test(h+p.event.triggered)&&(0<=h.indexOf("!")&&(h=h.slice(0,-1),m=!0),0<=h.indexOf(".")&&(g=h.split("."),h=g.shift(),g.sort()),e&&!p.event.customEvent[h]||p.event.global[h]))if(b="object"===typeof b?b[p.expando]?b:new p.Event(h,b):new p.Event(h),b.type=h,b.isTrigger=!0,b.exclusive=m,b.namespace=g.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,m=0>h.indexOf(":")?"on"+h:"",e){if(b.result=a,b.target||(b.target=e),c=null!=c?p.makeArray(c):
[],c.unshift(b),n=p.event.special[h]||{},!n.trigger||!1!==n.trigger.apply(e,c)){q=[[e,n.bindType||h]];if(!f&&!n.noBubble&&!p.isWindow(e)){l=n.delegateType||h;g=Wa.test(l+h)?e:e.parentNode;for(k=null;g;g=g.parentNode)q.push([g,l]),k=g;k&&k===e.ownerDocument&&q.push([k.defaultView||k.parentWindow||d,l])}for(k=0;k<q.length&&!b.isPropagationStopped();k++)g=q[k][0],b.type=q[k][1],(l=(p._data(g,"events")||{})[b.type]&&p._data(g,"handle"))&&l.apply(g,c),(l=m&&g[m])&&p.acceptData(g)&&!1===l.apply(g,c)&&b.preventDefault();
b.type=h;f||b.isDefaultPrevented()||n._default&&!1!==n._default.apply(e.ownerDocument,c)||"click"===h&&p.nodeName(e,"a")||!p.acceptData(e)||!m||!e[h]||("focus"===h||"blur"===h)&&0===b.target.offsetWidth||p.isWindow(e)||((k=e[m])&&(e[m]=null),p.event.triggered=h,e[h](),p.event.triggered=a,k&&(e[m]=k));return b.result}}else for(k in e=p.cache,e)e[k].events&&e[k].events[h]&&p.event.trigger(b,c,e[k].handle.elem,!0)}},dispatch:function(b){b=p.event.fix(b||d.event);var c=(p._data(this,"events")||{})[b.type]||
[],e=c.delegateCount,f=[].slice.call(arguments,0),h=!b.exclusive&&!b.namespace,g=p.event.special[b.type]||{},m=[],k,n,l,q,r,t,u;f[0]=b;b.delegateTarget=this;if(!g.preDispatch||!1!==g.preDispatch.call(this,b)){if(e&&(!b.button||"click"!==b.type))for(l=p(this),l.context=this.ownerDocument||this,n=b.target;n!=this;n=n.parentNode||this)if(!0!==n.disabled){r={};t=[];l[0]=n;for(k=0;k<e;k++){q=c[k];u=q.selector;if(r[u]===a){var x=r,w=u,A;if(q.quick){A=q.quick;var F=n.attributes||{};A=(!A[1]||n.nodeName.toLowerCase()===
A[1])&&(!A[2]||(F.id||{}).value===A[2])&&(!A[3]||A[3].test((F["class"]||{}).value))}else A=l.is(u);x[w]=A}r[u]&&t.push(q)}t.length&&m.push({elem:n,matches:t})}c.length>e&&m.push({elem:this,matches:c.slice(e)});for(k=0;k<m.length&&!b.isPropagationStopped();k++)for(e=m[k],b.currentTarget=e.elem,c=0;c<e.matches.length&&!b.isImmediatePropagationStopped();c++)if(q=e.matches[c],h||!b.namespace&&!q.namespace||b.namespace_re&&b.namespace_re.test(q.namespace))b.data=q.data,b.handleObj=q,q=((p.event.special[q.origType]||
{}).handle||q.handler).apply(e.elem,f),q!==a&&(b.result=q,!1===q&&(b.preventDefault(),b.stopPropagation()));g.postDispatch&&g.postDispatch.call(this,b);return b.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},
mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(b,c){var d,e,f=c.button,h=c.fromElement;null==b.pageX&&null!=c.clientX&&(d=b.target.ownerDocument||A,e=d.documentElement,d=d.body,b.pageX=c.clientX+(e&&e.scrollLeft||d&&d.scrollLeft||0)-(e&&e.clientLeft||d&&d.clientLeft||0),b.pageY=c.clientY+(e&&e.scrollTop||d&&d.scrollTop||0)-(e&&e.clientTop||d&&d.clientTop||0));!b.relatedTarget&&h&&(b.relatedTarget=h===
b.target?c.toElement:h);b.which||f===a||(b.which=f&1?1:f&2?3:f&4?2:0);return b}},fix:function(b){if(b[p.expando])return b;var c,d,e=b,f=p.event.fixHooks[b.type]||{},h=f.props?this.props.concat(f.props):this.props;b=p.Event(e);for(c=h.length;c;)d=h[--c],b[d]=e[d];b.target||(b.target=e.srcElement||A);3===b.target.nodeType&&(b.target=b.target.parentNode);b.metaKey===a&&(b.metaKey=b.ctrlKey);return f.filter?f.filter(b,e):b},special:{ready:{setup:p.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},
blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){p.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){a=p.extend(new p.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?p.event.trigger(a,null,b):p.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};p.event.handle=p.event.dispatch;p.removeEvent=A.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,
c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)};p.Event=function(a,b){if(!(this instanceof p.Event))return new p.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?e:k):this.type=a;b&&p.extend(this,b);this.timeStamp=a&&a.timeStamp||p.now();this[p.expando]=!0};p.Event.prototype={preventDefault:function(){this.isDefaultPrevented=e;var a=this.originalEvent;a&&(a.preventDefault?
a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=e;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=e;this.stopPropagation()},isDefaultPrevented:k,isPropagationStopped:k,isImmediatePropagationStopped:k};p.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){p.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=a.relatedTarget,
d=a.handleObj,e;if(!c||c!==this&&!p.contains(this,c))a.type=d.origType,e=d.handler.apply(this,arguments),a.type=b;return e}}});p.support.submitBubbles||(p.event.special.submit={setup:function(){if(p.nodeName(this,"form"))return!1;p.event.add(this,"click._submit keypress._submit",function(b){b=b.target;(b=p.nodeName(b,"input")||p.nodeName(b,"button")?b.form:a)&&!b._submit_attached&&(p.event.add(b,"submit._submit",function(a){a._submit_bubble=!0}),b._submit_attached=!0)})},postDispatch:function(a){a._submit_bubble&&
(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&p.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(p.nodeName(this,"form"))return!1;p.event.remove(this,"._submit")}});p.support.changeBubbles||(p.event.special.change={setup:function(){if(Oa.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)p.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),p.event.add(this,"click._change",function(a){this._just_changed&&
!a.isTrigger&&(this._just_changed=!1,p.event.simulate("change",this,a,!0))});return!1}p.event.add(this,"beforeactivate._change",function(a){a=a.target;Oa.test(a.nodeName)&&!a._change_attached&&(p.event.add(a,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||p.event.simulate("change",this.parentNode,a,!0)}),a._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,
arguments)},teardown:function(){p.event.remove(this,"._change");return Oa.test(this.nodeName)}});p.support.focusinBubbles||p.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){p.event.simulate(b,a.target,p.event.fix(a),!0)};p.event.special[b]={setup:function(){0===c++&&A.addEventListener(a,d,!0)},teardown:function(){0===--c&&A.removeEventListener(a,d,!0)}}});p.fn.extend({on:function(b,c,d,e,f){var h,g;if("object"===typeof b){"string"!==typeof c&&(d=d||c,c=a);for(g in b)this.on(g,
c,d,b[g],f);return this}null==d&&null==e?(e=c,d=c=a):null==e&&("string"===typeof c?(e=d,d=a):(e=d,d=c,c=a));if(!1===e)e=k;else if(!e)return this;1===f&&(h=e,e=function(a){p().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=p.guid++));return this.each(function(){p.event.add(this,b,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(b,c,d){if(b&&b.preventDefault&&b.handleObj){var e=b.handleObj;p(b.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,
e.selector,e.handler);return this}if("object"===typeof b){for(e in b)this.off(e,c,b[e]);return this}if(!1===c||"function"===typeof c)d=c,c=a;!1===d&&(d=k);return this.each(function(){p.event.remove(this,b,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){p(this.context).on(a,this.selector,b,c);return this},die:function(a,b){p(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,
a,c,d)},undelegate:function(a,b,c){return 1==arguments.length?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){p.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return p.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||p.guid++,d=0,e=function(c){var e=(p._data(this,"lastToggle"+a.guid)||0)%d;p._data(this,"lastToggle"+a.guid,e+1);c.preventDefault();return b[e].apply(this,arguments)||!1};for(e.guid=c;d<b.length;)b[d++].guid=
c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){p.fn[b]=function(a,c){null==c&&(c=a,a=null);return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)};p.attrFn&&(p.attrFn[b]=!0);Hb.test(b)&&(p.event.fixHooks[b]=p.event.keyHooks);
mb.test(b)&&(p.event.fixHooks[b]=p.event.mouseHooks)});(function(){function b(a,c,d,f,h,g){h=0;for(var m=f.length;h<m;h++){var k=f[h];if(k){for(var n=!1,k=k[a];k;){if(k[e]===d){n=f[k.sizset];break}1!==k.nodeType||g||(k[e]=d,k.sizset=h);if(k.nodeName.toLowerCase()===c){n=k;break}k=k[a]}f[h]=n}}}function c(a,b,d,f,h,g){h=0;for(var m=f.length;h<m;h++){var k=f[h];if(k){for(var n=!1,k=k[a];k;){if(k[e]===d){n=f[k.sizset];break}if(1===k.nodeType)if(g||(k[e]=d,k.sizset=h),"string"!==typeof b){if(k===b){n=
!0;break}}else if(0<q.filter(b,[k]).length){n=k;break}k=k[a]}f[h]=n}}}var d=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e="sizcache"+(Math.random()+"").replace(".",""),f=0,h=Object.prototype.toString,g=!1,m=!0,k=/\\/g,n=/\r\n/g,l=/\W/;[0,0].sort(function(){m=!1;return 0});var q=function(a,b,c,e){c=c||[];var f=b=b||A;if(1!==b.nodeType&&9!==b.nodeType)return[];if(!a||"string"!==typeof a)return c;var g,m,k,n,l,
r=!0,x=q.isXML(b),p=[],w=a;do if(d.exec(""),g=d.exec(w))if(w=g[3],p.push(g[1]),g[2]){n=g[3];break}while(g);if(1<p.length&&u.exec(a))if(2===p.length&&t.relative[p[0]])m=E(p[0]+p[1],b,e);else for(m=t.relative[p[0]]?[b]:q(p.shift(),b);p.length;)a=p.shift(),t.relative[a]&&(a+=p.shift()),m=E(a,m,e);else if(!e&&1<p.length&&9===b.nodeType&&!x&&t.match.ID.test(p[0])&&!t.match.ID.test(p[p.length-1])&&(g=q.find(p.shift(),b,x),b=g.expr?q.filter(g.expr,g.set)[0]:g.set[0]),b)for(g=e?{expr:p.pop(),set:F(e)}:q.find(p.pop(),
1!==p.length||"~"!==p[0]&&"+"!==p[0]||!b.parentNode?b:b.parentNode,x),m=g.expr?q.filter(g.expr,g.set):g.set,0<p.length?k=F(m):r=!1;p.length;)g=l=p.pop(),t.relative[l]?g=p.pop():l="",null==g&&(g=b),t.relative[l](k,g,x);else k=[];k||(k=m);k||q.error(l||a);if("[object Array]"===h.call(k))if(r)if(b&&1===b.nodeType)for(a=0;null!=k[a];a++)k[a]&&(!0===k[a]||1===k[a].nodeType&&q.contains(b,k[a]))&&c.push(m[a]);else for(a=0;null!=k[a];a++)k[a]&&1===k[a].nodeType&&c.push(m[a]);else c.push.apply(c,k);else F(k,
c);n&&(q(n,f,c,e),q.uniqueSort(c));return c};q.uniqueSort=function(a){if(y&&(g=m,a.sort(y),g))for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1);return a};q.matches=function(a,b){return q(a,null,null,b)};q.matchesSelector=function(a,b){return 0<q(b,null,null,[a]).length};q.find=function(a,b,c){var d,e,f,h,g,m;if(!a)return[];e=0;for(f=t.order.length;e<f;e++)if(g=t.order[e],h=t.leftMatch[g].exec(a))if(m=h[1],h.splice(1,1),"\\"!==m.substr(m.length-1)&&(h[1]=(h[1]||"").replace(k,""),d=t.find[g](h,
b,c),null!=d)){a=a.replace(t.match[g],"");break}d||(d="undefined"!==typeof b.getElementsByTagName?b.getElementsByTagName("*"):[]);return{set:d,expr:a}};q.filter=function(b,c,d,e){for(var f,h,g,m,k,n,l,r,u=b,x=[],p=c,w=c&&c[0]&&q.isXML(c[0]);b&&c.length;){for(g in t.filter)if(null!=(f=t.leftMatch[g].exec(b))&&f[2]&&(n=t.filter[g],k=f[1],h=!1,f.splice(1,1),"\\"!==k.substr(k.length-1))){p===x&&(x=[]);if(t.preFilter[g])if(f=t.preFilter[g](f,p,d,x,e,w),!f)h=m=!0;else if(!0===f)continue;if(f)for(l=0;null!=
(k=p[l]);l++)k&&(m=n(k,f,l,p),r=e^m,d&&null!=m?r?h=!0:p[l]=!1:r&&(x.push(k),h=!0));if(m!==a){d||(p=x);b=b.replace(t.match[g],"");if(!h)return[];break}}if(b===u)if(null==h)q.error(b);else break;u=b}return p};q.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};var r=q.getText=function(a){var b,c;b=a.nodeType;var d="";if(b)if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;if("string"===typeof a.innerText)return a.innerText.replace(n,"");for(a=
a.firstChild;a;a=a.nextSibling)d+=r(a)}else{if(3===b||4===b)return a.nodeValue}else for(b=0;c=a[b];b++)8!==c.nodeType&&(d+=r(c));return d},t=q.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,
POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c="string"===typeof b,d=c&&!l.test(b),c=c&&!d;d&&(b=b.toLowerCase());for(var d=0,e=a.length,f;d<e;d++)if(f=a[d]){for(;(f=f.previousSibling)&&1!==f.nodeType;);
a[d]=c||f&&f.nodeName.toLowerCase()===b?f||!1:f===b}c&&q.filter(b,a,!0)},">":function(a,b){var c,d="string"===typeof b,e=0,f=a.length;if(d&&!l.test(b))for(b=b.toLowerCase();e<f;e++){if(c=a[e])c=c.parentNode,a[e]=c.nodeName.toLowerCase()===b?c:!1}else{for(;e<f;e++)(c=a[e])&&(a[e]=d?c.parentNode:c.parentNode===b);d&&q.filter(b,a,!0)}},"":function(a,d,e){var h,g=f++,m=c;"string"!==typeof d||l.test(d)||(h=d=d.toLowerCase(),m=b);m("parentNode",d,g,a,h,e)},"~":function(a,d,e){var h,g=f++,m=c;"string"!==
typeof d||l.test(d)||(h=d=d.toLowerCase(),m=b);m("previousSibling",d,g,a,h,e)}},find:{ID:function(a,b,c){if("undefined"!==typeof b.getElementById&&!c)return(a=b.getElementById(a[1]))&&a.parentNode?[a]:[]},NAME:function(a,b){if("undefined"!==typeof b.getElementsByName){for(var c=[],d=b.getElementsByName(a[1]),e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return 0===c.length?null:c}},TAG:function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a[1])}},
preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(k,"")+" ";if(f)return a;f=0;for(var h;null!=(h=b[f]);f++)h&&(e^(h.className&&0<=(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a))?c||d.push(h):c&&(b[f]=!1));return!1},ID:function(a){return a[1].replace(k,"")},TAG:function(a,b){return a[1].replace(k,"").toLowerCase()},CHILD:function(a){if("nth"===a[1]){a[2]||q.error(a[0]);a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===a[2]&&"2n"||"odd"===a[2]&&"2n+1"||
!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0;a[3]=b[3]-0}else a[2]&&q.error(a[0]);a[0]=f++;return a},ATTR:function(a,b,c,d,e,f){b=a[1]=a[1].replace(k,"");!f&&t.attrMap[b]&&(a[1]=t.attrMap[b]);a[4]=(a[4]||a[5]||"").replace(k,"");"~="===a[2]&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(a,b,c,e,f){if("not"===a[1])if(1<(d.exec(a[3])||"").length||/^\w/.test(a[3]))a[3]=q(a[3],null,null,b);else return a=q.filter(a[3],b,c,1^f),c||e.push.apply(e,a),!1;else if(t.match.POS.test(a[0])||t.match.CHILD.test(a[0]))return!0;
return a},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return!1===a.disabled&&"hidden"!==a.type},disabled:function(a){return!0===a.disabled},checked:function(a){return!0===a.checked},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!q(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),
c=a.type;return"input"===a.nodeName.toLowerCase()&&"text"===c&&(b===c||null===b)},radio:function(a){return"input"===a.nodeName.toLowerCase()&&"radio"===a.type},checkbox:function(a){return"input"===a.nodeName.toLowerCase()&&"checkbox"===a.type},file:function(a){return"input"===a.nodeName.toLowerCase()&&"file"===a.type},password:function(a){return"input"===a.nodeName.toLowerCase()&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"submit"===a.type},
image:function(a){return"input"===a.nodeName.toLowerCase()&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return 0===b},last:function(a,b,c,d){return b===d.length-
1},even:function(a,b){return 0===b%2},odd:function(a,b){return 1===b%2},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=t.filters[e];if(f)return f(a,c,b,d);if("contains"===e)return 0<=(a.textContent||a.innerText||r([a])||"").indexOf(b[3]);if("not"===e){b=b[3];c=0;for(d=b.length;c<d;c++)if(b[c]===a)return!1;return!0}q.error(e)},CHILD:function(a,b){var c,
d,f,h,g,m;c=b[1];m=a;switch(c){case "only":case "first":for(;m=m.previousSibling;)if(1===m.nodeType)return!1;if("first"===c)return!0;m=a;case "last":for(;m=m.nextSibling;)if(1===m.nodeType)return!1;return!0;case "nth":c=b[2];d=b[3];if(1===c&&0===d)return!0;f=b[0];if((h=a.parentNode)&&(h[e]!==f||!a.nodeIndex)){g=0;for(m=h.firstChild;m;m=m.nextSibling)1===m.nodeType&&(m.nodeIndex=++g);h[e]=f}m=a.nodeIndex-d;return 0===c?0===m:0===m%c&&0<=m/c}},ID:function(a,b){return 1===a.nodeType&&a.getAttribute("id")===
b},TAG:function(a,b){return"*"===b&&1===a.nodeType||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return-1<(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)},ATTR:function(a,b){var c=b[1],c=q.attr?q.attr(a,c):t.attrHandle[c]?t.attrHandle[c](a):null!=a[c]?a[c]:a.getAttribute(c),d=c+"",e=b[2],f=b[4];return null==c?"!="===e:!e&&q.attr?null!=c:"="===e?d===f:"*="===e?0<=d.indexOf(f):"~="===e?0<=(" "+d+" ").indexOf(f):f?"!="===e?d!==f:"^="===e?0===d.indexOf(f):"$="===e?d.substr(d.length-
f.length)===f:"|="===e?d===f||d.substr(0,f.length+1)===f+"-":!1:d&&!1!==c},POS:function(a,b,c,d){var e=t.setFilters[b[2]];if(e)return e(a,c,b,d)}}},u=t.match.POS,x=function(a,b){return"\\"+(b-0+1)},w;for(w in t.match)t.match[w]=new RegExp(t.match[w].source+/(?![^\[]*\])(?![^\(]*\))/.source),t.leftMatch[w]=new RegExp(/(^(?:.|\r|\n)*?)/.source+t.match[w].source.replace(/\\(\d+)/g,x));t.match.globalPOS=u;var F=function(a,b){a=Array.prototype.slice.call(a,0);return b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(A.documentElement.childNodes,
0)[0].nodeType}catch(v){F=function(a,b){var c=0,d=b||[];if("[object Array]"===h.call(a))Array.prototype.push.apply(d,a);else if("number"===typeof a.length)for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var y,L;A.documentElement.compareDocumentPosition?y=function(a,b){return a===b?(g=!0,0):a.compareDocumentPosition&&b.compareDocumentPosition?a.compareDocumentPosition(b)&4?-1:1:a.compareDocumentPosition?-1:1}:(y=function(a,b){if(a===b)return g=!0,0;if(a.sourceIndex&&
b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[];c=a.parentNode;d=b.parentNode;var h=c;if(c===d)return L(a,b);if(!c)return-1;if(!d)return 1;for(;h;)e.unshift(h),h=h.parentNode;for(h=d;h;)f.unshift(h),h=h.parentNode;c=e.length;d=f.length;for(h=0;h<c&&h<d;h++)if(e[h]!==f[h])return L(e[h],f[h]);return h===c?L(a,f[h],-1):L(e[h],b,1)},L=function(a,b,c){if(a===b)return c;for(a=a.nextSibling;a;){if(a===b)return-1;a=a.nextSibling}return 1});(function(){var b=A.createElement("div"),c="script"+
(new Date).getTime(),d=A.documentElement;b.innerHTML="<a name='"+c+"'/>";d.insertBefore(b,d.firstChild);A.getElementById(c)&&(t.find.ID=function(b,c,d){if("undefined"!==typeof c.getElementById&&!d)return(c=c.getElementById(b[1]))?c.id===b[1]||"undefined"!==typeof c.getAttributeNode&&c.getAttributeNode("id").nodeValue===b[1]?[c]:a:[]},t.filter.ID=function(a,b){var c="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&c&&c.nodeValue===b});d.removeChild(b);d=b=null})();
(function(){var a=A.createElement("div");a.appendChild(A.createComment(""));0<a.getElementsByTagName("*").length&&(t.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if("*"===a[1]){for(var d=[],e=0;c[e];e++)1===c[e].nodeType&&d.push(c[e]);c=d}return c});a.innerHTML="<a href='#'></a>";a.firstChild&&"undefined"!==typeof a.firstChild.getAttribute&&"#"!==a.firstChild.getAttribute("href")&&(t.attrHandle.href=function(a){return a.getAttribute("href",2)});a=null})();A.querySelectorAll&&function(){var a=
q,b=A.createElement("div");b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||0!==b.querySelectorAll(".TEST").length){q=function(b,c,d,e){c=c||A;if(!e&&!q.isXML(c)){var f=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(f&&(1===c.nodeType||9===c.nodeType)){if(f[1])return F(c.getElementsByTagName(b),d);if(f[2]&&t.find.CLASS&&c.getElementsByClassName)return F(c.getElementsByClassName(f[2]),d)}if(9===c.nodeType){if("body"===b&&c.body)return F([c.body],d);if(f&&f[3]){var h=c.getElementById(f[3]);
if(h&&h.parentNode){if(h.id===f[3])return F([h],d)}else return F([],d)}try{return F(c.querySelectorAll(b),d)}catch(g){}}else if(1===c.nodeType&&"object"!==c.nodeName.toLowerCase()){var f=c,m=(h=c.getAttribute("id"))||"__sizzle__",k=c.parentNode,n=/^\s*[+~]/.test(b);h?m=m.replace(/'/g,"\\$&"):c.setAttribute("id",m);n&&k&&(c=c.parentNode);try{if(!n||k)return F(c.querySelectorAll("[id='"+m+"'] "+b),d)}catch(g){}finally{h||f.removeAttribute("id")}}}return a(b,c,d,e)};for(var c in a)q[c]=a[c];b=null}}();
(function(){var a=A.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var c=!b.call(A.createElement("div"),"div"),d=!1;try{b.call(A.documentElement,"[test!='']:sizzle")}catch(e){d=!0}q.matchesSelector=function(a,e){e=e.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!q.isXML(a))try{if(d||!t.match.PSEUDO.test(e)&&!/!=/.test(e)){var f=b.call(a,e);if(f||!c||a.document&&11!==a.document.nodeType)return f}}catch(h){}return 0<q(e,null,null,[a]).length}}})();
(function(){var a=A.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";a.getElementsByClassName&&0!==a.getElementsByClassName("e").length&&(a.lastChild.className="e",1!==a.getElementsByClassName("e").length&&(t.order.splice(1,0,"CLASS"),t.find.CLASS=function(a,b,c){if("undefined"!==typeof b.getElementsByClassName&&!c)return b.getElementsByClassName(a[1])},a=null))})();q.contains=A.documentElement.contains?function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:
A.documentElement.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:function(){return!1};q.isXML=function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?"HTML"!==a.nodeName:!1};var E=function(a,b,c){var d,e=[],f="";for(b=b.nodeType?[b]:b;d=t.match.PSEUDO.exec(a);)f+=d[0],a=a.replace(t.match.PSEUDO,"");a=t.relative[a]?a+"*":a;d=0;for(var h=b.length;d<h;d++)q(a,b[d],e,c);return q.filter(f,e)};q.attr=p.attr;q.selectors.attrMap={};p.find=q;p.expr=q.selectors;p.expr[":"]=
p.expr.filters;p.unique=q.uniqueSort;p.text=q.getText;p.isXMLDoc=q.isXML;p.contains=q.contains})();var sa=/Until$/,la=/^(?:parents|prevUntil|prevAll)/,Qa=/,/,Ma=/^.[^:#\[\.,]*$/,Ba=Array.prototype.slice,ca=p.expr.match.globalPOS,jb={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({find:function(a){var b=this,c,d;if("string"!==typeof a)return p(a).filter(function(){c=0;for(d=b.length;c<d;c++)if(p.contains(b[c],this))return!0});var e=this.pushStack("","find",a),f,h,g;c=0;for(d=this.length;c<d;c++)if(f=
e.length,p.find(a,this[c],e),0<c)for(h=f;h<e.length;h++)for(g=0;g<f;g++)if(e[g]===e[h]){e.splice(h--,1);break}return e},has:function(a){var b=p(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(p.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(m(this,a,!1),"not",a)},filter:function(a){return this.pushStack(m(this,a,!0),"filter",a)},is:function(a){return!!a&&("string"===typeof a?ca.test(a)?0<=p(a,this.context).index(this[0]):0<p.filter(a,this).length:0<this.filter(a).length)},
closest:function(a,b){var c=[],d,e,f=this[0];if(p.isArray(a)){for(e=1;f&&f.ownerDocument&&f!==b;){for(d=0;d<a.length;d++)p(f).is(a[d])&&c.push({selector:a[d],elem:f,level:e});f=f.parentNode;e++}return c}var h=ca.test(a)||"string"!==typeof a?p(a,b||this.context):0;d=0;for(e=this.length;d<e;d++)for(f=this[d];f;)if(h?-1<h.index(f):p.find.matchesSelector(f,a)){c.push(f);break}else if(f=f.parentNode,!f||!f.ownerDocument||f===b||11===f.nodeType)break;c=1<c.length?p.unique(c):c;return this.pushStack(c,"closest",
a)},index:function(a){return a?"string"===typeof a?p.inArray(this[0],p(a)):p.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c="string"===typeof a?p(a,b):p.makeArray(a&&a.nodeType?[a]:a),d=p.merge(this.get(),c);return this.pushStack(f(c[0])||f(d[0])?d:p.unique(d))},andSelf:function(){return this.add(this.prevObject)}});p.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return p.dir(a,"parentNode")},
parentsUntil:function(a,b,c){return p.dir(a,"parentNode",c)},next:function(a){return p.nth(a,2,"nextSibling")},prev:function(a){return p.nth(a,2,"previousSibling")},nextAll:function(a){return p.dir(a,"nextSibling")},prevAll:function(a){return p.dir(a,"previousSibling")},nextUntil:function(a,b,c){return p.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return p.dir(a,"previousSibling",c)},siblings:function(a){return p.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return p.sibling(a.firstChild)},
contents:function(a){return p.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:p.makeArray(a.childNodes)}},function(a,b){p.fn[a]=function(c,d){var e=p.map(this,b,c);sa.test(a)||(d=c);d&&"string"===typeof d&&(e=p.filter(d,e));e=1<this.length&&!jb[a]?p.unique(e):e;(1<this.length||Qa.test(d))&&la.test(a)&&(e=e.reverse());return this.pushStack(e,a,Ba.call(arguments).join(","))}});p.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return 1===b.length?p.find.matchesSelector(b[0],a)?[b[0]]:
[]:p.find.matches(a,b)},dir:function(b,c,d){var e=[];for(b=b[c];b&&9!==b.nodeType&&(d===a||1!==b.nodeType||!p(b).is(d));)1===b.nodeType&&e.push(b),b=b[c];return e},nth:function(a,b,c,d){b=b||1;for(d=0;a&&(1!==a.nodeType||++d!==b);a=a[c]);return a},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var z="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
ac=/ jQuery\d+="(?:\d+|null)"/g,Wc=/^\s+/,bc=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,nc=/<([\w:]+)/,rd=/<tbody/i,Xc=/<|&#?\w+;/,S=/<(?:script|style)/i,zc=/<(?:script|object|embed|option|style)/i,Vb=new RegExp("<(?:"+z+")[\\s/>]","i"),cc=/checked\s*(?:[^=]|=\s*.checked.)/i,Ia=/\/(java|ecma)script/i,ub=/^\s*<!(?:\[CDATA\[|\-\-)/,wa={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>",
"</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},H=h(A);wa.optgroup=wa.option;wa.tbody=wa.tfoot=wa.colgroup=wa.caption=wa.thead;wa.th=wa.td;p.support.htmlSerialize||(wa._default=[1,"div<div>","</div>"]);p.fn.extend({text:function(b){return p.access(this,function(b){return b===a?p.text(this):this.empty().append((this[0]&&this[0].ownerDocument||A).createTextNode(b))},
null,b,arguments.length)},wrapAll:function(a){if(p.isFunction(a))return this.each(function(b){p(this).wrapAll(a.call(this,b))});if(this[0]){var b=p(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return p.isFunction(a)?this.each(function(b){p(this).wrapInner(a.call(this,b))}):this.each(function(){var b=p(this),c=b.contents();
c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=p.isFunction(a);return this.each(function(c){p(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){p.nodeName(this,"body")||p(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){1===this.nodeType&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){1===this.nodeType&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&
this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=p.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,p.clean(arguments));return a}},remove:function(a,
b){for(var c=0,d;null!=(d=this[c]);c++)if(!a||p.filter(a,[d]).length)b||1!==d.nodeType||(p.cleanData(d.getElementsByTagName("*")),p.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;null!=(b=this[a]);a++)for(1===b.nodeType&&p.cleanData(b.getElementsByTagName("*"));b.firstChild;)b.removeChild(b.firstChild);return this},clone:function(a,b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return p.clone(this,a,b)})},html:function(b){return p.access(this,
function(b){var c=this[0]||{},d=0,e=this.length;if(b===a)return 1===c.nodeType?c.innerHTML.replace(ac,""):null;if(!("string"!==typeof b||S.test(b)||!p.support.leadingWhitespace&&Wc.test(b)||wa[(nc.exec(b)||["",""])[1].toLowerCase()])){b=b.replace(bc,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},1===c.nodeType&&(p.cleanData(c.getElementsByTagName("*")),c.innerHTML=b);c=0}catch(f){}}c&&this.empty().append(b)},null,b,arguments.length)},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(p.isFunction(a))return this.each(function(b){var c=
p(this),d=c.html();c.replaceWith(a.call(this,b,d))});"string"!==typeof a&&(a=p(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;p(this).remove();b?p(b).before(a):p(c).append(a)})}return this.length?this.pushStack(p(p.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(b,c,d){var e,f,h,g=b[0],m=[];if(!p.support.checkClone&&3===arguments.length&&"string"===typeof g&&cc.test(g))return this.each(function(){p(this).domManip(b,
c,d,!0)});if(p.isFunction(g))return this.each(function(e){var f=p(this);b[0]=g.call(this,e,c?f.html():a);f.domManip(b,c,d)});if(this[0]){e=g&&g.parentNode;e=p.support.parentNode&&e&&11===e.nodeType&&e.childNodes.length===this.length?{fragment:e}:p.buildFragment(b,this,m);h=e.fragment;if(f=1===h.childNodes.length?h=h.firstChild:h.firstChild){c=c&&p.nodeName(f,"tr");for(var k=0,l=this.length,q=l-1;k<l;k++)d.call(c?n(this[k],f):this[k],e.cacheable||1<l&&k<q?p.clone(h,!0,!0):h)}m.length&&p.each(m,function(a,
b){b.src?p.ajax({type:"GET",global:!1,url:b.src,async:!1,dataType:"script"}):p.globalEval((b.text||b.textContent||b.innerHTML||"").replace(ub,"/*$0*/"));b.parentNode&&b.parentNode.removeChild(b)})}return this}});p.buildFragment=function(a,b,c){var d,e,f,h,g=a[0];b&&b[0]&&(h=b[0].ownerDocument||b[0]);h.createDocumentFragment||(h=A);!(1===a.length&&"string"===typeof g&&512>g.length&&h===A&&"<"===g.charAt(0))||zc.test(g)||!p.support.checkClone&&cc.test(g)||!p.support.html5Clone&&Vb.test(g)||(e=!0,(f=
p.fragments[g])&&1!==f&&(d=f));d||(d=h.createDocumentFragment(),p.clean(a,h,d,c));e&&(p.fragments[g]=f?d:1);return{fragment:d,cacheable:e}};p.fragments={};p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){p.fn[a]=function(c){var d=[];c=p(c);var e=1===this.length&&this[0].parentNode;if(e&&11===e.nodeType&&1===e.childNodes.length&&1===c.length)return c[b](this[0]),this;for(var e=0,f=c.length;e<f;e++){var h=(0<e?this.clone(!0):
this).get();p(c[e])[b](h);d=d.concat(h)}return this.pushStack(d,a,c.selector)}});p.extend({clone:function(a,b,c){var d,e,f;p.support.html5Clone||p.isXMLDoc(a)||!Vb.test("<"+a.nodeName+">")?d=a.cloneNode(!0):(d=A.createElement("div"),H.appendChild(d),d.innerHTML=a.outerHTML,d=d.firstChild);var h=d;if(!(p.support.noCloneEvent&&p.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||p.isXMLDoc(a)))for(r(a,h),d=t(a),e=t(h),f=0;d[f];++f)e[f]&&r(d[f],e[f]);if(b&&(q(a,h),c))for(d=t(a),e=t(h),f=0;d[f];++f)q(d[f],
e[f]);return h},clean:function(a,b,c,d){var e,f=[];b=b||A;"undefined"===typeof b.createElement&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||A);for(var g=0,m;null!=(m=a[g]);g++)if("number"===typeof m&&(m+=""),m){if("string"===typeof m)if(Xc.test(m)){m=m.replace(bc,"<$1></$2>");e=(nc.exec(m)||["",""])[1].toLowerCase();var k=wa[e]||wa._default,n=k[0],l=b.createElement("div"),q=H.childNodes;b===A?H.appendChild(l):h(b).appendChild(l);for(l.innerHTML=k[1]+m+k[2];n--;)l=l.lastChild;if(!p.support.tbody)for(n=
rd.test(m),k="table"!==e||n?"<table>"!==k[1]||n?[]:l.childNodes:l.firstChild&&l.firstChild.childNodes,e=k.length-1;0<=e;--e)p.nodeName(k[e],"tbody")&&!k[e].childNodes.length&&k[e].parentNode.removeChild(k[e]);!p.support.leadingWhitespace&&Wc.test(m)&&l.insertBefore(b.createTextNode(Wc.exec(m)[0]),l.firstChild);m=l.childNodes;l&&(l.parentNode.removeChild(l),0<q.length&&(l=q[q.length-1])&&l.parentNode&&l.parentNode.removeChild(l))}else m=b.createTextNode(m);var r;if(!p.support.appendChecked)if(m[0]&&
"number"===typeof(r=m.length))for(e=0;e<r;e++)x(m[e]);else x(m);m.nodeType?f.push(m):f=p.merge(f,m)}if(c)for(a=function(a){return!a.type||Ia.test(a.type)},g=0;f[g];g++)b=f[g],d&&p.nodeName(b,"script")&&(!b.type||Ia.test(b.type))?d.push(b.parentNode?b.parentNode.removeChild(b):b):(1===b.nodeType&&(m=p.grep(b.getElementsByTagName("script"),a),f.splice.apply(f,[g+1,0].concat(m))),c.appendChild(b));return f},cleanData:function(a){for(var b,c,d=p.cache,e=p.event.special,f=p.support.deleteExpando,h=0,g;null!=
(g=a[h]);h++)if(!g.nodeName||!p.noData[g.nodeName.toLowerCase()])if(c=g[p.expando]){if((b=d[c])&&b.events){for(var m in b.events)e[m]?p.event.remove(g,m):p.removeEvent(g,m,b.handle);b.handle&&(b.handle.elem=null)}f?delete g[p.expando]:g.removeAttribute&&g.removeAttribute(p.expando);delete d[c]}}});var vb=/alpha\([^)]*\)/i,fa=/opacity=([^)]*)/,Ib=/([A-Z]|^ms)/g,Jb=/^[\-+]?(?:\d*\.)?\d+$/i,hb=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,Kb=/^([\-+])=([\-+.\de]+)/,$a=/^margin/,Ac={position:"absolute",visibility:"hidden",
display:"block"},Na=["Top","Right","Bottom","Left"],Eb,Bc,oc;p.fn.css=function(b,c){return p.access(this,function(b,c,d){return d!==a?p.style(b,c,d):p.css(b,c)},b,c,1<arguments.length)};p.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Eb(a,"opacity");return""===c?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":p.support.cssFloat?"cssFloat":"styleFloat"},style:function(b,c,d,e){if(b&&
3!==b.nodeType&&8!==b.nodeType&&b.style){var f,h=p.camelCase(c),g=b.style,m=p.cssHooks[h];c=p.cssProps[h]||h;if(d!==a){if(e=typeof d,"string"===e&&(f=Kb.exec(d))&&(d=+(f[1]+1)*+f[2]+parseFloat(p.css(b,c)),e="number"),!(null==d||"number"===e&&isNaN(d)||("number"!==e||p.cssNumber[h]||(d+="px"),m&&"set"in m&&(d=m.set(b,d))===a)))try{g[c]=d}catch(k){}}else return m&&"get"in m&&(f=m.get(b,!1,e))!==a?f:g[c]}},css:function(b,c,d){var e,f;c=p.camelCase(c);f=p.cssHooks[c];c=p.cssProps[c]||c;"cssFloat"===c&&
(c="float");if(f&&"get"in f&&(e=f.get(b,!0,d))!==a)return e;if(Eb)return Eb(b,c)},swap:function(a,b,c){var d={},e;for(e in b)d[e]=a.style[e],a.style[e]=b[e];c=c.call(a);for(e in b)a.style[e]=d[e];return c}});p.curCSS=p.css;A.defaultView&&A.defaultView.getComputedStyle&&(Bc=function(a,b){var c,d,e,f=a.style;b=b.replace(Ib,"-$1").toLowerCase();(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),""!==c||p.contains(a.ownerDocument.documentElement,a)||(c=p.style(a,
b)));!p.support.pixelMargin&&e&&$a.test(b)&&hb.test(c)&&(d=f.width,f.width=c,c=e.width,f.width=d);return c});A.documentElement.currentStyle&&(oc=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;null==e&&f&&(c=f[b])&&(e=c);if(hb.test(e)){c=f.left;if(d=a.runtimeStyle&&a.runtimeStyle.left)a.runtimeStyle.left=a.currentStyle.left;f.left="fontSize"===b?"1em":e;e=f.pixelLeft+"px";f.left=c;d&&(a.runtimeStyle.left=d)}return""===e?"auto":e});Eb=Bc||oc;p.each(["height","width"],function(a,
b){p.cssHooks[b]={get:function(a,c,d){if(c)return 0!==a.offsetWidth?w(a,b,d):p.swap(a,Ac,function(){return w(a,b,d)})},set:function(a,b){return Jb.test(b)?b+"px":b}}});p.support.opacity||(p.cssHooks.opacity={get:function(a,b){return fa.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=p.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1;if(1<=b&&""===p.trim(f.replace(vb,
""))&&(c.removeAttribute("filter"),d&&!d.filter))return;c.filter=vb.test(f)?f.replace(vb,e):f+" "+e}});p(function(){p.support.reliableMarginRight||(p.cssHooks.marginRight={get:function(a,b){return p.swap(a,{display:"inline-block"},function(){return b?Eb(a,"margin-right"):a.style.marginRight})}})});p.expr&&p.expr.filters&&(p.expr.filters.hidden=function(a){var b=a.offsetHeight;return 0===a.offsetWidth&&0===b||!p.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||p.css(a,"display"))},
p.expr.filters.visible=function(a){return!p.expr.filters.hidden(a)});p.each({margin:"",padding:"",border:"Width"},function(a,b){p.cssHooks[a+b]={expand:function(c){var d="string"===typeof c?c.split(" "):[c],e={};for(c=0;4>c;c++)e[a+Na[c]+b]=d[c]||d[c-2]||d[0];return e}}});var Cc=/%20/g,ua=/\[\]$/,kb=/\r?\n/g,ab=/#.*$/,za=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bb=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Ra=/^(?:GET|HEAD)$/,nb=/^\/\//,
Yc=/\?/,wb=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,pc=/^(?:select|textarea)/i,Tc=/\s+/,sd=/([?&])_=[^&]*/,Dc=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,Zc=p.fn.load,Rb={},Xa={},Lb,xa,$c=["*/"]+["*"];try{Lb=T.href}catch(fb){Lb=A.createElement("a"),Lb.href="",Lb=Lb.href}xa=Dc.exec(Lb.toLowerCase())||[];p.fn.extend({load:function(b,c,d){if("string"!==typeof b&&Zc)return Zc.apply(this,arguments);if(!this.length)return this;var e=b.indexOf(" ");if(0<=e){var f=b.slice(e,b.length);b=
b.slice(0,e)}e="GET";c&&(p.isFunction(c)?(d=c,c=a):"object"===typeof c&&(c=p.param(c,p.ajaxSettings.traditional),e="POST"));var h=this;p.ajax({url:b,type:e,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText;a.isResolved()&&(a.done(function(a){c=a}),h.html(f?p("<div>").append(c.replace(wb,"")).find(f):c));d&&h.each(d,[c,b,a])}});return this},serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?p.makeArray(this.elements):
this}).filter(function(){return this.name&&!this.disabled&&(this.checked||pc.test(this.nodeName)||bb.test(this.type))}).map(function(a,b){var c=p(this).val();return null==c?null:p.isArray(c)?p.map(c,function(a,c){return{name:b.name,value:a.replace(kb,"\r\n")}}):{name:b.name,value:c.replace(kb,"\r\n")}}).get()}});p.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){p.fn[b]=function(a){return this.on(b,a)}});p.each(["get","post"],function(b,c){p[c]=function(b,
d,e,f){p.isFunction(d)&&(f=f||e,e=d,d=a);return p.ajax({type:c,url:b,data:d,success:e,dataType:f})}});p.extend({getScript:function(b,c){return p.get(b,a,c,"script")},getJSON:function(a,b,c){return p.get(a,b,c,"json")},ajaxSetup:function(a,b){b?E(a,p.ajaxSettings):(b=a,a=p.ajaxSettings);E(a,b);return a},ajaxSettings:{url:Lb,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(xa[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,
async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":$c},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":d.String,"text html":!0,"text json":p.parseJSON,"text xml":p.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:v(Rb),ajaxTransport:v(Xa),ajax:function(b,c){function d(b,c,l,q){if(2!==A){A=2;x&&clearTimeout(x);u=a;r=q||"";y.readyState=0<b?4:
0;var t,w,v;q=c;if(l){var L=e,E=y,B=L.contents,K=L.dataTypes,C=L.responseFields,D,J,za,O;for(J in C)J in l&&(E[C[J]]=l[J]);for(;"*"===K[0];)K.shift(),D===a&&(D=L.mimeType||E.getResponseHeader("content-type"));if(D)for(J in B)if(B[J]&&B[J].test(D)){K.unshift(J);break}if(K[0]in l)za=K[0];else{for(J in l){if(!K[0]||L.converters[J+" "+K[0]]){za=J;break}O||(O=J)}za=za||O}za?(za!==K[0]&&K.unshift(za),l=l[za]):l=void 0}else l=a;if(200<=b&&300>b||304===b){if(e.ifModified){if(D=y.getResponseHeader("Last-Modified"))p.lastModified[n]=
D;if(D=y.getResponseHeader("Etag"))p.etag[n]=D}if(304===b)q="notmodified",t=!0;else try{D=e;D.dataFilter&&(l=D.dataFilter(l,D.dataType));var W=D.dataTypes;J={};var T,ha,P=W.length,bb,z=W[0],Ra,ga,aa,fb,I;for(T=1;T<P;T++){if(1===T)for(ha in D.converters)"string"===typeof ha&&(J[ha.toLowerCase()]=D.converters[ha]);Ra=z;z=W[T];if("*"===z)z=Ra;else if("*"!==Ra&&Ra!==z){ga=Ra+" "+z;aa=J[ga]||J["* "+z];if(!aa)for(fb in I=a,J)if(bb=fb.split(" "),bb[0]===Ra||"*"===bb[0])if(I=J[bb[1]+" "+z]){fb=J[fb];!0===
fb?aa=I:!0===I&&(aa=fb);break}aa||I||p.error("No conversion from "+ga.replace(" "," to "));!0!==aa&&(l=aa?aa(l):I(fb(l)))}}w=l;q="success";t=!0}catch(X){q="parsererror",v=X}}else if(v=q,!q||b)q="error",0>b&&(b=0);y.status=b;y.statusText=""+(c||q);t?g.resolveWith(f,[w,q,y]):g.rejectWith(f,[y,q,v]);y.statusCode(k);k=a;F&&h.trigger("ajax"+(t?"Success":"Error"),[y,e,t?w:v]);m.fireWith(f,[y,q]);F&&(h.trigger("ajaxComplete",[y,e]),--p.active||p.event.trigger("ajaxStop"))}}"object"===typeof b&&(c=b,b=a);
c=c||{};var e=p.ajaxSetup({},c),f=e.context||e,h=f!==e&&(f.nodeType||f instanceof p)?p(f):p.event,g=p.Deferred(),m=p.Callbacks("once memory"),k=e.statusCode||{},n,l={},q={},r,t,u,x,w,A=0,F,v,y={readyState:0,setRequestHeader:function(a,b){if(!A){var c=a.toLowerCase();a=q[c]=q[c]||a;l[a]=b}return this},getAllResponseHeaders:function(){return 2===A?r:null},getResponseHeader:function(b){var c;if(2===A){if(!t)for(t={};c=za.exec(r);)t[c[1].toLowerCase()]=c[2];c=t[b.toLowerCase()]}return c===a?null:c},overrideMimeType:function(a){A||
(e.mimeType=a);return this},abort:function(a){a=a||"abort";u&&u.abort(a);d(0,a);return this}};g.promise(y);y.success=y.done;y.error=y.fail;y.complete=m.add;y.statusCode=function(a){if(a){var b;if(2>A)for(b in a)k[b]=[k[b],a[b]];else b=a[y.status],y.then(b,b)}return this};e.url=((b||e.url)+"").replace(ab,"").replace(nb,xa[1]+"//");e.dataTypes=p.trim(e.dataType||"*").toLowerCase().split(Tc);null==e.crossDomain&&(w=Dc.exec(e.url.toLowerCase()),e.crossDomain=!(!w||w[1]==xa[1]&&w[2]==xa[2]&&(w[3]||("http:"===
w[1]?80:443))==(xa[3]||("http:"===xa[1]?80:443))));e.data&&e.processData&&"string"!==typeof e.data&&(e.data=p.param(e.data,e.traditional));C(Rb,e,c,y);if(2===A)return!1;F=e.global;e.type=e.type.toUpperCase();e.hasContent=!Ra.test(e.type);F&&0===p.active++&&p.event.trigger("ajaxStart");if(!e.hasContent&&(e.data&&(e.url+=(Yc.test(e.url)?"&":"?")+e.data,delete e.data),n=e.url,!1===e.cache)){w=p.now();var L=e.url.replace(sd,"$1_="+w);e.url=L+(L===e.url?(Yc.test(e.url)?"&":"?")+"_="+w:"")}(e.data&&e.hasContent&&
!1!==e.contentType||c.contentType)&&y.setRequestHeader("Content-Type",e.contentType);e.ifModified&&(n=n||e.url,p.lastModified[n]&&y.setRequestHeader("If-Modified-Since",p.lastModified[n]),p.etag[n]&&y.setRequestHeader("If-None-Match",p.etag[n]));y.setRequestHeader("Accept",e.dataTypes[0]&&e.accepts[e.dataTypes[0]]?e.accepts[e.dataTypes[0]]+("*"!==e.dataTypes[0]?", "+$c+"; q=0.01":""):e.accepts["*"]);for(v in e.headers)y.setRequestHeader(v,e.headers[v]);if(e.beforeSend&&(!1===e.beforeSend.call(f,y,
e)||2===A))return y.abort(),!1;for(v in{success:1,error:1,complete:1})y[v](e[v]);if(u=C(Xa,e,c,y)){y.readyState=1;F&&h.trigger("ajaxSend",[y,e]);e.async&&0<e.timeout&&(x=setTimeout(function(){y.abort("timeout")},e.timeout));try{A=1,u.send(l,d)}catch(E){if(2>A)d(-1,E);else throw E;}}else d(-1,"No Transport");return y},param:function(b,c){var d=[],e=function(a,b){b=p.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===a&&(c=p.ajaxSettings.traditional);if(p.isArray(b)||
b.jquery&&!p.isPlainObject(b))p.each(b,function(){e(this.name,this.value)});else for(var f in b)y(f,b[f],c,e);return d.join("&").replace(Cc,"+")}});p.extend({active:0,lastModified:{},etag:{}});var td=p.now(),qc=/(\=)\?(&|$)|\?\?/i;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return p.expando+"_"+td++}});p.ajaxPrefilter("json jsonp",function(a,b,c){b="string"===typeof a.data&&/^application\/x\-www\-form\-urlencoded/.test(a.contentType);if("jsonp"===a.dataTypes[0]||!1!==a.jsonp&&(qc.test(a.url)||
b&&qc.test(a.data))){var e,f=a.jsonpCallback=p.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,h=d[f],g=a.url,m=a.data,k="$1"+f+"$2";!1!==a.jsonp&&(g=g.replace(qc,k),a.url===g&&(b&&(m=m.replace(qc,k)),a.data===m&&(g+=(/\?/.test(g)?"&":"?")+a.jsonp+"="+f)));a.url=g;a.data=m;d[f]=function(a){e=[a]};c.always(function(){d[f]=h;if(e&&p.isFunction(h))d[f](e[0])});a.converters["script json"]=function(){e||p.error(f+" was not called");return e[0]};a.dataTypes[0]="json";return"script"}});p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){p.globalEval(a);return a}}});p.ajaxPrefilter("script",function(b){b.cache===a&&(b.cache=!1);b.crossDomain&&(b.type="GET",b.global=!1)});p.ajaxTransport("script",function(b){if(b.crossDomain){var c,d=A.head||A.getElementsByTagName("head")[0]||A.documentElement;return{send:function(e,f){c=A.createElement("script");c.async="async";b.scriptCharset&&(c.charset=b.scriptCharset);c.src=b.url;c.onload=c.onreadystatechange=function(b,
e){if(e||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=a,e||f(200,"success")};d.insertBefore(c,d.firstChild)},abort:function(){if(c)c.onload(0,1)}}}});var ad=d.ActiveXObject?function(){for(var a in Mb)Mb[a](0,1)}:!1,rc=0,Mb;p.ajaxSettings.xhr=d.ActiveXObject?function(){var a;if(!(a=!this.isLocal&&B()))a:{try{a=new d.ActiveXObject("Microsoft.XMLHTTP");break a}catch(b){}a=void 0}return a}:B;(function(a){p.extend(p.support,
{ajax:!!a,cors:!!a&&"withCredentials"in a})})(p.ajaxSettings.xhr());p.support.ajax&&p.ajaxTransport(function(b){if(!b.crossDomain||p.support.cors){var c;return{send:function(e,f){var h=b.xhr(),g,m;b.username?h.open(b.type,b.url,b.async,b.username,b.password):h.open(b.type,b.url,b.async);if(b.xhrFields)for(m in b.xhrFields)h[m]=b.xhrFields[m];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType);b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(m in e)h.setRequestHeader(m,
e[m])}catch(k){}h.send(b.hasContent&&b.data||null);c=function(d,e){var m,k,n,l,q;try{if(c&&(e||4===h.readyState))if(c=a,g&&(h.onreadystatechange=p.noop,ad&&delete Mb[g]),e)4!==h.readyState&&h.abort();else{m=h.status;n=h.getAllResponseHeaders();l={};(q=h.responseXML)&&q.documentElement&&(l.xml=q);try{l.text=h.responseText}catch(r){}try{k=h.statusText}catch(r){k=""}m||!b.isLocal||b.crossDomain?1223===m&&(m=204):m=l.text?200:404}}catch(r){e||f(-1,r)}l&&f(m,k,l,n)};b.async&&4!==h.readyState?(g=++rc,ad&&
(Mb||(Mb={},p(d).unload(ad)),Mb[g]=c),h.onreadystatechange=c):c()},abort:function(){c&&c(0,1)}}}});var Yb={},Va,rb,bd=/^(?:toggle|show|hide)$/,Sa=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,ec,lc=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],kc;p.fn.extend({show:function(a,b,c){if(a||0===a)return this.animate(L("show",3),a,b,c);c=0;for(var d=this.length;c<d;c++)a=this[c],a.style&&(b=a.style.display,p._data(a,
"olddisplay")||"none"!==b||(b=a.style.display=""),(""===b&&"none"===p.css(a,"display")||!p.contains(a.ownerDocument.documentElement,a))&&p._data(a,"olddisplay",K(a.nodeName)));for(c=0;c<d;c++)if(a=this[c],a.style&&(b=a.style.display,""===b||"none"===b))a.style.display=p._data(a,"olddisplay")||"";return this},hide:function(a,b,c){if(a||0===a)return this.animate(L("hide",3),a,b,c);c=0;for(var d=this.length;c<d;c++)a=this[c],a.style&&(b=p.css(a,"display"),"none"===b||p._data(a,"olddisplay")||p._data(a,
"olddisplay",b));for(c=0;c<d;c++)this[c].style&&(this[c].style.display="none");return this},_toggle:p.fn.toggle,toggle:function(a,b,c){var d="boolean"===typeof a;p.isFunction(a)&&p.isFunction(b)?this._toggle.apply(this,arguments):null==a||d?this.each(function(){var b=d?a:p(this).is(":hidden");p(this)[b?"show":"hide"]()}):this.animate(L("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,
b,c,d){function e(){!1===f.queue&&p._mark(this);var b=p.extend({},f),c=1===this.nodeType,d=c&&p(this).is(":hidden"),h,g,m,k,n;b.animatedProperties={};for(m in a)if(h=p.camelCase(m),m!==h&&(a[h]=a[m],delete a[m]),(g=p.cssHooks[h])&&"expand"in g)for(m in k=g.expand(a[h]),delete a[h],k)m in a||(a[m]=k[m]);for(h in a){g=a[h];p.isArray(g)?(b.animatedProperties[h]=g[1],g=a[h]=g[0]):b.animatedProperties[h]=b.specialEasing&&b.specialEasing[h]||b.easing||"swing";if("hide"===g&&d||"show"===g&&!d)return b.complete.call(this);
!c||"height"!==h&&"width"!==h||(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===p.css(this,"display")&&"none"===p.css(this,"float")&&(p.support.inlineBlockNeedsLayout&&"inline"!==K(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}null!=b.overflow&&(this.style.overflow="hidden");for(m in a)if(c=new p.fx(this,b,m),g=a[m],bd.test(g))if(h=p._data(this,"toggle"+m)||("toggle"===g?d?"show":"hide":0))p._data(this,"toggle"+m,"show"===h?"hide":"show"),
c[h]();else c[g]();else h=Sa.exec(g),k=c.cur(),h?(g=parseFloat(h[2]),n=h[3]||(p.cssNumber[m]?"":"px"),"px"!==n&&(p.style(this,m,(g||1)+n),k*=(g||1)/c.cur(),p.style(this,m,k+n)),h[1]&&(g=("-="===h[1]?-1:1)*g+k),c.custom(k,g,n)):c.custom(k,g,"");return!0}var f=p.speed(b,c,d);if(p.isEmptyObject(a))return this.each(f.complete,[!1]);a=p.extend({},a);return!1===f.queue?this.each(e):this.queue(f.queue,e)},stop:function(b,c,d){"string"!==typeof b&&(d=c,c=b,b=a);c&&!1!==b&&this.queue(b||"fx",[]);return this.each(function(){var a,
c=!1,e=p.timers,f=p._data(this);d||p._unmark(!0,this);if(null==b)for(a in f){if(f[a]&&f[a].stop&&a.indexOf(".run")===a.length-4){var h=f[a];p.removeData(this,a,!0);h.stop(d)}}else f[a=b+".run"]&&f[a].stop&&(f=f[a],p.removeData(this,a,!0),f.stop(d));for(a=e.length;a--;)if(e[a].elem===this&&(null==b||e[a].queue===b)){if(d)e[a](!0);else e[a].saveState();c=!0;e.splice(a,1)}d&&c||p.dequeue(this,b)})}});p.each({slideDown:L("show",1),slideUp:L("hide",1),slideToggle:L("toggle",1),fadeIn:{opacity:"show"},
fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){p.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});p.extend({speed:function(a,b,c){var d=a&&"object"===typeof a?p.extend({},a):{complete:c||!c&&b||p.isFunction(a)&&a,duration:a,easing:c&&b||b&&!p.isFunction(b)&&b};d.duration=p.fx.off?0:"number"===typeof d.duration?d.duration:d.duration in p.fx.speeds?p.fx.speeds[d.duration]:p.fx.speeds._default;if(null==d.queue||!0===d.queue)d.queue="fx";d.old=d.complete;d.complete=function(a){p.isFunction(d.old)&&
d.old.call(this);d.queue?p.dequeue(this,d.queue):!1!==a&&p._unmark(this)};return d},easing:{linear:function(a){return a},swing:function(a){return-Math.cos(a*Math.PI)/2+.5}},timers:[],fx:function(a,b,c){this.options=b;this.elem=a;this.prop=c;b.orig=b.orig||{}}});p.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(p.fx.step[this.prop]||p.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];
var a,b=p.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?b&&"auto"!==b?b:0:a},custom:function(b,c,d){function e(a){return f.step(a)}var f=this,h=p.fx;this.startTime=kc||D();this.end=c;this.now=this.start=b;this.pos=this.state=0;this.unit=d||this.unit||(p.cssNumber[this.prop]?"":"px");e.queue=this.options.queue;e.elem=this.elem;e.saveState=function(){p._data(f.elem,"fxshow"+f.prop)===a&&(f.options.hide?p._data(f.elem,"fxshow"+f.prop,f.start):f.options.show&&p._data(f.elem,"fxshow"+f.prop,f.end))};
e()&&p.timers.push(e)&&!ec&&(ec=setInterval(h.tick,h.interval))},show:function(){var b=p._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=b||p.style(this.elem,this.prop);this.options.show=!0;b!==a?this.custom(this.cur(),b):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur());p(this.elem).show()},hide:function(){this.options.orig[this.prop]=p._data(this.elem,"fxshow"+this.prop)||p.style(this.elem,this.prop);this.options.hide=!0;this.custom(this.cur(),0)},step:function(a){var b,
c=kc||D(),d=!0,e=this.elem,f=this.options;if(a||c>=f.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();f.animatedProperties[this.prop]=!0;for(b in f.animatedProperties)!0!==f.animatedProperties[b]&&(d=!1);if(d){null==f.overflow||p.support.shrinkWrapBlocks||p.each(["","X","Y"],function(a,b){e.style["overflow"+b]=f.overflow[a]});f.hide&&p(e).hide();if(f.hide||f.show)for(b in f.animatedProperties)p.style(e,b,f.orig[b]),p.removeData(e,"fxshow"+b,!0),p.removeData(e,"toggle"+
b,!0);if(a=f.complete)f.complete=!1,a.call(e)}return!1}Infinity==f.duration?this.now=c:(a=c-this.startTime,this.state=a/f.duration,this.pos=p.easing[f.animatedProperties[this.prop]](this.state,a,0,1,f.duration),this.now=this.start+(this.end-this.start)*this.pos);this.update();return!0}};p.extend(p.fx,{tick:function(){for(var a,b=p.timers,c=0;c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||p.fx.stop()},interval:13,stop:function(){clearInterval(ec);ec=null},speeds:{slow:600,fast:200,
_default:400},step:{opacity:function(a){p.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&null!=a.elem.style[a.prop]?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}});p.each(lc.concat.apply([],lc),function(a,b){b.indexOf("margin")&&(p.fx.step[b]=function(a){p.style(a.elem,b,Math.max(0,a.now)+a.unit)})});p.expr&&p.expr.filters&&(p.expr.filters.animated=function(a){return p.grep(p.timers,function(b){return a===b.elem}).length});var sc,ud=/^t(?:able|d|h)$/i,cd=/^(?:body|html)$/i;
sc="getBoundingClientRect"in A.documentElement?function(a,b,c,d){try{d=a.getBoundingClientRect()}catch(e){}if(!d||!p.contains(c,a))return d?{top:d.top,left:d.left}:{top:0,left:0};a=b.body;b=J(b);return{top:d.top+(b.pageYOffset||p.support.boxModel&&c.scrollTop||a.scrollTop)-(c.clientTop||a.clientTop||0),left:d.left+(b.pageXOffset||p.support.boxModel&&c.scrollLeft||a.scrollLeft)-(c.clientLeft||a.clientLeft||0)}}:function(a,b,c){var d,e=a.offsetParent,f=b.body;d=(b=b.defaultView)?b.getComputedStyle(a,
null):a.currentStyle;for(var h=a.offsetTop,g=a.offsetLeft;(a=a.parentNode)&&a!==f&&a!==c&&(!p.support.fixedPosition||"fixed"!==d.position);)d=b?b.getComputedStyle(a,null):a.currentStyle,h-=a.scrollTop,g-=a.scrollLeft,a===e&&(h+=a.offsetTop,g+=a.offsetLeft,!p.support.doesNotAddBorder||p.support.doesAddBorderForTableAndCells&&ud.test(a.nodeName)||(h+=parseFloat(d.borderTopWidth)||0,g+=parseFloat(d.borderLeftWidth)||0),e=a.offsetParent),p.support.subtractsBorderForOverflowNotVisible&&"visible"!==d.overflow&&
(h+=parseFloat(d.borderTopWidth)||0,g+=parseFloat(d.borderLeftWidth)||0);if("relative"===d.position||"static"===d.position)h+=f.offsetTop,g+=f.offsetLeft;p.support.fixedPosition&&"fixed"===d.position&&(h+=Math.max(c.scrollTop,f.scrollTop),g+=Math.max(c.scrollLeft,f.scrollLeft));return{top:h,left:g}};p.fn.offset=function(b){if(arguments.length)return b===a?this:this.each(function(a){p.offset.setOffset(this,b,a)});var c=this[0],d=c&&c.ownerDocument;return d?c===d.body?p.offset.bodyOffset(c):sc(c,d,
d.documentElement):null};p.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;p.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(p.css(a,"marginTop"))||0,c+=parseFloat(p.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=p.css(a,"position");"static"===d&&(a.style.position="relative");var e=p(a),f=e.offset(),h=p.css(a,"top"),g=p.css(a,"left"),m={},k={};("absolute"===d||"fixed"===d)&&-1<p.inArray("auto",[h,g])?(k=e.position(),d=k.top,g=k.left):(d=parseFloat(h)||
0,g=parseFloat(g)||0);p.isFunction(b)&&(b=b.call(a,c,f));null!=b.top&&(m.top=b.top-f.top+d);null!=b.left&&(m.left=b.left-f.left+g);"using"in b?b.using.call(a,m):e.css(m)}};p.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=cd.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(p.css(a,"marginTop"))||0;c.left-=parseFloat(p.css(a,"marginLeft"))||0;d.top+=parseFloat(p.css(b[0],"borderTopWidth"))||0;d.left+=parseFloat(p.css(b[0],
"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||A.body;a&&!cd.test(a.nodeName)&&"static"===p.css(a,"position");)a=a.offsetParent;return a})}});p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d=/Y/.test(c);p.fn[b]=function(e){return p.access(this,function(b,e,f){var h=J(b);if(f===a)return h?c in h?h[c]:p.support.boxModel&&h.document.documentElement[e]||h.document.body[e]:b[e];
h?h.scrollTo(d?p(h).scrollLeft():f,d?f:p(h).scrollTop()):b[e]=f},b,e,arguments.length,null)}});p.each({Height:"height",Width:"width"},function(b,c){var d="client"+b,e="scroll"+b,f="offset"+b;p.fn["inner"+b]=function(){var a=this[0];return a?a.style?parseFloat(p.css(a,c,"padding")):this[c]():null};p.fn["outer"+b]=function(a){var b=this[0];return b?b.style?parseFloat(p.css(b,c,a?"margin":"border")):this[c]():null};p.fn[c]=function(b){return p.access(this,function(b,c,h){if(p.isWindow(b))return c=b.document,
b=c.documentElement[d],p.support.boxModel&&b||c.body&&c.body[d]||b;if(9===b.nodeType)return c=b.documentElement,c[d]>=c[e]?c[d]:Math.max(b.body[e],c[e],b.body[f],c[f]);if(h===a)return b=p.css(b,c),c=parseFloat(b),p.isNumeric(c)?c:b;p(b).css(c,h)},c,b,arguments.length,null)}});d.jQuery=d.$=p;"function"===typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return p})})(window);
(function(d,a){function b(b){r[q]=c.apply(a,b);return q++}function c(b){var c=[].slice.call(arguments,1);return function(){"function"===typeof b?b.apply(a,c):(new Function(""+b))()}}function l(a){if(t)setTimeout(c(l,a),0);else{var b=r[a];if(b){t=!0;try{b()}finally{g(a),t=!1}}}}function g(a){delete r[a]}function k(){x=function(){var a=b(arguments);process.nextTick(c(l,a));return a}}function e(){if(d.postMessage&&!d.importScripts){var a=!0,b=d.onmessage;d.onmessage=function(){a=!1};d.postMessage("",
"*");d.onmessage=b;return a}}function f(){var a="setImmediate$"+Math.random()+"$",c=function(b){b.source===d&&"string"===typeof b.data&&0===b.data.indexOf(a)&&l(+b.data.slice(a.length))};d.addEventListener?d.addEventListener("message",c,!1):d.attachEvent("onmessage",c);x=function(){var c=b(arguments);d.postMessage(a+c,"*");return c}}function m(){var a=new MessageChannel;a.port1.onmessage=function(a){l(a.data)};x=function(){var c=b(arguments);a.port2.postMessage(c);return c}}function h(){var a=u.documentElement;
x=function(){var c=b(arguments),d=u.createElement("script");d.onreadystatechange=function(){l(c);d.onreadystatechange=null;a.removeChild(d);d=null};a.appendChild(d);return c}}function n(){x=function(){var a=b(arguments);setTimeout(c(l,a),0);return a}}if(!d.setImmediate){var q=1,r={},t=!1,u=d.document,x,w=Object.getPrototypeOf&&Object.getPrototypeOf(d),w=w&&w.setTimeout?w:d;"[object process]"==={}.toString.call(d.process)?k():e()?f():d.MessageChannel?m():u&&"onreadystatechange"in u.createElement("script")?
h():n();w.setImmediate=x;w.clearImmediate=g}})("undefined"===typeof self?"undefined"===typeof global?this:global:self);
(function(){var d=this,a=d._,b=Array.prototype,c=Object.prototype,l=b.push,g=b.slice,k=b.concat,e=c.toString,f=c.hasOwnProperty,c=Array.isArray,m=Object.keys,h=Function.prototype.bind,n=function(a){if(a instanceof n)return a;if(!(this instanceof n))return new n(a);this._wrapped=a};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=n),exports._=n):d._=n;n.VERSION="1.7.0";var q=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,
c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}};n.iteratee=function(a,b,c){return null==a?n.identity:n.isFunction(a)?q(a,b,c):n.isObject(a)?n.matches(a):n.property(a)};n.each=n.forEach=function(a,b,c){if(null==a)return a;b=q(b,c);var d=a.length;if(d===+d)for(c=0;c<d;c++)b(a[c],c,a);else{var e=n.keys(a);c=0;for(d=e.length;c<d;c++)b(a[e[c]],
e[c],a)}return a};n.map=n.collect=function(a,b,c){if(null==a)return[];b=n.iteratee(b,c);c=a.length!==+a.length&&n.keys(a);for(var d=(c||a).length,e=Array(d),f,h=0;h<d;h++)f=c?c[h]:h,e[h]=b(a[f],f,a);return e};n.reduce=n.foldl=n.inject=function(a,b,c,d){null==a&&(a=[]);b=q(b,d,4);var e=a.length!==+a.length&&n.keys(a),f=(e||a).length,h=0,g;if(3>arguments.length){if(!f)throw new TypeError("Reduce of empty array with no initial value");c=a[e?e[h++]:h++]}for(;h<f;h++)g=e?e[h]:h,c=b(c,a[g],g,a);return c};
n.reduceRight=n.foldr=function(a,b,c,d){null==a&&(a=[]);b=q(b,d,4);var e=a.length!==+a.length&&n.keys(a),f=(e||a).length,h;if(3>arguments.length){if(!f)throw new TypeError("Reduce of empty array with no initial value");c=a[e?e[--f]:--f]}for(;f--;)h=e?e[f]:f,c=b(c,a[h],h,a);return c};n.find=n.detect=function(a,b,c){var d;b=n.iteratee(b,c);n.some(a,function(a,c,e){if(b(a,c,e))return d=a,!0});return d};n.filter=n.select=function(a,b,c){var d=[];if(null==a)return d;b=n.iteratee(b,c);n.each(a,function(a,
c,e){b(a,c,e)&&d.push(a)});return d};n.reject=function(a,b,c){return n.filter(a,n.negate(n.iteratee(b)),c)};n.every=n.all=function(a,b,c){if(null==a)return!0;b=n.iteratee(b,c);c=a.length!==+a.length&&n.keys(a);var d=(c||a).length,e,f;for(e=0;e<d;e++)if(f=c?c[e]:e,!b(a[f],f,a))return!1;return!0};n.some=n.any=function(a,b,c){if(null==a)return!1;b=n.iteratee(b,c);c=a.length!==+a.length&&n.keys(a);var d=(c||a).length,e,f;for(e=0;e<d;e++)if(f=c?c[e]:e,b(a[f],f,a))return!0;return!1};n.contains=n.include=
function(a,b){if(null==a)return!1;a.length!==+a.length&&(a=n.values(a));return 0<=n.indexOf(a,b)};n.invoke=function(a,b){var c=g.call(arguments,2),d=n.isFunction(b);return n.map(a,function(a){return(d?b:a[b]).apply(a,c)})};n.pluck=function(a,b){return n.map(a,n.property(b))};n.where=function(a,b){return n.filter(a,n.matches(b))};n.findWhere=function(a,b){return n.find(a,n.matches(b))};n.max=function(a,b,c){var d=-Infinity,e=-Infinity,f;if(null==b&&null!=a){a=a.length===+a.length?a:n.values(a);for(var h=
0,g=a.length;h<g;h++)c=a[h],c>d&&(d=c)}else b=n.iteratee(b,c),n.each(a,function(a,c,h){f=b(a,c,h);if(f>e||-Infinity===f&&-Infinity===d)d=a,e=f});return d};n.min=function(a,b,c){var d=Infinity,e=Infinity,f;if(null==b&&null!=a){a=a.length===+a.length?a:n.values(a);for(var h=0,g=a.length;h<g;h++)c=a[h],c<d&&(d=c)}else b=n.iteratee(b,c),n.each(a,function(a,c,h){f=b(a,c,h);if(f<e||Infinity===f&&Infinity===d)d=a,e=f});return d};n.shuffle=function(a){a=a&&a.length===+a.length?a:n.values(a);for(var b=a.length,
c=Array(b),d=0,e;d<b;d++)e=n.random(0,d),e!==d&&(c[d]=c[e]),c[e]=a[d];return c};n.sample=function(a,b,c){return null==b||c?(a.length!==+a.length&&(a=n.values(a)),a[n.random(a.length-1)]):n.shuffle(a).slice(0,Math.max(0,b))};n.sortBy=function(a,b,c){b=n.iteratee(b,c);return n.pluck(n.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(c<d||void 0===d)return-1}return a.index-b.index}),"value")};var r=
function(a){return function(b,c,d){var e={};c=n.iteratee(c,d);n.each(b,function(d,f){var h=c(d,f,b);a(e,d,h)});return e}};n.groupBy=r(function(a,b,c){n.has(a,c)?a[c].push(b):a[c]=[b]});n.indexBy=r(function(a,b,c){a[c]=b});n.countBy=r(function(a,b,c){n.has(a,c)?a[c]++:a[c]=1});n.sortedIndex=function(a,b,c,d){c=n.iteratee(c,d,1);b=c(b);d=0;for(var e=a.length;d<e;){var f=d+e>>>1;c(a[f])<b?d=f+1:e=f}return d};n.toArray=function(a){return a?n.isArray(a)?g.call(a):a.length===+a.length?n.map(a,n.identity):
n.values(a):[]};n.size=function(a){return null==a?0:a.length===+a.length?a.length:n.keys(a).length};n.partition=function(a,b,c){b=n.iteratee(b,c);var d=[],e=[];n.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)});return[d,e]};n.first=n.head=n.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:0>b?[]:g.call(a,0,b)};n.initial=function(a,b,c){return g.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))};n.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:g.call(a,Math.max(a.length-
b,0))};n.rest=n.tail=n.drop=function(a,b,c){return g.call(a,null==b||c?1:b)};n.compact=function(a){return n.filter(a,n.identity)};var t=function(a,b,c,d){if(b&&n.every(a,n.isArray))return k.apply(d,a);for(var e=0,f=a.length;e<f;e++){var h=a[e];n.isArray(h)||n.isArguments(h)?b?l.apply(d,h):t(h,b,c,d):c||d.push(h)}return d};n.flatten=function(a,b){return t(a,b,!1,[])};n.without=function(a){return n.difference(a,g.call(arguments,1))};n.uniq=n.unique=function(a,b,c,d){if(null==a)return[];n.isBoolean(b)||
(d=c,c=b,b=!1);null!=c&&(c=n.iteratee(c,d));d=[];for(var e=[],f=0,h=a.length;f<h;f++){var g=a[f];if(b)f&&e===g||d.push(g),e=g;else if(c){var m=c(g,f,a);0>n.indexOf(e,m)&&(e.push(m),d.push(g))}else 0>n.indexOf(d,g)&&d.push(g)}return d};n.union=function(){return n.uniq(t(arguments,!0,!0,[]))};n.intersection=function(a){if(null==a)return[];for(var b=[],c=arguments.length,d=0,e=a.length;d<e;d++){var f=a[d];if(!n.contains(b,f)){for(var h=1;h<c&&n.contains(arguments[h],f);h++);h===c&&b.push(f)}}return b};
n.difference=function(a){var b=t(g.call(arguments,1),!0,!0,[]);return n.filter(a,function(a){return!n.contains(b,a)})};n.zip=function(a){if(null==a)return[];for(var b=n.max(arguments,"length").length,c=Array(b),d=0;d<b;d++)c[d]=n.pluck(arguments,d);return c};n.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;d<e;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c};n.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c)if("number"==typeof c)d=0>c?Math.max(0,e+c):c;else return d=
n.sortedIndex(a,b),a[d]===b?d:-1;for(;d<e;d++)if(a[d]===b)return d;return-1};n.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=a.length;for("number"==typeof c&&(d=0>c?d+c+1:Math.min(d,c+1));0<=--d;)if(a[d]===b)return d;return-1};n.range=function(a,b,c){1>=arguments.length&&(b=a||0,a=0);c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;f<d;f++,a+=c)e[f]=a;return e};var u=function(){};n.bind=function(a,b){var c,d;if(h&&a.bind===h)return h.apply(a,g.call(arguments,1));if(!n.isFunction(a))throw new TypeError("Bind must be called on a function");
c=g.call(arguments,2);return d=function(){if(!(this instanceof d))return a.apply(b,c.concat(g.call(arguments)));u.prototype=a.prototype;var e=new u;u.prototype=null;var f=a.apply(e,c.concat(g.call(arguments)));return n.isObject(f)?f:e}};n.partial=function(a){var b=g.call(arguments,1);return function(){for(var c=0,d=b.slice(),e=0,f=d.length;e<f;e++)d[e]===n&&(d[e]=arguments[c++]);for(;c<arguments.length;)d.push(arguments[c++]);return a.apply(this,d)}};n.bindAll=function(a){var b,c=arguments.length,
d;if(1>=c)throw Error("bindAll must be passed function names");for(b=1;b<c;b++)d=arguments[b],a[d]=n.bind(a[d],a);return a};n.memoize=function(a,b){var c=function(d){var e=c.cache,f=b?b.apply(this,arguments):d;n.has(e,f)||(e[f]=a.apply(this,arguments));return e[f]};c.cache={};return c};n.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)};n.defer=function(a){return n.delay.apply(n,[a,1].concat(g.call(arguments,1)))};n.throttle=function(a,b,c){var d,
e,f,h=null,g=0;c||(c={});var m=function(){g=!1===c.leading?0:n.now();h=null;f=a.apply(d,e);h||(d=e=null)};return function(){var k=n.now();g||!1!==c.leading||(g=k);var l=b-(k-g);d=this;e=arguments;0>=l||l>b?(clearTimeout(h),h=null,g=k,f=a.apply(d,e),h||(d=e=null)):h||!1===c.trailing||(h=setTimeout(m,l));return f}};n.debounce=function(a,b,c){var d,e,f,h,g,m=function(){var k=n.now()-h;k<b&&0<k?d=setTimeout(m,b-k):(d=null,c||(g=a.apply(f,e),d||(f=e=null)))};return function(){f=this;e=arguments;h=n.now();
var k=c&&!d;d||(d=setTimeout(m,b));k&&(g=a.apply(f,e),f=e=null);return g}};n.wrap=function(a,b){return n.partial(b,a)};n.negate=function(a){return function(){return!a.apply(this,arguments)}};n.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}};n.after=function(a,b){return function(){if(1>--a)return b.apply(this,arguments)}};n.before=function(a,b){var c;return function(){0<--a?c=b.apply(this,arguments):b=null;
return c}};n.once=n.partial(n.before,2);n.keys=function(a){if(!n.isObject(a))return[];if(m)return m(a);var b=[],c;for(c in a)n.has(a,c)&&b.push(c);return b};n.values=function(a){for(var b=n.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=a[b[e]];return d};n.pairs=function(a){for(var b=n.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=[b[e],a[b[e]]];return d};n.invert=function(a){for(var b={},c=n.keys(a),d=0,e=c.length;d<e;d++)b[a[c[d]]]=c[d];return b};n.functions=n.methods=function(a){var b=[],c;for(c in a)n.isFunction(a[c])&&
b.push(c);return b.sort()};n.extend=function(a){if(!n.isObject(a))return a;for(var b,c,d=1,e=arguments.length;d<e;d++)for(c in b=arguments[d],b)f.call(b,c)&&(a[c]=b[c]);return a};n.pick=function(a,b,c){var d={},e;if(null==a)return d;if(n.isFunction(b))for(e in b=q(b,c),a){var f=a[e];b(f,e,a)&&(d[e]=f)}else{f=k.apply([],g.call(arguments,1));a=Object(a);for(var h=0,m=f.length;h<m;h++)e=f[h],e in a&&(d[e]=a[e])}return d};n.omit=function(a,b,c){if(n.isFunction(b))b=n.negate(b);else{var d=n.map(k.apply([],
g.call(arguments,1)),String);b=function(a,b){return!n.contains(d,b)}}return n.pick(a,b,c)};n.defaults=function(a){if(!n.isObject(a))return a;for(var b=1,c=arguments.length;b<c;b++){var d=arguments[b],e;for(e in d)void 0===a[e]&&(a[e]=d[e])}return a};n.clone=function(a){return n.isObject(a)?n.isArray(a)?a.slice():n.extend({},a):a};n.tap=function(a,b){b(a);return a};var x=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof n&&(a=a._wrapped);b instanceof n&&
(b=b._wrapped);var f=e.call(a);if(f!==e.call(b))return!1;switch(f){case "[object RegExp]":case "[object String]":return""+a===""+b;case "[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case "[object Date]":case "[object Boolean]":return+a===+b}if("object"!=typeof a||"object"!=typeof b)return!1;for(var h=c.length;h--;)if(c[h]===a)return d[h]===b;var h=a.constructor,g=b.constructor;if(h!==g&&"constructor"in a&&"constructor"in b&&!(n.isFunction(h)&&h instanceof h&&n.isFunction(g)&&g instanceof
g))return!1;c.push(a);d.push(b);if("[object Array]"===f){if(f=a.length,g=f===b.length)for(;f--&&(g=x(a[f],b[f],c,d)););}else if(h=n.keys(a),f=h.length,g=n.keys(b).length===f)for(;f--&&(g=h[f],g=n.has(b,g)&&x(a[g],b[g],c,d)););c.pop();d.pop();return g};n.isEqual=function(a,b){return x(a,b,[],[])};n.isEmpty=function(a){if(null==a)return!0;if(n.isArray(a)||n.isString(a)||n.isArguments(a))return 0===a.length;for(var b in a)if(n.has(a,b))return!1;return!0};n.isElement=function(a){return!(!a||1!==a.nodeType)};
n.isArray=c||function(a){return"[object Array]"===e.call(a)};n.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a};n.each("Arguments Function String Number Date RegExp".split(" "),function(a){n["is"+a]=function(b){return e.call(b)==="[object "+a+"]"}});n.isArguments(arguments)||(n.isArguments=function(a){return n.has(a,"callee")});"function"!==typeof/./&&(n.isFunction=function(a){return"function"==typeof a||!1});n.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};
n.isNaN=function(a){return n.isNumber(a)&&a!==+a};n.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"===e.call(a)};n.isNull=function(a){return null===a};n.isUndefined=function(a){return void 0===a};n.has=function(a,b){return null!=a&&f.call(a,b)};n.noConflict=function(){d._=a;return this};n.identity=function(a){return a};n.constant=function(a){return function(){return a}};n.noop=function(){};n.property=function(a){return function(b){return b[a]}};n.matches=function(a){var b=n.pairs(a),
c=b.length;return function(a){if(null==a)return!c;a=Object(a);for(var d=0;d<c;d++){var e=b[d],f=e[0];if(e[1]!==a[f]||!(f in a))return!1}return!0}};n.times=function(a,b,c){var d=Array(Math.max(0,a));b=q(b,c,1);for(c=0;c<a;c++)d[c]=b(c);return d};n.random=function(a,b){null==b&&(b=a,a=0);return a+Math.floor(Math.random()*(b-a+1))};n.now=Date.now||function(){return(new Date).getTime()};var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r=n.invert(c),w=function(a){var b=
function(b){return a[b]},c="(?:"+n.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){a=null==a?"":""+a;return d.test(a)?a.replace(e,b):a}};n.escape=w(c);n.unescape=w(r);n.result=function(a,b){if(null!=a){var c=a[b];return n.isFunction(c)?a[b]():c}};var v=0;n.uniqueId=function(a){var b=++v+"";return a?a+b:b};n.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/(.)^/,E={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028",
"\u2029":"u2029"},y=/\\|'|\r|\n|\u2028|\u2029/g,B=function(a){return"\\"+E[a]};n.template=function(a,b,c){!b&&c&&(b=c);b=n.defaults({},b,n.templateSettings);c=RegExp([(b.escape||C).source,(b.interpolate||C).source,(b.evaluate||C).source].join("|")+"|$","g");var d=0,e="__p+='";a.replace(c,function(b,c,f,h,g){e+=a.slice(d,g).replace(y,B);d=g+b.length;c?e+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":f?e+="'+\n((__t=("+f+"))==null?'':__t)+\n'":h&&(e+="';\n"+h+"\n__p+='");return b});e+="';\n";b.variable||
(e="with(obj||{}){\n"+e+"}\n");e="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+e+"return __p;\n";try{var f=new Function(b.variable||"obj","_",e)}catch(h){throw h.source=e,h;}c=function(a){return f.call(this,a,n)};c.source="function("+(b.variable||"obj")+"){\n"+e+"}";return c};n.chain=function(a){a=n(a);a._chain=!0;return a};var D=function(a){return this._chain?n(a).chain():a};n.mixin=function(a){n.each(n.functions(a),function(b){var c=n[b]=a[b];n.prototype[b]=
function(){var a=[this._wrapped];l.apply(a,arguments);return D.call(this,c.apply(n,a))}})};n.mixin(n);n.each("pop push reverse shift sort splice unshift".split(" "),function(a){var c=b[a];n.prototype[a]=function(){var b=this._wrapped;c.apply(b,arguments);"shift"!==a&&"splice"!==a||0!==b.length||delete b[0];return D.call(this,b)}});n.each(["concat","join","slice"],function(a){var c=b[a];n.prototype[a]=function(){return D.call(this,c.apply(this._wrapped,arguments))}});n.prototype.value=function(){return this._wrapped};
"function"===typeof define&&define.amd&&define("underscore",[],function(){return n})}).call(this);
(function(d,a){if("function"===typeof define&&define.amd)define(["underscore","jquery","exports"],function(b,l,g){d.Backbone=a(d,g,b,l)});else if("undefined"!==typeof exports){var b=require("underscore");a(d,exports,b)}else d.Backbone=a(d,{},d._,d.jQuery||d.Zepto||d.ender||d.$)})(this,function(d,a,b,c){var l=d.Backbone,g=[].slice;a.VERSION="1.1.2";a.$=c;a.noConflict=function(){d.Backbone=l;return this};a.emulateHTTP=!1;a.emulateJSON=!1;var k=a.Events={on:function(a,b,c){if(!f(this,"on",a,[b,c])||
!b)return this;this._events||(this._events={});(this._events[a]||(this._events[a]=[])).push({callback:b,context:c,ctx:c||this});return this},once:function(a,c,d){if(!f(this,"once",a,[c,d])||!c)return this;var e=this,h=b.once(function(){e.off(a,h);c.apply(this,arguments)});h._callback=c;return this.on(a,h,d)},off:function(a,c,d){var e,h,g,m,k,n,l,q;if(!this._events||!f(this,"off",a,[c,d]))return this;if(!a&&!c&&!d)return this._events=void 0,this;m=a?[a]:b.keys(this._events);k=0;for(n=m.length;k<n;k++)if(a=
m[k],g=this._events[a]){this._events[a]=e=[];if(c||d)for(l=0,q=g.length;l<q;l++)h=g[l],(c&&c!==h.callback&&c!==h.callback._callback||d&&d!==h.context)&&e.push(h);e.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=g.call(arguments,1);if(!f(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;c&&m(c,b);d&&m(d,arguments);return this},stopListening:function(a,c,d){var e=this._listeningTo;if(!e)return this;var f=!c&&!d;d||"object"!==
typeof c||(d=this);a&&((e={})[a._listenId]=a);for(var h in e)a=e[h],a.off(c,d,this),(f||b.isEmpty(a._events))&&delete this._listeningTo[h];return this}},e=/\s+/,f=function(a,b,c,d){if(!c)return!0;if("object"===typeof c){for(var f in c)a[b].apply(a,[f,c[f]].concat(d));return!1}if(e.test(c)){c=c.split(e);f=0;for(var h=c.length;f<h;f++)a[b].apply(a,[c[f]].concat(d));return!1}return!0},m=function(a,b){var c,d=-1,e=a.length,f=b[0],h=b[1],g=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);
break;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);break;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,h);break;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,h,g);break;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}};b.each({listenTo:"on",listenToOnce:"once"},function(a,c){k[c]=function(c,d,e){var f=this._listeningTo||(this._listeningTo={}),h=c._listenId||(c._listenId=b.uniqueId("l"));f[h]=c;e||"object"!==typeof d||(e=this);c[a](d,e,this);return this}});k.bind=k.on;k.unbind=k.off;
b.extend(a,k);var h=a.Model=function(a,c){var d=a||{};c||(c={});this.cid=b.uniqueId("c");this.attributes={};c.collection&&(this.collection=c.collection);c.parse&&(d=this.parse(d,c)||{});d=b.defaults({},d,b.result(this,"defaults"));this.set(d,c);this.changed={};this.initialize.apply(this,arguments)};b.extend(h.prototype,k,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return b.clone(this.attributes)},sync:function(){return a.sync.apply(this,arguments)},
get:function(a){return this.attributes[a]},escape:function(a){return b.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,c,d){var e,f,h,g,m,k,n;if(null==a)return this;"object"===typeof a?(f=a,d=c):(f={})[a]=c;d||(d={});if(!this._validate(f,d))return!1;h=d.unset;g=d.silent;a=[];m=this._changing;this._changing=!0;m||(this._previousAttributes=b.clone(this.attributes),this.changed={});n=this.attributes;k=this._previousAttributes;this.idAttribute in f&&(this.id=f[this.idAttribute]);
for(e in f)c=f[e],b.isEqual(n[e],c)||a.push(e),b.isEqual(k[e],c)?delete this.changed[e]:this.changed[e]=c,h?delete n[e]:n[e]=c;if(!g)for(a.length&&(this._pending=d),c=0,e=a.length;c<e;c++)this.trigger("change:"+a[c],this,n[a[c]],d);if(m)return this;if(!g)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);this._changing=this._pending=!1;return this},unset:function(a,c){return this.set(a,void 0,b.extend({},c,{unset:!0}))},clear:function(a){var c={},d;for(d in this.attributes)c[d]=
void 0;return this.set(c,b.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!b.isEmpty(this.changed):b.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?b.clone(this.changed):!1;var c,d=!1,e=this._changing?this._previousAttributes:this.attributes,f;for(f in a)b.isEqual(e[f],c=a[f])||((d||(d={}))[f]=c);return d},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return b.clone(this._previousAttributes)},
fetch:function(a){a=a?b.clone(a):{};void 0===a.parse&&(a.parse=!0);var c=this,d=a.success;a.success=function(b){if(!c.set(c.parse(b,a),a))return!1;d&&d(c,b,a);c.trigger("sync",c,b,a)};T(this,a);return this.sync("read",this,a)},save:function(a,c,d){var e,f=this.attributes;null==a||"object"===typeof a?(e=a,d=c):(e={})[a]=c;d=b.extend({validate:!0},d);if(e&&!d.wait){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;e&&d.wait&&(this.attributes=b.extend({},f,e));void 0===d.parse&&(d.parse=
!0);var h=this,g=d.success;d.success=function(a){h.attributes=f;var c=h.parse(a,d);d.wait&&(c=b.extend(e||{},c));if(b.isObject(c)&&!h.set(c,d))return!1;g&&g(h,a,d);h.trigger("sync",h,a,d)};T(this,d);a=this.isNew()?"create":d.patch?"patch":"update";"patch"===a&&(d.attrs=e);a=this.sync(a,this,d);e&&d.wait&&(this.attributes=f);return a},destroy:function(a){a=a?b.clone(a):{};var c=this,d=a.success,e=function(){c.trigger("destroy",c,c.collection,a)};a.success=function(b){(a.wait||c.isNew())&&e();d&&d(c,
b,a);c.isNew()||c.trigger("sync",c,b,a)};if(this.isNew())return a.success(),!1;T(this,a);var f=this.sync("delete",this,a);a.wait||e();return f},url:function(){var a=b.result(this,"urlRoot")||b.result(this.collection,"url")||O();return this.isNew()?a:a.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},b.extend(a||
{},{validate:!0}))},_validate:function(a,c){if(!c.validate||!this.validate)return!0;a=b.extend({},this.attributes,a);var d=this.validationError=this.validate(a,c)||null;if(!d)return!0;this.trigger("invalid",this,d,b.extend(c,{validationError:d}));return!1}});b.each("keys values pairs invert pick omit".split(" "),function(a){h.prototype[a]=function(){var c=g.call(arguments);c.unshift(this.attributes);return b[a].apply(b,c)}});var n=a.Collection=function(a,c){c||(c={});c.model&&(this.model=c.model);
void 0!==c.comparator&&(this.comparator=c.comparator);this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,b.extend({silent:!0},c))},q={add:!0,remove:!0,merge:!0},r={add:!0,remove:!1};b.extend(n.prototype,k,{model:h,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return a.sync.apply(this,arguments)},add:function(a,c){return this.set(a,b.extend({merge:!1},c,r))},remove:function(a,c){var d=!b.isArray(a);a=d?[a]:b.clone(a);c||
(c={});var e,f,h,g;e=0;for(f=a.length;e<f;e++)if(g=a[e]=this.get(a[e]))delete this._byId[g.id],delete this._byId[g.cid],h=this.indexOf(g),this.models.splice(h,1),this.length--,c.silent||(c.index=h,g.trigger("remove",g,this,c)),this._removeReference(g,c);return d?a[0]:a},set:function(a,c){c=b.defaults({},c,q);c.parse&&(a=this.parse(a,c));var d=!b.isArray(a);a=d?a?[a]:[]:b.clone(a);var e,f,g,m,k,n,l=c.at,r=this.model,t=this.comparator&&null==l&&!1!==c.sort,u=b.isString(this.comparator)?this.comparator:
null,x=[],w=[],A={},v=c.add,y=c.merge,E=c.remove,B=!t&&v&&E?[]:!1;e=0;for(f=a.length;e<f;e++){k=a[e]||{};g=k instanceof h?m=k:k[r.prototype.idAttribute||"id"];if(g=this.get(g))E&&(A[g.cid]=!0),y&&(k=k===m?m.attributes:k,c.parse&&(k=g.parse(k,c)),g.set(k,c),t&&!n&&g.hasChanged(u)&&(n=!0)),a[e]=g;else if(v){m=a[e]=this._prepareModel(k,c);if(!m)continue;x.push(m);this._addReference(m,c)}m=g||m;!B||!m.isNew()&&A[m.id]||B.push(m);A[m.id]=!0}if(E){e=0;for(f=this.length;e<f;++e)A[(m=this.models[e]).cid]||
w.push(m);w.length&&this.remove(w,c)}if(x.length||B&&B.length)if(t&&(n=!0),this.length+=x.length,null!=l)for(e=0,f=x.length;e<f;e++)this.models.splice(l+e,0,x[e]);else for(B&&(this.models.length=0),k=B||x,e=0,f=k.length;e<f;e++)this.models.push(k[e]);n&&this.sort({silent:!0});if(!c.silent){e=0;for(f=x.length;e<f;e++)(m=x[e]).trigger("add",m,this,c);(n||B&&B.length)&&this.trigger("sort",this,c)}return d?a[0]:a},reset:function(a,c){c||(c={});for(var d=0,e=this.models.length;d<e;d++)this._removeReference(this.models[d],
c);c.previousModels=this.models;this._reset();a=this.add(a,b.extend({silent:!0},c));c.silent||this.trigger("reset",this,c);return a},push:function(a,c){return this.add(a,b.extend({at:this.length},c))},pop:function(a){var b=this.at(this.length-1);this.remove(b,a);return b},unshift:function(a,c){return this.add(a,b.extend({at:0},c))},shift:function(a){var b=this.at(0);this.remove(b,a);return b},slice:function(){return g.apply(this.models,arguments)},get:function(a){return null==a?void 0:this._byId[a]||
this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},where:function(a,c){return b.isEmpty(a)?c?void 0:[]:this[c?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw Error("Cannot sort a set without a comparator");a||(a={});b.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(b.bind(this.comparator,
this));a.silent||this.trigger("sort",this,a);return this},pluck:function(a){return b.invoke(this.models,"get",a)},fetch:function(a){a=a?b.clone(a):{};void 0===a.parse&&(a.parse=!0);var c=a.success,d=this;a.success=function(b){d[a.reset?"reset":"set"](b,a);c&&c(d,b,a);d.trigger("sync",d,b,a)};T(this,a);return this.sync("read",this,a)},create:function(a,c){c=c?b.clone(c):{};if(!(a=this._prepareModel(a,c)))return!1;c.wait||this.add(a,c);var d=this,e=c.success;c.success=function(a,b){c.wait&&d.add(a,
c);e&&e(a,b,c)};a.save(null,c);return a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(a,c){if(a instanceof h)return a;c=c?b.clone(c):{};c.collection=this;var d=new this.model(a,c);if(!d.validationError)return d;this.trigger("invalid",this,d.validationError,c);return!1},_addReference:function(a,b){this._byId[a.cid]=a;null!=a.id&&(this._byId[a.id]=a);a.collection||(a.collection=
this);a.on("all",this._onModelEvent,this)},_removeReference:function(a,b){this===a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){if("add"!==a&&"remove"!==a||c===this)"destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments)}});b.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min toArray size first head take initial rest tail drop last without difference indexOf shuffle lastIndexOf isEmpty chain sample".split(" "),
function(a){n.prototype[a]=function(){var c=g.call(arguments);c.unshift(this.models);return b[a].apply(b,c)}});b.each(["groupBy","countBy","sortBy","indexBy"],function(a){n.prototype[a]=function(c,d){var e=b.isFunction(c)?c:function(a){return a.get(c)};return b[a](this.models,e,d)}});c=a.View=function(a){this.cid=b.uniqueId("view");a||(a={});b.extend(this,b.pick(a,u));this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var t=/^(\S+)\s*(.*)$/,u="model collection el id attributes className tagName events".split(" ");
b.extend(c.prototype,k,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(b,c){this.$el&&this.undelegateEvents();this.$el=b instanceof a.$?b:a.$(b);this.el=this.$el[0];!1!==c&&this.delegateEvents();return this},delegateEvents:function(a){if(!a&&!(a=b.result(this,"events")))return this;this.undelegateEvents();for(var c in a){var d=a[c];b.isFunction(d)||
(d=this[a[c]]);if(d){var e=c.match(t),f=e[1],e=e[2],d=b.bind(d,this),f=f+(".delegateEvents"+this.cid);if(""===e)this.$el.on(f,d);else this.$el.on(f,e,d)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_ensureElement:function(){if(this.el)this.setElement(b.result(this,"el"),!1);else{var c=b.extend({},b.result(this,"attributes"));this.id&&(c.id=b.result(this,"id"));this.className&&(c["class"]=b.result(this,"className"));c=a.$("<"+b.result(this,"tagName")+
">").attr(c);this.setElement(c,!1)}}});a.sync=function(c,d,e){var f=w[c];b.defaults(e||(e={}),{emulateHTTP:a.emulateHTTP,emulateJSON:a.emulateJSON});var h={type:f,dataType:"json"};e.url||(h.url=b.result(d,"url")||O());null!=e.data||!d||"create"!==c&&"update"!==c&&"patch"!==c||(h.contentType="application/json",h.data=JSON.stringify(e.attrs||d.toJSON(e)));e.emulateJSON&&(h.contentType="application/x-www-form-urlencoded",h.data=h.data?{model:h.data}:{});if(e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===
f)){h.type="POST";e.emulateJSON&&(h.data._method=f);var g=e.beforeSend;e.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",f);if(g)return g.apply(this,arguments)}}"GET"===h.type||e.emulateJSON||(h.processData=!1);"PATCH"===h.type&&x&&(h.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});c=e.xhr=a.ajax(b.extend(h,e));d.trigger("request",d,c,e);return c};var x="undefined"!==typeof window&&!!window.ActiveXObject&&!(window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),
w={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};a.ajax=function(){return a.$.ajax.apply(a.$,arguments)};var v=a.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,E=/(\(\?)?:\w+/g,y=/\*\w+/g,B=/[\-{}\[\]+?.,\\\^$|#\s]/g;b.extend(v.prototype,k,{initialize:function(){},route:function(c,d,e){b.isRegExp(c)||(c=this._routeToRegExp(c));b.isFunction(d)&&(e=d,d="");e||(e=this[d]);var f=this;a.history.route(c,
function(b){b=f._extractParameters(c,b);f.execute(e,b);f.trigger.apply(f,["route:"+d].concat(b));f.trigger("route",d,b);a.history.trigger("route",f,d,b)});return this},execute:function(a,b){a&&a.apply(this,b)},navigate:function(b,c){a.history.navigate(b,c);return this},_bindRoutes:function(){if(this.routes){this.routes=b.result(this,"routes");for(var a,c=b.keys(this.routes);null!=(a=c.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){a=a.replace(B,"\\$&").replace(C,"(?:$1)?").replace(E,
function(a,b){return b?a:"([^/?]+)"}).replace(y,"([^?]*?)");return new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,c){var d=a.exec(c).slice(1);return b.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var D=a.History=function(){this.handlers=[];b.bindAll(this,"checkUrl");"undefined"!==typeof window&&(this.location=window.location,this.history=window.history)},F=/^[#\/]|\s+$/g,L=/^\/+|\/+$/g,K=/msie [\w.]+/,J=/\/$/,A=/#.*$/;D.started=!1;b.extend(D.prototype,
k,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(a){return(a=(a||this).location.href.match(/#(.*)$/))?a[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=decodeURI(this.location.pathname+this.location.search);var c=this.root.replace(J,"");a.indexOf(c)||(a=a.slice(c.length))}else a=this.getHash();return a.replace(F,"")},start:function(c){if(D.started)throw Error("Backbone.history has already been started");
D.started=!0;this.options=b.extend({root:"/"},this.options,c);this.root=this.options.root;this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);c=this.getFragment();var d=document.documentMode,d=K.exec(navigator.userAgent.toLowerCase())&&(!d||7>=d);this.root=("/"+this.root+"/").replace(L,"/");d&&this._wantsHashChange&&(this.iframe=a.$('<iframe src="javascript:0" tabindex="-1">').hide().appendTo("body")[0].contentWindow,
this.navigate(c));if(this._hasPushState)a.$(window).on("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in window&&!d)a.$(window).on("hashchange",this.checkUrl);else this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=c;c=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&
this.atRoot()&&c.hash&&(this.fragment=this.getHash().replace(F,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){a.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);this._checkUrlInterval&&clearInterval(this._checkUrlInterval);D.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){a=this.getFragment();a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));
if(a===this.fragment)return!1;this.iframe&&this.navigate(a);this.loadUrl()},loadUrl:function(a){a=this.fragment=this.getFragment(a);return b.any(this.handlers,function(b){if(b.route.test(a))return b.callback(a),!0})},navigate:function(a,b){if(!D.started)return!1;b&&!0!==b||(b={trigger:!!b});var c=this.root+(a=this.getFragment(a||""));a=a.replace(A,"");if(this.fragment!==a){this.fragment=a;""===a&&"/"!==c&&(c=c.slice(0,-1));if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},
document.title,c);else if(this._wantsHashChange)this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace));else return this.location.assign(c);if(b.trigger)return this.loadUrl(a)}},_updateHash:function(a,b,c){c?(c=a.href.replace(/(javascript:|#).*$/,""),a.replace(c+"#"+b)):a.hash="#"+b}});a.history=new D;h.extend=n.extend=v.extend=c.extend=D.extend=function(a,
c){var d=this,e;e=a&&b.has(a,"constructor")?a.constructor:function(){return d.apply(this,arguments)};b.extend(e,d,c);var f=function(){this.constructor=e};f.prototype=d.prototype;e.prototype=new f;a&&b.extend(e.prototype,a);e.__super__=d.prototype;return e};var O=function(){throw Error('A "url" property or function must be specified');},T=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b);a.trigger("error",a,d,b)}};return a});
(function(d,a,b){var c,l,g,k,e=[],f=[];d.extend(b.View,{attach:function(c,d){"function"!==typeof d&&(d=b.View.extend(d));e.push(function(){this.find(c).add(this.filter(c)).each(function(){var b=a(this);void 0===b.data("backbone.attached-view")&&b.data("backbone.attached-view",new d({el:this}))})});return d}});l=function(a){var b,c=e.length;for(b=0;b<c;b+=1)e[b].call(a)};c=function(){var b;b=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(void 0===b)return!1;(new b(function(b){var c,
d=b.length,e=[];for(c=0;c<d;c+=1)e.push.apply(e,b[c].addedNodes);0<e.length&&l(a(e))})).observe(document.body,{childList:!0,subtree:!0});return!0};g=function(){a(document.body).on("DOMNodeInserted",function(a){var b=0<f.length;f.push(a);b||setTimeout(k,0)})};k=function(){var b,c=f.length,d=[];for(b=0;b<c;b+=1)d.push(f[b].target);f=[];l(a(d))};a(function(){l(a(document));c()||g()})})(window._,window.jQuery,window.Backbone);
(function(d){d.extend(d.fn,{validate:function(a){if(this.length){var b=d.data(this[0],"validator");if(b)return b;b=new d.validator(a,this[0]);d.data(this[0],"validator",b);b.settings.onsubmit&&(this.find("input, button").filter(".cancel").click(function(){b.cancelSubmit=!0}),b.settings.submitHandler&&this.find("input, button").filter(":submit").click(function(){b.submitButton=this}),this.submit(function(a){function l(){if(b.settings.submitHandler){if(b.submitButton)var a=d("<input type='hidden'/>").attr("name",
b.submitButton.name).val(b.submitButton.value).appendTo(b.currentForm);b.settings.submitHandler.call(b,b.currentForm);b.submitButton&&a.remove();return!1}return!0}b.settings.debug&&a.preventDefault();if(b.cancelSubmit)return b.cancelSubmit=!1,l();if(b.form())return b.pendingRequest?(b.formSubmitted=!0,!1):l();b.focusInvalid();return!1}));return b}a&&a.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing")},valid:function(){if(d(this[0]).is("form"))return this.validate().form();
var a=!0,b=d(this[0].form).validate();this.each(function(){a&=b.element(this)});return a},removeAttrs:function(a){var b={},c=this;d.each(a.split(/\s/),function(a,d){b[d]=c.attr(d);c.removeAttr(d)});return b},rules:function(a,b){var c=this[0];if(a){var l=d.data(c.form,"validator").settings,g=l.rules,k=d.validator.staticRules(c);switch(a){case "add":d.extend(k,d.validator.normalizeRule(b));g[c.name]=k;b.messages&&(l.messages[c.name]=d.extend(l.messages[c.name],b.messages));break;case "remove":if(!b)return delete g[c.name],
k;var e={};d.each(b.split(/\s/),function(a,b){e[b]=k[b];delete k[b]});return e}}c=d.validator.normalizeRules(d.extend({},d.validator.metadataRules(c),d.validator.classRules(c),d.validator.attributeRules(c),d.validator.staticRules(c)),c);c.required&&(l=c.required,delete c.required,c=d.extend({required:l},c));return c}});d.extend(d.expr[":"],{blank:function(a){return!d.trim(""+a.value)},filled:function(a){return!!d.trim(""+a.value)},unchecked:function(a){return!a.checked}});d.validator=function(a,b){this.settings=
d.extend({},d.validator.defaults,a);this.currentForm=b;this.init()};d.validator.format=function(a,b){if(1==arguments.length)return function(){var b=d.makeArray(arguments);b.unshift(a);return d.validator.format.apply(this,b)};2<arguments.length&&b.constructor!=Array&&(b=d.makeArray(arguments).slice(1));b.constructor!=Array&&(b=[b]);d.each(b,function(b,d){a=a.replace(new RegExp("\\{"+b+"\\}","g"),d)});return a};d.extend(d.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",
errorElement:"label",focusInvalid:!0,errorContainer:d([]),errorLabelContainer:d([]),onsubmit:!0,ignore:[],ignoreTitle:!1,onfocusin:function(a){this.lastActive=a;this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.errorsFor(a).hide())},onfocusout:function(a){this.checkable(a)||!(a.name in this.submitted)&&this.optional(a)||this.element(a)},onkeyup:function(a){(a.name in this.submitted||
a==this.lastElement)&&this.element(a)},onclick:function(a){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(a,b,c){d(a).addClass(b).removeClass(c)},unhighlight:function(a,b,c){d(a).removeClass(b).addClass(c)}},setDefaults:function(a){d.extend(d.validator.defaults,a)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",
dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:d.validator.format("Please enter no more than {0} characters."),minlength:d.validator.format("Please enter at least {0} characters."),rangelength:d.validator.format("Please enter a value between {0} and {1} characters long."),
range:d.validator.format("Please enter a value between {0} and {1}."),max:d.validator.format("Please enter a value less than or equal to {0}."),min:d.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function a(a){var b=d.data(this[0].form,"validator");b.settings["on"+a.type]&&b.settings["on"+a.type].call(b,this[0])}this.labelContainer=d(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||
d(this.currentForm);this.containers=d(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var b=this.groups={};d.each(this.settings.groups,function(a,c){d.each(c.split(/\s/),function(c,d){b[d]=a})});var c=this.settings.rules;d.each(c,function(a,b){c[a]=d.validator.normalizeRule(b)});d(this.currentForm).delegate("focusin focusout keyup",":text, :password, :file, select, textarea",
a).delegate("click",":radio, :checkbox, select, option",a);this.settings.invalidHandler&&d(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){this.checkForm();d.extend(this.submitted,this.errorMap);this.invalid=d.extend({},this.errorMap);this.valid()||d(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);
return this.valid()},element:function(a){this.lastElement=a=this.clean(a);this.prepareElement(a);this.currentElements=d(a);var b=this.check(a);b?delete this.invalid[a.name]:this.invalid[a.name]=!0;this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers));this.showErrors();return b},showErrors:function(a){if(a){d.extend(this.errorMap,a);this.errorList=[];for(var b in a)this.errorList.push({message:a[b],element:this.findByName(b)[0]});this.successList=d.grep(this.successList,function(b){return!(b.name in
a)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){d.fn.resetForm&&d(this.currentForm).resetForm();this.submitted={};this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b=0,c;for(c in a)b++;return b},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0==
this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{d(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus()}catch(a){}},findLastActive:function(){var a=this.lastActive;return a&&1==d.grep(this.errorList,function(b){return b.element.name==a.name}).length&&a},elements:function(){var a=this,b={};return d([]).add(this.currentForm.elements).filter(":input").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&
a.settings.debug&&window.console&&console.error("%o has no name assigned",this);return this.name in b||!a.objectLength(d(this).rules())?!1:b[this.name]=!0})},clean:function(a){return d(a)[0]},errors:function(){return d(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=d([]);this.toHide=d([]);this.currentElements=d([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},
prepareElement:function(a){this.reset();this.toHide=this.errorsFor(a)},check:function(a){a=this.clean(a);this.checkable(a)&&(a=this.findByName(a.name)[0]);var b=d(a).rules(),c=!1;for(method in b){var l={method:method,parameters:b[method]};try{var g=d.validator.methods[method].call(this,a.value.replace(/\r/g,""),a,l.parameters);if("dependency-mismatch"==g)c=!0;else{c=!1;if("pending"==g){this.toHide=this.toHide.not(this.errorsFor(a));return}if(!g)return this.formatAndAdd(a,l),!1}}catch(k){throw this.settings.debug&&
window.console&&console.log("exception occured when checking element "+a.id+", check the '"+l.method+"' method",k),k;}}if(!c)return this.objectLength(b)&&this.successList.push(a),!0},customMetaMessage:function(a,b){if(d.metadata){var c=this.settings.meta?d(a).metadata()[this.settings.meta]:d(a).metadata();return c&&c.messages&&c.messages[b]}},customMessage:function(a,b){var c=this.settings.messages[a];return c&&(c.constructor==String?c:c[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==
arguments[a])return arguments[a]},defaultMessage:function(a,b){return this.findDefined(this.customMessage(a.name,b),this.customMetaMessage(a,b),!this.settings.ignoreTitle&&a.title||void 0,d.validator.messages[b],"<strong>Warning: No message defined for "+a.name+"</strong>")},formatAndAdd:function(a,b){var c=this.defaultMessage(a,b.method),d=/\$?\{(\d+)\}/g;"function"==typeof c?c=c.call(this,b.parameters,a):d.test(c)&&(c=jQuery.format(c.replace(d,"{$1}"),b.parameters));this.errorList.push({message:c,
element:a});this.errorMap[a.name]=c;this.submitted[a.name]=c},addWrapper:function(a){this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper)));return a},defaultShowErrors:function(){for(var a=0;this.errorList[a];a++){var b=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass);this.showLabel(b.element,b.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success)for(a=
0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(a=0,b=this.validElements();b[a];a++)this.settings.unhighlight.call(this,b[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return d(this.errorList).map(function(){return this.element})},showLabel:function(a,
b){var c=this.errorsFor(a);c.length?(c.removeClass().addClass(this.settings.errorClass),c.attr("generated")&&c.html(b)):(c=d("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(a),generated:!0}).addClass(this.settings.errorClass).html(b||""),this.settings.wrapper&&(c=c.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(c).length||(this.settings.errorPlacement?this.settings.errorPlacement(c,d(a)):c.insertAfter(a)));!b&&this.settings.success&&(c.text(""),
"string"==typeof this.settings.success?c.addClass(this.settings.success):this.settings.success(c));this.toShow=this.toShow.add(c)},errorsFor:function(a){var b=this.idOrName(a);return this.errors().filter(function(){return d(this).attr("for")==b})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(a){var b=this.currentForm;return d(document.getElementsByName(a)).map(function(c,d){return d.form==
b&&d.name==a&&d||null})},getLength:function(a,b){switch(b.nodeName.toLowerCase()){case "select":return d("option:selected",b).length;case "input":if(this.checkable(b))return this.findByName(b.name).filter(":checked").length}return a.length},depend:function(a,b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):!0},dependTypes:{"boolean":function(a,b){return a},string:function(a,b){return!!d(a,b.form).length},"function":function(a,b){return a(b)}},optional:function(a){return!d.validator.methods.required.call(this,
d.trim(a.value),a)&&"dependency-mismatch"},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,this.pending[a.name]=!0)},stopRequest:function(a,b){this.pendingRequest--;0>this.pendingRequest&&(this.pendingRequest=0);delete this.pending[a.name];b&&0==this.pendingRequest&&this.formSubmitted&&this.form()?(d(this.currentForm).submit(),this.formSubmitted=!1):!b&&0==this.pendingRequest&&this.formSubmitted&&(d(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},
previousValue:function(a){return d.data(a,"previousValue")||d.data(a,"previousValue",{old:null,valid:!0,message:this.defaultMessage(a,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(a,b){a.constructor==String?this.classRuleSettings[a]=b:d.extend(this.classRuleSettings,a)},classRules:function(a){var b=
{};(a=d(a).attr("class"))&&d.each(a.split(" "),function(){this in d.validator.classRuleSettings&&d.extend(b,d.validator.classRuleSettings[this])});return b},attributeRules:function(a){var b={};a=d(a);for(method in d.validator.methods){var c=a.attr(method);c&&(b[method]=c)}b.maxlength&&/-1|2147483647|524288/.test(b.maxlength)&&delete b.maxlength;return b},metadataRules:function(a){if(!d.metadata)return{};var b=d.data(a.form,"validator").settings.meta;return b?d(a).metadata()[b]:d(a).metadata()},staticRules:function(a){var b=
{},c=d.data(a.form,"validator");c.settings.rules&&(b=d.validator.normalizeRule(c.settings.rules[a.name])||{});return b},normalizeRules:function(a,b){d.each(a,function(c,l){if(!1===l)delete a[c];else if(l.param||l.depends){var g=!0;switch(typeof l.depends){case "string":g=!!d(l.depends,b.form).length;break;case "function":g=l.depends.call(b,b)}g?a[c]=void 0!==l.param?l.param:!0:delete a[c]}});d.each(a,function(c,l){a[c]=d.isFunction(l)?l(b):l});d.each(["minlength","maxlength","min","max"],function(){a[this]&&
(a[this]=Number(a[this]))});d.each(["rangelength","range"],function(){a[this]&&(a[this]=[Number(a[this][0]),Number(a[this][1])])});d.validator.autoCreateRanges&&(a.min&&a.max&&(a.range=[a.min,a.max],delete a.min,delete a.max),a.minlength&&a.maxlength&&(a.rangelength=[a.minlength,a.maxlength],delete a.minlength,delete a.maxlength));a.messages&&delete a.messages;return a},normalizeRule:function(a){if("string"==typeof a){var b={};d.each(a.split(/\s/),function(){b[this]=!0});a=b}return a},addMethod:function(a,
b,c){d.validator.methods[a]=b;d.validator.messages[a]=void 0!=c?c:d.validator.messages[a];3>b.length&&d.validator.addClassRules(a,d.validator.normalizeRule(a))},methods:{required:function(a,b,c){if(!this.depend(c,b))return"dependency-mismatch";switch(b.nodeName.toLowerCase()){case "select":return(a=d(b).val())&&0<a.length;case "input":if(this.checkable(b))return 0<this.getLength(a,b);default:return 0<d.trim(a).length}},remote:function(a,b,c){if(this.optional(b))return"dependency-mismatch";var l=this.previousValue(b);
this.settings.messages[b.name]||(this.settings.messages[b.name]={});l.originalMessage=this.settings.messages[b.name].remote;this.settings.messages[b.name].remote=l.message;c="string"==typeof c&&{url:c}||c;if(l.old!==a){l.old=a;var g=this;this.startRequest(b);var k={};k[b.name]=a;d.ajax(d.extend(!0,{url:c,mode:"abort",port:"validate"+b.name,dataType:"json",data:k,success:function(c){g.settings.messages[b.name].remote=l.originalMessage;var f=!0===c;if(f){var m=g.formSubmitted;g.prepareElement(b);g.formSubmitted=
m;g.successList.push(b);g.showErrors()}else m={},c=l.message=c||g.defaultMessage(b,"remote"),m[b.name]=d.isFunction(c)?c(a):c,g.showErrors(m);l.valid=f;g.stopRequest(b,f)}},c));return"pending"}return this.pending[b.name]?"pending":l.valid},minlength:function(a,b,c){return this.optional(b)||this.getLength(d.trim(a),b)>=c},maxlength:function(a,b,c){return this.optional(b)||this.getLength(d.trim(a),b)<=c},rangelength:function(a,b,c){a=this.getLength(d.trim(a),b);return this.optional(b)||a>=c[0]&&a<=
c[1]},min:function(a,b,c){return this.optional(b)||a>=c},max:function(a,b,c){return this.optional(b)||a<=c},range:function(a,b,c){return this.optional(b)||a>=c[0]&&a<=c[1]},email:function(a,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(a)},
url:function(a,b){return this.optional(b)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},
date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(a))},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},number:function(a,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},creditcard:function(a,b){if(this.optional(b))return"dependency-mismatch";if(/[^0-9-]+/.test(a))return!1;var c=0,d=0,g=!1;a=a.replace(/\D/g,"");for(var k=a.length-1;0<=k;k--)d=
a.charAt(k),d=parseInt(d,10),g&&9<(d*=2)&&(d-=9),c+=d,g=!g;return 0==c%10},accept:function(a,b,c){c="string"==typeof c?c.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(b)||a.match(new RegExp(".("+c+")$","i"))},equalTo:function(a,b,c){c=d(c).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){d(b).valid()});return a==c.val()}}});d.format=d.validator.format})(jQuery);
(function(d){var a=d.ajax,b={};d.ajax=function(c){c=d.extend(c,d.extend({},d.ajaxSettings,c));var l=c.port;return"abort"==c.mode?(b[l]&&b[l].abort(),b[l]=a.apply(this,arguments)):a.apply(this,arguments)}})(jQuery);
(function(d){d.each({focus:"focusin",blur:"focusout"},function(a,b){d.event.special[b]={setup:function(){if(d.browser.msie)return!1;this.addEventListener(a,d.event.special[b].handler,!0)},teardown:function(){if(d.browser.msie)return!1;this.removeEventListener(a,d.event.special[b].handler,!0)},handler:function(a){arguments[0]=d.event.fix(a);arguments[0].type=b;return d.event.handle.apply(this,arguments)}}});d.extend(d.fn,{delegate:function(a,b,c){return this.bind(a,function(a){var g=d(a.target);if(g.is(b))return c.apply(g,
arguments)})},triggerEvent:function(a,b){return this.triggerHandler(a,[d.event.fix({type:a,target:b})])}})})(jQuery);
(function(d){"function"===typeof define&&define.amd?define(["jquery"],d):d(jQuery)})(function(d){function a(a){a=l.json?JSON.stringify(a):String(a);return l.raw?a:encodeURIComponent(a)}function b(a,b){var e;if(l.raw)e=a;else a:{var f=a;0===f.indexOf('"')&&(f=f.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{f=decodeURIComponent(f.replace(c," "));e=l.json?JSON.parse(f):f;break a}catch(m){}e=void 0}return d.isFunction(b)?b(e):e}var c=/\+/g,l=d.cookie=function(c,k,e){if(void 0!==k&&!d.isFunction(k)){e=
d.extend({},l.defaults,e);if("number"===typeof e.expires){var f=e.expires,m=e.expires=new Date;m.setTime(+m+864E5*f)}return document.cookie=[l.raw?c:encodeURIComponent(c),"=",a(k),e.expires?"; expires="+e.expires.toUTCString():"",e.path?"; path="+e.path:"",e.domain?"; domain="+e.domain:"",e.secure?"; secure":""].join("")}e=c?void 0:{};for(var f=document.cookie?document.cookie.split("; "):[],m=0,h=f.length;m<h;m++){var n=f[m].split("="),q;q=n.shift();q=l.raw?q:decodeURIComponent(q);n=n.join("=");if(c&&
c===q){e=b(n,k);break}c||void 0===(n=b(n))||(e[q]=n)}return e};l.defaults={};d.removeCookie=function(a,b){if(void 0===d.cookie(a))return!1;d.cookie(a,"",d.extend({},b,{expires:-1}));return!d.cookie(a)}});
(function(d){var a={},b={};d.manageAjax=function(){return{create:function(b,l){a[b]=new d.manageAjax._manager(b,l);return a[b]},destroy:function(b){a[b]&&(a[b].clear(!0),delete a[b])}}}();d.manageAjax._manager=function(a,b){this.requests={};this.inProgress=0;this.qName=this.name=a;this.opts=d.extend({},d.ajaxSettings,d.manageAjax.defaults,b);b&&b.queue&&!0!==b.queue&&"string"===typeof b.queue&&"clear"!==b.queue&&(this.qName=b.queue)};d.manageAjax._manager.prototype={add:function(a){a=d.extend({},
this.opts,a);var b=a.complete||d.noop,g=a.success||d.noop,k=a.beforeSend||d.noop,e=a.error||d.noop,f="string"==typeof a.data?a.data:d.param(a.data||{}),m=a.type+a.url+f,h=this,n=this._createAjax(m,a,g,b);if(!this.requests[m]||!a.preventDoubbleRequests)return n.xhrID=m,a.xhrID=m,a.beforeSend=function(a,b){var c=k.call(this,a,b);!1===c&&h._removeXHR(m);return c},a.complete=function(d,e){h._complete.call(h,this,b,d,e,m,a)},a.success=function(b,d,e){h._success.call(h,this,g,b,d,e,a)},a.error=function(b,
d,h){var g="",m="";"timeout"!==d&&b&&(g=b.status,m=b.responseXML||b.responseText);e?e.call(this,b,d,h,a):setTimeout(function(){throw d+"| status: "+g+" | URL: "+a.url+" | data: "+f+" | thrown: "+h+" | response: "+m;},0);b=null},"clear"===a.queue&&d(document).clearQueue(this.qName),a.queue?(d.queue(document,this.qName,n),this.inProgress<a.maxRequests&&d.dequeue(document,this.qName),m):n()},_createAjax:function(a,l,g,k){var e=this;return function(){if(!1!==l.beforeCreate.call(l.context||e,a,l))return e.inProgress++,
1===e.inProgress&&d.event.trigger(e.name+"AjaxStart"),l.cacheResponse&&b[a]?(e.requests[a]={},setTimeout(function(){e._complete.call(e,l.context||l,k,b[a],"success",a,l);e._success.call(e,l.context||l,g,b[a]._successData,"success",b[a],l)},0)):l.async?e.requests[a]=d.ajax(l):d.ajax(l),a}},_removeXHR:function(a){this.opts.queue&&d.dequeue(document,this.qName);this.inProgress--;this.requests[a]=null;delete this.requests[a]},_isAbort:function(a,b){return!(!b.abortIsNoSuccess||a&&0!==a.readyState&&this.lastAbort!==
b.xhrID)},_complete:function(a,b,g,k,e,f){this._isAbort(g,f)&&(k="abort",f.abort.call(a,g,k,f));b.call(a,g,k,f);d.event.trigger(this.name+"AjaxComplete",[g,k,f]);f.domCompleteTrigger&&d(f.domCompleteTrigger).trigger(this.name+"DOMComplete",[g,k,f]).trigger("DOMComplete",[g,k,f]);this._removeXHR(e);this.inProgress||d.event.trigger(this.name+"AjaxStop")},_success:function(a,l,g,k,e,f){var m=this;if(!this._isAbort(e,f)){f.abortOld&&d.each(this.requests,function(a){if(a===f.xhrID)return!1;m.abort(a)});
if(f.cacheResponse&&!b[f.xhrID]&&(b[f.xhrID]={status:e.status,statusText:e.statusText,responseText:e.responseText,responseXML:e.responseXML,_successData:g},e.getAllResponseHeaders)){var h=e.getAllResponseHeaders();d.extend(b[f.xhrID],{getAllResponseHeaders:function(){return h},getResponseHeader:function(){var a={};d.each(h.split("\n"),function(b,c){var d=c.indexOf(":");a[c.substr(0,d)]=c.substr(d+2)});return function(b){return a[b]}}()})}l.call(a,g,k,e,f);d.event.trigger(this.name+"AjaxSuccess",[e,
f,g]);f.domSuccessTrigger&&d(f.domSuccessTrigger).trigger(this.name+"DOMSuccess",[g,f]).trigger("DOMSuccess",[g,f])}e=null},getData:function(a){if(a){var b=this.requests[a];!b&&this.opts.queue&&(b=d.grep(d(document).queue(this.qName),function(b,d){return b.xhrID===a})[0]);return b}return{requests:this.requests,queue:this.opts.queue?d(document).queue(this.qName):[],inProgress:this.inProgress}},abort:function(a){var b;if(a)(b=this.getData(a))&&b.abort?(this.lastAbort=a,b.abort(),this.lastAbort=!1):
d(document).queue(this.qName,d.grep(d(document).queue(this.qName),function(a,c){return a!==b})),b=null;else{var g=this,k=[];d.each(this.requests,function(a){k.push(a)});d.each(k,function(a,b){g.abort(b)})}},clear:function(a){d(document).clearQueue(this.qName);a&&this.abort()}};d.manageAjax._manager.prototype.getXHR=d.manageAjax._manager.prototype.getData;d.manageAjax.defaults={beforeCreate:d.noop,abort:d.noop,abortIsNoSuccess:!0,maxRequests:1,cacheResponse:!1,domCompleteTrigger:!1,domSuccessTrigger:!1,
preventDoubbleRequests:!0,queue:!1};d.each(d.manageAjax._manager.prototype,function(b,l){0!==b.indexOf("_")&&d.isFunction(l)&&(d.manageAjax[b]=function(g,k){if(!a[g])if("add"===b)d.manageAjax.create(g,k);else return;var e=Array.prototype.slice.call(arguments,1);a[g][b].apply(a[g],e)})})})(jQuery);var Attacklab=Attacklab||{};Attacklab.showdown=Attacklab.showdown||{};
Attacklab.showdown.converter=function(){var d,a,b,c=0;this.makeHtml=function(c){if(null!==c)return d=[],a=[],b=[],c=c.replace(/~/g,"~T"),c=c.replace(/\$/g,"~D"),c=c.replace(/\r\n/g,"\n"),c=c.replace(/\r/g,"\n"),c="\n\n"+c+"\n\n",c=L(c),c=c.replace(/^[ \t]+$/mg,""),c=g(c),c=l(c),c=e(c),c=D(c),c=c.replace(/~D/g,"$$"),c=c.replace(/~T/g,"~"),c=c.replace(/https?\:\/\/[^"\s\<\>]*[^.,;'">\:\s\<\>\)\]\!]/g,function(a,b){var d=c.slice(0,b),e=c.slice(b);return d.match(/<[^>]+$/)&&e.match(/^[^>]*>/)?a:"<a href='"+
a+"'>"+a+"</a>"}),c=c.replace(/[a-z0-9_\-+=.]+@[a-z0-9\-]+(\.[a-z0-9-]+)+/ig,function(a){return"<a href='mailto:"+a+"'>"+a+"</a>"})};var l=function(b){return b=b.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(b,c,e,f,h){c=c.toLowerCase();d[c]=E(e);if(f)return f+h;h&&(a[c]=h.replace(/"/g,"&quot;"));return""})},g=function(a){a=a.replace(/\n/g,"\n\n");a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,
k);a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,k);a=a.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,k);a=a.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,k);a=a.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,k);return a=a.replace(/\n\n/g,"\n")},k=function(a,c){var d;d=c.replace(/\n\n/g,"\n");d=d.replace(/^\n/,"");d=d.replace(/\n+$/g,"");return d="\n\n~K"+
(b.push(d)-1)+"K\n\n"},e=function(a){a=q(a);var c=x("<hr />");a=a.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,c);a=a.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,c);a=a.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,c);a=t(a);a=u(a);a=C(a);a=g(a);a=a.replace(/^\n+/g,"");a=a.replace(/\n+$/g,"");var d=a.split(/\n{2,}/g);a=[];for(var c=d.length,e=0;e<c;e++){var h=d[e];0<=h.search(/~K(\d+)K/g)?a.push(h):0<=h.search(/\S/)&&(h=f(h),h=h.replace(/\n/g,"<br />"),h=h.replace(/^([ \t]*)/g,"<p>"),h+="</p>",a.push(h))}c=
a.length;for(e=0;e<c;e++)for(;0<=a[e].search(/~K(\d+)K/);)d=b[RegExp.$1],d=d.replace(/\$/g,"$$$$"),a[e]=a[e].replace(/~K\d+K/,d);return a=a.join("\n\n")},f=function(a){a=w(a);a=m(a);a=a.replace(/\\(\\)/g,J);a=a.replace(/\\([`*_{}\[\]()>#+-.!])/g,J);a=a.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,n);a=a.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,n);a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,h);a=a.replace(/(\[((?:\[[^\]]*\]|\[\[[^\]]*\]\]|[^\[\]])*)\]\([ \t]*()<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,
h);a=a.replace(/(\[([^\[\]]+)\])()()()()()/g,h);a=y(a);a=E(a);a=a.replace(/(\*\*|__)(?=\S)([^\r]*?\S[\*_]*)\1/g,"<strong>$2</strong>");a=a.replace(/(\w)_(\w)/g,"$1~E95E$2");a=a.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>");return a=a.replace(/  +\n/g," <br />\n")},m=function(a){return a=a.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi,function(a){a=a.replace(/(.)<\/?code>(?=.)/g,"$1`");return a=K(a,"\\`*_")})},h=function(b,c,e,f,h,g,m,k){void 0==k&&(k="");b=f.toLowerCase();
if(""==h)if(""==b&&(b=e.toLowerCase().replace(/ ?\n/g," ")),void 0!=d[b])h=d[b],void 0!=a[b]&&(k=a[b]);else if(-1<c.search(/\(\s*\)$/m))h="";else return c;h=K(h,"*_");c='<a href="'+h+'"';""!=k&&(k=k.replace(/"/g,"&quot;"),k=K(k,"*_"),c+=' title="'+k+'"');return c+(">"+e+"</a>")},n=function(b,c,e,f,h,g,m,k){b=e;f=f.toLowerCase();k||(k="");if(""==h)if(""==f&&(f=b.toLowerCase().replace(/ ?\n/g," ")),void 0!=d[f])h=d[f],void 0!=a[f]&&(k=a[f]);else return c;b=b.replace(/"/g,"&quot;");h=K(h,"*_");c='<img src="'+
h+'" alt="'+b+'"';k=k.replace(/"/g,"&quot;");k=K(k,"*_");return c=c+(' title="'+k+'"')+" />"},q=function(a){a=a.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(a,b){return x("<h1>"+f(b)+"</h1>")});a=a.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(a,b){return x("<h2>"+f(b)+"</h2>")});return a=a.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(a,b,c){a=b.length;return x("<h"+a+">"+f(c)+"</h"+a+">")})},r,t=function(a){a+="~0";var b=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;
c?a=a.replace(b,function(a,b,c){a=b;c=-1<c.search(/[*+-]/g)?"ul":"ol";a=a.replace(/\n{2,}/g,"\n\n\n");a=r(a);a=a.replace(/\s+$/,"");return"<"+c+">"+a+"</"+c+">\n"}):(b=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,a=a.replace(b,function(a,b,c,d){a=c;d=-1<d.search(/[*+-]/g)?"ul":"ol";a=a.replace(/\n{2,}/g,"\n\n\n");a=r(a);return b+"<"+d+">\n"+a+"</"+d+">\n"}));return a=a.replace(/~0/,"")};r=function(a){c++;a=a.replace(/\n{2,}$/,"\n");a=(a+"~0").replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,
function(a,b,c,d,h){a=h;b||-1<a.search(/\n{2,}/)?a=e(F(a)):(a=t(F(a)),a=a.replace(/\n$/,""),a=f(a));return"<li>"+a+"</li>\n"});a=a.replace(/~0/g,"");c--;return a};var u=function(a){a=(a+"~0").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(a,b,c){a=v(F(b));a=L(a);a=a.replace(/^\n+/g,"");a=a.replace(/\n+$/g,"");a="<pre><code>"+a+"\n</code></pre>";return x(a)+c});return a=a.replace(/~0/,"")},x=function(a){a=a.replace(/(^\n+|\n+$)/g,"");return"\n\n~K"+(b.push(a)-1)+
"K\n\n"},w=function(a){return a=a.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(a,b,c,d,e){a=d.replace(/^([ \t]*)/g,"");a=a.replace(/[ \t]*$/g,"");a=v(a);return b+"<code>"+a+"</code>"})},v=function(a){a=a.replace(/&/g,"&amp;");a=a.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;");return a=K(a,"*_{}[]\\",!1)},C=function(a){return a=a.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(a,b){var c;c=b.replace(/^[ \t]*>[ \t]?/gm,"~0");c=c.replace(/~0/g,"");c=c.replace(/^[ \t]+$/gm,"");c=e(c);
c=c.replace(/(^|\n)/g,"$1  ");c=c.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(a,b){var c;c=b.replace(/^  /mg,"~0");return c=c.replace(/~0/g,"")});return x("<blockquote>\n"+c+"\n</blockquote>")})},E=function(a){a=a.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;");return a=a.replace(/<(?![a-z\/?\$!])/gi,"&lt;")},y=function(a){a=a.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>');return a=a.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(a,b){return B(D(b))})},
B=function(a){var b=[function(a){return"&#"+a.charCodeAt(0)+";"},function(a){a=a.charCodeAt(0);return"&#x"+("0123456789ABCDEF".charAt(a>>4)+"0123456789ABCDEF".charAt(a&15))+";"},function(a){return a}];a=("mailto:"+a).replace(/./g,function(a){if("@"==a)a=b[Math.floor(2*Math.random())](a);else if(":"!=a){var c=Math.random();a=.9<c?b[2](a):.45<c?b[1](a):b[0](a)}return a});a='<a href="'+a+'">'+a+"</a>";return a=a.replace(/">.+:/g,'">')},D=function(a){return a=a.replace(/~E(\d+)E/g,function(a,b){var c=
parseInt(b);return String.fromCharCode(c)})},F=function(a){a=a.replace(/^(\t|[ ]{1,4})/gm,"~0");return a=a.replace(/~0/g,"")},L=function(a){a=a.replace(/\t(?=\t)/g,"    ");a=a.replace(/\t/g,"~A~B");a=a.replace(/~B(.+?)~A/g,function(a,b,c){a=b;b=4-a.length%4;for(c=0;c<b;c++)a+=" ";return a});a=a.replace(/~A/g,"    ");return a=a.replace(/~B/g,"")},K=function(a,b,c){b="(["+b.replace(/([\[\]\\])/g,"\\$1")+"])";c&&(b="\\\\"+b);return a=a.replace(new RegExp(b,"g"),J)},J=function(a,b){return"~E"+b.charCodeAt(0)+
"E"}};var Showdown=Attacklab.showdown;Attacklab.fileLoaded&&Attacklab.fileLoaded("showdown.js");
(function(d,a){var b=d.document,c=d.navigator,l=d.setTimeout,g=d.clearTimeout,k=d.setInterval,e=d.clearInterval,f=d.getComputedStyle,m=d.encodeURIComponent,h=d.ActiveXObject,n=d.Error,q=d.Number.parseInt||d.parseInt,r=d.Number.parseFloat||d.parseFloat,t=d.Number.isNaN||d.isNaN,u=d.Date.now,x=d.Object.keys,w=d.Object.defineProperty,v=d.Object.prototype.hasOwnProperty,C=d.Array.prototype.slice,E=function(){var a=function(a){return a};if("function"===typeof d.wrap&&"function"===typeof d.unwrap)try{var c=
b.createElement("div"),e=d.unwrap(c);1===c.nodeType&&e&&1===e.nodeType&&(a=d.unwrap)}catch(f){}return a}(),y=function(a){return C.call(a,0)},B=function(){var b,c,d,e,f,h=y(arguments),g=h[0]||{};b=1;for(c=h.length;b<c;b++)if(null!=(d=h[b]))for(e in d)v.call(d,e)&&(f=d[e],g!==f&&f!==a&&(g[e]=f));return g},D=function(a){var b,c,d;if("object"!==typeof a||null==a||"number"===typeof a.nodeType)b=a;else if("number"===typeof a.length)for(b=[],c=0,d=a.length;c<d;c++)v.call(a,c)&&(b[c]=D(a[c]));else for(c in b=
{},a)v.call(a,c)&&(b[c]=D(a[c]));return b},F=function(a,b){if(a&&1===a.nodeType&&a.ownerDocument&&b&&(1===b.nodeType&&b.ownerDocument&&b.ownerDocument===a.ownerDocument||9===b.nodeType&&!b.ownerDocument&&b===a.ownerDocument)){do{if(a===b)return!0;a=a.parentNode}while(a)}return!1},L=function(a){var b;"string"===typeof a&&a&&(a.split("#")[0].split("?"),b=a.slice(0,a.lastIndexOf("/")+1));return b},K=function(){var c,d,e;if(b.currentScript&&(c=b.currentScript.src))return c;d=b.getElementsByTagName("script");
if(1===d.length)return d[0].src||a;if("readyState"in d[0])for(e=d.length;e--;)if("interactive"===d[e].readyState&&(c=d[e].src))return c;if("loading"===b.readyState&&(c=d[d.length-1].src))return c;var f;try{throw new n;}catch(h){d=h}if(d&&!(f=d.sourceURL||d.fileName)){f=d.stack;var g;"string"===typeof f&&f&&((d=f.match(/^(?:|[^:@]*@|.+\)@(?=http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/))&&d[1]?g=d[1]:(d=f.match(/\)@((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/))&&
d[1]&&(g=d[1]));f=g}return(c=f)?c:a},J=null==d.opener&&(!!d.top&&d!=d.top||!!d.parent&&d!=d.parent),A={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,sandboxed:null,unavailable:null,degraded:null,deactivated:null,overdue:null,ready:null},O,T={},p,W,P={},ga=null,aa=0,ya=0,ka={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed. May also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-outdated":"Flash is too outdated to support ZeroClipboard",
"flash-sandboxed":"Attempting to run Flash in a sandboxed iframe, which is impossible","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-degraded":"Flash is unable to preserve data fidelity when communicating with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate.\nThis may also mean that the ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity.\nMay also be attempting to run Flash in a sandboxed iframe, which is impossible.",
"flash-overdue":"Flash communication was established but NOT within the acceptable time limit","version-mismatch":"ZeroClipboard JS version number does not match ZeroClipboard SWF version number","clipboard-error":"At least one error was thrown while ZeroClipboard was attempting to inject your data into the clipboard","config-mismatch":"ZeroClipboard configuration does not match Flash's reality","swf-not-found":"The ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity"}},
Ga="flash-unavailable flash-degraded flash-overdue version-mismatch config-mismatch clipboard-error".split(" "),va="flash-disabled flash-outdated flash-sandboxed flash-unavailable flash-degraded flash-deactivated flash-overdue".split(" "),Za=new RegExp("^flash-("+va.map(function(a){return a.replace(/^flash-/,"")}).join("|")+")$"),sb=new RegExp("^flash-("+va.slice(1).map(function(a){return a.replace(/^flash-/,"")}).join("|")+")$"),I={swfPath:function(){var c;if(!(c=L(K()))){var d,e,f=b.getElementsByTagName("script");
for(c=f.length;c--;){if(!(e=f[c].src)){d=null;break}e=L(e);if(null==d)d=e;else if(d!==e){d=null;break}}c=d||a}return(c||"")+"ZeroClipboard.swf"}(),trustedDomains:d.location.host?[d.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3E4,autoActivate:!0,bubbleEvents:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",
forceHandCursor:!1,title:null,zIndex:999999999},ra=function(a){if("object"===typeof a&&null!==a)for(var b in a)if(v.call(a,b))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(b))I[b]=a[b];else if(null==A.bridge)if("containerId"===b||"swfObjectId"===b){var c=a[b];if("string"===typeof c&&c&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(c))I[b]=a[b];else throw Error("The specified `"+b+"` value is not valid as an HTML4 Element ID");}else I[b]=a[b];if("string"===typeof a&&a){if(v.call(I,a))return I[a]}else return D(I)},
X=function(){ub();for(var a=["userAgent","platform","appName"],b={},d=0,e=a.length;d<e;d++)a[d]in c&&(b[a[d]]=c[a[d]]);var a=["bridge"],d={},f;for(f in A)-1===a.indexOf(f)&&(d[f]=A[f]);return{browser:b,flash:d,zeroclipboard:{version:H.version,config:H.config()}}},ha=function(){return!!(A.disabled||A.outdated||A.sandboxed||A.unavailable||A.degraded||A.deactivated)},tb=function(b,c){var d,e,f,h={};if("string"===typeof b&&b)f=b.toLowerCase().split(/\s+/);else if("object"===typeof b&&b&&"undefined"===
typeof c)for(d in b)if(v.call(b,d)&&"string"===typeof d&&d&&"function"===typeof b[d])H.on(d,b[d]);if(f&&f.length){d=0;for(e=f.length;d<e;d++)b=f[d].replace(/^on/,""),h[b]=!0,T[b]||(T[b]=[]),T[b].push(c);h.ready&&A.ready&&H.emit({type:"ready"});if(h.error){d=0;for(e=va.length;d<e;d++)if(!0===A[va[d].replace(/^flash-/,"")]){H.emit({type:"error",name:va[d]});break}O!==a&&H.version!==O&&H.emit({type:"error",name:"version-mismatch",jsVersion:H.version,swfVersion:O})}}return H},Oa=function(a,b){var c,d,
e,f,h;if(0===arguments.length)f=x(T);else if("string"===typeof a&&a)f=a.split(/\s+/);else if("object"===typeof a&&a&&"undefined"===typeof b)for(c in a)v.call(a,c)&&"string"===typeof c&&c&&"function"===typeof a[c]&&H.off(c,a[c]);if(f&&f.length)for(c=0,d=f.length;c<d;c++)if(a=f[c].toLowerCase().replace(/^on/,""),(h=T[a])&&h.length)if(b)for(e=h.indexOf(b);-1!==e;)h.splice(e,1),e=h.indexOf(b,e);else h.length=0;return H},U=function(a){return"string"===typeof a&&a?D(T[a])||null:D(T)},ea=function(a){var c,
e,f;if(a=Qa(a)){c=a;var h=c.target||p||null,g="swf"===c._source;delete c._source;switch(c.type){case "error":!(h="flash-sandboxed"===c.name)&&(h=null,!1===J||c&&"error"===c.type&&c.name&&-1!==Ga.indexOf(c.name))&&(h=!1);"boolean"===typeof h&&(A.sandboxed=h);-1!==va.indexOf(c.name)?B(A,{disabled:"flash-disabled"===c.name,outdated:"flash-outdated"===c.name,unavailable:"flash-unavailable"===c.name,degraded:"flash-degraded"===c.name,deactivated:"flash-deactivated"===c.name,overdue:"flash-overdue"===c.name,
ready:!1}):"version-mismatch"===c.name&&(O=c.swfVersion,B(A,{disabled:!1,outdated:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:!1,ready:!1}));cc();break;case "ready":O=c.swfVersion;h=!0===A.deactivated;B(A,{disabled:!1,outdated:!1,sandboxed:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:h,ready:!h});cc();break;case "beforecopy":W=h;break;case "copy":var m,k,h=c.relatedTarget;!P["text/html"]&&!P["text/plain"]&&h&&(k=h.value||h.outerHTML||h.innerHTML)&&(m=h.value||h.textContent||h.innerText)?
(c.clipboardData.clearData(),c.clipboardData.setData("text/plain",m),k!==m&&c.clipboardData.setData("text/html",k)):!P["text/plain"]&&c.target&&(m=c.target.getAttribute("data-clipboard-text"))&&(c.clipboardData.clearData(),c.clipboardData.setData("text/plain",m));break;case "aftercopy":ca(c);H.clearData();if(m=h){var n;try{n=b.activeElement}catch(l){n=null}m=h!==n}m&&h.focus&&h.focus();break;case "_mouseover":H.focus(h);!0===I.bubbleEvents&&g&&(h&&h!==c.relatedTarget&&!F(c.relatedTarget,h)&&jb(B({},
c,{type:"mouseenter",bubbles:!1,cancelable:!1})),jb(B({},c,{type:"mouseover"})));break;case "_mouseout":H.blur();!0===I.bubbleEvents&&g&&(h&&h!==c.relatedTarget&&!F(c.relatedTarget,h)&&jb(B({},c,{type:"mouseleave",bubbles:!1,cancelable:!1})),jb(B({},c,{type:"mouseout"})));break;case "_mousedown":Xc(h,I.activeClass);!0===I.bubbleEvents&&g&&jb(B({},c,{type:c.type.slice(1)}));break;case "_mouseup":S(h,I.activeClass);!0===I.bubbleEvents&&g&&jb(B({},c,{type:c.type.slice(1)}));break;case "_click":W=null;
!0===I.bubbleEvents&&g&&jb(B({},c,{type:c.type.slice(1)}));break;case "_mousemove":!0===I.bubbleEvents&&g&&jb(B({},c,{type:c.type.slice(1)}))}c=/^_(?:click|mouse(?:over|out|down|up|move))$/.test(c.type)?!0:void 0;if(!c){if("ready"===a.type&&!0===A.overdue)return H.emit({type:"error",name:"flash-overdue"});c=B({},a);if("object"===typeof c&&c&&c.type&&(h=Ma(c),(m=(T["*"]||[]).concat(T[c.type]||[]))&&m.length)){var q,r;k=0;for(n=m.length;k<n;k++)g=m[k],q=this,"string"===typeof g&&"function"===typeof d[g]&&
(g=d[g]),"object"===typeof g&&g&&"function"===typeof g.handleEvent&&(q=g,g=g.handleEvent),"function"===typeof g&&(r=B({},c),Ba(g,q,[r],h))}if("copy"===a.type){e={};a={};if("object"===typeof P&&P){for(f in P)if(f&&v.call(P,f)&&"string"===typeof P[f]&&P[f])switch(f.toLowerCase()){case "text/plain":case "text":case "air:text":case "flash:text":e.text=P[f];a.text=f;break;case "text/html":case "html":case "air:html":case "flash:html":e.html=P[f];a.html=f;break;case "application/rtf":case "text/rtf":case "rtf":case "richtext":case "air:rtf":case "flash:rtf":e.rtf=
P[f],a.rtf=f}f={data:e,formatMap:a}}else f=void 0;e=f.data;ga=f.formatMap}return e}}},Hb=function(){var a=A.sandboxed;ub();"boolean"!==typeof A.ready&&(A.ready=!1);A.sandboxed!==a&&!0===A.sandboxed?(A.ready=!1,H.emit({type:"error",name:"flash-sandboxed"})):H.isFlashUnusable()||null!==A.bridge||(a=I.flashLoadTimeout,"number"===typeof a&&0<=a&&(aa=l(function(){"boolean"!==typeof A.deactivated&&(A.deactivated=!0);!0===A.deactivated&&H.emit({type:"error",name:"flash-deactivated"})},a)),A.overdue=!1,Wc())},
mb=function(){H.clearData();H.blur();H.emit("destroy");bc();H.off()},Wa=function(a,b){var c;if("object"===typeof a&&a&&"undefined"===typeof b)c=a,H.clearData();else if("string"===typeof a&&a)c={},c[a]=b;else return;for(var d in c)"string"===typeof d&&d&&v.call(c,d)&&"string"===typeof c[d]&&c[d]&&(P[d]=c[d])},Y=function(a){if("undefined"===typeof a){if(P)for(var b in P)v.call(P,b)&&delete P[b];ga=null}else"string"===typeof a&&v.call(P,a)&&delete P[a]},Ha=function(a){if("undefined"===typeof a)return D(P);
if("string"===typeof a&&v.call(P,a))return P[a]},Pa=function(a){if(a&&1===a.nodeType){p&&(S(p,I.activeClass),p!==a&&S(p,I.hoverClass));p=a;Xc(a,I.hoverClass);var b=a.getAttribute("title")||I.title;if("string"===typeof b&&b){var c=ac(A.bridge);c&&c.setAttribute("title",b)}a=!0===I.forceHandCursor||"pointer"===zc(a,"cursor");!0===A.ready&&(A.bridge&&"function"===typeof A.bridge.setHandCursor?A.bridge.setHandCursor(a):A.ready=!1);var d;p&&(d=ac(A.bridge))&&(a=Vb(p),B(d.style,{width:a.width+"px",height:a.height+
"px",top:a.top+"px",left:a.left+"px",zIndex:""+Ia(I.zIndex)}))}},sa=function(){var a=ac(A.bridge);a&&(a.removeAttribute("title"),a.style.left="0px",a.style.top="-9999px",a.style.width="1px",a.style.height="1px");p&&(S(p,I.hoverClass),S(p,I.activeClass),p=null)},la=function(){return p||null},Qa=function(c){var e;"string"===typeof c&&c?(e=c,c={}):"object"===typeof c&&c&&"string"===typeof c.type&&c.type&&(e=c.type);if(e){e=e.toLowerCase();!c.target&&(/^(copy|aftercopy|_click)$/.test(e)||"error"===e&&
"clipboard-error"===c.name)&&(c.target=W);B(c,{type:e,target:c.target||p||null,relatedTarget:c.relatedTarget||null,currentTarget:A&&A.bridge||null,timeStamp:c.timeStamp||u()||null});e=ka[c.type];"error"===c.type&&c.name&&e&&(e=e[c.name]);e&&(c.message=e);"ready"===c.type&&B(c,{target:null,version:A.version});"error"===c.type&&(Za.test(c.name)&&B(c,{target:null,minimumVersion:"11.0.0"}),sb.test(c.name)&&B(c,{version:A.version}));"copy"===c.type&&(c.clipboardData={setData:H.setData,clearData:H.clearData});
if("aftercopy"===c.type&&(e=ga,"object"===typeof c&&c&&"object"===typeof e&&e)){var f={},h;for(h in c)if(v.call(c,h))if("errors"===h){f[h]=c[h]?c[h].slice():[];for(var g=0,m=f[h].length;g<m;g++)f[h][g].format=e[f[h][g].format]}else if("success"!==h&&"data"!==h)f[h]=c[h];else{f[h]={};var g=c[h],k;for(k in g)k&&v.call(g,k)&&v.call(e,k)&&(f[h][e[k]]=g[k])}c=f}c.target&&!c.relatedTarget&&(h=c,k=(k=(k=c.target)&&k.getAttribute&&k.getAttribute("data-clipboard-target"))?b.getElementById(k):null,h.relatedTarget=
k);if((h=c)&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(h.type)){k=h.target;c="_mouseover"===h.type&&h.relatedTarget?h.relatedTarget:a;e="_mouseout"===h.type&&h.relatedTarget?h.relatedTarget:a;var g=Vb(k),f=g.left+("number"===typeof h._stageX?h._stageX:0),g=g.top+("number"===typeof h._stageY?h._stageY:0),m=f-(b.body.scrollLeft+b.documentElement.scrollLeft),n=g-(b.body.scrollTop+b.documentElement.scrollTop),l=(d.screenLeft||d.screenX||0)+m,q=(d.screenTop||d.screenY||0)+n,r="number"===typeof h.movementX?
h.movementX:0,t="number"===typeof h.movementY?h.movementY:0;delete h._stageX;delete h._stageY;B(h,{srcElement:k,fromElement:c,toElement:e,screenX:l,screenY:q,pageX:f,pageY:g,clientX:m,clientY:n,x:m,y:n,movementX:r,movementY:t,offsetX:0,offsetY:0,layerX:0,layerY:0})}return h}},Ma=function(a){return!/^(?:(?:before)?copy|destroy)$/.test(a&&"string"===typeof a.type&&a.type||"")},Ba=function(a,b,c,d){d?l(function(){a.apply(b,c)},0):a.apply(b,c)},ca=function(a){if(a.errors&&0<a.errors.length){var b=D(a);
B(b,{type:"error",name:"clipboard-error"});delete b.success;l(function(){H.emit(b)},0)}},jb=function(a){if(a&&"string"===typeof a.type&&a){var c,e=a.target||null;c=e&&e.ownerDocument||b;a=B({view:c.defaultView||d,canBubble:!0,cancelable:!0,detail:"click"===a.type?1:0,button:"number"===typeof a.which?a.which-1:"number"===typeof a.button?a.button:c.createEvent?0:1},a);e&&c.createEvent&&e.dispatchEvent&&(a=[a.type,a.canBubble,a.cancelable,a.view,a.detail,a.screenX,a.screenY,a.clientX,a.clientY,a.ctrlKey,
a.altKey,a.shiftKey,a.metaKey,a.button,a.relatedTarget],c=c.createEvent("MouseEvents"),c.initMouseEvent&&(c.initMouseEvent.apply(c,a),c._source="js",e.dispatchEvent(c)))}},z=function(){var a=I.flashLoadTimeout;if("number"===typeof a&&0<=a){var c=I.swfObjectId+"_fallbackContent";ya=k(function(){var a;var d=b.getElementById(c);if(d){a=f(d,null);var e=0<r(a.height),h=0<r(a.width),g=0<=r(a.top),m=0<=r(a.left),k=e&&h&&g&&m,d=k?null:Vb(d);a="none"!==a.display&&"collapse"!==a.visibility&&(k||!!d&&(e||0<
d.height)&&(h||0<d.width)&&(g||0<=d.top)&&(m||0<=d.left))}else a=!1;a&&(cc(),A.deactivated=null,H.emit({type:"error",name:"swf-not-found"}))},Math.min(1E3,a/10))}},ac=function(a){for(a=a&&a.parentNode;a&&"OBJECT"===a.nodeName&&a.parentNode;)a=a.parentNode;return a||null},Wc=function(){var a,c=A.bridge,e=ac(c);if(!c){var c=rd(d.location.host,I),f="never"===c?"none":"all",h,e=B({jsVersion:H.version},I),g,k,n,l="",q=[];e.trustedDomains&&("string"===typeof e.trustedDomains?h=[e.trustedDomains]:"object"===
typeof e.trustedDomains&&"length"in e.trustedDomains&&(h=e.trustedDomains));if(h&&h.length)for(g=0,k=h.length;g<k;g++)if(v.call(h,g)&&h[g]&&"string"===typeof h[g]&&(n=nc(h[g]))){if("*"===n){q.length=0;q.push(n);break}q.push.apply(q,[n,"//"+n,d.location.protocol+"//"+n])}q.length&&(l+="trustedOrigins="+m(q.join(",")));!0===e.forceEnhancedClipboard&&(l+=(l?"&":"")+"forceEnhancedClipboard=true");"string"===typeof e.swfObjectId&&e.swfObjectId&&(l+=(l?"&":"")+"swfObjectId="+m(e.swfObjectId));"string"===
typeof e.jsVersion&&e.jsVersion&&(l+=(l?"&":"")+"jsVersion="+m(e.jsVersion));h=l;e=I.swfPath;g=null==I||I&&!0===I.cacheBust?(-1===I.swfPath.indexOf("?")?"?":"&")+"noCache="+u():"";g=e+g;e=b.createElement("div");e.id=I.containerId;e.className=I.containerClass;e.style.position="absolute";e.style.left="0px";e.style.top="-9999px";e.style.width="1px";e.style.height="1px";e.style.zIndex=""+Ia(I.zIndex);k=b.createElement("div");e.appendChild(k);b.body.appendChild(e);n=b.createElement("div");l="activex"===
A.pluginType;n.innerHTML='<object id="'+I.swfObjectId+'" name="'+I.swfObjectId+'" width="100%" height="100%" '+(l?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+g+'"')+">"+(l?'<param name="movie" value="'+g+'"/>':"")+'<param name="allowScriptAccess" value="'+c+'"/><param name="allowNetworking" value="'+f+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+h+'"/><div id="'+I.swfObjectId+
'_fallbackContent">&nbsp;</div></object>';c=n.firstChild;E(c).ZeroClipboard=H;e.replaceChild(c,k);z()}c||((c=b[I.swfObjectId])&&(a=c.length)&&(c=c[a-1]),!c&&e&&(c=e.firstChild));A.bridge=c||null;return c},bc=function(){var b=A.bridge;if(b){var c=ac(b);c&&("activex"===A.pluginType&&"readyState"in b?(b.style.display="none",function nb(){if(4===b.readyState){for(var a in b)"function"===typeof b[a]&&(b[a]=null);b.parentNode&&b.parentNode.removeChild(b);c.parentNode&&c.parentNode.removeChild(c)}else l(nb,
10)}()):(b.parentNode&&b.parentNode.removeChild(b),c.parentNode&&c.parentNode.removeChild(c)));cc();A.ready=null;A.bridge=null;A.deactivated=null;O=a}},nc=function(a){if(null==a||""===a)return null;a=a.replace(/^\s+|\s+$/g,"");if(""===a)return null;var b=a.indexOf("//");a=-1===b?a:a.slice(b+2);var c=a.indexOf("/");return(a=-1===c?a:-1===b||0===c?null:a.slice(0,c))&&".swf"===a.slice(-4).toLowerCase()?null:a||null},rd=function(){return function(a,b){var c=nc(b.swfPath);null===c&&(c=a);var d=b.trustedDomains,
e,f,h,g=[];"string"===typeof d&&(d=[d]);if("object"===typeof d&&d&&"number"===typeof d.length)for(e=0,f=d.length;e<f;e++)if(v.call(d,e)&&(h=nc(d[e]))){if("*"===h){g.length=0;g.push("*");break}-1===g.indexOf(h)&&g.push(h)}d=g.length;if(0<d){if(1===d&&"*"===g[0])return"always";if(-1!==g.indexOf(a))return 1===d&&a===c?"sameDomain":"always"}return"never"}}(),Xc=function(a,b){var c,d,e,f=[];"string"===typeof b&&b&&(f=b.split(/\s+/));if(a&&1===a.nodeType&&0<f.length)if(a.classList)for(c=0,d=f.length;c<
d;c++)a.classList.add(f[c]);else if(a.hasOwnProperty("className")){e=" "+a.className+" ";c=0;for(d=f.length;c<d;c++)-1===e.indexOf(" "+f[c]+" ")&&(e+=f[c]+" ");a.className=e.replace(/^\s+|\s+$/g,"")}return a},S=function(a,b){var c,d,e,f=[];"string"===typeof b&&b&&(f=b.split(/\s+/));if(a&&1===a.nodeType&&0<f.length)if(a.classList&&0<a.classList.length)for(c=0,d=f.length;c<d;c++)a.classList.remove(f[c]);else if(a.className){e=(" "+a.className+" ").replace(/[\r\n\t]/g," ");c=0;for(d=f.length;c<d;c++)e=
e.replace(" "+f[c]+" "," ");a.className=e.replace(/^\s+|\s+$/g,"")}return a},zc=function(a,b){var c=f(a,null).getPropertyValue(b);return"cursor"!==b||c&&"auto"!==c||"A"!==a.nodeName?c:"pointer"},Vb=function(a){var c={left:0,top:0,width:0,height:0};if(a.getBoundingClientRect){a=a.getBoundingClientRect();var e=d.pageXOffset,f=d.pageYOffset,h=b.documentElement.clientLeft||0,g=b.documentElement.clientTop||0,m=0,k=0;if("relative"===zc(b.body,"position"))var k=b.body.getBoundingClientRect(),n=b.documentElement.getBoundingClientRect(),
m=k.left-n.left||0,k=k.top-n.top||0;c.left=a.left+e-h-m;c.top=a.top+f-g-k;c.width="width"in a?a.width:a.right-a.left;c.height="height"in a?a.height:a.bottom-a.top}return c},cc=function(){g(aa);aa=0;e(ya);ya=0},Ia=function(a){if(/^(?:auto|inherit)$/.test(a))return a;var b;"number"!==typeof a||t(a)?"string"===typeof a&&(b=Ia(q(a,10))):b=a;return"number"===typeof b?b:"auto"},ub=function(a){var b,c,e,f=A.sandboxed,g=null;a=!0===a;if(!1===J)g=!1;else{try{c=d.frameElement||null}catch(m){e={name:m.name,
message:m.message}}if(c&&1===c.nodeType&&"IFRAME"===c.nodeName)try{g=c.hasAttribute("sandbox")}catch(m){g=null}else{try{b=document.domain||null}catch(m){b=null}if(null===b||e&&"SecurityError"===e.name&&/(^|[\s\(\[@])sandbox(es|ed|ing|[\s\.,!\)\]@]|$)/.test(e.message.toLowerCase()))g=!0}}A.sandboxed=g;f===g||a||wa(h);return g},wa=function(a){function b(a){a=a.match(/[\d]+/g);a.length=3;return a.join(".")}function d(a){a&&(f=!0,a.version&&(m=b(a.version)),!m&&a.description&&(m=b(a.description)),a.filename&&
(a=a.filename,g=!!a&&(a=a.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(a)||"chrome.plugin"===a.slice(-13))))}var e,f=!1,h=!1,g=!1,m="";if(c.plugins&&c.plugins.length)a=c.plugins["Shockwave Flash"],d(a),c.plugins["Shockwave Flash 2.0"]&&(f=!0,m="2.0.0.11");else if(c.mimeTypes&&c.mimeTypes.length)a=(a=c.mimeTypes["application/x-shockwave-flash"])&&a.enabledPlugin,d(a);else if("undefined"!==typeof a){h=!0;try{e=new a("ShockwaveFlash.ShockwaveFlash.7"),
f=!0,m=b(e.GetVariable("$version"))}catch(k){try{e=new a("ShockwaveFlash.ShockwaveFlash.6"),f=!0,m="6.0.21"}catch(n){try{e=new a("ShockwaveFlash.ShockwaveFlash"),f=!0,m=b(e.GetVariable("$version"))}catch(l){h=!1}}}}A.disabled=!0!==f;A.outdated=m&&r(m)<r("11.0.0");A.version=m||"0.0.0";A.pluginType=g?"pepper":h?"activex":f?"netscape":"unknown"};wa(h);ub(!0);var H=function(){if(!(this instanceof H))return new H;"function"===typeof H._createClient&&H._createClient.apply(this,y(arguments))};w(H,"version",
{value:"2.2.0",writable:!1,configurable:!0,enumerable:!0});H.config=function(){return ra.apply(this,y(arguments))};H.state=function(){return X.apply(this,y(arguments))};H.isFlashUnusable=function(){return ha.apply(this,y(arguments))};H.on=function(){return tb.apply(this,y(arguments))};H.off=function(){return Oa.apply(this,y(arguments))};H.handlers=function(){return U.apply(this,y(arguments))};H.emit=function(){return ea.apply(this,y(arguments))};H.create=function(){return Hb.apply(this,y(arguments))};
H.destroy=function(){return mb.apply(this,y(arguments))};H.setData=function(){return Wa.apply(this,y(arguments))};H.clearData=function(){return Y.apply(this,y(arguments))};H.getData=function(){return Ha.apply(this,y(arguments))};H.focus=H.activate=function(){return Pa.apply(this,y(arguments))};H.blur=H.deactivate=function(){return sa.apply(this,y(arguments))};H.activeElement=function(){return la.apply(this,y(arguments))};var vb=0,fa={},Ib=0,Jb={},hb={};B(I,{autoActivate:!0});var Kb=function(a){var b=
this;b.id=""+vb++;fa[b.id]={instance:b,elements:[],handlers:{}};a&&b.clip(a);H.on("*",function(a){return b.emit(a)});H.on("destroy",function(){b.destroy()});H.create()},$a=function(b,c){var d,e,f,h={},g=(e=fa[this.id])&&e.handlers;if(!e)throw Error("Attempted to add new listener(s) to a destroyed ZeroClipboard client instance");if("string"===typeof b&&b)f=b.toLowerCase().split(/\s+/);else if("object"===typeof b&&b&&"undefined"===typeof c)for(d in b)if(v.call(b,d)&&"string"===typeof d&&d&&"function"===
typeof b[d])this.on(d,b[d]);if(f&&f.length){d=0;for(e=f.length;d<e;d++)b=f[d].replace(/^on/,""),h[b]=!0,g[b]||(g[b]=[]),g[b].push(c);h.ready&&A.ready&&this.emit({type:"ready",client:this});if(h.error){d=0;for(e=va.length;d<e;d++)if(A[va[d].replace(/^flash-/,"")]){this.emit({type:"error",name:va[d],client:this});break}O!==a&&H.version!==O&&this.emit({type:"error",name:"version-mismatch",jsVersion:H.version,swfVersion:O})}}return this},Ac=function(a,b){var c,d,e,f,h,g=(d=fa[this.id])&&d.handlers;if(!g)return this;
if(0===arguments.length)f=x(g);else if("string"===typeof a&&a)f=a.split(/\s+/);else if("object"===typeof a&&a&&"undefined"===typeof b)for(c in a)v.call(a,c)&&"string"===typeof c&&c&&"function"===typeof a[c]&&this.off(c,a[c]);if(f&&f.length)for(c=0,d=f.length;c<d;c++)if(a=f[c].toLowerCase().replace(/^on/,""),(h=g[a])&&h.length)if(b)for(e=h.indexOf(b);-1!==e;)h.splice(e,1),e=h.indexOf(b,e);else h.length=0;return this},Na=function(a){var b=null,c=fa[this.id]&&fa[this.id].handlers;c&&(b="string"===typeof a&&
a?c[a]?c[a].slice(0):[]:D(c));return b},Eb=function(a){var b;var c=a;if(!c||!c.type||c.client&&c.client!==this)b=!1;else{var e=(b=fa[this.id])&&b.elements,f=!!e&&0<e.length,h=!c.target||f&&-1!==e.indexOf(c.target),e=c.relatedTarget&&f&&-1!==e.indexOf(c.relatedTarget),c=c.client&&c.client===this;b=b&&(h||e||c)?!0:!1}if(b&&("object"===typeof a&&a&&"string"===typeof a.type&&a.type&&(a=B({},a)),a=B({},Qa(a),{client:this}),h=fa[this.id],"object"===typeof a&&a&&a.type&&h&&(b=Ma(a),(h=(h&&h.handlers["*"]||
[]).concat(h&&h.handlers[a.type]||[]))&&h.length)))for(var g,m,c=0,e=h.length;c<e;c++)f=h[c],g=this,"string"===typeof f&&"function"===typeof d[f]&&(f=d[f]),"object"===typeof f&&f&&"function"===typeof f.handleEvent&&(g=f,f=f.handleEvent),"function"===typeof f&&(m=B({},a),Ba(f,g,[m],b));return this},Bc=function(a){if(!fa[this.id])throw Error("Attempted to clip element(s) to a destroyed ZeroClipboard client instance");a=kb(a);for(var b=0;b<a.length;b++)if(v.call(a,b)&&a[b]&&1===a[b].nodeType){a[b].zcClippingId?
-1===Jb[a[b].zcClippingId].indexOf(this.id)&&Jb[a[b].zcClippingId].push(this.id):(a[b].zcClippingId="zcClippingId_"+Ib++,Jb[a[b].zcClippingId]=[this.id],!0===I.autoActivate&&ab(a[b]));var c=fa[this.id]&&fa[this.id].elements;-1===c.indexOf(a[b])&&c.push(a[b])}return this},oc=function(a){var b=fa[this.id];if(!b)return this;var b=b.elements,c;a="undefined"===typeof a?b.slice(0):kb(a);for(var d=a.length;d--;)if(v.call(a,d)&&a[d]&&1===a[d].nodeType){for(c=0;-1!==(c=b.indexOf(a[d],c));)b.splice(c,1);var e=
Jb[a[d].zcClippingId];if(e){for(c=0;-1!==(c=e.indexOf(this.id,c));)e.splice(c,1);if(0===e.length){if(!0===I.autoActivate&&(c=a[d])&&1===c.nodeType&&(e=hb[c.zcClippingId],"object"===typeof e&&e)){for(var f=void 0,h=void 0,g=["move","leave","enter","out","over"],m=0,k=g.length;m<k;m++)f="mouse"+g[m],h=e[f],"function"===typeof h&&c.removeEventListener(f,h,!1);delete hb[c.zcClippingId]}delete a[d].zcClippingId}}}return this},Cc=function(){var a=fa[this.id];return a&&a.elements?a.elements.slice(0):[]},
ua=function(){fa[this.id]&&(this.unclip(),this.off(),delete fa[this.id])},kb=function(a){"string"===typeof a&&(a=[]);return"number"!==typeof a.length?[a]:a},ab=function(a){if(a&&1===a.nodeType){var b=function(a){if(a||(a=d.event))"js"!==a._source&&(a.stopImmediatePropagation(),a.preventDefault()),delete a._source},c=function(c){if(c||(c=d.event))b(c),H.focus(a)};a.addEventListener("mouseover",c,!1);a.addEventListener("mouseout",b,!1);a.addEventListener("mouseenter",b,!1);a.addEventListener("mouseleave",
b,!1);a.addEventListener("mousemove",b,!1);hb[a.zcClippingId]={mouseover:c,mouseout:b,mouseenter:b,mouseleave:b,mousemove:b}}};H._createClient=function(){Kb.apply(this,y(arguments))};H.prototype.on=function(){return $a.apply(this,y(arguments))};H.prototype.off=function(){return Ac.apply(this,y(arguments))};H.prototype.handlers=function(){return Na.apply(this,y(arguments))};H.prototype.emit=function(){return Eb.apply(this,y(arguments))};H.prototype.clip=function(){return Bc.apply(this,y(arguments))};
H.prototype.unclip=function(){return oc.apply(this,y(arguments))};H.prototype.elements=function(){return Cc.apply(this,y(arguments))};H.prototype.destroy=function(){return ua.apply(this,y(arguments))};H.prototype.setText=function(a){if(!fa[this.id])throw Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");H.setData("text/plain",a);return this};H.prototype.setHtml=function(a){if(!fa[this.id])throw Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");
H.setData("text/html",a);return this};H.prototype.setRichText=function(a){if(!fa[this.id])throw Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");H.setData("application/rtf",a);return this};H.prototype.setData=function(){if(!fa[this.id])throw Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");H.setData.apply(this,y(arguments));return this};H.prototype.clearData=function(){if(!fa[this.id])throw Error("Attempted to clear pending clipboard data from a destroyed ZeroClipboard client instance");
H.clearData.apply(this,y(arguments));return this};H.prototype.getData=function(){if(!fa[this.id])throw Error("Attempted to get pending clipboard data from a destroyed ZeroClipboard client instance");return H.getData.apply(this,y(arguments))};"function"===typeof define&&define.amd?define(function(){return H}):"object"===typeof module&&module&&"object"===typeof module.exports&&module.exports?module.exports=H:d.ZeroClipboard=H})(function(){return this||window}());var Hogan={};
(function(d,a){function b(a){return""+(null===a||void 0===a?"":a)}d.Template=function(b,c,d,e){this.r=b||this.r;this.c=d;this.options=e;this.text=c||"";this.buf=a?[]:""};d.Template.prototype={r:function(){return""},v:function(a){a=b(a);return f.test(a)?a.replace(c,"&amp;").replace(l,"&lt;").replace(g,"&gt;").replace(k,"&#39;").replace(e,"&quot;"):a},t:b,render:function(a,b,c){return this.ri([a],b||{},c)},ri:function(a,b,c){return this.r(a,b,c)},rp:function(a,b,c,d){a=c[a];if(!a)return"";this.c&&"string"==
typeof a&&(a=this.c.compile(a,this.options));return a.ri(b,c,d)},rs:function(a,b,c){var d=a[a.length-1];if(m(d))for(var e=0;e<d.length;e++)a.push(d[e]),c(a,b,this),a.pop();else c(a,b,this)},s:function(a,b,c,d,e,f,g){if(m(a)&&0===a.length)return!1;"function"==typeof a&&(a=this.ls(a,b,c,d,e,f,g));c=""===a||!!a;!d&&c&&b&&b.push("object"==typeof a?a:b[b.length-1]);return c},d:function(a,b,c,d){var e=a.split("."),f=this.f(e[0],b,c,d),g=null;if("."===a&&m(b[b.length-2]))return b[b.length-1];for(a=1;a<e.length;a++)f&&
"object"==typeof f&&e[a]in f?(g=f,f=f[e[a]]):f="";if(d&&!f)return!1;!d&&"function"==typeof f&&(b.push(g),f=this.lv(f,b,c),b.pop());return f},f:function(a,b,c,d){for(var e=!1,f=null,g=!1,m=b.length-1;0<=m;m--)if((f=b[m])&&"object"==typeof f&&a in f){e=f[a];g=!0;break}if(!g)return d?!1:"";!d&&"function"==typeof e&&(e=this.lv(e,b,c));return e},ho:function(a,b,c,d,e){var f=this.c,g=this.options;g.delimiters=e;d=a.call(b,d);d=null==d?""+d:d.toString();this.b(f.compile(d,g).render(b,c));return!1},b:a?function(a){this.buf.push(a)}:
function(a){this.buf+=a},fl:a?function(){var a=this.buf.join("");this.buf=[];return a}:function(){var a=this.buf;this.buf="";return a},ls:function(a,b,c,d,e,f,g){b=b[b.length-1];var m=null;if(!d&&this.c&&0<a.length)return this.ho(a,b,c,this.text.substring(e,f),g);m=a.call(b);if("function"==typeof m){if(d)return!0;if(this.c)return this.ho(m,b,c,this.text.substring(e,f),g)}return m},lv:function(a,c,d){c=c[c.length-1];a=a.call(c);return"function"==typeof a&&(a=b(a.call(c)),this.c&&~a.indexOf("{{"))?
this.c.compile(a,this.options).render(c,d):b(a)}};var c=/&/g,l=/</g,g=/>/g,k=/\'/g,e=/\"/g,f=/[&<>\"\']/,m=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}})("undefined"!==typeof exports?exports:Hogan);
(function(d){function a(a){"}"===a.n.substr(a.n.length-1)&&(a.n=a.n.substring(0,a.n.length-1))}function b(a){return a.trim?a.trim():a.replace(/^\s*|\s*$/g,"")}function c(a,b,c){if(b.charAt(c)!=a.charAt(0))return!1;for(var d=1,e=a.length;d<e;d++)if(b.charAt(c+d)!=a.charAt(d))return!1;return!0}function l(a,b,c,d){b=[];for(var e=null,f=null;0<a.length;){f=a.shift();if(!(e="#"==f.tag)&&!(e="^"==f.tag))a:{for(var e=f,h=d,g=0,m=h.length;g<m;g++)if(h[g].o==e.n){e.tag="#";e=!0;break a}e=void 0}if(e)c.push(f),
f.nodes=l(a,f.tag,c,d);else if("/"==f.tag){if(0===c.length)throw Error("Closing tag without opener: /"+f.n);e=c.pop();if(a=f.n!=e.n){a:{a=0;for(c=d.length;a<c;a++)if(d[a].c==f.n&&d[a].o==e.n){d=!0;break a}d=void 0}a=!d}if(a)throw Error("Nesting error: "+e.n+" vs. "+f.n);e.end=f.i;return b}b.push(f)}if(0<c.length)throw Error("missing closing tag: "+c.pop().n);return b}function g(a){return a.replace(q,"\\\\").replace(m,'\\"').replace(h,"\\n").replace(n,"\\r")}function k(a){return~a.indexOf(".")?"d":
"f"}function e(a){for(var b="",c=0,d=a.length;c<d;c++){var f=a[c].tag;if("#"==f)var f=a[c].nodes,h=k(a[c].n),m=a[c].i,n=a[c].end,l=a[c].otag+" "+a[c].ctag,f="if(_.s(_."+h+'("'+g(a[c].n)+'",c,p,1),c,p,0,'+m+","+n+',"'+l+'")){_.rs(c,p,function(c,p,_){'+e(f)+"});c.pop();}",b=b+f;else"^"==f?(f=a[c].nodes,f="if(!_.s(_."+k(a[c].n)+'("'+g(a[c].n)+'",c,p,1),c,p,1,0,0,"")){'+e(f)+"};",b+=f):"<"==f||">"==f?b+='_.b(_.rp("'+g(a[c].n)+'",c,p,"'+(a[c].indent||"")+'"));':"{"==f||"&"==f?(f="_.b(_.t(_."+k(a[c].n)+
'("'+g(a[c].n)+'",c,p,0)));',b+=f):"\n"==f?b+='_.b("\\n"'+(a.length-1==c?"":" + i")+");":"_v"==f?(f="_.b(_.v(_."+k(a[c].n)+'("'+g(a[c].n)+'",c,p,0)));',b+=f):void 0===f&&(f='"'+g(a[c])+'"',b+="_.b("+f+");")}return b}var f=/\S/,m=/\"/g,h=/\n/g,n=/\r/g,q=/\\/g,r={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};d.scan=function(d,e){function h(){0<D.length&&(F.push(new String(D)),D="")}function g(a,b){h();var c;if(c=a)a:{c=!0;for(var d=J;d<F.length;d++)if(c=F[d].tag&&r[F[d].tag]<r._v||!F[d].tag&&
null===F[d].match(f),!c){c=!1;break a}}if(c){c=J;for(var e;c<F.length;c++)F[c].tag||((e=F[c+1])&&">"==e.tag&&(e.indent=F[c].toString()),F.splice(c,1))}else b||F.push({tag:"\n"});L=!1;J=F.length}function m(a,c){var d="="+O,e=a.indexOf(d,c),f=b(a.substring(a.indexOf("=",c)+1,e)).split(" ");A=f[0];O=f[1];return e+d.length-1}var k=d.length,n=0,l=null,q=null,D="",F=[],L=!1,K=0,J=0,A="{{",O="}}";e&&(e=e.split(" "),A=e[0],O=e[1]);for(K=0;K<k;K++)0==n?c(A,d,K)?(--K,h(),n=1):"\n"==d.charAt(K)?g(L):D+=d.charAt(K):
1==n?(K+=A.length-1,l=(q=r[d.charAt(K+1)])?d.charAt(K+1):"_v","="==l?(K=m(d,K),n=0):(q&&K++,n=2),L=K):c(O,d,K)?(F.push({tag:l,n:b(D),otag:A,ctag:O,i:"/"==l?L-O.length:K+A.length}),D="",K+=O.length-1,n=0,"{"==l&&("}}"==O?K++:a(F[F.length-1]))):D+=d.charAt(K);g(L,!0);return F};d.generate=function(a,b,c){a='var _=this;_.b(i=i||"");'+e(a)+"return _.fl();";return c.asString?"function(c,p,i){"+a+";}":new d.Template(new Function("c","p","i",a),b,d,c)};d.parse=function(a,b,c){c=c||{};return l(a,"",[],c.sectionTags||
[])};d.cache={};d.compile=function(a,b){b=b||{};var c=a+"||"+!!b.asString,d=this.cache[c];if(d)return d;d=this.generate(this.parse(this.scan(a,b.delimiters),a,b),a,b);return this.cache[c]=d}})("undefined"!==typeof exports?exports:Hogan);
(function(d){var a={key:null,endpoint:"oembed",secure:null,query:{},method:"replace",addImageStyles:!0,wrapElement:"div",className:"embed",batch:20,urlRe:null},b=/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,c=function(a){return null===a||void 0===a},l=function(a,b){var c=[],e=[];d.each(a,function(a,d){e.push(d);e.length===b&&(c.push(e),e=[])});0!==e.length&&c.push(e);return c},g=function(a){return c(a)?[]:d.isArray(a)?a:[a]},k=function(a){return d.map(a[0],function(b,
c){return[d.map(a,function(a){return a[c]})]})},e=function(a,b,c){this.init(a,b,c)};e.prototype={init:function(a){this.urls=a;this.count=0;this.results={};this._deferred=d.Deferred()},notify:function(a){this.results[a.original_url]=a;this.count++;this._deferred.notify.apply(this._deferred,[a]);if(this.count===this.urls.length){var b=this;a=d.map(this.urls,function(a){return b.results[a]});this._deferred.resolve(a)}return this},state:function(){return this._deferred.state.apply(this._deferred,arguments)}};
window.Keeper=e;var f=function(){};f.prototype={defaults:{},log:function(a,b){c(window.console)||c(window.console[a])||window.console[a].apply(window.console,[b])},build:function(a,b,e){e=c(e)?{}:e;var f=e.secure;c(f)&&(f="https:"===window.location.protocol?!0:!1);a=(f?"https":"http")+"://api.embed.ly/"+("objectify"===a?"2/":"1/")+a;f=c(e.query)?{}:e.query;f.key=e.key;a+="?"+d.param(f);return a+="&urls="+d.map(b,encodeURIComponent).join(",")},ajax:function(f,h,m){m=d.extend({},a,d.embedly.defaults,
"object"===typeof m&&m);if(c(m.key))return this.log("error","Embedly jQuery requires an API Key. Please sign up for one at http://embed.ly"),null;h=g(h);var t=new e(h),u=[],x=[],w;d.each(h,function(a,c){w=!1;b.test(c)&&(w=!0,null!==m.urlRe&&m.urlRe.test&&!m.urlRe.test(c)&&(w=!1));!0===w?u.push(c):x.push({url:c,original_url:c,error:!0,invalid:!0,type:"error",error_message:'Invalid URL "'+c+'"'})});h=l(u,m.batch);var v=this;d.each(h,function(a,b){d.ajax({url:v.build(f,b,m),dataType:"jsonp",success:function(a){d.each(k([b,
a]),function(a,b){var c=b[1];c.original_url=b[0];c.invalid=!1;t.notify(c)})}})});x.length&&setTimeout(function(){d.each(x,function(a,b){t.notify(b)})},1);return t._deferred},oembed:function(a,b){return this.ajax("oembed",a,b)},preview:function(a,b){return this.ajax("preview",a,b)},objectify:function(a,b){return this.ajax("objectify",a,b)},extract:function(a,b){return this.ajax("extract",a,b)}};var m=function(){};m.prototype={build:function(a,b,e){e=d.extend({},d.embedly.defaults,"object"===typeof e&&
e);var f=e.secure;c(f)&&(f="https:"===window.location.protocol?!0:!1);a=(f?"https":"http")+"://i.embed.ly/"+("display"===a?"1/":"1/display/")+a;f=c(e.query)?{}:e.query;f.key=e.key;a+="?"+d.param(f);return a+="&url="+encodeURIComponent(b)},display:function(a,b){return this.build("display",a,b)},resize:function(a,b){return this.build("resize",a,b)},fill:function(a,b){return this.build("fill",a,b)},crop:function(a,b){return this.build("crop",a,b)}};var h=function(a,b,c){this.init(a,b,c)};h.prototype=
{init:function(a,b,c){this.elem=a;this.$elem=d(a);this.original_url=b;this.options=c;this.loaded=d.Deferred();var e=this;this.loaded.done(function(){e.$elem.trigger("loaded",[e])});this.$elem.trigger("initialized",[this])},progress:function(a){d.extend(this,a);this.options.display?this.options.display.apply(this.elem,[this,this.elem]):"oembed"===this.options.endpoint&&this.display();this.loaded.resolve(this)},imageStyle:function(){var a=[],b;this.options.addImageStyles&&(this.options.query.maxwidth&&
(b=isNaN(parseInt(this.options.query.maxwidth,10))?"":"px",a.push("max-width: "+this.options.query.maxwidth+b)),this.options.query.maxheight&&(b=isNaN(parseInt(this.options.query.maxheight,10))?"":"px",a.push("max-height: "+this.options.query.maxheight+b)));return a.join(";")},display:function(){if("error"===this.type)return!1;this.style=this.imageStyle();var a;"photo"===this.type?(a="<a href='"+this.original_url+"' target='_blank'>",a+="<img style='"+this.style+"' src='"+this.url+"' alt='"+this.title+
"' /></a>"):"video"===this.type||"rich"===this.type?a=this.html:(this.title=this.title||this.url,a=this.thumbnail_url?"<img src='"+this.thumbnail_url+"' class='thumb' style='"+this.style+"'/>":"",a+="<a href='"+this.original_url+"'>"+this.title+"</a>",a+=this.provider_name?"<a href='"+this.provider_url+"' class='provider'>"+this.provider_name+"</a>":"",a+=this.description?'<div class="description">'+this.description+"</div>":"");this.options.wrapElement&&(a="<"+this.options.wrapElement+' class="'+
this.options.className+'">'+a+"</"+this.options.wrapElement+">");this.code=a;"replace"===this.options.method?this.$elem.replaceWith(this.code):"after"===this.options.method?this.$elem.after(this.code):"afterParent"===this.options.method?this.$elem.parent().after(this.code):"replaceParent"===this.options.method&&this.$elem.parent().replaceWith(this.code);this.$elem.trigger("displayed",[this])}};d.embedly=new f;d.embedly.display=new m;d.fn.embedly=function(b){if(void 0===b||"object"===typeof b){b=d.extend({},
a,d.embedly.defaults,"object"===typeof b&&b);if(c(b.key))return d.embedly.log("error","Embedly jQuery requires an API Key. Please sign up for one at http://embed.ly"),this.each(d.noop);var e={},f=function(a){if(!d.data(d(a),"embedly")){var c=d(a).attr("href"),f=new h(a,c,b);d.data(a,"embedly",f);e.hasOwnProperty(c)?e[c].push(f):e[c]=[f]}},g=this.each(function(){c(d(this).attr("href"))?d(this).find("a").each(function(){c(d(this).attr("href"))||f(this)}):f(this)}),m=d.embedly.ajax(b.endpoint,d.map(e,
function(a,b){return b}),b).progress(function(a){d.each(e[a.original_url],function(b,c){c.progress(a)})});b.progress&&m.progress(b.progress);b.done&&m.done(b.done);return g}};d.expr[":"].embedly=function(a){return!c(d(a).data("embedly"))};d.fn.display=function(b,e){c(b)&&(b="display");if(void 0===e||"object"===typeof e){e=d.extend({},a,d.embedly.defaults,"object"===typeof e&&e);if(c(e.key))return d.embedly.log("error","Embedly jQuery requires an API Key. Please sign up for one at http://embed.ly/display"),
this.each(d.noop);var f=function(a){var c=d(a);if(!c.data("display")){var f=c.data("src")||c.attr("href"),f={original_url:f,url:d.embedly.display.build(b,f,e)};c.data("display",f);c.trigger("initialized",[a]);a="<img src='"+f.url+"' />";c.is("a")?c.append(a):c.replaceWith(a)}},h=function(a){return c(d(a).data("src"))&&c(d(a).attr("href"))?!1:!0};return this.each(function(){h(this)?f(this):d(this).find("img,a").each(function(){h(this)&&f(this)})})}};d.expr[":"].display=function(a){return!c(d(a).data("display"))}})(jQuery,
window);
(function(d){function a(a){function g(){a?f.removeData(a):r&&delete b[r]}function k(){m.id=setTimeout(function(){m.fn()},t)}var e=this,f,m={},h=a?d.fn:d,n=arguments,q=4,r=n[1],t=n[2],u=n[3];"string"!==typeof r&&(q--,r=a=0,t=n[1],u=n[2]);a?(f=e.eq(0),f.data(a,m=f.data(a)||{})):r&&(m=b[r]||(b[r]={}));m.id&&clearTimeout(m.id);delete m.id;if(u)m.fn=function(a){"string"===typeof u&&(u=h[u]);!0!==u.apply(e,c.call(n,q))||a?g():k()},k();else{if(m.fn)return void 0===t?g():m.fn(!1===t),!0;g()}}var b={},c=Array.prototype.slice;
d.doTimeout=function(){return a.apply(window,[0].concat(c.call(arguments)))};d.fn.doTimeout=function(){var b=c.call(arguments),d=a.apply(this,["doTimeout"+b[0]].concat(b));return"number"===typeof b[0]||"number"===typeof b[1]?this:d}})(jQuery);
(function(d){function a(){var a;a=d(this);if(!a.data("timeago")){a.data("timeago",{datetime:l.datetime(a)});var c=d.trim(a.text());0<c.length&&a.attr("title",c)}a=a.data("timeago");isNaN(a.datetime)||d(this).text(b(a.datetime));return this}function b(a){return l.inWords(c(a))}function c(a){return(new Date).getTime()-a.getTime()}d.timeago=function(a){return a instanceof Date?b(a):"string"==typeof a?b(d.timeago.parse(a)):b(d.timeago.datetime(a))};var l=d.timeago;d.extend(d.timeago,{settings:{refreshMillis:6E4,
allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},inWords:function(a){function b(a,f){return(d.isFunction(a)?a(f):a).replace(/%d/i,c.numbers&&c.numbers[f]||f)}var c=this.settings.strings,f=c.prefixAgo,m=c.suffixAgo;this.settings.allowFuture&&
(0>a&&(f=c.prefixFromNow,m=c.suffixFromNow),a=Math.abs(a));a/=1E3;var h=a/60,l=h/60,q=l/24,r=q/365;a=45>a&&b(c.seconds,Math.round(a))||90>a&&b(c.minute,1)||45>h&&b(c.minutes,Math.round(h))||90>h&&b(c.hour,1)||24>l&&b(c.hours,Math.round(l))||48>l&&b(c.day,1)||30>q&&b(c.days,Math.floor(q))||60>q&&b(c.month,1)||365>q&&b(c.months,Math.floor(q/30))||2>r&&b(c.year,1)||b(c.years,Math.floor(r));return d.trim([f,a,m].join(" "))},parse:function(a){a=d.trim(a);a=a.replace(/\.\d\d\d/,"");a=a.replace(/-/,"/").replace(/-/,
"/");a=a.replace(/T/," ").replace(/Z/," UTC");a=a.replace(/([\+-]\d\d)\:?(\d\d)/," $1$2");return new Date(a)},datetime:function(a){a="time"==d(a).get(0).tagName.toLowerCase()?d(a).attr("datetime"):d(a).attr("title");return l.parse(a)}});d.fn.timeago=function(){var b=this;b.each(a);var c=l.settings;0<c.refreshMillis&&setInterval(function(){b.each(a)},c.refreshMillis);return b};document.createElement("abbr");document.createElement("time")})(jQuery);
(function(d){var a={className:"autosizejs",id:"autosizejs",append:"\n",callback:!1,resizeDelay:10,placeholder:!0},b="fontFamily fontSize fontWeight fontStyle letterSpacing textTransform wordSpacing textIndent whiteSpace".split(" "),c,l=d('<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>').data("autosize",
!0)[0];l.style.lineHeight="99px";"99px"===d(l).css("lineHeight")&&b.push("lineHeight");l.style.lineHeight="";d.fn.autosize=function(g){if(!this.length)return this;g=d.extend({},a,g||{});l.parentNode!==document.body&&d(document.body).append(l);return this.each(function(){function a(){var b,c=window.getComputedStyle?window.getComputedStyle(h,null):null;c?(b=parseFloat(c.width),"border-box"!==c.boxSizing&&"border-box"!==c.webkitBoxSizing&&"border-box"!==c.mozBoxSizing||d.each(["paddingLeft","paddingRight",
"borderLeftWidth","borderRightWidth"],function(a,d){b-=parseFloat(c[d])})):b=n.width();l.style.width=Math.max(b,0)+"px"}function e(){var e={};c=h;l.className=g.className;l.id=g.id;q=parseFloat(n.css("maxHeight"));d.each(b,function(a,b){e[b]=n.css(b)});d(l).css(e).attr("wrap",n.attr("wrap"));a();if(window.chrome){var f=h.style.width;h.style.width="0px";h.style.width=f}}function f(){var b,d;c!==h?e():a();l.value=!h.value&&g.placeholder?n.attr("placeholder")||"":h.value;l.value+=g.append||"";l.style.overflowY=
h.style.overflowY;d=parseFloat(h.style.height)||0;l.scrollTop=0;l.scrollTop=9E4;b=l.scrollTop;q&&b>q?(h.style.overflowY="scroll",b=q):(h.style.overflowY="hidden",b<r&&(b=r));b+=t;.01<Math.abs(d-b)&&(h.style.height=b+"px",l.className=l.className,u&&g.callback.call(h,h),n.trigger("autosize.resized"))}function m(){clearTimeout(w);w=setTimeout(function(){var a=n.width();a!==v&&(v=a,f())},parseInt(g.resizeDelay,10))}var h=this,n=d(h),q,r,t=0,u=d.isFunction(g.callback),x={height:h.style.height,overflow:h.style.overflow,
overflowY:h.style.overflowY,wordWrap:h.style.wordWrap,resize:h.style.resize},w,v=n.width(),C=n.css("resize");if(!n.data("autosize")){n.data("autosize",!0);if("border-box"===n.css("box-sizing")||"border-box"===n.css("-moz-box-sizing")||"border-box"===n.css("-webkit-box-sizing"))t=n.outerHeight()-n.height();r=Math.max(parseFloat(n.css("minHeight"))-t||0,n.height());n.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word"});"vertical"===C?n.css("resize","none"):"both"===C&&n.css("resize","horizontal");
if("onpropertychange"in h)if("oninput"in h)n.on("input.autosize keyup.autosize",f);else n.on("propertychange.autosize",function(){"value"===event.propertyName&&f()});else n.on("input.autosize",f);if(!1!==g.resizeDelay)d(window).on("resize.autosize",m);n.on("autosize.resize",f);n.on("autosize.resizeIncludeStyle",function(){c=null;f()});n.on("autosize.destroy",function(){c=null;clearTimeout(w);d(window).off("resize",m);n.off("autosize").off(".autosize").css(x).removeData("autosize")});f()}})}})(jQuery||
$);
(function(d){function a(a){"string"===typeof a.data&&(a.data={keys:a.data});if(a.data&&a.data.keys&&"string"===typeof a.data.keys){var c=a.handler,l=a.data.keys.toLowerCase().split(" "),g="text password number email url range date month week time datetime datetime-local search color tel".split(" ");a.handler=function(k){if(a.data.allowInTextInputField||this===k.target||!(/textarea|select/i.test(k.target.nodeName)||-1<d.inArray(k.target.type,g)||d(k.target).prop("isContentEditable"))){var e=d.hotkeys.specialKeys[k.keyCode],f=
0<k.which&&String.fromCharCode(k.which).toLowerCase(),m="",h={};k.altKey&&"alt"!==e&&(m+="alt+");k.ctrlKey&&"ctrl"!==e&&(m+="ctrl+");k.metaKey&&!k.ctrlKey&&"meta"!==e&&(m+="meta+");k.shiftKey&&"shift"!==e&&(m+="shift+");e&&(h[m+e]=!0);f&&(h[m+f]=!0,h[m+d.hotkeys.shiftNums[f]]=!0,"shift+"===m&&(h[d.hotkeys.shiftNums[f]]=!0));e=0;for(f=l.length;e<f;e++)if(h[l[e]])return c.apply(this,arguments)}}}}d.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",
18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",186:";",191:"/",220:"\\",222:"'",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",
5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};d.each(["keydown","keyup","keypress"],function(){d.event.special[this]={add:a}})})(this.jQuery);
(function(){function d(a,c){function g(a,b){return function(){return a.apply(b,arguments)}}var h;c=c||{};this.trackingClick=!1;this.trackingClickStart=0;this.targetElement=null;this.lastTouchIdentifier=this.touchStartY=this.touchStartX=0;this.touchBoundary=c.touchBoundary||10;this.layer=a;this.tapDelay=c.tapDelay||200;this.tapTimeout=c.tapTimeout||700;if(!d.notNeeded(a)){for(var k="onMouse onClick onTouchStart onTouchMove onTouchEnd onTouchCancel".split(" "),l=0,r=k.length;l<r;l++)this[k[l]]=g(this[k[l]],
this);b&&(a.addEventListener("mouseover",this.onMouse,!0),a.addEventListener("mousedown",this.onMouse,!0),a.addEventListener("mouseup",this.onMouse,!0));a.addEventListener("click",this.onClick,!0);a.addEventListener("touchstart",this.onTouchStart,!1);a.addEventListener("touchmove",this.onTouchMove,!1);a.addEventListener("touchend",this.onTouchEnd,!1);a.addEventListener("touchcancel",this.onTouchCancel,!1);Event.prototype.stopImmediatePropagation||(a.removeEventListener=function(b,c,d){var f=Node.prototype.removeEventListener;
"click"===b?f.call(a,b,c.hijacked||c,d):f.call(a,b,c,d)},a.addEventListener=function(b,c,d){var f=Node.prototype.addEventListener;"click"===b?f.call(a,b,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):f.call(a,b,c,d)});"function"===typeof a.onclick&&(h=a.onclick,a.addEventListener("click",function(a){h(a)},!1),a.onclick=null)}}var a=0<=navigator.userAgent.indexOf("Windows Phone"),b=0<navigator.userAgent.indexOf("Android")&&!a,c=/iP(ad|hone|od)/.test(navigator.userAgent)&&!a,l=
c&&/OS 4_\d(_\d)?/.test(navigator.userAgent),g=c&&/OS [6-7]_\d/.test(navigator.userAgent),k=0<navigator.userAgent.indexOf("BB10");d.prototype.needsClick=function(a){switch(a.nodeName.toLowerCase()){case "button":case "select":case "textarea":if(a.disabled)return!0;break;case "input":if(c&&"file"===a.type||a.disabled)return!0;break;case "label":case "iframe":case "video":return!0}return/\bneedsclick\b/.test(a.className)};d.prototype.needsFocus=function(a){switch(a.nodeName.toLowerCase()){case "textarea":return!0;
case "select":return!b;case "input":switch(a.type){case "button":case "checkbox":case "file":case "image":case "radio":case "submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}};d.prototype.sendClick=function(a,b){var c,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur();d=b.changedTouches[0];c=document.createEvent("MouseEvents");c.initMouseEvent(this.determineEventType(a),!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,
!1,!1,!1,!1,0,null);c.forwardedTouchEvent=!0;a.dispatchEvent(c)};d.prototype.determineEventType=function(a){return b&&"select"===a.tagName.toLowerCase()?"mousedown":"click"};d.prototype.focus=function(a){var b;c&&a.setSelectionRange&&0!==a.type.indexOf("date")&&"time"!==a.type&&"month"!==a.type?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()};d.prototype.updateScrollParent=function(a){var b,c;b=a.fastClickScrollParent;if(!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c;a.fastClickScrollParent=
c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)};d.prototype.getTargetElementFromEventTarget=function(a){return a.nodeType===Node.TEXT_NODE?a.parentNode:a};d.prototype.onTouchStart=function(a){var b,d,h;if(1<a.targetTouches.length)return!0;b=this.getTargetElementFromEventTarget(a.target);d=a.targetTouches[0];if(c){h=window.getSelection();if(h.rangeCount&&!h.isCollapsed)return!0;if(!l){if(d.identifier&&d.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;
this.lastTouchIdentifier=d.identifier;this.updateScrollParent(b)}}this.trackingClick=!0;this.trackingClickStart=a.timeStamp;this.targetElement=b;this.touchStartX=d.pageX;this.touchStartY=d.pageY;a.timeStamp-this.lastClickTime<this.tapDelay&&a.preventDefault();return!0};d.prototype.touchHasMoved=function(a){a=a.changedTouches[0];var b=this.touchBoundary;return Math.abs(a.pageX-this.touchStartX)>b||Math.abs(a.pageY-this.touchStartY)>b?!0:!1};d.prototype.onTouchMove=function(a){if(!this.trackingClick)return!0;
if(this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))this.trackingClick=!1,this.targetElement=null;return!0};d.prototype.findControl=function(a){return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")};d.prototype.onTouchEnd=function(a){var d,m,h=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<
this.tapDelay)return this.cancelNextClick=!0;if(a.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;this.cancelNextClick=!1;this.lastClickTime=a.timeStamp;d=this.trackingClickStart;this.trackingClick=!1;this.trackingClickStart=0;g&&(m=a.changedTouches[0],h=document.elementFromPoint(m.pageX-window.pageXOffset,m.pageY-window.pageYOffset)||h,h.fastClickScrollParent=this.targetElement.fastClickScrollParent);m=h.tagName.toLowerCase();if("label"===m){if(d=this.findControl(h)){this.focus(h);if(b)return!1;
h=d}}else if(this.needsFocus(h)){if(100<a.timeStamp-d||c&&window.top!==window&&"input"===m)return this.targetElement=null,!1;this.focus(h);this.sendClick(h,a);c&&"select"===m||(this.targetElement=null,a.preventDefault());return!1}if(c&&!l&&(d=h.fastClickScrollParent)&&d.fastClickLastScrollTop!==d.scrollTop)return!0;this.needsClick(h)||(a.preventDefault(),this.sendClick(h,a));return!1};d.prototype.onTouchCancel=function(){this.trackingClick=!1;this.targetElement=null};d.prototype.onMouse=function(a){return this.targetElement&&
!a.forwardedTouchEvent&&a.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1):!0:!0};d.prototype.onClick=function(a){if(this.trackingClick)return this.targetElement=null,this.trackingClick=!1,!0;if("submit"===a.target.type&&0===a.detail)return!0;a=this.onMouse(a);a||(this.targetElement=null);return a};d.prototype.destroy=function(){var a=this.layer;b&&(a.removeEventListener("mouseover",
this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0));a.removeEventListener("click",this.onClick,!0);a.removeEventListener("touchstart",this.onTouchStart,!1);a.removeEventListener("touchmove",this.onTouchMove,!1);a.removeEventListener("touchend",this.onTouchEnd,!1);a.removeEventListener("touchcancel",this.onTouchCancel,!1)};d.notNeeded=function(a){var c,d;if("undefined"===typeof window.ontouchstart)return!0;if(d=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||
[,0])[1])if(b){if((c=document.querySelector("meta[name=viewport]"))&&(-1!==c.content.indexOf("user-scalable=no")||31<d&&document.documentElement.scrollWidth<=window.outerWidth))return!0}else return!0;return k&&(c=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),10<=c[1]&&3<=c[2]&&(c=document.querySelector("meta[name=viewport]"))&&(-1!==c.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))||"none"===a.style.msTouchAction||"manipulation"===a.style.touchAction||
27<=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]&&(c=document.querySelector("meta[name=viewport]"))&&(-1!==c.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth)?!0:"none"===a.style.touchAction||"manipulation"===a.style.touchAction?!0:!1};d.attach=function(a,b){return new d(a,b)};"function"===typeof define&&"object"===typeof define.amd&&define.amd?define(function(){return d}):"undefined"!==typeof module&&module.exports?(module.exports=d.attach,
module.exports.FastClick=d):window.FastClick=d})();$(function(){FastClick.attach(document.body)});
(function e$$0(a,b,c){function l(e,f){if(!b[e]){if(!a[e]){var m="function"==typeof require&&require;if(!f&&m)return m(e,!0);if(g)return g(e,!0);m=Error("Cannot find module '"+e+"'");throw m.code="MODULE_NOT_FOUND",m;}m=b[e]={exports:{}};a[e][0].call(m.exports,function(b){var c=a[e][1][b];return l(c?c:b)},m,m.exports,e$$0,a,b,c)}return b[e].exports}for(var g="function"==typeof require&&require,k=0;k<c.length;k++)l(c[k]);return l})({1:[function(d,a,b){(function(b){var l,g;g=d("./util/merge.coffee");
l=function(){function a(b,c){this._projectId=0;this._projectKey="";this._host="https://api.airbrake.io";this._context={};this._params={};this._env={};this._session={};this._processor=b;this._reporters=[];this._filters=[];c&&this.addReporter(c)}a.prototype.setProject=function(a,b){this._projectId=a;return this._projectKey=b};a.prototype.setHost=function(a){return this._host=a};a.prototype.addContext=function(a){return g(this._context,a)};a.prototype.setEnvironmentName=function(a){return this._context.environment=
a};a.prototype.addParams=function(a){return g(this._params,a)};a.prototype.addEnvironment=function(a){return g(this._env,a)};a.prototype.addSession=function(a){return g(this._session,a)};a.prototype.addReporter=function(a){return this._reporters.push(a)};a.prototype.addFilter=function(a){return this._filters.push(a)};a.prototype.push=function(a){var d,m;d={language:"JavaScript",sourceMapEnabled:!0};null!=(m=b.navigator)&&m.userAgent&&(d.userAgent=b.navigator.userAgent);b.location&&(d.url=String(b.location));
return this._processor(a.error||a,function(b){return function(c,m){var k,l,u,x,w;l={notifier:{name:"airbrake-js-"+c,version:"0.3.10",url:"https://github.com/airbrake/airbrake-js"},errors:[m],context:g(d,b._context,a.context),params:g({},b._params,a.params),environment:g({},b._env,a.environment),session:g({},b._session,a.session)};w=b._filters;u=0;for(x=w.length;u<x;u++)if(k=w[u],!k(l))return;w=b._reporters;u=0;for(x=w.length;u<x;u++)k=w[u],k(l,{projectId:b._projectId,projectKey:b._projectKey,host:b._host})}}(this))};
a.prototype._wrapArguments=function(a){var b,c,d,g;c=d=0;for(g=a.length;d<g;c=++d)b=a[c],"function"===typeof b&&(a[c]=this.wrap(b));return a};a.prototype.wrap=function(a){var b,c,d;if(a.__airbrake__)return a;d=this;b=function(){var b,c;b=d._wrapArguments(arguments);try{return a.apply(this,b)}catch(f){return c=f,b=Array.prototype.slice.call(arguments),d.push({error:c,params:{arguments:b}}),null}};for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);b.__airbrake__=!0;b.__inner__=a;return b};return a}();a.exports=
l}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./util/merge.coffee":10}],2:[function(d,a,b){a="undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{};var c,l;d("./util/compat.coffee");b=d("./client.coffee");c=d("./processors/stack.coffee");l=d("./reporters/hybrid.coffee");b=new b(c,l);b.consoleReporter=d("./reporters/console.coffee");c=a.Airbrake;a.Airbrake=b;d("./util/slurp_config_from_dom.coffee")(b);
if(null!=c){null!=c.wrap&&(b.wrap=c.wrap);if(null!=c.onload)c.onload(b);a=0;for(l=c.length;a<l;a++)d=c[a],b.push(d)}},{"./client.coffee":1,"./processors/stack.coffee":3,"./reporters/console.coffee":4,"./reporters/hybrid.coffee":5,"./util/compat.coffee":8,"./util/slurp_config_from_dom.coffee":11}],3:[function(d,a,b){var c,l;c=[{name:"v8",re:/^\s*at\s(.+?)\s\((?:(?:(.+):(\d+):(\d+))|(.+))\)$/,fn:function(a){return{"function":a[1],file:a[2]||a[5],line:a[3]&&parseInt(a[3],10)||0,column:a[4]&&parseInt(a[4],
10)||0}}},{name:"firefox30",re:/^(.*)@(.+):(\d+):(\d+)$/,fn:function(a){var b,c,d;c=a[1];b=a[2];if(d=b.match(/^(\S+)\s(line\s\d+\s>\seval.*)$/))c=0<c.length?c+" "+d[2]:d[2],b=d[1];return{"function":c,file:b,line:parseInt(a[3],10),column:parseInt(a[4],10)}}},{name:"firefox14",re:/^(.*)@(.+):(\d+)$/,fn:function(a,b,c){b=0===b?c.columnNumber||0:0;return{"function":a[1],file:a[2],line:parseInt(a[3],10),column:b}}},{name:"v8-short",re:/^\s*at\s(.+):(\d+):(\d+)$/,fn:function(a){return{"function":"",file:a[1],
line:parseInt(a[2],10),column:parseInt(a[3],10)}}},{name:"default",re:/.+/,fn:function(a){return{"function":a[0],file:"",line:0,column:0}}}];l=/^\S+:\s.+$/;a.exports=function(a,b){var d,f,m,h,n,q,r,t,u,x,w;q="nostack";h=(a.stack||"").split("\n");d=[];f=t=0;for(x=h.length;t<x;f=++t)if(m=h[f],""!==m)for(u=0,w=c.length;u<w;u++)if(r=c[u],n=m.match(r.re)){q=r.name;d.push(r.fn(n,f,a));break}("v8"===q||"v8-short"===q)&&0<d.length&&d[0]["function"].match(l)&&(d=d.slice(1));0!==d.length||null==a.fileName&&
null==a.lineNumber&&null==a.columnNumber||d.push({"function":"",file:a.fileName||"",line:parseInt(a.lineNumber,10)||0,column:parseInt(a.columnNumber,10)||0});0!==d.length||null==a.filename&&null==a.lineno&&null==a.column&&null==a.colno||d.push({"function":"",file:a.filename||"",line:parseInt(a.lineno,10)||0,column:parseInt(a.column||a.colno,10)||0});f=null!=a.message?a.message:String(a);null!=a.name?(n=a.name,f=n+": "+f):(n=/^Uncaught\s(.+?):\s.+$/,n=(n=f.match(n))?n[1]:"");return b(q,{type:n,message:f,
backtrace:d})}},{}],4:[function(d,a,b){var c;c=function(a){var b,c,d,f;b=""+(a.message+"\n");f=a.backtrace;c=0;for(d=f.length;c<d;c++)a=f[c],""!==a["function"]&&(b+=" at "+a["function"]),""!==a.file&&(b+=" in "+a.file+":"+a.line,0!==a.column&&(b+=":"+a.column)),b+="\n";return b};a.exports=function(a){var b,d,e,f;e=a.errors;f=[];b=0;for(d=e.length;b<d;b++)a=e[b],f.push("undefined"!==typeof console&&null!==console?"function"===typeof console.log?console.log(c(a)):void 0:void 0);return f}},{}],5:[function(d,
a,b){a.exports="withCredentials"in new XMLHttpRequest?d("./xhr.coffee"):d("./jsonp.coffee")},{"./jsonp.coffee":6,"./xhr.coffee":7}],6:[function(d,a,b){(function(b){var l,g;g=d("../util/jsonify_notice.coffee");l=0;a.exports=function(a,d){var f,m,h,n,q;l++;f="airbrakeCb"+String(l);b[f]=function(a){"undefined"!==typeof console&&null!==console&&"function"===typeof console.debug&&console.debug("airbrake: error #%s was reported: %s",a.id,a.url);try{return delete b[f]}catch(d){return b[f]=void 0}};m=encodeURIComponent(g(a));
q=d.host+"/api/v3/projects/"+d.projectId+"/create-notice?key="+d.projectKey+"&callback="+f+"&body="+m;m=b.document;h=m.getElementsByTagName("head")[0];n=m.createElement("script");n.src=q;m=function(){return h.removeChild(n)};n.onload=m;n.onerror=m;return h.appendChild(n)}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"../util/jsonify_notice.coffee":9}],7:[function(d,a,b){(function(b){var l;l=d("../util/jsonify_notice.coffee");
a.exports=function(a,d){var e,f,m;m=d.host+"/api/v3/projects/"+d.projectId+"/notices?key="+d.projectKey;e=l(a);f=new b.XMLHttpRequest;f.open("POST",m,!0);f.setRequestHeader("Content-Type","application/json");f.send(e);return f.onreadystatechange=function(){var a;if(4===f.readyState&&201===f.status&&null!=("undefined"!==typeof console&&null!==console?console.debug:void 0))return a=JSON.parse(f.responseText),console.debug("airbrake: error #%s was reported: %s",a.id,a.url)}}}).call(this,"undefined"!==
typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"../util/jsonify_notice.coffee":9}],8:[function(d,a,b){Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var d,k,e;d=k=b=b||0;for(e=this.length;b<=e?k<e:k>e;d=b<=e?++k:--k)if(this[d]===a)return d;return-1})},{}],9:[function(d,a,b){var c,l;c=d("./truncate.coffee");l=function(a,b){var d,f;null==b&&(b=1E3);d={};for(f in a)d[f]=c(a[f],b);return d};a.exports=function(a,b,c){var d;null==b&&(b=1E3);
for(null==c&&(c=64E3);;){a.params=l(a.params,b);a.environment=l(a.environment,b);a.session=l(a.session,b);d=JSON.stringify(a);if(d.length<c)return d;if(0===b)break;b=Math.floor(b/2)}throw Error("cannot jsonify notice (length="+d.length+" maxLength="+c+")");}},{"./truncate.coffee":12}],10:[function(d,a,b){a.exports=function(){var a,b,d,k,e,f;k=Array.prototype.slice.call(arguments);a=k.shift()||{};e=0;for(f=k.length;e<f;e++)for(b in d=k[e],d)Object.prototype.hasOwnProperty.call(d,b)&&(a[b]=d[b]);return a}},
{}],11:[function(d,a,b){(function(b){var d;d=function(a,b){return a.getAttribute("data-airbrake-"+b)};a.exports=function(a){var k,e,f,m,h,n,q;m=b.document.getElementsByTagName("script");q=[];h=0;for(n=m.length;h<n;h++)e=m[h],k=d(e,"project-id"),f=d(e,"project-key"),k&&f&&a.setProject(k,f),(k=d(e,"environment-name"))&&a.setEnvironmentName(k),(k=d(e,"host"))&&a.setHost(k),(e=d(e,"onload"))?q.push(b[e](a)):q.push(void 0);return q}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?
self:"undefined"!==typeof window?window:{})},{}],12:[function(d,a,b){var c;c=function(a,b){try{return a[b]}catch(c){}};a.exports=function(a,b,d){var e,f,m,h,n;null==b&&(b=1E3);null==d&&(d=5);h=0;m=[];n=[];f=function(a){var b,d,e,f;d=n.indexOf(a);e=[m[d]];for(b=f=d;0>=d?0>=f:0<=f;b=0>=d?++f:--f)n[b]&&c(n[b],e[0])===a&&(a=n[b],e.unshift(m[b]));return"~"+e.join(".")};e=function(a,l,t){var u,x,w,v;null==l&&(l="");null==t&&(t=0);h++;if(h>b)return"[Truncated]";if(null===a||void 0===a)return a;switch(typeof a){case "boolean":case "number":case "string":case "function":return a;
case "object":break;default:return String(a)}if(a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp)return a;if(0<=n.indexOf(a))return"[Circular "+f(a)+"]";t++;if(t>d)return"[Truncated]";m.push(l);n.push(a);h--;if("[object Array]"===Object.prototype.toString.apply(a)){u=[];x=w=0;for(v=a.length;w<v;x=++w){l=a[x];h++;if(h>=b)break;u.push(e(l,x,t))}return u}u={};for(l in a)if(Object.prototype.hasOwnProperty.call(a,l)){h++;if(h>=b)break;x=c(a,l);void 0!==
x&&(u[l]=e(x,l,t))}return u};return e(a)}},{}]},{},[2]);
!function(d,a){"undefined"!=typeof module&&module.exports?module.exports=a():"function"==typeof define&&define.amd?define(a):this[d]=a()}("bowser",function(){function d(a){function c(c){return(c=a.match(c))&&1<c.length&&c[1]||""}function d(c){return(c=a.match(c))&&1<c.length&&c[2]||""}var g=c(/(ipod|iphone|ipad)/i).toLowerCase(),k=!/like android/i.test(a)&&/android/i.test(a),e=/CrOS/.test(a),f=/silk/i.test(a),m=/sailfish/i.test(a),h=/tizen/i.test(a),n=/(web|hpw)os/i.test(a),q=/windows phone/i.test(a),
r=!q&&/windows/i.test(a),t=!g&&!f&&/macintosh/i.test(a),u=!k&&!m&&!h&&!n&&/linux/i.test(a),x=c(/edge\/(\d+(\.\d+)?)/i),w=c(/version\/(\d+(\.\d+)?)/i),v=/tablet/i.test(a),C=!v&&/[^-]mobi/i.test(a);/opera|opr/i.test(a)?e={name:"Opera",opera:!0,version:w||c(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(a)?e={name:"Yandex Browser",yandexbrowser:!0,version:w||c(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:q?(e={name:"Windows Phone",windowsphone:!0},x?(e.msedge=!0,e.version=x):(e.msie=!0,e.version=c(/iemobile\/(\d+(\.\d+)?)/i))):
/msie|trident/i.test(a)?e={name:"Internet Explorer",msie:!0,version:c(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:e?e={name:"Chrome",chromeos:!0,chromeBook:!0,chrome:!0,version:c(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(a)?e={name:"Microsoft Edge",msedge:!0,version:x}:/chrome|crios|crmo/i.test(a)?e={name:"Chrome",chrome:!0,version:c(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:g?(e={name:"iphone"==g?"iPhone":"ipad"==g?"iPad":"iPod"},w&&(e.version=w)):m?e={name:"Sailfish",sailfish:!0,version:c(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:
/seamonkey\//i.test(a)?e={name:"SeaMonkey",seamonkey:!0,version:c(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(a)?(e={name:"Firefox",firefox:!0,version:c(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(a)&&(e.firefoxos=!0)):f?e={name:"Amazon Silk",silk:!0,version:c(/silk\/(\d+(\.\d+)?)/i)}:k?e={name:"Android",version:w}:/phantom/i.test(a)?e={name:"PhantomJS",phantom:!0,version:c(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(a)||/rim\stablet/i.test(a)?
e={name:"BlackBerry",blackberry:!0,version:w||c(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:n?(e={name:"WebOS",webos:!0,version:w||c(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(a)&&(e.touchpad=!0)):e=/bada/i.test(a)?{name:"Bada",bada:!0,version:c(/dolfin\/(\d+(\.\d+)?)/i)}:h?{name:"Tizen",tizen:!0,version:c(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||w}:/safari/i.test(a)?{name:"Safari",safari:!0,version:w}:{name:c(/^(.*)\/(.*) /),version:d(/^(.*)\/(.*) /)};!e.msedge&&/(apple)?webkit/i.test(a)?(e.name=
e.name||"Webkit",e.webkit=!0,!e.version&&w&&(e.version=w)):!e.opera&&/gecko\//i.test(a)&&(e.name=e.name||"Gecko",e.gecko=!0,e.version=e.version||c(/gecko\/(\d+(\.\d+)?)/i));e.msedge||!k&&!e.silk?g?(e[g]=!0,e.ios=!0):r?e.windows=!0:t?e.mac=!0:u&&(e.linux=!0):e.android=!0;r="";e.windowsphone?r=c(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):g?(r=c(/os (\d+([_\s]\d+)*) like mac os x/i),r=r.replace(/[_\s]/g,".")):k?r=c(/android[ \/-](\d+(\.\d+)*)/i):e.webos?r=c(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):e.blackberry?
r=c(/rim\stablet\sos\s(\d+(\.\d+)*)/i):e.bada?r=c(/bada\/(\d+(\.\d+)*)/i):e.tizen&&(r=c(/tizen[\/\s](\d+(\.\d+)*)/i));r&&(e.osversion=r);r=r.split(".")[0];if(v||"ipad"==g||k&&(3==r||4==r&&!C)||e.silk)e.tablet=!0;else if(C||"iphone"==g||"ipod"==g||k||e.blackberry||e.webos||e.bada)e.mobile=!0;e.msedge||e.msie&&10<=e.version||e.yandexbrowser&&15<=e.version||e.chrome&&20<=e.version||e.firefox&&20<=e.version||e.safari&&6<=e.version||e.opera&&10<=e.version||e.ios&&e.osversion&&6<=e.osversion.split(".")[0]||
e.blackberry&&10.1<=e.version?e.a=!0:e.msie&&10>e.version||e.chrome&&20>e.version||e.firefox&&20>e.version||e.safari&&6>e.version||e.opera&&10>e.version||e.ios&&e.osversion&&6>e.osversion.split(".")[0]?e.c=!0:e.x=!0;return e}var a=d("undefined"!==typeof navigator?navigator.userAgent:"");a.test=function(b){for(var c=0;c<b.length;++c){var d=b[c];if("string"===typeof d&&d in a)return!0}return!1};a._detect=d;return a});
(function(d){d.fn.extend({autocomplete:function(a,b){var c="string"==typeof a;b=d.extend({},d.Autocompleter.defaults,{url:c?a:null,data:c?null:a,delay:c?d.Autocompleter.defaults.delay:10,max:b&&!b.scroll?10:150},b);b.highlight=b.highlight||function(a){return a};b.formatMatch=b.formatMatch||b.formatItem;return this.each(function(){new d.Autocompleter(this,b)})},result:function(a){return this.bind("result",a)},search:function(a){return this.trigger("search",[a])},flushCache:function(){return this.trigger("flushCache")},
setOptions:function(a){return this.trigger("setOptions",[a])},unautocomplete:function(){return this.trigger("unautocomplete")}});d.Autocompleter=function(a,b){function c(){var c=v.selected();if(!c)return!1;var f=c.result;r=f;if(b.multiple){var h=g(n.val());if(1<h.length){var m=b.multipleSeparator.length,k=d(a).selection().start,l,q=0;d.each(h,function(a,b){q+=b.length;if(k<=q)return l=a,!1;q+=m});h[l]=f;f=h.join(b.multipleSeparator)}f+=b.multipleSeparator}n.val(f);e();n.trigger("result",[c.data,c.value]);
return!0}function l(a,c){if(x==h.DEL)v.hide();else{var d=n.val();if(c||d!=r)r=d,d=k(d),d.length>=b.minChars?(n.addClass(b.loadingClass),b.matchCase||(d=d.toLowerCase()),m(d,f,e)):(n.removeClass(b.loadingClass),v.hide())}}function g(a){return a?b.multiple?d.map(a.split(b.multipleSeparator),function(b){return d.trim(a).length?d.trim(b):null}):[d.trim(a)]:[""]}function k(c){if(!b.multiple)return c;var e=g(c);if(1==e.length)return e[0];e=d(a).selection().start;e=e==c.length?g(c):g(c.replace(c.substring(e),
""));return e[e.length-1]}function e(){v.visible();v.hide();clearTimeout(q);n.removeClass(b.loadingClass);b.mustMatch&&n.search(function(a){a||(b.multiple?(a=g(n.val()).slice(0,-1),n.val(a.join(b.multipleSeparator)+(a.length?b.multipleSeparator:""))):(n.val(""),n.trigger("result",null)))})}function f(c,f){if(f&&f.length&&u){n.removeClass(b.loadingClass);v.display(f,c);var g=f[0].value;b.autoFill&&k(n.val()).toLowerCase()==c.toLowerCase()&&x!=h.BACKSPACE&&(n.val(n.val()+g.substring(k(r).length)),d(a).selection(r.length,
r.length+g.length));v.show()}else e()}function m(c,e,f){b.matchCase||(c=c.toLowerCase());var h=t.load(c);if(h&&h.length)e(c,h);else if("string"==typeof b.url&&0<b.url.length){var g={timestamp:+new Date};d.each(b.extraParams,function(a,b){g[a]="function"==typeof b?b():b});d.ajax({mode:"abort",port:"autocomplete"+a.name,dataType:b.dataType,url:b.url,data:d.extend({q:k(c),limit:b.max},g),success:function(a){var f;if(!(f=b.parse&&b.parse(a))){f=[];a=a.split("\n");for(var h=0;h<a.length;h++){var g=d.trim(a[h]);
g&&(g=g.split("|"),f[f.length]={data:g,value:g[0],result:b.formatResult&&b.formatResult(g,g[0])||g[0]})}}t.add(c,f);e(c,f)}})}else v.emptyList(),f(c)}var h={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8},n=d(a).attr("autocomplete","off").addClass(b.inputClass),q,r="",t=d.Autocompleter.Cache(b),u=0,x,w={mouseDownOnSelect:!1},v=d.Autocompleter.Select(b,a,c,w),C;d.browser.opera&&d(a.form).bind("submit.autocomplete",function(){if(C)return C=!1});n.bind((d.browser.opera?
"keypress":"keydown")+".autocomplete",function(a){u=1;x=a.keyCode;switch(a.keyCode){case h.UP:a.preventDefault();v.visible()?v.prev():l(0,!0);break;case h.DOWN:a.preventDefault();v.visible()?v.next():l(0,!0);break;case h.PAGEUP:a.preventDefault();v.visible()?v.pageUp():l(0,!0);break;case h.PAGEDOWN:a.preventDefault();v.visible()?v.pageDown():l(0,!0);break;case b.multiple&&","==d.trim(b.multipleSeparator)&&h.COMMA:case h.TAB:case h.RETURN:if(c())return a.preventDefault(),C=!0,!1;break;case h.ESC:v.hide();
break;default:clearTimeout(q),q=setTimeout(l,b.delay)}}).focus(function(){u++}).blur(function(){u=0;w.mouseDownOnSelect||(clearTimeout(q),q=setTimeout(e,200))}).click(function(){1<u++&&!v.visible()&&l(0,!0)}).bind("search",function(){function a(c,d){var e;if(d&&d.length)for(var f=0;f<d.length;f++)if(d[f].result.toLowerCase()==c.toLowerCase()){e=d[f];break}"function"==typeof b?b(e):n.trigger("result",e&&[e.data,e.value])}var b=1<arguments.length?arguments[1]:null;d.each(g(n.val()),function(b,c){m(c,
a,a)})}).bind("flushCache",function(){t.flush()}).bind("setOptions",function(a,c){d.extend(b,c);"data"in c&&t.populate()}).bind("unautocomplete",function(){v.unbind();n.unbind();d(a.form).unbind(".autocomplete")})};d.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:!1,matchSubset:!0,matchContains:!1,cacheLength:10,max:100,mustMatch:!1,extraParams:{},selectFirst:!0,formatItem:function(a){return a[0]},formatMatch:null,autoFill:!1,
width:0,multiple:!1,multipleSeparator:", ",highlight:function(a,b){return a.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+b.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:!0,scrollHeight:180};d.Autocompleter.Cache=function(a){function b(b,c){a.matchCase||(b=b.toLowerCase());var d=b.indexOf(c);"word"==a.matchContains&&(d=b.toLowerCase().search("\\b"+c.toLowerCase()));return-1==d?!1:0==d||a.matchContains}function c(b,c){e>a.cacheLength&&
g();k[b]||e++;k[b]=c}function l(){if(!a.data)return!1;var b={},e=0;a.url||(a.cacheLength=1);b[""]=[];for(var h=0,g=a.data.length;h<g;h++){var k=a.data[h],k="string"==typeof k?[k]:k,l=a.formatMatch(k,h+1,a.data.length);if(!1!==l){var t=l.charAt(0).toLowerCase();b[t]||(b[t]=[]);k={value:l,data:k,result:a.formatResult&&a.formatResult(k)||l};b[t].push(k);e++<a.max&&b[""].push(k)}}d.each(b,function(b,d){a.cacheLength++;c(b,d)})}function g(){k={};e=0}var k={},e=0;setTimeout(l,25);return{flush:g,add:c,populate:l,
load:function(c){if(!a.cacheLength||!e)return null;if(!a.url&&a.matchContains){var g=[],h;for(h in k)if(0<h.length){var l=k[h];d.each(l,function(a,d){b(d.value,c)&&g.push(d)})}return g}if(k[c])return k[c];if(a.matchSubset)for(h=c.length-1;h>=a.minChars;h--)if(l=k[c.substr(0,h)])return g=[],d.each(l,function(a,d){b(d.value,c)&&(g[g.length]=d)}),g;return null}}};d.Autocompleter.Select=function(a,b,c,l){function g(){r&&(t=d("<div/>").hide().addClass(a.resultsClass).css("position","absolute").appendTo(document.body),
u=d("<ul/>").appendTo(t).mouseover(function(a){k(a).nodeName&&"LI"==k(a).nodeName.toUpperCase()&&(h=d("li",u).removeClass(f.ACTIVE).index(k(a)),d(k(a)).addClass(f.ACTIVE))}).click(function(a){d(k(a)).addClass(f.ACTIVE);c();b.focus();return!1}).mousedown(function(){l.mouseDownOnSelect=!0}).mouseup(function(){l.mouseDownOnSelect=!1}),0<a.width&&t.css("width",a.width),r=!1)}function k(a){for(a=a.target;a&&"LI"!=a.tagName;)a=a.parentNode;return a?a:[]}function e(b){m.slice(h,h+1).removeClass(f.ACTIVE);
h+=b;0>h?h=m.size()-1:h>=m.size()&&(h=0);b=m.slice(h,h+1).addClass(f.ACTIVE);if(a.scroll){var c=0;m.slice(0,h).each(function(){c+=this.offsetHeight});c+b[0].offsetHeight-u.scrollTop()>u[0].clientHeight?u.scrollTop(c+b[0].offsetHeight-u.innerHeight()):c<u.scrollTop()&&u.scrollTop(c)}}var f={ACTIVE:"ac_over"},m,h=-1,n,q="",r=!0,t,u;return{display:function(b,c){g();n=b;q=c;u.empty();var e;e=n.length;e=a.max&&a.max<e?a.max:e;for(var k=0;k<e;k++)if(n[k]){var l=a.formatItem(n[k].data,k+1,e,n[k].value,q);
!1!==l&&(l=d("<li/>").html(a.highlight(l,q)).addClass(0==k%2?"ac_even":"ac_odd").appendTo(u)[0],d.data(l,"ac_data",n[k]))}m=u.find("li");a.selectFirst&&(m.slice(0,1).addClass(f.ACTIVE),h=0);d.fn.bgiframe&&u.bgiframe()},next:function(){e(1)},prev:function(){e(-1)},pageUp:function(){0!=h&&0>h-8?e(-h):e(-8)},pageDown:function(){h!=m.size()-1&&h+8>m.size()?e(m.size()-1-h):e(8)},hide:function(){t&&t.hide();m&&m.removeClass(f.ACTIVE);h=-1},visible:function(){return t&&t.is(":visible")},current:function(){return this.visible()&&
(m.filter("."+f.ACTIVE)[0]||a.selectFirst&&m[0])},show:function(){var c=d(b).offset();t.css({width:"string"==typeof a.width||0<a.width?a.width:d(b).width(),top:c.top+b.offsetHeight,left:c.left}).show();if(a.scroll&&(u.scrollTop(0),u.css({maxHeight:a.scrollHeight,overflow:"auto"}),d.browser.msie&&"undefined"===typeof document.body.style.maxHeight)){var e=0;m.each(function(){e+=this.offsetHeight});c=e>a.scrollHeight;u.css("height",c?a.scrollHeight:e);c||m.width(u.width()-parseInt(m.css("padding-left"))-
parseInt(m.css("padding-right")))}},selected:function(){var a=m&&m.filter("."+f.ACTIVE).removeClass(f.ACTIVE);return a&&a.length&&d.data(a[0],"ac_data")},emptyList:function(){u&&u.empty()},unbind:function(){t&&t.remove()}}};d.fn.selection=function(a,b){if(void 0!==a)return this.each(function(){if(this.createTextRange){var c=this.createTextRange();void 0===b||a==b?c.move("character",a):(c.collapse(!0),c.moveStart("character",a),c.moveEnd("character",b));c.select()}else this.setSelectionRange?this.setSelectionRange(a,
b):this.selectionStart&&(this.selectionStart=a,this.selectionEnd=b)});var c=this[0];if(c.createTextRange){var d=document.selection.createRange(),g=c.value,k=d.text.length;d.text="<->";d=c.value.indexOf("<->");c.value=g;this.selection(d,d+k);return{start:d,end:d+k}}if(void 0!==c.selectionStart)return{start:c.selectionStart,end:c.selectionEnd}}})(jQuery);
(function(d,a){"object"===typeof exports&&"object"===typeof module?module.exports=a():"function"===typeof define&&define.amd?define([],a):"object"===typeof exports?exports.Pusher=a():d.Pusher=a()})(this,function(){return function(d){function a(c){if(b[c])return b[c].exports;var l=b[c]={exports:{},id:c,loaded:!1};d[c].call(l.exports,l,l.exports,a);l.loaded=!0;return l.exports}var b={};a.m=d;a.c=b;a.p="";return a(0)}([function(d,a,b){a=b(1);d.exports=a["default"]},function(d,a,b){var c=b(2),l=b(9),
g=b(23),k=b(38),e=b(39),f=b(40),m=b(12),h=b(5),n=b(62),q=b(8),r=b(42);d=function(){function a(b,d){var m=this;if(null===b||void 0===b)throw"You must pass your app key when you instantiate Pusher.";d=d||{};this.key=b;this.config=l.extend(n.getGlobalConfig(),d.cluster?n.getClusterConfig(d.cluster):{},d);this.channels=r["default"].createChannels();this.global_emitter=new g["default"];this.sessionID=Math.floor(1E9*Math.random());this.timeline=new k["default"](this.key,this.sessionID,{cluster:this.config.cluster,
features:a.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:e["default"].INFO,version:h["default"].VERSION});this.config.disableStats||(this.timelineSender=r["default"].createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+c["default"].TimelineTransport.name}));this.connection=r["default"].createConnectionManager(this.key,l.extend({getStrategy:function(a){a=l.extend({},m.config,a);return f.build(c["default"].getDefaultStrategy(a),a)},timeline:this.timeline,
activityTimeout:this.config.activity_timeout,pongTimeout:this.config.pong_timeout,unavailableTimeout:this.config.unavailable_timeout},this.config,{encrypted:this.isEncrypted()}));this.connection.bind("connected",function(){m.subscribeAll();m.timelineSender&&m.timelineSender.send(m.connection.isEncrypted())});this.connection.bind("message",function(a){var b=0===a.event.indexOf("pusher_internal:");if(a.channel){var c=m.channel(a.channel);c&&c.handleEvent(a.event,a.data)}b||m.global_emitter.emit(a.event,
a.data)});this.connection.bind("disconnected",function(){m.channels.disconnect()});this.connection.bind("error",function(a){q["default"].warn("Error",a)});a.instances.push(this);this.timeline.info({instances:a.instances.length});a.isReady&&this.connect()}a.ready=function(){a.isReady=!0;for(var b=0,c=a.instances.length;b<c;b++)a.instances[b].connect()};a.log=function(b){var c=Function("return this")();a.logToConsole&&c.console&&c.console.log&&c.console.log(b)};a.getClientFeatures=function(){return l.keys(l.filterObject({ws:c["default"].Transports.ws},
function(a){return a.isSupported({})}))};a.prototype.channel=function(a){return this.channels.find(a)};a.prototype.allChannels=function(){return this.channels.all()};a.prototype.connect=function(){this.connection.connect();if(this.timelineSender&&!this.timelineSenderTimer){var a=this.connection.isEncrypted(),b=this.timelineSender;this.timelineSenderTimer=new m.PeriodicTimer(6E4,function(){b.send(a)})}};a.prototype.disconnect=function(){this.connection.disconnect();this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),
this.timelineSenderTimer=null)};a.prototype.bind=function(a,b){this.global_emitter.bind(a,b);return this};a.prototype.bind_all=function(a){this.global_emitter.bind_all(a);return this};a.prototype.subscribeAll=function(){for(var a in this.channels.channels)this.channels.channels.hasOwnProperty(a)&&this.subscribe(a)};a.prototype.subscribe=function(a){a=this.channels.add(a,this);"connected"===this.connection.state&&a.subscribe();return a};a.prototype.unsubscribe=function(a){(a=this.channels.remove(a))&&
"connected"===this.connection.state&&a.unsubscribe()};a.prototype.send_event=function(a,b,c){return this.connection.send_event(a,b,c)};a.prototype.isEncrypted=function(){return"https:"===c["default"].getProtocol()?!0:Boolean(this.config.encrypted)};a.instances=[];a.isReady=!1;a.logToConsole=!1;a.Runtime=c["default"];a.ScriptReceivers=c["default"].ScriptReceivers;a.DependenciesReceivers=c["default"].DependenciesReceivers;a.auth_callbacks=c["default"].auth_callbacks;return a}();a.__esModule=!0;a["default"]=
d;c["default"].setup(d)},function(d,a,b){var c=b(3),l=b(7),g=b(14),k=b(15),e=b(16);d=b(4);var f=b(17),m=b(18),h=b(25),n=b(26),q=b(27);b=b(28);b={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:d.ScriptReceivers,DependenciesReceivers:c.DependenciesReceivers,getDefaultStrategy:n["default"],Transports:m["default"],transportConnectionInitializer:q["default"],HTTPFactory:b["default"],TimelineTransport:f["default"],getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||
window.MozWebSocket},setup:function(a){var b=this;window.Pusher=a;var d=function(){b.onDocumentBody(a.ready)};window.JSON?d():c.Dependencies.load("json2",{},d)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getGlobal:function(){return window},getAuthorizers:function(){return{ajax:l["default"],jsonp:g["default"]}},onDocumentBody:function(a){var b=this;document.body?a():setTimeout(function(){b.onDocumentBody(a)},0)},createJSONPRequest:function(a,
b){return new e["default"](a,b)},createScriptRequest:function(a){return new k["default"](a)},getLocalStorage:function(){try{return window.localStorage}catch(a){}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){return new (this.getXHRAPI())},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return h.Network},createWebSocket:function(a){return new (this.getWebSocketAPI())(a)},
createSocketRequest:function(a,b){if(this.isXHRSupported())return this.HTTPFactory.createXHR(a,b);if(this.isXDRSupported(0===b.indexOf("https:")))return this.HTTPFactory.createXDR(a,b);throw"Cross-origin HTTP requests are not supported";},isXHRSupported:function(){var a=this.getXHRAPI();return Boolean(a)&&void 0!==(new a).withCredentials},isXDRSupported:function(a){a=a?"https:":"http:";var b=this.getProtocol();return Boolean(window.XDomainRequest)&&b===a},addUnloadListener:function(a){void 0!==window.addEventListener?
window.addEventListener("unload",a,!1):void 0!==window.attachEvent&&window.attachEvent("onunload",a)},removeUnloadListener:function(a){void 0!==window.addEventListener?window.removeEventListener("unload",a,!1):void 0!==window.detachEvent&&window.detachEvent("onunload",a)}};a.__esModule=!0;a["default"]=b},function(d,a,b){d=b(4);var c=b(5);b=b(6);a.DependenciesReceivers=new d.ScriptReceiverFactory("_pusher_dependencies","Pusher.DependenciesReceivers");a.Dependencies=new b["default"]({cdn_http:c["default"].cdn_http,
cdn_https:c["default"].cdn_https,version:c["default"].VERSION,suffix:c["default"].dependency_suffix,receivers:a.DependenciesReceivers})},function(d,a){var b=function(){function a(b,c){this.lastId=0;this.prefix=b;this.name=c}a.prototype.create=function(a){this.lastId++;var b=this.lastId,c=this.prefix+b,d=this.name+"["+b+"]",f=!1,m=function(){f||(a.apply(null,arguments),f=!0)};this[b]=m;return{number:b,id:c,name:d,callback:m}};a.prototype.remove=function(a){delete this[a.number]};return a}();a.ScriptReceiverFactory=
b;a.ScriptReceivers=new b("_pusher_script_","Pusher.ScriptReceivers")},function(d,a){a.__esModule=!0;a["default"]={VERSION:"3.1.0-pre11",PROTOCOL:7,host:"ws.pusherapp.com",ws_port:80,wss_port:443,sockjs_host:"sockjs.pusher.com",sockjs_http_port:80,sockjs_https_port:443,sockjs_path:"/pusher",stats_host:"stats.pusher.com",channel_auth_endpoint:"/pusher/auth",channel_auth_transport:"ajax",activity_timeout:12E4,pong_timeout:3E4,unavailable_timeout:1E4,cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",
dependency_suffix:""}},function(d,a,b){var c=b(4),l=b(2);d=function(){function a(b){this.options=b;this.receivers=b.receivers||c.ScriptReceivers;this.loading={}}a.prototype.load=function(a,b,c){var d=this;if(d.loading[a]&&0<d.loading[a].length)d.loading[a].push(c);else{d.loading[a]=[c];var h=l["default"].createScriptRequest(d.getPath(a,b)),g=d.receivers.create(function(b){d.receivers.remove(g);if(d.loading[a]){var c=d.loading[a];delete d.loading[a];for(var e=function(a){a||h.cleanup()},f=0;f<c.length;f++)c[f](b,
e)}});h.send(g)}};a.prototype.getRoot=function(a){var b=l["default"].getDocument().location.protocol;return(a&&a.encrypted||"https:"===b?this.options.cdn_https:this.options.cdn_http).replace(/\/*$/,"")+"/"+this.options.version};a.prototype.getPath=function(a,b){return this.getRoot(b)+"/"+a+this.options.suffix+".js"};return a}();a.__esModule=!0;a["default"]=d},function(d,a,b){var c=b(8),l=b(2);a.__esModule=!0;a["default"]=function(a,b,d){var f;f=l["default"].createXHR();f.open("POST",this.options.authEndpoint,
!0);f.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var m in this.authOptions.headers)f.setRequestHeader(m,this.authOptions.headers[m]);f.onreadystatechange=function(){if(4===f.readyState)if(200===f.status){var a,b=!1;try{a=JSON.parse(f.responseText),b=!0}catch(g){d(!0,"JSON returned from webapp was invalid, yet status code was 200. Data was: "+f.responseText)}b&&d(!1,a)}else c["default"].warn("Couldn't get auth info from your webapp",f.status),d(!0,f.status)};f.send(this.composeQuery(b));
return f}},function(d,a,b){var c=b(9),l=b(1);a.__esModule=!0;a["default"]={debug:function(){for(var a=0;a<arguments.length;a++);l["default"].log&&l["default"].log(c.stringify.apply(this,arguments))},warn:function(){for(var a=0;a<arguments.length;a++);var a=c.stringify.apply(this,arguments),b=Function("return this")();b.console&&(b.console.warn?b.console.warn(a):b.console.log&&b.console.log(a));l["default"].log&&l["default"].log(a)}}},function(d,a,b){function c(a){for(var b=[],d=1;d<arguments.length;d++)b[d-
1]=arguments[d];for(d=0;d<b.length;d++){var e=b[d],f;for(f in e)a[f]=e[f]&&e[f].constructor&&e[f].constructor===Object?c(a[f]||{},e[f]):e[f]}return a}function l(a,b){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b(a[c],c,a)}function g(a,b){for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d,a,c));return c}function k(a,b){var c={};l(a,function(a,d){c[d]=b(a)});return c}function e(a,b){var c={};l(a,function(d,e){if(b&&b(d,e,a,c)||Boolean(d))c[e]=d});return c}function f(a){var b=[];l(a,function(a,
c){b.push([c,a])});return b}function m(a){return k(a,function(a){"object"===typeof a&&(a=JSON.stringify(a));return encodeURIComponent(h["default"](a.toString()))})}var h=b(10),n=b(11),q=Function("return this")();a.extend=c;a.stringify=function(){for(var a=["Pusher"],b=0;b<arguments.length;b++)"string"===typeof arguments[b]?a.push(arguments[b]):a.push(JSON.stringify(arguments[b]));return a.join(" : ")};a.arrayIndexOf=function(a,b){var c=Array.prototype.indexOf;if(null===a)return-1;if(c&&a.indexOf===
c)return a.indexOf(b);for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1};a.objectApply=l;a.keys=function(a){var b=[];l(a,function(a,c){b.push(c)});return b};a.values=function(a){var b=[];l(a,function(a){b.push(a)});return b};a.apply=function(a,b,c){for(var d=0;d<a.length;d++)b.call(c||q,a[d],d,a)};a.map=g;a.mapObject=k;a.filter=function(a,b){b=b||function(a){return!!a};for(var c=[],d=0;d<a.length;d++)b(a[d],d,a,c)&&c.push(a[d]);return c};a.filterObject=e;a.flatten=f;a.any=function(a,b){for(var c=
0;c<a.length;c++)if(b(a[c],c,a))return!0;return!1};a.all=function(a,b){for(var c=0;c<a.length;c++)if(!b(a[c],c,a))return!1;return!0};a.encodeParamsObject=m;a.buildQueryString=function(a){a=e(a,function(a){return void 0!==a});return g(f(m(a)),n["default"].method("join","=")).join("&")};a.safeJSONStringify=function(a){var b=[];a=JSON.stringify(a,function(a,c){if("object"===typeof c&&null!==c){if(-1!==b.indexOf(c))return;b.push(c)}return c});b=null;return a}},function(d,a){var b=Function("return this")();
a.__esModule=!0;a["default"]=function(a){return e(a.replace(/[^\x00-\x7F]/g,g))};for(var c=String.fromCharCode,l=0;64>l;l++)"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(l);var g=function(a){var b=a.charCodeAt(0);return 128>b?a:2048>b?c(192|b>>>6)+c(128|b&63):c(224|b>>>12&15)+c(128|b>>>6&63)+c(128|b&63)},k=function(a){var b=[0,2,1][a.length%3];a=a.charCodeAt(0)<<16|(1<a.length?a.charCodeAt(1):0)<<8|(2<a.length?a.charCodeAt(2):0);return["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>>
18),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>>12&63),2<=b?"=":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>>6&63),1<=b?"=":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a&63)].join("")},e=b.btoa||function(a){return a.replace(/[\s\S]{1,3}/g,k)}},function(d,a,b){var c=b(12);a.__esModule=!0;a["default"]={getGlobal:function(){return Function("return this")()},now:function(){return Date.now?Date.now():(new Date).valueOf()},
defer:function(a){return new c.OneOffTimer(0,a)},method:function(a){for(var b=1;b<arguments.length;b++);var c=Array.prototype.slice.call(arguments,1);return function(b){return b[a].apply(b,c.concat(arguments))}}}},function(d,a,b){function c(a){k.clearTimeout(a)}function l(a){k.clearInterval(a)}var g=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};d=b(13);var k=
Function("return this")();b=function(a){function b(d,f){a.call(this,setTimeout,c,d,function(a){f();return null})}g(b,a);return b}(d["default"]);a.OneOffTimer=b;d=function(a){function b(c,d){a.call(this,setInterval,l,c,function(a){d();return a})}g(b,a);return b}(d["default"]);a.PeriodicTimer=d},function(d,a){var b=function(){function a(b,c,d,e){var f=this;this.clear=c;this.timer=b(function(){f.timer&&(f.timer=e(f.timer))},d)}a.prototype.isRunning=function(){return null!==this.timer};a.prototype.ensureAborted=
function(){this.timer&&(this.clear(this.timer),this.timer=null)};return a}();a.__esModule=!0;a["default"]=b},function(d,a,b){var c=b(8);a.__esModule=!0;a["default"]=function(a,b,d){void 0!==this.authOptions.headers&&c["default"].warn("Warn","To send headers with the auth request, you must use AJAX, rather than JSONP.");var e=a.nextAuthCallbackID.toString();a.nextAuthCallbackID++;var f=a.getDocument(),m=f.createElement("script");a.auth_callbacks[e]=function(a){d(!1,a)};m.src=this.options.authEndpoint+
"?callback="+encodeURIComponent("Pusher.auth_callbacks['"+e+"']")+"&"+this.composeQuery(b);a=f.getElementsByTagName("head")[0]||f.documentElement;a.insertBefore(m,a.firstChild)}},function(d,a){var b=function(){function a(b){this.src=b}a.prototype.send=function(a){var b=this,c="Error loading "+b.src;b.script=document.createElement("script");b.script.id=a.id;b.script.src=b.src;b.script.type="text/javascript";b.script.charset="UTF-8";b.script.addEventListener?(b.script.onerror=function(){a.callback(c)},
b.script.onload=function(){a.callback(null)}):b.script.onreadystatechange=function(){"loaded"!==b.script.readyState&&"complete"!==b.script.readyState||a.callback(null)};void 0===b.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(b.errorScript=document.createElement("script"),b.errorScript.id=a.id+"_error",b.errorScript.text=a.name+"('"+c+"');",b.script.async=b.errorScript.async=!1):b.script.async=!0;var d=document.getElementsByTagName("head")[0];d.insertBefore(b.script,d.firstChild);
b.errorScript&&d.insertBefore(b.errorScript,b.script.nextSibling)};a.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null);this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script);this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript);this.errorScript=this.script=null};return a}();a.__esModule=!0;a["default"]=b},function(d,a,b){var c=b(9),l=b(2);d=function(){function a(b,
c){this.url=b;this.data=c}a.prototype.send=function(a){if(!this.request){var b=c.buildQueryString(this.data);this.request=l["default"].createScriptRequest(this.url+"/"+a.number+"?"+b);this.request.send(a)}};a.prototype.cleanup=function(){this.request&&this.request.cleanup()};return a}();a.__esModule=!0;a["default"]=d},function(d,a,b){var c=b(2),l=b(4);a.__esModule=!0;a["default"]={name:"jsonp",getAgent:function(a,b){return function(d,f){var m=c["default"].createJSONPRequest("http"+(b?"s":"")+"://"+
(a.host||a.options.host)+a.options.path,d),h=c["default"].ScriptReceivers.create(function(b,c){l.ScriptReceivers.remove(h);m.cleanup();c&&c.host&&(a.host=c.host);f&&f(b,c)});m.send(h)}}}},function(d,a,b){d=b(19);var c=b(21),l=b(20),g=b(2),k=b(3);b=b(9);var l=new c["default"]({file:"sockjs",urls:l.sockjs,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return void 0!==window.SockJS},getSocket:function(a,b){return new window.SockJS(a,null,{js_path:k.Dependencies.getPath("sockjs",
{encrypted:b.encrypted}),ignore_null_origin:b.ignoreNullOrigin})},beforeOpen:function(a,b){a.send(JSON.stringify({path:b}))}}),e={isSupported:function(a){return g["default"].isXDRSupported(a.encrypted)}},f=new c["default"](b.extend({},d.streamingConfiguration,e)),c=new c["default"](b.extend({},d.pollingConfiguration,e));d["default"].xdr_streaming=f;d["default"].xdr_polling=c;d["default"].sockjs=l;a.__esModule=!0;a["default"]=d["default"]},function(d,a,b){var c=b(20);d=b(21);var l=b(9),g=b(2);b=new d["default"]({urls:c.ws,
handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(g["default"].getWebSocketAPI())},isSupported:function(){return Boolean(g["default"].getWebSocketAPI())},getSocket:function(a){return g["default"].createWebSocket(a)}});c={urls:c.http,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}};a.streamingConfiguration=l.extend({getSocket:function(a){return g["default"].HTTPFactory.createStreamingSocket(a)}},c);a.pollingConfiguration=l.extend({getSocket:function(a){return g["default"].HTTPFactory.createPollingSocket(a)}},
c);var k={isSupported:function(){return g["default"].isXHRSupported()}},c=new d["default"](l.extend({},a.streamingConfiguration,k));d=new d["default"](l.extend({},a.pollingConfiguration,k));d={ws:b,xhr_streaming:c,xhr_polling:d};a.__esModule=!0;a["default"]=d},function(d,a,b){function c(a,b,c){return a+(b.encrypted?"s":"")+"://"+(b.encrypted?b.hostEncrypted:b.hostUnencrypted)+c}function l(a,b){return"/app/"+a+("?protocol="+g["default"].PROTOCOL+"&client=js&version="+g["default"].VERSION+(b?"&"+b:
""))}var g=b(5);a.ws={getInitial:function(a,b){return c("ws",b,l(a,"flash=false"))}};a.http={getInitial:function(a,b){var d=(b.httpPath||"/pusher")+l(a);return c("http",b,d)}};a.sockjs={getInitial:function(a,b){return c("http",b,b.httpPath||"/pusher")},getPath:function(a,b){return l(a)}}},function(d,a,b){var c=b(22);d=function(){function a(b){this.hooks=b}a.prototype.isSupported=function(a){return this.hooks.isSupported(a)};a.prototype.createConnection=function(a,b,d,f){return new c["default"](this.hooks,
a,b,d,f)};return a}();a.__esModule=!0;a["default"]=d},function(d,a,b){var c=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},l=b(11),g=b(9);d=b(23);var k=b(8),e=b(2);b=function(a){function b(c,d,g,m,k){a.call(this);this.initialize=e["default"].transportConnectionInitializer;this.hooks=c;this.name=d;this.priority=g;this.key=m;this.options=k;this.state="new";this.timeline=
k.timeline;this.activityTimeout=k.activityTimeout;this.id=this.timeline.generateUniqueID()}c(b,a);b.prototype.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)};b.prototype.supportsPing=function(){return Boolean(this.hooks.supportsPing)};b.prototype.connect=function(){var a=this;if(this.socket||"initialized"!==this.state)return!1;var b=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(b,this.options)}catch(c){return l["default"].defer(function(){a.onError(c);
a.changeState("closed")}),!1}this.bindListeners();k["default"].debug("Connecting",{transport:this.name,url:b});this.changeState("connecting");return!0};b.prototype.close=function(){return this.socket?(this.socket.close(),!0):!1};b.prototype.send=function(a){var b=this;return"open"===this.state?(l["default"].defer(function(){b.socket&&b.socket.send(a)}),!0):!1};b.prototype.ping=function(){"open"===this.state&&this.supportsPing()&&this.socket.ping()};b.prototype.onOpen=function(){this.hooks.beforeOpen&&
this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options));this.changeState("open");this.socket.onopen=void 0};b.prototype.onError=function(a){this.emit("error",{type:"WebSocketError",error:a});this.timeline.error(this.buildTimelineMessage({error:a.toString()}))};b.prototype.onClose=function(a){a?this.changeState("closed",{code:a.code,reason:a.reason,wasClean:a.wasClean}):this.changeState("closed");this.unbindListeners();this.socket=void 0};b.prototype.onMessage=function(a){this.emit("message",
a)};b.prototype.onActivity=function(){this.emit("activity")};b.prototype.bindListeners=function(){var a=this;this.socket.onopen=function(){a.onOpen()};this.socket.onerror=function(b){a.onError(b)};this.socket.onclose=function(b){a.onClose(b)};this.socket.onmessage=function(b){a.onMessage(b)};this.supportsPing()&&(this.socket.onactivity=function(){a.onActivity()})};b.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=
void 0,this.supportsPing()&&(this.socket.onactivity=void 0))};b.prototype.changeState=function(a,b){this.state=a;this.timeline.info(this.buildTimelineMessage({state:a,params:b}));this.emit(a,b)};b.prototype.buildTimelineMessage=function(a){return g.extend({cid:this.id},a)};return b}(d["default"]);a.__esModule=!0;a["default"]=b},function(d,a,b){var c=b(24),l=Function("return this")();d=function(){function a(b){this.callbacks=new c["default"];this.global_callbacks=[];this.failThrough=b}a.prototype.bind=
function(a,b,c){this.callbacks.add(a,b,c);return this};a.prototype.bind_all=function(a){this.global_callbacks.push(a);return this};a.prototype.unbind=function(a,b,c){this.callbacks.remove(a,b,c);return this};a.prototype.unbind_all=function(a,b){this.callbacks.remove(a,b);return this};a.prototype.emit=function(a,b){var c;for(c=0;c<this.global_callbacks.length;c++)this.global_callbacks[c](a,b);var d=this.callbacks.get(a);if(d&&0<d.length)for(c=0;c<d.length;c++)d[c].fn.call(d[c].context||l,b);else this.failThrough&&
this.failThrough(a,b);return this};return a}();a.__esModule=!0;a["default"]=d},function(d,a,b){var c=b(9);d=function(){function a(){this._callbacks={}}a.prototype.get=function(a){return this._callbacks["_"+a]};a.prototype.add=function(a,b,c){a="_"+a;this._callbacks[a]=this._callbacks[a]||[];this._callbacks[a].push({fn:b,context:c})};a.prototype.remove=function(a,b,d){a||b||d?(a=a?["_"+a]:c.keys(this._callbacks),b||d?this.removeCallback(a,b,d):this.removeAllCallbacks(a)):this._callbacks={}};a.prototype.removeCallback=
function(a,b,d){c.apply(a,function(a){this._callbacks[a]=c.filter(this._callbacks[a]||[],function(a){return b&&b!==a.fn||d&&d!==a.context});0===this._callbacks[a].length&&delete this._callbacks[a]},this)};a.prototype.removeAllCallbacks=function(a){c.apply(a,function(a){delete this._callbacks[a]},this)};return a}();a.__esModule=!0;a["default"]=d},function(d,a,b){var c=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===
b?Object.create(b):(c.prototype=b.prototype,new c)};d=function(a){function b(){a.call(this);var c=this;void 0!==window.addEventListener&&(window.addEventListener("online",function(){c.emit("online")},!1),window.addEventListener("offline",function(){c.emit("offline")},!1))}c(b,a);b.prototype.isOnline=function(){return void 0===window.navigator.onLine?!0:window.navigator.onLine};return b}(b(23)["default"]);a.NetInfo=d;a.Network=new d},function(d,a){a.__esModule=!0;a["default"]=function(a){return[[":def",
"ws_options",{hostUnencrypted:a.wsHost+":"+a.wsPort,hostEncrypted:a.wsHost+":"+a.wssPort}],[":def","wss_options",[":extend",":ws_options",{encrypted:!0}]],[":def","sockjs_options",{hostUnencrypted:a.httpHost+":"+a.httpPort,hostEncrypted:a.httpHost+":"+a.httpsPort,httpPath:a.httpPath}],[":def","timeouts",{loop:!0,timeout:15E3,timeoutLimit:6E4}],[":def","ws_manager",[":transport_manager",{lives:2,minPingDelay:1E4,maxPingDelay:a.activity_timeout}]],[":def","streaming_manager",[":transport_manager",{lives:2,
minPingDelay:1E4,maxPingDelay:a.activity_timeout}]],[":def_transport","ws","ws",3,":ws_options",":ws_manager"],[":def_transport","wss","ws",3,":wss_options",":ws_manager"],[":def_transport","sockjs","sockjs",1,":sockjs_options"],[":def_transport","xhr_streaming","xhr_streaming",1,":sockjs_options",":streaming_manager"],[":def_transport","xdr_streaming","xdr_streaming",1,":sockjs_options",":streaming_manager"],[":def_transport","xhr_polling","xhr_polling",1,":sockjs_options"],[":def_transport","xdr_polling",
"xdr_polling",1,":sockjs_options"],[":def","ws_loop",[":sequential",":timeouts",":ws"]],[":def","wss_loop",[":sequential",":timeouts",":wss"]],[":def","sockjs_loop",[":sequential",":timeouts",":sockjs"]],[":def","streaming_loop",[":sequential",":timeouts",[":if",[":is_supported",":xhr_streaming"],":xhr_streaming",":xdr_streaming"]]],[":def","polling_loop",[":sequential",":timeouts",[":if",[":is_supported",":xhr_polling"],":xhr_polling",":xdr_polling"]]],[":def","http_loop",[":if",[":is_supported",
":streaming_loop"],[":best_connected_ever",":streaming_loop",[":delayed",4E3,[":polling_loop"]]],[":polling_loop"]]],[":def","http_fallback_loop",[":if",[":is_supported",":http_loop"],[":http_loop"],[":sockjs_loop"]]],[":def","strategy",[":cached",18E5,[":first_connected",[":if",[":is_supported",":ws"],a.encrypted?[":best_connected_ever",":ws_loop",[":delayed",2E3,[":http_fallback_loop"]]]:[":best_connected_ever",":ws_loop",[":delayed",2E3,[":wss_loop"]],[":delayed",5E3,[":http_fallback_loop"]]],
":http_fallback_loop"]]]]]}},function(d,a,b){var c=b(3);a.__esModule=!0;a["default"]=function(){var a=this;a.timeline.info(a.buildTimelineMessage({transport:a.name+(a.options.encrypted?"s":"")}));if(a.hooks.isInitialized())a.changeState("initialized");else if(a.hooks.file)a.changeState("initializing"),c.Dependencies.load(a.hooks.file,{encrypted:a.options.encrypted},function(b,c){if(a.hooks.isInitialized())a.changeState("initialized"),c(!0);else{if(b)a.onError(b);a.onClose();c(!1)}});else a.onClose()}},
function(d,a,b){var c=b(29);d=b(31);d["default"].createXDR=function(a,b){return this.createRequest(c["default"],a,b)};a.__esModule=!0;a["default"]=d["default"]},function(d,a,b){var c=b(30);a.__esModule=!0;a["default"]={getRequest:function(a){var b=new window.XDomainRequest;b.ontimeout=function(){a.emit("error",new c.RequestTimedOut);a.close()};b.onerror=function(b){a.emit("error",b);a.close()};b.onprogress=function(){if(b.responseText&&0<b.responseText.length)a.onChunk(200,b.responseText)};b.onload=
function(){if(b.responseText&&0<b.responseText.length)a.onChunk(200,b.responseText);a.emit("finished",200);a.close()};return b},abortRequest:function(a){a.ontimeout=a.onerror=a.onprogress=a.onload=null;a.abort()}}},function(d,a){var b=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},c=function(a){function c(){a.apply(this,arguments)}b(c,a);return c}(Error);a.BadEventName=
c;c=function(a){function c(){a.apply(this,arguments)}b(c,a);return c}(Error);a.RequestTimedOut=c;c=function(a){function c(){a.apply(this,arguments)}b(c,a);return c}(Error);a.TransportPriorityTooLow=c;c=function(a){function c(){a.apply(this,arguments)}b(c,a);return c}(Error);a.TransportClosed=c;c=function(a){function c(){a.apply(this,arguments)}b(c,a);return c}(Error);a.UnsupportedTransport=c;c=function(a){function c(){a.apply(this,arguments)}b(c,a);return c}(Error);a.UnsupportedStrategy=c},function(d,
a,b){var c=b(32),l=b(33),g=b(35),k=b(36),e=b(37);a.__esModule=!0;a["default"]={createStreamingSocket:function(a){return this.createSocket(g["default"],a)},createPollingSocket:function(a){return this.createSocket(k["default"],a)},createSocket:function(a,b){return new l["default"](a,b)},createXHR:function(a,b){return this.createRequest(e["default"],a,b)},createRequest:function(a,b,d){return new c["default"](a,b,d)}}},function(d,a,b){var c=this&&this.__extends||function(a,b){function c(){this.constructor=
a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},l=b(2);d=function(a){function b(c,d,m){a.call(this);this.hooks=c;this.method=d;this.url=m}c(b,a);b.prototype.start=function(a){var b=this;this.position=0;this.xhr=this.hooks.getRequest(this);this.unloader=function(){b.close()};l["default"].addUnloadListener(this.unloader);this.xhr.open(this.method,this.url,!0);this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type",
"application/json");this.xhr.send(a)};b.prototype.close=function(){this.unloader&&(l["default"].removeUnloadListener(this.unloader),this.unloader=null);this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)};b.prototype.onChunk=function(a,b){for(;;){var c=this.advanceBuffer(b);if(c)this.emit("chunk",{status:a,data:c});else break}this.isBufferTooLong(b)&&this.emit("buffer_too_long")};b.prototype.advanceBuffer=function(a){a=a.slice(this.position);var b=a.indexOf("\n");return-1!==b?(this.position+=
b+1,a.slice(0,b)):null};b.prototype.isBufferTooLong=function(a){return this.position===a.length&&262144<a.length};return b}(b(23)["default"]);a.__esModule=!0;a["default"]=d},function(d,a,b){function c(a){var b=-1===a.indexOf("?")?"?":"&";return a+b+"t="+ +new Date+"&n="+e++}var l=b(34),g=b(11),k=b(2),e=1;d=function(){function a(b,c){this.hooks=b;var d=Math.floor(1E3*Math.random())+"/",e;e=[];for(var f=0;8>f;f++)e.push(Math.floor(32*Math.random()).toString(32));e=e.join("");this.session=d+e;d=/([^\?]*)\/*(\??.*)/.exec(c);
this.location={base:d[1],queryString:d[2]};this.readyState=l["default"].CONNECTING;this.openStream()}a.prototype.send=function(a){return this.sendRaw(JSON.stringify([a]))};a.prototype.ping=function(){this.hooks.sendHeartbeat(this)};a.prototype.close=function(a,b){this.onClose(a,b,!0)};a.prototype.sendRaw=function(a){if(this.readyState===l["default"].OPEN)try{return k["default"].createSocketRequest("POST",c(this.location.base+"/"+this.session+"/xhr_send")).start(a),!0}catch(b){return!1}else return!1};
a.prototype.reconnect=function(){this.closeStream();this.openStream()};a.prototype.onClose=function(a,b,c){this.closeStream();this.readyState=l["default"].CLOSED;if(this.onclose)this.onclose({code:a,reason:b,wasClean:c})};a.prototype.onChunk=function(a){if(200===a.status){if(this.readyState===l["default"].OPEN)this.onActivity();switch(a.data.slice(0,1)){case "o":a=JSON.parse(a.data.slice(1)||"{}");this.onOpen(a);break;case "a":a=JSON.parse(a.data.slice(1)||"[]");for(var b=0;b<a.length;b++)this.onEvent(a[b]);
break;case "m":a=JSON.parse(a.data.slice(1)||"null");this.onEvent(a);break;case "h":this.hooks.onHeartbeat(this);break;case "c":a=JSON.parse(a.data.slice(1)||"[]"),this.onClose(a[0],a[1],!0)}}};a.prototype.onOpen=function(a){if(this.readyState===l["default"].CONNECTING){if(a&&a.hostname){var b=this.location;a=a.hostname;var c=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(this.location.base);b.base=c[1]+a+c[3]}this.readyState=l["default"].OPEN;if(this.onopen)this.onopen()}else this.onClose(1006,"Server lost session",
!0)};a.prototype.onEvent=function(a){if(this.readyState===l["default"].OPEN&&this.onmessage)this.onmessage({data:a})};a.prototype.onActivity=function(){if(this.onactivity)this.onactivity()};a.prototype.onError=function(a){if(this.onerror)this.onerror(a)};a.prototype.openStream=function(){var a=this;this.stream=k["default"].createSocketRequest("POST",c(this.hooks.getReceiveURL(this.location,this.session)));this.stream.bind("chunk",function(b){a.onChunk(b)});this.stream.bind("finished",function(b){a.hooks.onFinished(a,
b)});this.stream.bind("buffer_too_long",function(){a.reconnect()});try{this.stream.start()}catch(b){g["default"].defer(function(){a.onError(b);a.onClose(1006,"Could not start streaming",!1)})}};a.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)};return a}();a.__esModule=!0;a["default"]=d},function(d,a){var b,c=b||(b={});c[c.CONNECTING=0]="CONNECTING";c[c.OPEN=1]="OPEN";c[c.CLOSED=3]="CLOSED";a.__esModule=!0;a["default"]=b},function(d,a){a.__esModule=
!0;a["default"]={getReceiveURL:function(a,c){return a.base+"/"+c+"/xhr_streaming"+a.queryString},onHeartbeat:function(a){a.sendRaw("[]")},sendHeartbeat:function(a){a.sendRaw("[]")},onFinished:function(a,c){a.onClose(1006,"Connection interrupted ("+c+")",!1)}}},function(d,a){a.__esModule=!0;a["default"]={getReceiveURL:function(a,c){return a.base+"/"+c+"/xhr"+a.queryString},onHeartbeat:function(){},sendHeartbeat:function(a){a.sendRaw("[]")},onFinished:function(a,c){if(200===c)a.reconnect();else a.onClose(1006,
"Connection interrupted ("+c+")",!1)}}},function(d,a,b){var c=b(2);a.__esModule=!0;a["default"]={getRequest:function(a){var b=new (c["default"].getXHRAPI());b.onreadystatechange=b.onprogress=function(){switch(b.readyState){case 3:if(b.responseText&&0<b.responseText.length)a.onChunk(b.status,b.responseText);break;case 4:if(b.responseText&&0<b.responseText.length)a.onChunk(b.status,b.responseText);a.emit("finished",b.status);a.close()}};return b},abortRequest:function(a){a.onreadystatechange=null;a.abort()}}},
function(d,a,b){var c=b(9),l=b(11),g=b(39);d=function(){function a(b,c,d){this.key=b;this.session=c;this.events=[];this.options=d||{};this.uniqueID=this.sent=0}a.prototype.log=function(a,b){a<=this.options.level&&(this.events.push(c.extend({},b,{timestamp:l["default"].now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())};a.prototype.error=function(a){this.log(g["default"].ERROR,a)};a.prototype.info=function(a){this.log(g["default"].INFO,a)};a.prototype.debug=function(a){this.log(g["default"].DEBUG,
a)};a.prototype.isEmpty=function(){return 0===this.events.length};a.prototype.send=function(a,b){var d=this,h=c.extend({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);this.events=[];a(h,function(a,c){a||d.sent++;b&&b(a,c)});return!0};a.prototype.generateUniqueID=function(){this.uniqueID++;return this.uniqueID};return a}();a.__esModule=!0;a["default"]=d},
function(d,a){var b,c=b||(b={});c[c.ERROR=3]="ERROR";c[c.INFO=6]="INFO";c[c.DEBUG=7]="DEBUG";a.__esModule=!0;a["default"]=b},function(d,a,b){function c(a){return function(b){return[a.apply(this,arguments),b]}}function l(a){return"string"===typeof a&&":"===a.charAt(0)}function g(a,b){if(0===a.length)return[[],b];var c=e(a[0],b),d=g(a.slice(1),c[1]);return[[c[0]].concat(d[0]),d[1]]}function k(a,b){if(l(a[0])){var c=b[a[0].slice(1)];if(1<a.length){if("function"!==typeof c)throw"Calling non-function "+
a[0];var d=[f.extend({},b)].concat(f.map(a.slice(1),function(a){return e(a,f.extend({},b))[0]}));return c.apply(this,d)}return[c,b]}return g(a,b)}function e(a,b){if("string"===typeof a){var c;if(l(a)){c=b[a.slice(1)];if(void 0===c)throw"Undefined symbol "+a;c=[c,b]}else c=[a,b];return c}return"object"===typeof a&&a instanceof Array&&0<a.length?k(a,b):[a,b]}var f=b(9),m=b(11),h=b(41),n=b(30),q=b(55),r=b(56),t=b(57),u=b(58),x=b(59),w=b(60),v=b(61),C=b(2)["default"].Transports;a.build=function(a,b){var c=
f.extend({},y,b);return e(a,c)[1].strategy};var E={isSupported:function(){return!1},connect:function(a,b){var c=m["default"].defer(function(){b(new n.UnsupportedStrategy)});return{abort:function(){c.ensureAborted()},forceMinPriority:function(){}}}},y={extend:function(a,b,c){return[f.extend({},b,c),a]},def:function(a,b,c){if(void 0!==a[b])throw"Redefining symbol "+b;a[b]=c;return[void 0,a]},def_transport:function(a,b,c,d,e,h){var g=C[c];if(!g)throw new n.UnsupportedTransport(c);c=a.enabledTransports&&
-1===f.arrayIndexOf(a.enabledTransports,b)||a.disabledTransports&&-1!==f.arrayIndexOf(a.disabledTransports,b)?E:new q["default"](b,d,h?h.getAssistant(g):g,f.extend({key:a.key,encrypted:a.encrypted,timeline:a.timeline,ignoreNullOrigin:a.ignoreNullOrigin},e));d=a.def(a,b,c)[1];d.Transports=a.Transports||{};d.Transports[b]=c;return[void 0,d]},transport_manager:c(function(a,b){return new h["default"](b)}),sequential:c(function(a,b){var c=Array.prototype.slice.call(arguments,2);return new r["default"](c,
b)}),cached:c(function(a,b,c){return new u["default"](c,a.Transports,{ttl:b,timeline:a.timeline,encrypted:a.encrypted})}),first_connected:c(function(a,b){return new v["default"](b)}),best_connected_ever:c(function(){var a=Array.prototype.slice.call(arguments,1);return new t["default"](a)}),delayed:c(function(a,b,c){return new x["default"](c,{delay:b})}),"if":c(function(a,b,c,d){return new w["default"](b,c,d)}),is_supported:c(function(a,b){return function(){return b.isSupported()}})}},function(d,a,
b){var c=b(42);d=function(){function a(b){this.options=b||{};this.livesLeft=this.options.lives||Infinity}a.prototype.getAssistant=function(a){return c["default"].createAssistantToTheTransportManager(this,a,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})};a.prototype.isAlive=function(){return 0<this.livesLeft};a.prototype.reportDeath=function(){--this.livesLeft};return a}();a.__esModule=!0;a["default"]=d},function(d,a,b){var c=b(43),l=b(44),g=b(47),k=b(48),e=b(49),
f=b(50),m=b(51),h=b(53),n=b(54);a.__esModule=!0;a["default"]={createChannels:function(){return new n["default"]},createConnectionManager:function(a,b){return new h["default"](a,b)},createChannel:function(a,b){return new m["default"](a,b)},createPrivateChannel:function(a,b){return new f["default"](a,b)},createPresenceChannel:function(a,b){return new e["default"](a,b)},createTimelineSender:function(a,b){return new k["default"](a,b)},createAuthorizer:function(a,b){return new g["default"](a,b)},createHandshake:function(a,
b){return new l["default"](a,b)},createAssistantToTheTransportManager:function(a,b,d){return new c["default"](a,b,d)}}},function(d,a,b){var c=b(11),l=b(9);d=function(){function a(b,c,d){this.manager=b;this.transport=c;this.minPingDelay=d.minPingDelay;this.maxPingDelay=d.maxPingDelay;this.pingDelay=void 0}a.prototype.createConnection=function(a,b,d,g){var h=this;g=l.extend({},g,{activityTimeout:this.pingDelay});var n=this.transport.createConnection(a,b,d,g),q=null,r=function(){n.unbind("open",r);n.bind("closed",
t);q=c["default"].now()},t=function(a){n.unbind("closed",t);1002===a.code||1003===a.code?h.manager.reportDeath():!a.wasClean&&q&&(a=c["default"].now()-q,a<2*h.maxPingDelay&&(h.manager.reportDeath(),h.pingDelay=Math.max(a/2,h.minPingDelay)))};n.bind("open",r);return n};a.prototype.isSupported=function(a){return this.manager.isAlive()&&this.transport.isSupported(a)};return a}();a.__esModule=!0;a["default"]=d},function(d,a,b){var c=b(9),l=b(45),g=b(46);d=function(){function a(b,c){this.transport=b;this.callback=
c;this.bindListeners()}a.prototype.close=function(){this.unbindListeners();this.transport.close()};a.prototype.bindListeners=function(){var a=this;this.onMessage=function(b){a.unbindListeners();var c;try{c=l.processHandshake(b)}catch(d){a.finish("error",{error:d});a.transport.close();return}"connected"===c.action?a.finish("connected",{connection:new g["default"](c.id,a.transport),activityTimeout:c.activityTimeout}):(a.finish(c.action,{error:c.error}),a.transport.close())};this.onClosed=function(b){a.unbindListeners();
var c=l.getCloseAction(b)||"backoff";b=l.getCloseError(b);a.finish(c,{error:b})};this.transport.bind("message",this.onMessage);this.transport.bind("closed",this.onClosed)};a.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage);this.transport.unbind("closed",this.onClosed)};a.prototype.finish=function(a,b){this.callback(c.extend({transport:this.transport,action:a},b))};return a}();a.__esModule=!0;a["default"]=d},function(d,a){a.decodeMessage=function(a){try{var c=JSON.parse(a.data);
if("string"===typeof c.data)try{c.data=JSON.parse(c.data)}catch(d){if(!(d instanceof SyntaxError))throw d;}return c}catch(d){throw{type:"MessageParseError",error:d,data:a.data};}};a.encodeMessage=function(a){return JSON.stringify(a)};a.processHandshake=function(b){b=a.decodeMessage(b);if("pusher:connection_established"===b.event){if(!b.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:b.data.socket_id,activityTimeout:1E3*b.data.activity_timeout}}if("pusher:error"===
b.event)return{action:this.getCloseAction(b.data),error:this.getCloseError(b.data)};throw"Invalid handshake";};a.getCloseAction=function(a){return 4E3>a.code?1002<=a.code&&1004>=a.code?"backoff":null:4E3===a.code?"ssl_only":4100>a.code?"refused":4200>a.code?"backoff":4300>a.code?"retry":"refused"};a.getCloseError=function(a){return 1E3!==a.code&&1001!==a.code?{type:"PusherError",data:{code:a.code,message:a.reason||a.message}}:null}},function(d,a,b){var c=this&&this.__extends||function(a,b){function c(){this.constructor=
a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},l=b(9);d=b(23);var g=b(45),k=b(8);b=function(a){function b(c,d){a.call(this);this.id=c;this.transport=d;this.activityTimeout=d.activityTimeout;this.bindListeners()}c(b,a);b.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()};b.prototype.send=function(a){return this.transport.send(a)};b.prototype.send_event=function(a,b,c){a={event:a,data:b};
c&&(a.channel=c);k["default"].debug("Event sent",a);return this.send(g.encodeMessage(a))};b.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})};b.prototype.close=function(){this.transport.close()};b.prototype.bindListeners=function(){var a=this,b={message:function(b){var c;try{c=g.decodeMessage(b)}catch(d){a.emit("error",{type:"MessageParseError",error:d,data:b.data})}if(void 0!==c){k["default"].debug("Event recd",c);switch(c.event){case "pusher:error":a.emit("error",
{type:"PusherError",data:c.data});break;case "pusher:ping":a.emit("ping");break;case "pusher:pong":a.emit("pong")}a.emit("message",c)}},activity:function(){a.emit("activity")},error:function(b){a.emit("error",{type:"WebSocketError",error:b})},closed:function(b){c();b&&b.code&&a.handleCloseEvent(b);a.transport=null;a.emit("closed")}},c=function(){l.objectApply(b,function(b,c){a.transport.unbind(c,b)})};l.objectApply(b,function(b,c){a.transport.bind(c,b)})};b.prototype.handleCloseEvent=function(a){var b=
g.getCloseAction(a);(a=g.getCloseError(a))&&this.emit("error",a);b&&this.emit(b)};return b}(d["default"]);a.__esModule=!0;a["default"]=b},function(d,a,b){var c=b(2);d=function(){function a(b,d){this.channel=b;var e=d.authTransport;if("undefined"===typeof c["default"].getAuthorizers()[e])throw"'"+e+"' is not a recognized auth transport";this.type=e;this.options=d;this.authOptions=(d||{}).auth||{}}a.prototype.composeQuery=function(a){a="socket_id="+encodeURIComponent(a)+"&channel_name="+encodeURIComponent(this.channel.name);
for(var b in this.authOptions.params)a+="&"+encodeURIComponent(b)+"="+encodeURIComponent(this.authOptions.params[b]);return a};a.prototype.authorize=function(b,d){a.authorizers=a.authorizers||c["default"].getAuthorizers();return a.authorizers[this.type].call(this,c["default"],b,d)};return a}();a.__esModule=!0;a["default"]=d},function(d,a,b){var c=b(2);d=function(){function a(b,c){this.timeline=b;this.options=c||{}}a.prototype.send=function(a,b){this.timeline.isEmpty()||this.timeline.send(c["default"].TimelineTransport.getAgent(this,
a),b)};return a}();a.__esModule=!0;a["default"]=d},function(d,a,b){var c=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},l=b(50),g=b(8),k=b(52);d=function(a){function b(c,d){a.call(this,c,d);this.members=new k["default"]}c(b,a);b.prototype.authorize=function(b,c){var d=this;a.prototype.authorize.call(this,b,function(a,b){if(!a){if(void 0===b.channel_data){g["default"].warn("Invalid auth response for channel '"+
d.name+"', expected 'channel_data' field");c("Invalid auth response");return}var e=JSON.parse(b.channel_data);d.members.setMyID(e.user_id)}c(a,b)})};b.prototype.handleEvent=function(a,b){switch(a){case "pusher_internal:subscription_succeeded":this.members.onSubscription(b);this.subscribed=!0;this.emit("pusher:subscription_succeeded",this.members);break;case "pusher_internal:member_added":var c=this.members.addMember(b);this.emit("pusher:member_added",c);break;case "pusher_internal:member_removed":(c=
this.members.removeMember(b))&&this.emit("pusher:member_removed",c);break;default:l["default"].prototype.handleEvent.call(this,a,b)}};b.prototype.disconnect=function(){this.members.reset();a.prototype.disconnect.call(this)};return b}(l["default"]);a.__esModule=!0;a["default"]=d},function(d,a,b){var c=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},l=b(42);d=function(a){function b(){a.apply(this,
arguments)}c(b,a);b.prototype.authorize=function(a,b){return l["default"].createAuthorizer(this,this.pusher.config).authorize(a,b)};return b}(b(51)["default"]);a.__esModule=!0;a["default"]=d},function(d,a,b){var c=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};d=b(23);var l=b(30),g=b(8);b=function(a){function b(c,d){a.call(this,function(a,b){g["default"].debug("No callbacks on "+
c+" for "+a)});this.name=c;this.pusher=d;this.subscribed=!1}c(b,a);b.prototype.authorize=function(a,b){return b(!1,{})};b.prototype.trigger=function(a,b){if(0!==a.indexOf("client-"))throw new l.BadEventName("Event '"+a+"' does not start with 'client-'");return this.pusher.send_event(a,b,this.name)};b.prototype.disconnect=function(){this.subscribed=!1};b.prototype.handleEvent=function(a,b){0===a.indexOf("pusher_internal:")?"pusher_internal:subscription_succeeded"===a&&(this.subscribed=!0,this.emit("pusher:subscription_succeeded",
b)):this.emit(a,b)};b.prototype.subscribe=function(){var a=this;this.authorize(this.pusher.connection.socket_id,function(b,c){b?a.handleEvent("pusher:subscription_error",c):a.pusher.send_event("pusher:subscribe",{auth:c.auth,channel_data:c.channel_data,channel:a.name})})};b.prototype.unsubscribe=function(){this.pusher.send_event("pusher:unsubscribe",{channel:this.name})};return b}(d["default"]);a.__esModule=!0;a["default"]=b},function(d,a,b){var c=b(9);d=function(){function a(){this.reset()}a.prototype.get=
function(a){return Object.prototype.hasOwnProperty.call(this.members,a)?{id:a,info:this.members[a]}:null};a.prototype.each=function(a){var b=this;c.objectApply(this.members,function(c,d){a(b.get(d))})};a.prototype.setMyID=function(a){this.myID=a};a.prototype.onSubscription=function(a){this.members=a.presence.hash;this.count=a.presence.count;this.me=this.get(this.myID)};a.prototype.addMember=function(a){null===this.get(a.user_id)&&this.count++;this.members[a.user_id]=a.user_info;return this.get(a.user_id)};
a.prototype.removeMember=function(a){var b=this.get(a.user_id);b&&(delete this.members[a.user_id],this.count--);return b};a.prototype.reset=function(){this.members={};this.count=0;this.me=this.myID=null};return a}();a.__esModule=!0;a["default"]=d},function(d,a,b){var c=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};d=b(23);var l=b(12),g=b(8),k=b(9),e=b(2);b=function(a){function b(c,
d){var g=this;a.call(this);this.key=c;this.options=d||{};this.state="initialized";this.connection=null;this.encrypted=!!d.encrypted;this.timeline=this.options.timeline;this.connectionCallbacks=this.buildConnectionCallbacks();this.errorCallbacks=this.buildErrorCallbacks();this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var m=e["default"].getNetwork();m.bind("online",function(){g.timeline.info({netinfo:"online"});"connecting"!==g.state&&"unavailable"!==g.state||g.retryIn(0)});
m.bind("offline",function(){g.timeline.info({netinfo:"offline"});g.connection&&g.sendActivityCheck()});this.updateStrategy()}c(b,a);b.prototype.connect=function(){this.connection||this.runner||(this.strategy.isSupported()?(this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()):this.updateState("failed"))};b.prototype.send=function(a){return this.connection?this.connection.send(a):!1};b.prototype.send_event=function(a,b,c){return this.connection?this.connection.send_event(a,
b,c):!1};b.prototype.disconnect=function(){this.disconnectInternally();this.updateState("disconnected")};b.prototype.isEncrypted=function(){return this.encrypted};b.prototype.startConnecting=function(){var a=this,b=function(c,d){c?a.runner=a.strategy.connect(0,b):"error"===d.action?(a.emit("error",{type:"HandshakeError",error:d.error}),a.timeline.error({handshakeError:d.error})):(a.abortConnecting(),a.handshakeCallbacks[d.action](d))};this.runner=this.strategy.connect(0,b)};b.prototype.abortConnecting=
function(){this.runner&&(this.runner.abort(),this.runner=null)};b.prototype.disconnectInternally=function(){this.abortConnecting();this.clearRetryTimer();this.clearUnavailableTimer();this.connection&&this.abandonConnection().close()};b.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,encrypted:this.encrypted})};b.prototype.retryIn=function(a){var b=this;this.timeline.info({action:"retry",delay:a});0<a&&this.emit("connecting_in",Math.round(a/
1E3));this.retryTimer=new l.OneOffTimer(a||0,function(){b.disconnectInternally();b.connect()})};b.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)};b.prototype.setUnavailableTimer=function(){var a=this;this.unavailableTimer=new l.OneOffTimer(this.options.unavailableTimeout,function(){a.updateState("unavailable")})};b.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()};b.prototype.sendActivityCheck=
function(){var a=this;this.stopActivityCheck();this.connection.ping();this.activityTimer=new l.OneOffTimer(this.options.pongTimeout,function(){a.timeline.error({pong_timed_out:a.options.pongTimeout});a.retryIn(0)})};b.prototype.resetActivityCheck=function(){var a=this;this.stopActivityCheck();this.connection.handlesActivityChecks()||(this.activityTimer=new l.OneOffTimer(this.activityTimeout,function(){a.sendActivityCheck()}))};b.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()};
b.prototype.buildConnectionCallbacks=function(){var a=this;return{message:function(b){a.resetActivityCheck();a.emit("message",b)},ping:function(){a.send_event("pusher:pong",{})},activity:function(){a.resetActivityCheck()},error:function(b){a.emit("error",{type:"WebSocketError",error:b})},closed:function(){a.abandonConnection();a.shouldRetry()&&a.retryIn(1E3)}}};b.prototype.buildHandshakeCallbacks=function(a){var b=this;return k.extend({},a,{connected:function(a){b.activityTimeout=Math.min(b.options.activityTimeout,
a.activityTimeout,a.connection.activityTimeout||Infinity);b.clearUnavailableTimer();b.setConnection(a.connection);b.socket_id=b.connection.id;b.updateState("connected",{socket_id:b.socket_id})}})};b.prototype.buildErrorCallbacks=function(){var a=this,b=function(b){return function(c){c.error&&a.emit("error",{type:"WebSocketError",error:c.error});b(c)}};return{ssl_only:b(function(){a.encrypted=!0;a.updateStrategy();a.retryIn(0)}),refused:b(function(){a.disconnect()}),backoff:b(function(){a.retryIn(1E3)}),
retry:b(function(){a.retryIn(0)})}};b.prototype.setConnection=function(a){this.connection=a;for(var b in this.connectionCallbacks)this.connection.bind(b,this.connectionCallbacks[b]);this.resetActivityCheck()};b.prototype.abandonConnection=function(){if(this.connection){this.stopActivityCheck();for(var a in this.connectionCallbacks)this.connection.unbind(a,this.connectionCallbacks[a]);a=this.connection;this.connection=null;return a}};b.prototype.updateState=function(a,b){var c=this.state;this.state=
a;if(c!==a){var d=a;"connected"===d&&(d+=" with new socket ID "+b.socket_id);g["default"].debug("State changed",c+" -> "+d);this.timeline.info({state:a,params:b});this.emit("state_change",{previous:c,current:a});this.emit(a,b)}};b.prototype.shouldRetry=function(){return"connecting"===this.state||"connected"===this.state};return b}(d["default"]);a.__esModule=!0;a["default"]=b},function(d,a,b){var c=b(9),l=b(42);d=function(){function a(){this.channels={}}a.prototype.add=function(a,b){if(!this.channels[a]){var c=
this.channels,d;d=0===a.indexOf("private-")?l["default"].createPrivateChannel(a,b):0===a.indexOf("presence-")?l["default"].createPresenceChannel(a,b):l["default"].createChannel(a,b);c[a]=d}return this.channels[a]};a.prototype.all=function(){return c.values(this.channels)};a.prototype.find=function(a){return this.channels[a]};a.prototype.remove=function(a){var b=this.channels[a];delete this.channels[a];return b};a.prototype.disconnect=function(){c.objectApply(this.channels,function(a){a.disconnect()})};
return a}();a.__esModule=!0;a["default"]=d},function(d,a,b){function c(a,b){g["default"].defer(function(){b(a)});return{abort:function(){},forceMinPriority:function(){}}}var l=b(42),g=b(11),k=b(30),e=b(9);d=function(){function a(b,c,d,e){this.name=b;this.priority=c;this.transport=d;this.options=e||{}}a.prototype.isSupported=function(){return this.transport.isSupported({encrypted:this.options.encrypted})};a.prototype.connect=function(a,b){var d=this;if(!this.isSupported())return c(new k.UnsupportedStrategy,
b);if(this.priority<a)return c(new k.TransportPriorityTooLow,b);var f=!1,g=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),t=null,u=function(){g.unbind("initialized",u);g.connect()},x=function(){t=l["default"].createHandshake(g,function(a){f=!0;C();b(null,a)})},w=function(a){C();b(a)},v=function(){C();var a;try{a=JSON.stringify(g)}catch(c){a=e.safeJSONStringify(g)}b(new k.TransportClosed(a))},C=function(){g.unbind("initialized",u);g.unbind("open",x);g.unbind("error",
w);g.unbind("closed",v)};g.bind("initialized",u);g.bind("open",x);g.bind("error",w);g.bind("closed",v);g.initialize();return{abort:function(){f||(C(),t?t.close():g.close())},forceMinPriority:function(a){f||d.priority<a&&(t?t.close():g.close())}}};return a}();a.__esModule=!0;a["default"]=d},function(d,a,b){var c=b(9),l=b(11),g=b(12);d=function(){function a(b,c){this.strategies=b;this.loop=Boolean(c.loop);this.failFast=Boolean(c.failFast);this.timeout=c.timeout;this.timeoutLimit=c.timeoutLimit}a.prototype.isSupported=
function(){return c.any(this.strategies,l["default"].method("isSupported"))};a.prototype.connect=function(a,b){var c=this,d=this.strategies,g=0,k=this.timeout,l=null,t=function(u,x){x?b(null,x):(g+=1,c.loop&&(g%=d.length),g<d.length?(k&&(k*=2,c.timeoutLimit&&(k=Math.min(k,c.timeoutLimit))),l=c.tryStrategy(d[g],a,{timeout:k,failFast:c.failFast},t)):b(!0))},l=this.tryStrategy(d[g],a,{timeout:k,failFast:this.failFast},t);return{abort:function(){l.abort()},forceMinPriority:function(b){a=b;l&&l.forceMinPriority(b)}}};
a.prototype.tryStrategy=function(a,b,c,d){var k=null,l=null;0<c.timeout&&(k=new g.OneOffTimer(c.timeout,function(){l.abort();d(!0)}));l=a.connect(b,function(a,b){a&&k&&k.isRunning()&&!c.failFast||(k&&k.ensureAborted(),d(a,b))});return{abort:function(){k&&k.ensureAborted();l.abort()},forceMinPriority:function(a){l.forceMinPriority(a)}}};return a}();a.__esModule=!0;a["default"]=d},function(d,a,b){function c(a,b,c){var d=k.map(a,function(a,d,e,f){return a.connect(b,c(d,f))});return{abort:function(){k.apply(d,
g)},forceMinPriority:function(a){k.apply(d,function(b){b.forceMinPriority(a)})}}}function l(a){return k.all(a,function(a){return Boolean(a.error)})}function g(a){a.error||a.aborted||(a.abort(),a.aborted=!0)}var k=b(9),e=b(11);d=function(){function a(b){this.strategies=b}a.prototype.isSupported=function(){return k.any(this.strategies,e["default"].method("isSupported"))};a.prototype.connect=function(a,b){return c(this.strategies,a,function(a,c){return function(d,e){(c[a].error=d)?l(c)&&b(!0):(k.apply(c,
function(a){a.forceMinPriority(e.transport.priority)}),b(null,e))}})};return a}();a.__esModule=!0;a["default"]=d},function(d,a,b){function c(a){return"pusherTransport"+(a?"Encrypted":"Unencrypted")}function l(a){var b=e["default"].getLocalStorage();if(b)try{var d=b[c(a)];if(d)return JSON.parse(d)}catch(f){g(a)}return null}function g(a){var b=e["default"].getLocalStorage();if(b)try{delete b[c(a)]}catch(d){}}var k=b(11),e=b(2),f=b(56);d=function(){function a(b,c,d){this.strategy=b;this.transports=c;
this.ttl=d.ttl||18E5;this.encrypted=d.encrypted;this.timeline=d.timeline}a.prototype.isSupported=function(){return this.strategy.isSupported()};a.prototype.connect=function(a,b){var d=this.encrypted,m=l(d),t=[this.strategy];if(m&&m.timestamp+this.ttl>=k["default"].now()){var u=this.transports[m.transport];u&&(this.timeline.info({cached:!0,transport:m.transport,latency:m.latency}),t.push(new f["default"]([u],{timeout:2*m.latency+1E3,failFast:!0})))}var x=k["default"].now(),w=t.pop().connect(a,function C(f,
m){if(f)g(d),0<t.length?(x=k["default"].now(),w=t.pop().connect(a,C)):b(f);else{var l=m.transport.name,r=k["default"].now()-x,u=e["default"].getLocalStorage();if(u)try{u[c(d)]=JSON.stringify({timestamp:k["default"].now(),transport:l,latency:r})}catch(L){}b(null,m)}});return{abort:function(){w.abort()},forceMinPriority:function(b){a=b;w&&w.forceMinPriority(b)}}};return a}();a.__esModule=!0;a["default"]=d},function(d,a,b){var c=b(12);d=function(){function a(b,c){var d=c.delay;this.strategy=b;this.options=
{delay:d}}a.prototype.isSupported=function(){return this.strategy.isSupported()};a.prototype.connect=function(a,b){var d=this.strategy,f,m=new c.OneOffTimer(this.options.delay,function(){f=d.connect(a,b)});return{abort:function(){m.ensureAborted();f&&f.abort()},forceMinPriority:function(b){a=b;f&&f.forceMinPriority(b)}}};return a}();a.__esModule=!0;a["default"]=d},function(d,a){var b=function(){function a(b,c,d){this.test=b;this.trueBranch=c;this.falseBranch=d}a.prototype.isSupported=function(){return(this.test()?
this.trueBranch:this.falseBranch).isSupported()};a.prototype.connect=function(a,b){return(this.test()?this.trueBranch:this.falseBranch).connect(a,b)};return a}();a.__esModule=!0;a["default"]=b},function(d,a){var b=function(){function a(b){this.strategy=b}a.prototype.isSupported=function(){return this.strategy.isSupported()};a.prototype.connect=function(a,b){var c=this.strategy.connect(a,function(a,d){d&&c.abort();b(a,d)});return c};return a}();a.__esModule=!0;a["default"]=b},function(d,a,b){var c=
b(5);a.getGlobalConfig=function(){return{wsHost:c["default"].host,wsPort:c["default"].ws_port,wssPort:c["default"].wss_port,httpHost:c["default"].sockjs_host,httpPort:c["default"].sockjs_http_port,httpsPort:c["default"].sockjs_https_port,httpPath:c["default"].sockjs_path,statsHost:c["default"].stats_host,authEndpoint:c["default"].channel_auth_endpoint,authTransport:c["default"].channel_auth_transport,activity_timeout:c["default"].activity_timeout,pong_timeout:c["default"].pong_timeout,unavailable_timeout:c["default"].unavailable_timeout}};
a.getClusterConfig=function(a){return{wsHost:"ws-"+a+".pusher.com",httpHost:"sockjs-"+a+".pusher.com"}}}])});
(function(){function d(a,b,c){"addEventListener"in window?a.addEventListener(b,c,!1):"attachEvent"in window&&a.attachEvent("on"+b,c)}function a(a){ya&&"object"===typeof window.console&&console.log("[iFrameSizer]["+ka+"] "+a)}function b(a){"object"===typeof window.console&&console.warn("[iFrameSizer]["+ka+"] "+a)}function c(){var a=ga.substr(13).split(":");ka=a[0];K=void 0!==a[1]?Number(a[1]):K;O=void 0!==a[2]?"true"===a[2]?!0:!1:O;ya=void 0!==a[3]?"true"===a[3]?!0:!1:ya;aa=void 0!==a[4]?Number(a[4]):
aa;Ga=void 0!==a[5]?"true"===a[5]?!0:!1:Ga;F=void 0!==a[6]?"true"===a[6]?!0:!1:F;J=a[7];W=void 0!==a[8]?a[8]:W;L=a[9];A=a[10];I=void 0!==a[11]?Number(a[11]):I}function l(b,c){void 0!==c&&""!==c&&"null"!==c&&(document.body.style[b]=c,a("Body "+b+' set to "'+c+'"'))}function g(){d(window,"resize",function(){E("resize","Window resized")})}function k(){d(window,"click",function(){E("click","Window clicked")})}function e(){"offset"!==W&&(W in X||(b(W+" is not a valid option for heightCalculationMethod."),
W="bodyScroll"),a('Height calculation method set to "'+W+'"'))}function f(){var a=document.createElement("div");a.style.clear="both";a.style.display="block";document.body.appendChild(a)}function m(){Ga&&(a("Enable public methods"),window.parentIFrame={close:function(){E("close","parentIFrame.close()",0,0)},getId:function(){return ka},reset:function(){B("parentIFrame.size")},scrollTo:function(a,b){D(b,a,"scrollTo")},scrollToOffset:function(a,b){D(b,a,"scrollToOffset")},sendMessage:function(a,b){D(0,
0,"message",JSON.stringify(a),b)},setHeightCalculationMethod:function(a){W=a;e()},setTargetOrigin:function(b){a("Set targetOrigin: "+b);Za=b},size:function(a,b){E("size","parentIFrame.size("+(""+(a?a:"")+(b?","+b:""))+")",a,b)}})}function h(){0!==aa&&(a("setInterval: "+aa+"ms"),setInterval(function(){E("interval","setInterval: "+aa)},Math.abs(aa)))}function n(b){function c(b){if(void 0===b.height||void 0===b.width||0===b.height||0===b.width)a("Attach listerner to "+b.src),d(b,"load",function(){E("imageLoad",
"Image loaded")})}b.forEach(function(a){"attributes"===a.type&&"src"===a.attributeName?c(a.target):"childList"===a.type&&(a=a.target.querySelectorAll("img"),Array.prototype.forEach.call(a,function(a){c(a)}))})}function q(){function a(b){"height"!==b.propertyName&&"width"!==b.propertyName||E("transitionend","Transition end")}d(window,"transitionend",a);d(window,"webkitTransitionEnd",a);d(window,"oTransitionEnd",a);d(window,"otransitionend",a)}function r(){function c(){var b=document.querySelector("body"),
e=new d(function(a){E("mutationObserver","mutationObserver: "+a[0].target+" "+a[0].type);n(a)});a("Enable MutationObserver");e.observe(b,{attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0})}var d=window.MutationObserver||window.WebKitMutationObserver;d?0>aa?h():c():(b("MutationObserver not supported in this browser!"),h())}function t(){function a(b){var c=document.body,d=0;if("defaultView"in document&&"getComputedStyle"in document.defaultView)d=document.defaultView.getComputedStyle(c,
null),d=null!==d?d[b]:0;else if(b=c.currentStyle[b],/^\d+(px)?$/i.test(b))d=parseInt(b,10);else{var d=c.style.left,e=c.runtimeStyle.left;c.runtimeStyle.left=c.currentStyle.left;c.style.left=b||0;b=c.style.pixelLeft;c.style.left=d;c.runtimeStyle.left=e;d=b}return parseInt(d,10)}return document.body.offsetHeight+a("marginTop")+a("marginBottom")}function u(){return document.body.scrollHeight}function x(){return document.documentElement.offsetHeight}function w(){return document.documentElement.scrollHeight}
function v(){for(var b=document.querySelectorAll("body *"),c=b.length,d=0,e=(new Date).getTime(),f=0;f<c;f++)b[f].getBoundingClientRect().bottom>d&&(d=b[f].getBoundingClientRect().bottom);e=(new Date).getTime()-e;a("Parsed "+c+" HTML elements");a("LowestElement bottom position calculated in "+e+"ms");return d}function C(){return Math.max.apply(null,[t(),u(),x(),w()])}function E(b,c,d,e){function f(){b in{reset:1,resetPage:1,init:1}||a("Trigger event: "+c)}d=void 0!==d?d:X[W]();e=void 0!==e?e:Math.max(document.documentElement.scrollWidth,
document.body.scrollWidth);Math.abs(T-d)<=I&&(!O||Math.abs(ra-e)<=I)?!(b in{init:1,interval:1,size:1})&&W in va?B(c):b in{interval:1}||(f(),a("No change in size detected")):(f(),T=d,ra=e,D(T,ra,b),a("--"))}function y(a){T=X[W]();ra=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);D(T,ra,a)}function B(b){var c=W;W="offset";a("Reset trigger event: "+b);y("reset");W=c}function D(b,c,d,e,f){void 0===f?f=Za:a("Message targetOrigin: "+f);b=ka+":"+(b+":"+c)+":"+d+(void 0!==e?":"+
e:"");a("Sending message to host page ("+b+")");sb.postMessage("[iFrameSizer]"+b,f)}var F=!0,L="",K=0,J="",A="",O=!1,T=1,p=!0,W="offset",P=!0,ga="",aa=32,ya=!1,ka="",Ga=!1,va={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},Za="*",sb=window.parent,I=0,ra=1,X={offset:t,bodyOffset:t,bodyScroll:u,documentElementOffset:x,scroll:w,documentElementScroll:w,max:C,min:function(){return Math.min.apply(null,[t(),u(),x(),w()])},grow:C,lowestElement:function(){return Math.max(t(),v())}};d(window,"message",
function(d){function h(){ga=d.data;sb=d.source;a("Initialising iFrame");c();void 0===J&&(J=K+"px");-1!==J.indexOf("-")&&b("Negative CSS value ignored for margin");l("margin",J);l("background",L);l("padding",A);f();e();document.documentElement.style.height="";document.body.style.height="";a('HTML & body height set to "auto"');m();!0===F?(g(),k(),q(),r()):a("Auto Resize disabled");E("init","Init message from host page");p=!1;setTimeout(function(){P=!1},128)}"[iFrameSizer]"===(""+d.data).substr(0,13)&&
(p&&d.data.split(":")[2]in{"true":1,"false":1}?h():"reset"===d.data.split("]")[1]?P?a("Page reset ignored by init"):(a("Page size reset by host page"),y("resetPage")):d.data===ga||"iFrameResize"in window||b("Unexpected message ("+d.data+")"))})})();
(function(){if(!window["com.genius.Genius"].require){var d={},a={},b=function(l,g){var k=c(g,l),e=c(k,"./index"),f;if(f=a[k]||a[e])return f;if(e=d[k]||d[k=e])return f={id:k,exports:{}},a[k]=f.exports,e(f.exports,function(a){return b(a,k.split("/").slice(0,-1).join("/"))},f),a[k]=f.exports;throw"module "+l+" not found";},c=function(a,b){var c=[],d,f;d=/^\.\.?(\/|$)/.test(b)?[a,b].join("/").split("/"):b.split("/");for(var m=0,h=d.length;m<h;m++)f=d[m],".."==f?c.pop():"."!=f&&""!=f&&c.push(f);return c.join("/")};
window["com.genius.Genius"].require=function(a){return b(a,"")};window["com.genius.Genius"].require.define=function(a){for(var b in a)d[b]=a[b]};window["com.genius.Genius"].require.modules=d;window["com.genius.Genius"].require.cache=a}return window["com.genius.Genius"].require}).call(this);
(function(){window["com.genius.Genius"].require.define({jschannel:function(d,a,b){d=function(){function a(b,c,d,e){function f(a){for(var c=0;c<a.length;c++)if(a[c].win===b)return!0;return!1}var g=!1;if("*"===c)for(var l in k){if(k.hasOwnProperty(l)&&"*"!==l&&"object"===typeof k[l][d]&&(g=f(k[l][d])))break}else k["*"]&&k["*"][d]&&(g=f(k["*"][d])),!g&&k[c]&&k[c][d]&&(g=f(k[c][d]));if(g)throw"A channel is already bound to the same window which overlaps with origin '"+c+"' and has scope '"+d+"'";"object"!=
typeof k[c]&&(k[c]={});"object"!=typeof k[c][d]&&(k[c][d]=[]);k[c][d].push({win:b,handler:e})}function b(a){return Array.isArray?Array.isArray(a):-1!=a.constructor.toString().indexOf("Array")}var d=Math.floor(1000001*Math.random()),k={},e={},f=function(a){try{var b=JSON.parse(a.data);if("object"!==typeof b||null===b)throw"malformed";}catch(c){return}var d=a.source;a=a.origin;var f,g,l;"string"===typeof b.method&&(l=b.method.split("::"),2==l.length?(f=l[0],l=l[1]):l=b.method);"undefined"!==typeof b.id&&
(g=b.id);if("string"===typeof l){g=!1;if(k[a]&&k[a][f])for(var u=0;u<k[a][f].length;u++)if(k[a][f][u].win===d){k[a][f][u].handler(a,l,b);g=!0;break}if(!g&&k["*"]&&k["*"][f])for(u=0;u<k["*"][f].length;u++)if(k["*"][f][u].win===d){k["*"][f][u].handler(a,l,b);break}}else if("undefined"!=typeof g&&e[g])e[g](a,l,b)};window.addEventListener?window.addEventListener("message",f,!1):window.attachEvent&&window.attachEvent("onmessage",f);return{build:function(f){var h=function(a){if(f.debugOutput&&window.console&&
window.console.log){try{"string"!==typeof a&&(a=JSON.stringify(a))}catch(b){}console.log("["+r+"] "+a)}};if(!window.postMessage)throw"jschannel cannot run this browser, no postMessage";if(!window.JSON||!window.JSON.stringify||!window.JSON.parse)throw"jschannel cannot run this browser, no JSON parsing/serialization";if("object"!=typeof f)throw"Channel build invoked without a proper object argument";if(!f.window||!f.window.postMessage)throw"Channel.build() called without a valid window argument";if(window===
f.window)throw"target window is same as present window -- not allowed";var n=!1;if("string"===typeof f.origin){var q;"*"===f.origin?n=!0:null!==(q=f.origin.match(/^https?:\/\/(?:[-a-zA-Z0-9_\.])+(?::\d+)?/))&&(f.origin=q[0].toLowerCase(),n=!0)}if(!n)throw"Channel.build() called with an invalid origin";if("undefined"!==typeof f.scope){if("string"!==typeof f.scope)throw"scope, when specified, must be a string";if(1<f.scope.split("::").length)throw"scope may not contain double colons: '::'";}var r=function(){for(var a=
"",b=0;5>b;b++)a+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.floor(62*Math.random()));return a}(),t={},u={},x={},w=!1,v=[],C=function(a,b,c){var d=!1,e=!1;return{origin:b,invoke:function(b,d){if(!x[a])throw"attempting to invoke a callback of a nonexistent transaction: "+a;for(var e=!1,f=0;f<c.length;f++)if(b===c[f]){e=!0;break}if(!e)throw"request supports no such callback '"+b+"'";D({id:a,callback:b,params:d})},error:function(b,c){e=!0;if(!x[a])throw"error called for nonexistent message: "+
a;delete x[a];D({id:a,error:b,message:c})},complete:function(b){e=!0;if(!x[a])throw"complete called for nonexistent message: "+a;delete x[a];D({id:a,result:b})},delayReturn:function(a){"boolean"===typeof a&&(d=!0===a);return d},completed:function(){return e}}},E=function(a,b,c){return window.setTimeout(function(){if(u[a]){var d="timeout ("+b+"ms) exceeded on method '"+c+"'";(1,u[a].error)("timeout_error",d);delete u[a];delete e[a]}},b)},y=function(a,c,d){if("function"===typeof f.gotMessageObserver)try{f.gotMessageObserver(a,
d)}catch(g){h("gotMessageObserver() raised an exception: "+g.toString())}if(d.id&&c){if(t[c]){var k=C(d.id,a,d.callbacks?d.callbacks:[]);x[d.id]={};try{if(d.callbacks&&b(d.callbacks)&&0<d.callbacks.length)for(a=0;a<d.callbacks.length;a++){for(var n=d.callbacks[a],q=d.params,r=n.split("/"),w=0;w<r.length-1;w++){var v=r[w];"object"!==typeof q[v]&&(q[v]={});q=q[v]}q[r[r.length-1]]=function(){var a=n;return function(b){return k.invoke(a,b)}}()}var y=t[c](k,d.params);k.delayReturn()||k.completed()||k.complete(y)}catch(g){c=
"runtime_error";d=null;"string"===typeof g?d=g:"object"===typeof g&&(g&&b(g)&&2==g.length?(c=g[0],d=g[1]):"string"===typeof g.error&&(c=g.error,g.message?"string"===typeof g.message?d=g.message:g=g.message:d=""));if(null===d)try{d=JSON.stringify(g),"undefined"==typeof d&&(d=g.toString())}catch(B){d=g.toString()}k.error(c,d)}}}else if(d.id&&d.callback)if(u[d.id]&&u[d.id].callbacks&&u[d.id].callbacks[d.callback])u[d.id].callbacks[d.callback](d.params);else h("ignoring invalid callback, id:"+d.id+" ("+
d.callback+")");else if(d.id)u[d.id]?(d.error?(1,u[d.id].error)(d.error,d.message):void 0!==d.result?(1,u[d.id].success)(d.result):(1,u[d.id].success)(),delete u[d.id],delete e[d.id]):h("ignoring invalid response: "+d.id);else if(c&&t[c])t[c]({origin:a},d.params)};a(f.window,f.origin,"string"===typeof f.scope?f.scope:"",y);var B=function(a){"string"===typeof f.scope&&f.scope.length&&(a=[f.scope,a].join("::"));return a},D=function(a,b){if(!a)throw"postMessage called with null message";h((w?"post  ":
"queue ")+" message: "+JSON.stringify(a));if(b||w){if("function"===typeof f.postMessageObserver)try{f.postMessageObserver(f.origin,a)}catch(c){h("postMessageObserver() raised an exception: "+c.toString())}f.window.postMessage(JSON.stringify(a),f.origin)}else v.push(a)},F={unbind:function(a){if(t[a]){if(!delete t[a])throw"can't delete method: "+a;return!0}return!1},bind:function(a,b){if(!a||"string"!==typeof a)throw"'method' argument to bind must be string";if(!b||"function"!==typeof b)throw"callback missing from bind params";
if(t[a])throw"method '"+a+"' is already bound!";t[a]=b;return this},call:function(a){if(!a)throw"missing arguments to call function";if(!a.method||"string"!==typeof a.method)throw"'method' argument to call must be string";if(!a.success||"function"!==typeof a.success)throw"'success' callback missing from call";var b={},c=[],f=[],h=function(a,d){if(0<=f.indexOf(d))throw"params cannot be a recursive data structure";f.push(d);if("object"===typeof d)for(var e in d)if(d.hasOwnProperty(e)){var g=a+(a.length?
"/":"")+e;"function"===typeof d[e]?(b[g]=d[e],c.push(g),delete d[e]):"object"===typeof d[e]&&h(g,d[e])}};h("",a.params);var m={id:d,method:B(a.method),params:a.params};c.length&&(m.callbacks=c);a.timeout&&E(d,a.timeout,B(a.method));u[d]={callbacks:b,error:a.error,success:a.success};e[d]=y;d++;D(m)},notify:function(a){if(!a)throw"missing arguments to notify function";if(!a.method||"string"!==typeof a.method)throw"'method' argument to notify must be string";D({method:B(a.method),params:a.params})},
destroy:function(){for(var a=f.window,b=f.origin,c="string"===typeof f.scope?f.scope:"",d=k[b][c],e=0;e<d.length;e++)d[e].win===a&&d.splice(e,1);0===k[b][c].length&&delete k[b][c];window.removeEventListener?window.removeEventListener("message",y,!1):window.detachEvent&&window.detachEvent("onmessage",y);w=!1;t={};x={};u={};f.origin=null;v=[];h("channel destroyed");r=""}};F.bind("__ready",function(a,b){h("ready msg received");if(w)throw"received ready message while in ready state.  help!";r="ping"===
b?r+"-R":r+"-L";F.unbind("__ready");w=!0;h("ready msg accepted.");for("ping"===b&&F.notify({method:"__ready",params:"pong"});v.length;)D(v.pop());if("function"===typeof f.onReady)f.onReady(F)});setTimeout(function(){D({method:B("__ready"),params:"ping"},!0)},0);return F}}}();b.exports=d}})})();window.app=window.app||{};
$.extend(window.app,{load_vidyard_players:function(d,a,b){var c;"function"===typeof d?(c=d,d=$("body")):(d=$(d||"body"),c=b||$.noop);b=d.find(".vidyard_container[data-vidyard-id]");a||(b=b.filter(":visible"));b.each(function(){var a=$(this),b=a.attr("data-vidyard-id"),d=$("#vidyard_"+b+":first");d.length?(a.replaceWith(d.remove()),c()):(a.attr("id","vidyard_"+b).removeAttr("data-vidyard-id"),d=MOBILE_DEVICE||window.RG_EMBEDDED_PAGE?"?width="+a.parent().width():"",$.getScript("//embed.vidyard.com/embed/"+
b+"/iframe/"+d,function(){a.removeClass("loading_with_indicator");c()}))})}});window.app=window.app||{};window.app.youtubeURLre=/https?:\/\/youtube.com\/watch|https?:\/\/www.youtube.com\/watch|https?:\/\/youtu.be\//;window.app.twitterURLre=/((http:\/\/(twitter\.com\/.*\/status\/.*\/photo\/.*|twitter\.com\/.*\/statuses\/.*\/photo|pic\.twitter\.com\/.*|www\.twitter\.com\/.*\/statuses\/.*\/photo\/.*|mobile\.twitter\.com\/.*\/status\/.*\/photo\/.*|mobile\.twitter\.com\/.*\/statuses\/.*\/photo\/.*|twitter\.com\/.*\/status\/.*|twitter\.com\/.*\/statuses\/.*|www\.twitter\.com\/.*\/status\/.*|www\.twitter\.com\/.*\/statuses\/.*|mobile\.twitter\.com\/.*\/status\/.*|mobile\.twitter\.com\/.*\/statuses\/.*))|(https:\/\/(twitter\.com\/.*\/status\/.*\/photo\/.*|twitter\.com\/.*\/statuses\/.*\/photo\/.*|www\.twitter\.com\/.*\/status\/.*\/photo\/.*|www\.twitter\.com\/.*\/statuses\/.*\/photo\/.*|mobile\.twitter\.com\/.*\/status\/.*\/photo\/.*|mobile\.twitter\.com\/.*\/statuses\/.*\/photo\/.*|twitter\.com\/.*\/status\/.*|twitter\.com\/.*\/statuses\/.*|www\.twitter\.com\/.*\/status\/.*|www\.twitter\.com\/.*\/statuses\/.*|mobile\.twitter\.com\/.*\/status\/.*|mobile\.twitter\.com\/.*\/statuses\/.*)))/i;
window.app.rgURLre=/^(https?:\/\/(.+\.)?((?:rap)?genius\.com|genius\.com)\/(\d+)(?:\/|\?|$))/i;window.app.embedlyURLre=/((https?:\/\/(.*yfrog\..*\/.*|www\.flickr\.com\/photos\/.*|flic\.kr\/.*|twitpic\.com\/.*|www\.twitpic\.com\/.*|twitpic\.com\/photos\/.*|www\.twitpic\.com\/photos\/.*|.*imgur\.com\/.*|.*\.posterous\.com\/.*|post\.ly\/.*|twitgoo\.com\/.*|i.*\.photobucket\.com\/albums\/.*|s.*\.photobucket\.com\/albums\/.*|phodroid\.com\/.*\/.*\/.*|www\.mobypicture\.com\/user\/.*\/view\/.*|moby\.to\/.*|xkcd\.com\/.*|www\.xkcd\.com\/.*|imgs\.xkcd\.com\/.*|www\.asofterworld\.com\/index\.php\?id=.*|www\.asofterworld\.com\/.*\.jpg|asofterworld\.com\/.*\.jpg|www\.qwantz\.com\/index\.php\?comic=.*|23hq\.com\/.*\/photo\/.*|www\.23hq\.com\/.*\/photo\/.*|.*dribbble\.com\/shots\/.*|drbl\.in\/.*|.*\.smugmug\.com\/.*|.*\.smugmug\.com\/.*#.*|emberapp\.com\/.*\/images\/.*|emberapp\.com\/.*\/images\/.*\/sizes\/.*|emberapp\.com\/.*\/collections\/.*\/.*|emberapp\.com\/.*\/categories\/.*\/.*\/.*|embr\.it\/.*|picasaweb\.google\.com.*\/.*\/.*#.*|picasaweb\.google\.com.*\/lh\/photo\/.*|picasaweb\.google\.com.*\/.*\/.*|dailybooth\.com\/.*\/.*|brizzly\.com\/pic\/.*|pics\.brizzly\.com\/.*\.jpg|img\.ly\/.*|www\.tinypic\.com\/view\.php.*|tinypic\.com\/view\.php.*|www\.tinypic\.com\/player\.php.*|tinypic\.com\/player\.php.*|www\.tinypic\.com\/r\/.*\/.*|tinypic\.com\/r\/.*\/.*|.*\.tinypic\.com\/.*\.jpg|.*\.tinypic\.com\/.*\.png|meadd\.com\/.*\/.*|meadd\.com\/.*|.*\.deviantart\.com\/art\/.*|.*\.deviantart\.com\/gallery\/.*|.*\.deviantart\.com\/#\/.*|fav\.me\/.*|.*\.deviantart\.com|.*\.deviantart\.com\/gallery|.*\.deviantart\.com\/.*\/.*\.jpg|.*\.deviantart\.com\/.*\/.*\.gif|.*\.deviantart\.net\/.*\/.*\.jpg|.*\.deviantart\.net\/.*\/.*\.gif|www\.fotopedia\.com\/.*\/.*|fotopedia\.com\/.*\/.*|photozou\.jp\/photo\/show\/.*\/.*|photozou\.jp\/photo\/photo_only\/.*\/.*|instagr\.am\/p\/.*|instagram\.com\/p\/.*|www\.instagram\.com\/p\/.*|skitch\.com\/.*\/.*\/.*|img\.skitch\.com\/.*|share\.ovi\.com\/media\/.*\/.*|www\.questionablecontent\.net\/|questionablecontent\.net\/|www\.questionablecontent\.net\/view\.php.*|questionablecontent\.net\/view\.php.*|questionablecontent\.net\/comics\/.*\.png|www\.questionablecontent\.net\/comics\/.*\.png|picplz\.com\/user\/.*\/pic\/.*\/|twitrpix\.com\/.*|.*\.twitrpix\.com\/.*|www\.someecards\.com\/.*\/.*|someecards\.com\/.*\/.*|some\.ly\/.*|www\.some\.ly\/.*|pikchur\.com\/.*|achewood\.com\/.*|www\.achewood\.com\/.*|achewood\.com\/index\.php.*|www\.achewood\.com\/index\.php.*|www\.whosay\.com\/content\/.*|www\.whosay\.com\/photos\/.*|www\.whosay\.com\/videos\/.*|say\.ly\/.*|ow\.ly\/i\/.*|color\.com\/s\/.*|bnter\.com\/convo\/.*|mlkshk\.com\/p\/.*|lockerz\.com\/s\/.*|soundcloud\.com\/.*|soundcloud\.com\/.*\/.*|soundcloud\.com\/.*\/sets\/.*|soundcloud\.com\/groups\/.*|snd\.sc\/.*|www\.last\.fm\/music\/.*|www\.last\.fm\/music\/+videos\/.*|www\.last\.fm\/music\/+images\/.*|www\.last\.fm\/music\/.*\/_\/.*|www\.last\.fm\/music\/.*\/.*|www\.mixcloud\.com\/.*\/.*\/|www\.radionomy\.com\/.*\/radio\/.*|radionomy\.com\/.*\/radio\/.*|www\.hark\.com\/clips\/.*|www\.rdio\.com\/#\/artist\/.*\/album\/.*|www\.rdio\.com\/artist\/.*\/album\/.*|www\.zero-inch\.com\/.*|.*\.bandcamp\.com\/|.*\.bandcamp\.com\/track\/.*|.*\.bandcamp\.com\/album\/.*|freemusicarchive\.org\/music\/.*|www\.freemusicarchive\.org\/music\/.*|freemusicarchive\.org\/curator\/.*|www\.freemusicarchive\.org\/curator\/.*|www\.npr\.org\/.*\/.*\/.*\/.*\/.*|www\.npr\.org\/.*\/.*\/.*\/.*\/.*\/.*|www\.npr\.org\/.*\/.*\/.*\/.*\/.*\/.*\/.*|www\.npr\.org\/templates\/story\/story\.php.*|huffduffer\.com\/.*\/.*|www\.audioboo\.fm\/boos\/.*|audioboo\.fm\/boos\/.*|boo\.fm\/b.*|www\.xiami\.com\/song\/.*|xiami\.com\/song\/.*|www\.saynow\.com\/playMsg\.html.*|www\.saynow\.com\/playMsg\.html.*|grooveshark\.com\/s\/.*|listen\.grooveshark\.com\/s\/.*|radioreddit\.com\/songs.*|www\.radioreddit\.com\/songs.*|radioreddit\.com\/\?q=songs.*|www\.radioreddit\.com\/\?q=songs.*|www\.gogoyoko\.com\/song\/.*|.*amazon\..*\/gp\/product\/.*|.*amazon\..*\/.*\/dp\/.*|.*amazon\..*\/dp\/.*|.*amazon\..*\/o\/ASIN\/.*|.*amazon\..*\/gp\/offer-listing\/.*|.*amazon\..*\/.*\/ASIN\/.*|.*amazon\..*\/gp\/product\/images\/.*|.*amazon\..*\/gp\/aw\/d\/.*|www\.amzn\.com\/.*|amzn\.com\/.*|www\.shopstyle\.com\/browse.*|www\.shopstyle\.com\/action\/apiVisitRetailer.*|api\.shopstyle\.com\/action\/apiVisitRetailer.*|www\.shopstyle\.com\/action\/viewLook.*|gist\.github\.com\/.*|twitter\.com\/.*\/status\/.*|twitter\.com\/.*\/statuses\/.*|www\.twitter\.com\/.*\/status\/.*|www\.twitter\.com\/.*\/statuses\/.*|mobile\.twitter\.com\/.*\/status\/.*|mobile\.twitter\.com\/.*\/statuses\/.*|www\.crunchbase\.com\/.*\/.*|crunchbase\.com\/.*\/.*|www\.slideshare\.net\/.*\/.*|www\.slideshare\.net\/mobile\/.*\/.*|slidesha\.re\/.*|scribd\.com\/doc\/.*|www\.scribd\.com\/doc\/.*|scribd\.com\/mobile\/documents\/.*|www\.scribd\.com\/mobile\/documents\/.*|screenr\.com\/.*|polldaddy\.com\/community\/poll\/.*|polldaddy\.com\/poll\/.*|answers\.polldaddy\.com\/poll\/.*|www\.5min\.com\/Video\/.*|www\.howcast\.com\/videos\/.*|www\.screencast\.com\/.*\/media\/.*|screencast\.com\/.*\/media\/.*|www\.screencast\.com\/t\/.*|screencast\.com\/t\/.*|issuu\.com\/.*\/docs\/.*|www\.kickstarter\.com\/projects\/.*\/.*|www\.scrapblog\.com\/viewer\/viewer\.aspx.*|ping\.fm\/p\/.*|chart\.ly\/symbols\/.*|chart\.ly\/.*|maps\.google\.com\/maps\?.*|maps\.google\.com\/\?.*|maps\.google\.com\/maps\/ms\?.*|.*\.craigslist\.org\/.*\/.*|my\.opera\.com\/.*\/albums\/show\.dml\?id=.*|my\.opera\.com\/.*\/albums\/showpic\.dml\?album=.*&picture=.*|tumblr\.com\/.*|.*\.tumblr\.com\/post\/.*|www\.polleverywhere\.com\/polls\/.*|www\.polleverywhere\.com\/multiple_choice_polls\/.*|www\.polleverywhere\.com\/free_text_polls\/.*|www\.quantcast\.com\/wd:.*|www\.quantcast\.com\/.*|siteanalytics\.compete\.com\/.*|statsheet\.com\/statplot\/charts\/.*\/.*\/.*\/.*|statsheet\.com\/statplot\/charts\/e\/.*|statsheet\.com\/.*\/teams\/.*\/.*|statsheet\.com\/tools\/chartlets\?chart=.*|.*\.status\.net\/notice\/.*|identi\.ca\/notice\/.*|brainbird\.net\/notice\/.*|shitmydadsays\.com\/notice\/.*|www\.studivz\.net\/Profile\/.*|www\.studivz\.net\/l\/.*|www\.studivz\.net\/Groups\/Overview\/.*|www\.studivz\.net\/Gadgets\/Info\/.*|www\.studivz\.net\/Gadgets\/Install\/.*|www\.studivz\.net\/.*|www\.meinvz\.net\/Profile\/.*|www\.meinvz\.net\/l\/.*|www\.meinvz\.net\/Groups\/Overview\/.*|www\.meinvz\.net\/Gadgets\/Info\/.*|www\.meinvz\.net\/Gadgets\/Install\/.*|www\.meinvz\.net\/.*|www\.schuelervz\.net\/Profile\/.*|www\.schuelervz\.net\/l\/.*|www\.schuelervz\.net\/Groups\/Overview\/.*|www\.schuelervz\.net\/Gadgets\/Info\/.*|www\.schuelervz\.net\/Gadgets\/Install\/.*|www\.schuelervz\.net\/.*|myloc\.me\/.*|pastebin\.com\/.*|pastie\.org\/.*|www\.pastie\.org\/.*|redux\.com\/stream\/item\/.*\/.*|redux\.com\/f\/.*\/.*|www\.redux\.com\/stream\/item\/.*\/.*|www\.redux\.com\/f\/.*\/.*|cl\.ly\/.*|cl\.ly\/.*\/content|speakerdeck\.com\/u\/.*\/p\/.*|www\.kiva\.org\/lend\/.*|www\.timetoast\.com\/timelines\/.*|storify\.com\/.*\/.*|.*meetup\.com\/.*|meetu\.ps\/.*|www\.dailymile\.com\/people\/.*\/entries\/.*|.*\.kinomap\.com\/.*|www\.metacdn\.com\/api\/users\/.*\/content\/.*|www\.metacdn\.com\/api\/users\/.*\/media\/.*|prezi\.com\/.*\/.*|.*\.uservoice\.com\/.*\/suggestions\/.*|formspring\.me\/.*|www\.formspring\.me\/.*|formspring\.me\/.*\/q\/.*|www\.formspring\.me\/.*\/q\/.*|twitlonger\.com\/show\/.*|www\.twitlonger\.com\/show\/.*|tl\.gd\/.*|www\.qwiki\.com\/q\/.*|crocodoc\.com\/.*|.*\.crocodoc\.com\/.*|.*youtube\.com\/watch.*|.*\.youtube\.com\/v\/.*|youtu\.be\/.*|.*\.youtube\.com\/user\/.*|.*\.youtube\.com\/.*#.*\/.*|m\.youtube\.com\/watch.*|m\.youtube\.com\/index.*|.*\.youtube\.com\/profile.*|.*\.youtube\.com\/view_play_list.*|.*\.youtube\.com\/playlist.*|www\.vevo\.com\/watch\/.*|www\.vevo\.com\/video\/.*|.*justin\.tv\/.*|.*justin\.tv\/.*\/b\/.*|.*justin\.tv\/.*\/w\/.*|www\.ustream\.tv\/recorded\/.*|www\.ustream\.tv\/channel\/.*|www\.ustream\.tv\/.*|qik\.com\/video\/.*|qik\.com\/.*|qik\.ly\/.*|.*revision3\.com\/.*|.*\.dailymotion\.com\/video\/.*|.*\.dailymotion\.com\/.*\/video\/.*|collegehumor\.com\/video:.*|collegehumor\.com\/video\/.*|www\.collegehumor\.com\/video:.*|www\.collegehumor\.com\/video\/.*|.*twitvid\.com\/.*|www\.break\.com\/.*\/.*|vids\.myspace\.com\/index\.cfm\?fuseaction=vids\.individual&videoid.*|www\.myspace\.com\/index\.cfm\?fuseaction=.*&videoid.*|www\.metacafe\.com\/watch\/.*|www\.metacafe\.com\/w\/.*|blip\.tv\/file\/.*|.*\.blip\.tv\/file\/.*|video\.google\.com\/videoplay\?.*|.*revver\.com\/video\/.*|video\.yahoo\.com\/watch\/.*\/.*|video\.yahoo\.com\/network\/.*|.*viddler\.com\/explore\/.*\/videos\/.*|liveleak\.com\/view\?.*|www\.liveleak\.com\/view\?.*|animoto\.com\/play\/.*|dotsub\.com\/view\/.*|www\.overstream\.net\/view\.php\?oid=.*|www\.livestream\.com\/.*|www\.worldstarhiphop\.com\/videos\/video.*\.php\?v=.*|worldstarhiphop\.com\/videos\/video.*\.php\?v=.*|teachertube\.com\/viewVideo\.php.*|www\.teachertube\.com\/viewVideo\.php.*|www1\.teachertube\.com\/viewVideo\.php.*|www2\.teachertube\.com\/viewVideo\.php.*|bambuser\.com\/v\/.*|bambuser\.com\/channel\/.*|bambuser\.com\/channel\/.*\/broadcast\/.*|www\.schooltube\.com\/video\/.*\/.*|bigthink\.com\/ideas\/.*|bigthink\.com\/series\/.*|sendables\.jibjab\.com\/view\/.*|sendables\.jibjab\.com\/originals\/.*|www\.xtranormal\.com\/watch\/.*|socialcam\.com\/v\/.*|www\.socialcam\.com\/v\/.*|dipdive\.com\/media\/.*|dipdive\.com\/member\/.*\/media\/.*|dipdive\.com\/v\/.*|.*\.dipdive\.com\/media\/.*|.*\.dipdive\.com\/v\/.*|v\.youku\.com\/v_show\/.*\.html|v\.youku\.com\/v_playlist\/.*\.html|www\.snotr\.com\/video\/.*|snotr\.com\/video\/.*|video\.jardenberg\.se\/.*|www\.clipfish\.de\/.*\/.*\/video\/.*|www\.myvideo\.de\/watch\/.*|www\.whitehouse\.gov\/photos-and-video\/video\/.*|www\.whitehouse\.gov\/video\/.*|wh\.gov\/photos-and-video\/video\/.*|wh\.gov\/video\/.*|www\.hulu\.com\/watch.*|www\.hulu\.com\/w\/.*|hulu\.com\/watch.*|hulu\.com\/w\/.*|.*crackle\.com\/c\/.*|www\.fancast\.com\/.*\/videos|www\.funnyordie\.com\/videos\/.*|www\.funnyordie\.com\/m\/.*|funnyordie\.com\/videos\/.*|funnyordie\.com\/m\/.*|www\.vimeo\.com\/groups\/.*\/videos\/.*|www\.vimeo\.com\/.*|vimeo\.com\/groups\/.*\/videos\/.*|vimeo\.com\/.*|vimeo\.com\/m\/#\/.*|www\.ted\.com\/talks\/.*\.html.*|www\.ted\.com\/talks\/lang\/.*\/.*\.html.*|www\.ted\.com\/index\.php\/talks\/.*\.html.*|www\.ted\.com\/index\.php\/talks\/lang\/.*\/.*\.html.*|.*nfb\.ca\/film\/.*|www\.thedailyshow\.com\/watch\/.*|www\.thedailyshow\.com\/full-episodes\/.*|www\.thedailyshow\.com\/collection\/.*\/.*\/.*|movies\.yahoo\.com\/movie\/.*\/video\/.*|movies\.yahoo\.com\/movie\/.*\/trailer|movies\.yahoo\.com\/movie\/.*\/video|www\.colbertnation\.com\/the-colbert-report-collections\/.*|www\.colbertnation\.com\/full-episodes\/.*|www\.colbertnation\.com\/the-colbert-report-videos\/.*|www\.comedycentral\.com\/videos\/index\.jhtml\?.*|www\.theonion\.com\/video\/.*|theonion\.com\/video\/.*|wordpress\.tv\/.*\/.*\/.*\/.*\/|www\.traileraddict\.com\/trailer\/.*|www\.traileraddict\.com\/clip\/.*|www\.traileraddict\.com\/poster\/.*|www\.escapistmagazine\.com\/videos\/.*|www\.trailerspy\.com\/trailer\/.*\/.*|www\.trailerspy\.com\/trailer\/.*|www\.trailerspy\.com\/view_video\.php.*|www\.atom\.com\/.*\/.*\/|fora\.tv\/.*\/.*\/.*\/.*|www\.spike\.com\/video\/.*|www\.gametrailers\.com\/video\/.*|gametrailers\.com\/video\/.*|www\.koldcast\.tv\/video\/.*|www\.koldcast\.tv\/#video:.*|techcrunch\.tv\/watch.*|techcrunch\.tv\/.*\/watch.*|mixergy\.com\/.*|video\.pbs\.org\/video\/.*|www\.zapiks\.com\/.*|tv\.digg\.com\/diggnation\/.*|tv\.digg\.com\/diggreel\/.*|tv\.digg\.com\/diggdialogg\/.*|www\.trutv\.com\/video\/.*|www\.nzonscreen\.com\/title\/.*|nzonscreen\.com\/title\/.*|app\.wistia\.com\/embed\/medias\/.*|hungrynation\.tv\/.*\/episode\/.*|www\.hungrynation\.tv\/.*\/episode\/.*|hungrynation\.tv\/episode\/.*|www\.hungrynation\.tv\/episode\/.*|indymogul\.com\/.*\/episode\/.*|www\.indymogul\.com\/.*\/episode\/.*|indymogul\.com\/episode\/.*|www\.indymogul\.com\/episode\/.*|channelfrederator\.com\/.*\/episode\/.*|www\.channelfrederator\.com\/.*\/episode\/.*|channelfrederator\.com\/episode\/.*|www\.channelfrederator\.com\/episode\/.*|tmiweekly\.com\/.*\/episode\/.*|www\.tmiweekly\.com\/.*\/episode\/.*|tmiweekly\.com\/episode\/.*|www\.tmiweekly\.com\/episode\/.*|99dollarmusicvideos\.com\/.*\/episode\/.*|www\.99dollarmusicvideos\.com\/.*\/episode\/.*|99dollarmusicvideos\.com\/episode\/.*|www\.99dollarmusicvideos\.com\/episode\/.*|ultrakawaii\.com\/.*\/episode\/.*|www\.ultrakawaii\.com\/.*\/episode\/.*|ultrakawaii\.com\/episode\/.*|www\.ultrakawaii\.com\/episode\/.*|barelypolitical\.com\/.*\/episode\/.*|www\.barelypolitical\.com\/.*\/episode\/.*|barelypolitical\.com\/episode\/.*|www\.barelypolitical\.com\/episode\/.*|barelydigital\.com\/.*\/episode\/.*|www\.barelydigital\.com\/.*\/episode\/.*|barelydigital\.com\/episode\/.*|www\.barelydigital\.com\/episode\/.*|threadbanger\.com\/.*\/episode\/.*|www\.threadbanger\.com\/.*\/episode\/.*|threadbanger\.com\/episode\/.*|www\.threadbanger\.com\/episode\/.*|vodcars\.com\/.*\/episode\/.*|www\.vodcars\.com\/.*\/episode\/.*|vodcars\.com\/episode\/.*|www\.vodcars\.com\/episode\/.*|confreaks\.net\/videos\/.*|www\.confreaks\.net\/videos\/.*|video\.allthingsd\.com\/video\/.*|videos\.nymag\.com\/.*|aniboom\.com\/animation-video\/.*|www\.aniboom\.com\/animation-video\/.*|clipshack\.com\/Clip\.aspx\?.*|www\.clipshack\.com\/Clip\.aspx\?.*|grindtv\.com\/.*\/video\/.*|www\.grindtv\.com\/.*\/video\/.*|ifood\.tv\/recipe\/.*|ifood\.tv\/video\/.*|ifood\.tv\/channel\/user\/.*|www\.ifood\.tv\/recipe\/.*|www\.ifood\.tv\/video\/.*|www\.ifood\.tv\/channel\/user\/.*|logotv\.com\/video\/.*|www\.logotv\.com\/video\/.*|lonelyplanet\.com\/Clip\.aspx\?.*|www\.lonelyplanet\.com\/Clip\.aspx\?.*|streetfire\.net\/video\/.*\.htm.*|www\.streetfire\.net\/video\/.*\.htm.*|trooptube\.tv\/videos\/.*|www\.trooptube\.tv\/videos\/.*|sciencestage\.com\/v\/.*\.html|sciencestage\.com\/a\/.*\.html|www\.sciencestage\.com\/v\/.*\.html|www\.sciencestage\.com\/a\/.*\.html|www\.godtube\.com\/featured\/video\/.*|godtube\.com\/featured\/video\/.*|www\.godtube\.com\/watch\/.*|godtube\.com\/watch\/.*|www\.tangle\.com\/view_video.*|mediamatters\.org\/mmtv\/.*|www\.clikthrough\.com\/theater\/video\/.*|espn\.go\.com\/video\/clip.*|espn\.go\.com\/.*\/story.*|abcnews\.com\/.*\/video\/.*|abcnews\.com\/video\/playerIndex.*|abcnews\.go\.com\/.*\/video\/.*|abcnews\.go\.com\/video\/playerIndex.*|washingtonpost\.com\/wp-dyn\/.*\/video\/.*\/.*\/.*\/.*|www\.washingtonpost\.com\/wp-dyn\/.*\/video\/.*\/.*\/.*\/.*|www\.boston\.com\/video.*|boston\.com\/video.*|www\.facebook\.com\/photo\.php.*|www\.facebook\.com\/video\/video\.php.*|www\.facebook\.com\/v\/.*|www\.facebook\.com\/.*\/videos\/.*|cnbc\.com\/id\/.*\?.*video.*|www\.cnbc\.com\/id\/.*\?.*video.*|cnbc\.com\/id\/.*\/play\/1\/video\/.*|www\.cnbc\.com\/id\/.*\/play\/1\/video\/.*|cbsnews\.com\/video\/watch\/.*|www\.google\.com\/buzz\/.*\/.*\/.*|www\.google\.com\/buzz\/.*|www\.google\.com\/profiles\/.*|google\.com\/buzz\/.*\/.*\/.*|google\.com\/buzz\/.*|google\.com\/profiles\/.*|www\.cnn\.com\/video\/.*|edition\.cnn\.com\/video\/.*|money\.cnn\.com\/video\/.*|today\.msnbc\.msn\.com\/id\/.*\/vp\/.*|www\.msnbc\.msn\.com\/id\/.*\/vp\/.*|www\.msnbc\.msn\.com\/id\/.*\/ns\/.*|today\.msnbc\.msn\.com\/id\/.*\/ns\/.*|multimedia\.foxsports\.com\/m\/video\/.*\/.*|msn\.foxsports\.com\/video.*|www\.globalpost\.com\/video\/.*|www\.globalpost\.com\/dispatch\/.*|guardian\.co\.uk\/.*\/video\/.*\/.*\/.*\/.*|www\.guardian\.co\.uk\/.*\/video\/.*\/.*\/.*\/.*|bravotv\.com\/.*\/.*\/videos\/.*|www\.bravotv\.com\/.*\/.*\/videos\/.*|video\.nationalgeographic\.com\/.*\/.*\/.*\.html|dsc\.discovery\.com\/videos\/.*|animal\.discovery\.com\/videos\/.*|health\.discovery\.com\/videos\/.*|investigation\.discovery\.com\/videos\/.*|military\.discovery\.com\/videos\/.*|planetgreen\.discovery\.com\/videos\/.*|science\.discovery\.com\/videos\/.*|tlc\.discovery\.com\/videos\/.*|video\.forbes\.com\/fvn\/.*|vine\.co\/v\/.*|www\.vine\.co\/v\/.*|video\.foxnews\.com\/v\/.*|thinglink\.com\/.*|www\.thinglink\.com\/.*|nbcnews\.com\/.*|www\.nbcnews\.com\/.*|itunes\.apple\.com\/.*)))|((http:\/\/(link\.brightcove\.com\/services\/player\/bcpid.*|bcove\.me\/.*|players\.brightcove\.net\/.*))|(https:\/\/(players\.brightcove\.net\/.*)))/i;
window.app=window.app||{};
app.templates={ajax_error_message:'<h1>Whoops, our bad!!!</h1>       <h3>Something went wrong; we have to reload the page</h3>       <p class="callout"><a class="facebox" href="/feedback/new">Contact us</a> if this keeps happening</p>',link_injection_error_message:"<h1>Something weird is going on!</h1>       <p>We noticed some links on the page that shouldn't be there. It's       possible you have a malicious browser extension installed that is       putting spam on the page.</p>",twitter_embed:Hogan.compile('<blockquote class="twitter-tweet"><a href="{{tweet_url}}"></a></blockquote>'),
cosign_message:function(){var d=null;return function(){d||(d=Hogan.compile('<li class="cosign_message" data-user-id="{{user_id}}" data-uncosign-path="{{uncosign_path}}"><a href="{{artist_url}}" class="cosigner">You</a> cosigned this '+app.sc("annotation.singular_noun")+' {{#moderator}}<a href="#" class="remove_cosign">Remove</a>{{/moderator}}</li>'));return d}}(),rg_standalone_annotation_embed:function(){var d=null;return function(){d||(d=Hogan.compile('<blockquote class="rg_standalone_container" data-src="//'+
CANONICAL_DOMAIN+"/annotations/{{annotation_id}}/standalone_embed"+("undefined"!==typeof RG_EMBEDDED_PAGE&&RG_EMBEDDED_PAGE?"":"?dark=1")+'"></blockquote>'));return d}}()};window.app=window.app||{};$.expr[":"].inner_text_matches=function(d,a,b){return(new RegExp(b[3],"i")).test($.trim($(d).text()))};
$.extend(window.app,{setup_embedly_pro:function(d,a){var b,c;"function"===typeof d?(c=d,b=$(".embedly_pro:visible")):(c=a||$.noop,b=$(d||".embedly_pro:visible"));b.find("a:inner_text_matches(^https?://)").each(function(){if(app.embedlyURLre.test(this.href))return!0;var a=$(this);a.embedly({key:EMBEDLY_KEY,width:"",secure:!0,query:{secure:"true"},display:function(b){if(b.description&&a.parent().text().trim()===a.text().trim()){var d='<div class="embedly_preview"><img class="thumb" src="'+(b.thumbnail_url||
"")+'">           <div class="text"><a class="title" href="'+b.original_url+'">'+b.title+'</a>           <a class="provider" href="'+b.provider_url+'">'+b.provider_name+'</a>           <div class="description">'+b.description+"</div></div></div>";b.thumbnail_url||(d=$(d).removeClass("has_thumb").find("img.thumb").remove().end().outer_html());a.replaceWith(d)}else a.text(b.title);c()}})})},setup_embedly:function(d,a){var b,c;"function"===typeof d?(c=d,b=$(".embedly:visible")):(c=a||$.noop,b=$(d||".embedly:visible"));
b.find("a:inner_text_matches(^https?://)").each(function(){var a=$(this),d;if(a.parent().is(".embedly_preview"))return!0;if(app.twitterURLre.test(this.href))a.replaceWith($(app.templates.twitter_embed.render({tweet_url:this.href}))),$.getScript("//platform.twitter.com/widgets.js",c);else if(app.rgURLre.test(this.href)&&this.href===a.text()&&!a.closest(".cont-annotations.act-standlone_embed").length)d=app.rgURLre.exec(this.href).pop(),a.replaceWith($(app.templates.rg_standalone_annotation_embed().render({annotation_id:d}))),
$.getScript("//"+CANONICAL_DOMAIN+"/annotations/load_standalone_embeds.js",c);else{if(d=this.href.match(/https?:\/\/embed\.vidyard\.com\/(landingpage|share)\/(.*)/i))return a.addClass("vidyard_container").attr("data-vidyard-id",d[2]).removeAttr("href"),app.load_vidyard_players(b,!1,c),!0;if(app.embedlyURLre.test(this.href))d=a.closest("[data-embedly-width]").attr("data-embedly-width")||a.parent().width()-10,MOBILE_DEVICE&&(d=a.parent().width()),a.embedly({addImageStyles:!1,className:"embedly_preview",
secure:!0,query:{maxwidth:d,luxe:!MOBILE_DEVICE,secure:"true"},key:EMBEDLY_KEY,width:"",display:function(a){var b=a.html;/soundcloud\.com/.test(b)&&(a.html=b.replace("visual%3Dtrue","visual%3Dfalse").replace(/height="\d+"/,'height="165"'),a.height=165);a.display();c()}});else return!0}a.text("Loading embed...")});app.setup_embedly_pro(d,c)}});
window.Modernizr=function(d,a,b){function c(a,c){for(var d in a){var e=a[d];if(!~(""+e).indexOf("-")&&f[e]!==b)return"pfx"==c?e:!0}return!1}function l(a,d,e){var f=a.charAt(0).toUpperCase()+a.slice(1),g=(a+" "+h.join(f+" ")+f).split(" ");if("string"===typeof d||"undefined"===typeof d)d=c(g,d);else a:{g=(a+" "+n.join(f+" ")+f).split(" "),a=g;for(var m in a)if(f=d[a[m]],f!==b){d=!1===e?a[m]:"function"===typeof f?f.bind(e||d):f;break a}d=!1}return d}var g={},k=a.documentElement,e=a.createElement("modernizr"),
f=e.style,m=" -webkit- -moz- -o- -ms- ".split(" "),h=["Webkit","Moz","O","ms"],n=["webkit","moz","o","ms"],e={},q=[],r=q.slice,t,u=function(b,c,d,e){var f,h,g,m,l=a.createElement("div"),n=a.body,q=n||a.createElement("body");if(parseInt(d,10))for(;d--;)g=a.createElement("div"),g.id=e?e[d]:"modernizr"+(d+1),l.appendChild(g);return f=['&#173;<style id="smodernizr">',b,"</style>"].join(""),l.id="modernizr",(n?l:q).innerHTML+=f,q.appendChild(l),n||(q.style.background="",q.style.overflow="hidden",m=k.style.overflow,
k.style.overflow="hidden",k.appendChild(q)),h=c(l,b),n?l.parentNode.removeChild(l):(q.parentNode.removeChild(q),k.style.overflow=m),!!h},x={}.hasOwnProperty,w;"undefined"===typeof x||"undefined"===typeof x.call?w=function(a,b){return b in a&&"undefined"===typeof a.constructor.prototype[b]}:w=function(a,b){return x.call(a,b)};Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=r.call(arguments,1),d=function(){if(this instanceof
d){var e=function(){};e.prototype=b.prototype;var e=new e,f=b.apply(e,c.concat(r.call(arguments)));return Object(f)===f?f:e}return b.apply(a,c.concat(r.call(arguments)))};return d});e.flexbox=function(){return l("flexWrap")};e.flexboxlegacy=function(){return l("boxDirection")};e.touch=function(){var b;return"ontouchstart"in d||d.DocumentTouch&&a instanceof DocumentTouch?b=!0:u(["@media (",m.join("touch-enabled),("),"modernizr){#modernizr{top:9px;position:absolute}}"].join(""),function(a){b=9===a.offsetTop}),
b};e.history=function(){return!!d.history&&!!history.pushState};e.csstransforms=function(){return!!l("transform")};e.csstransforms3d=function(){var a=!!l("perspective");return a&&"webkitPerspective"in k.style&&u("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(b,c){a=9===b.offsetLeft&&3===b.offsetHeight}),a};for(var v in e)w(e,v)&&(t=v.toLowerCase(),g[t]=e[v](),q.push((g[t]?"":"no-")+t));g.addTest=function(a,c){if("object"==typeof a)for(var d in a)w(a,
d)&&g.addTest(d,a[d]);else{a=a.toLowerCase();if(g[a]!==b)return g;c="function"==typeof c?c():c;k.className+=" "+(c?"":"no-")+a;g[a]=c}return g};f.cssText="";return e=null,function(a,b){function c(){var a=u.elements;return"string"==typeof a?a.split(" "):a}function d(a){var b=r[a[n]];return b||(b={},q++,a[n]=q,r[q]=b),b}function e(a,c,f){c||(c=b);if(t)return c.createElement(a);f||(f=d(c));var h;return f.cache[a]?h=f.cache[a].cloneNode():k.test(a)?h=(f.cache[a]=f.createElem(a)).cloneNode():h=f.createElem(a),
!h.canHaveChildren||m.test(a)||h.tagUrn?h:f.frag.appendChild(h)}function f(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag());a.createElement=function(c){return u.shivMethods?e(c,a,b):b.createElem(c)};a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+c().join().replace(/[\w\-]+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(u,
b.frag)}function h(a){a||(a=b);var c=d(a);if(u.shivCSS&&!l&&!c.hasCSS){var e,g=a;e=g.createElement("p");g=g.getElementsByTagName("head")[0]||g.documentElement;e=(e.innerHTML="x<style>article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}</style>",g.insertBefore(e.lastChild,g.firstChild));c.hasCSS=!!e}return t||f(a,c),a}var g=a.html5||{},m=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,
k=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,l,n="_html5shiv",q=0,r={},t;(function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>";l="hidden"in a;var c;if(!(c=1==a.childNodes.length)){b.createElement("a");var d=b.createDocumentFragment();c="undefined"==typeof d.cloneNode||"undefined"==typeof d.createDocumentFragment||"undefined"==typeof d.createElement}t=c}catch(e){t=l=!0}})();var u={elements:g.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",
version:"3.7.0",shivCSS:!1!==g.shivCSS,supportsUnknownElements:t,shivMethods:!1!==g.shivMethods,type:"default",shivDocument:h,createElement:e,createDocumentFragment:function(a,e){a||(a=b);if(t)return a.createDocumentFragment();e=e||d(a);for(var f=e.frag.cloneNode(),h=0,g=c(),m=g.length;h<m;h++)f.createElement(g[h]);return f}};a.html5=u;h(b)}(this,a),g._version="2.8.3",g._prefixes=m,g._domPrefixes=n,g._cssomPrefixes=h,g.testProp=function(a){return c([a])},g.testAllProps=l,g.testStyles=u,k.className=
k.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(" js "+q.join(" ")),g}(this,this.document);
(function(d,a,b){function c(a){return"[object Function]"==t.call(a)}function l(a){return"string"==typeof a}function g(){}function k(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function e(){var a=u.shift();x=1;a?a.t?q(function(){("c"==a.t?J.injectCss:J.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),e()):x=0}function f(b,c,d,f,h,g,m){function l(a){if(!t&&k(n.readyState)&&(y.r=t=1,!x&&e(),n.onload=n.onreadystatechange=null,a)){"img"!=b&&q(function(){C.removeChild(n)},50);for(var d in F[c])F[c].hasOwnProperty(d)&&
F[c][d].onload()}}m=m||J.errorTimeout;var n=a.createElement(b),t=0,w=0,y={t:d,s:c,e:h,a:g,x:m};1===F[c]&&(w=1,F[c]=[]);"object"==b?n.data=c:(n.src=c,n.type=b);n.width=n.height="0";n.onerror=n.onload=n.onreadystatechange=function(){l.call(this,w)};u.splice(f,0,y);"img"!=b&&(w||2===F[c]?(C.insertBefore(n,v?null:r),q(l,m)):F[c].push(n))}function m(a,b,c,d,h){return x=0,b=b||"j",l(a)?f("c"==b?y:E,a,b,this.i++,c,d,h):(u.splice(this.i++,0,a),1==u.length&&e()),this}function h(){var a=J;return a.loader={load:m,
i:0},a}var n=a.documentElement,q=d.setTimeout,r=a.getElementsByTagName("script")[0],t={}.toString,u=[],x=0,w="MozAppearance"in n.style,v=w&&!!a.createRange().compareNode,C=v?n:r.parentNode,n=d.opera&&"[object Opera]"==t.call(d.opera),n=!!a.attachEvent&&!n,E=w?"object":n?"script":"img",y=n?"script":E,B=Array.isArray||function(a){return"[object Array]"==t.call(a)},D=[],F={},L={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}},K,J;J=function(a){function d(a){a=a.split("!");var b=D.length,c=
a.pop(),e=a.length,c={url:c,origUrl:c,prefixes:a},f,h,g;for(h=0;h<e;h++)g=a[h].split("="),(f=L[g.shift()])&&(c=f(c,g));for(h=0;h<b;h++)c=D[h](c);return c}function e(a,f,g,m,k){var n=d(a),l=n.autoCallback;n.url.split(".").pop().split("?").shift();n.bypass||(f&&(f=c(f)?f:f[a]||f[m]||f[a.split("/").pop().split("?")[0]]),n.instead?n.instead(a,f,g,m,k):(F[n.url]?n.noexec=!0:F[n.url]=1,g.load(n.url,n.forceCSS||!n.forceJS&&"css"==n.url.split(".").pop().split("?").shift()?"c":b,n.noexec,n.attrs,n.timeout),
(c(f)||c(l))&&g.load(function(){h();f&&f(n.origUrl,k,m);l&&l(n.origUrl,k,m);F[n.url]=2})))}function f(a,b){function d(a,f){if(a)if(l(a))f||(k=function(){var a=[].slice.call(arguments);n.apply(this,a);q()}),e(a,k,b,0,h);else{if(Object(a)===a)for(t in r=function(){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(t)&&(!f&&!--r&&(c(k)?k=function(){var a=[].slice.call(arguments);n.apply(this,a);q()}:k[t]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,
b);q()}}(n[t])),e(a[t],k,b,t,h))}else!f&&q()}var h=!!a.test,m=a.load||a.both,k=a.callback||g,n=k,q=a.complete||g,r,t;d(h?a.yep:a.nope,!!m);m&&d(m)}var m,k,n=this.yepnope.loader;if(l(a))e(a,0,n,0);else if(B(a))for(m=0;m<a.length;m++)k=a[m],l(k)?e(k,0,n,0):B(k)?J(k):Object(k)===k&&f(k,n);else Object(a)===a&&f(a,n)};J.addPrefix=function(a,b){L[a]=b};J.addFilter=function(a){D.push(a)};J.errorTimeout=1E4;null==a.readyState&&a.addEventListener&&(a.readyState="loading",a.addEventListener("DOMContentLoaded",
K=function(){a.removeEventListener("DOMContentLoaded",K,0);a.readyState="complete"},0));d.yepnope=h();d.yepnope.executeStack=e;d.yepnope.injectJs=function(b,c,d,f,h,m){var n=a.createElement("script"),l,t;f=f||J.errorTimeout;n.src=b;for(t in d)n.setAttribute(t,d[t]);c=m?e:c||g;n.onreadystatechange=n.onload=function(){!l&&k(n.readyState)&&(l=1,c(),n.onload=n.onreadystatechange=null)};q(function(){l||(l=1,c(1))},f);h?n.onload():r.parentNode.insertBefore(n,r)};d.yepnope.injectCss=function(b,c,d,f,h,m){f=
a.createElement("link");var k;c=m?e:c||g;f.href=b;f.rel="stylesheet";f.type="text/css";for(k in d)f.setAttribute(k,d[k]);h||(r.parentNode.insertBefore(f,r),q(c,0))}})(this,document);Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};Modernizr.addTest("cssfilters",function(){var d=document.createElement("div");return d.style.cssText=Modernizr._prefixes.join("filter:blur(2px); "),!!d.style.length&&(void 0===document.documentMode||9<document.documentMode)});
(function(d,a){function b(a,b){var g=function(k){if(!b.is(":not(:visible)"))if(d(k.target).closest(b).length)d(document).one("click",g);else return a.toggle_target(!1),!d(k.target).is_toggle_target_control_for(b)};d(document).one("click",g)}d.fn.scroll_lock=function(){return d(this).on("DOMMouseScroll mousewheel",function(a){var b=d(this),g=this.scrollTop,k=this.scrollHeight,e=b.height(),f="DOMMouseScroll"===a.type?-40*a.originalEvent.detail:a.originalEvent.wheelDelta,m=0<f,h=function(){a.stopPropagation();
a.preventDefault();return a.returnValue=!1};if(!m&&-f>k-e-g)return b.scrollTop(k),h();if(m&&f>g)return b.scrollTop(0),h()})};d.fn.scroll_release=function(){return d(this).off("DOMMouseScroll mousewheel")};d.fn.outer_html=function(){return this[0].outerHTML};d.fn.unique_items_in_array=function(){var a=[];d.each(this,function(b,g){-1===d.inArray(g,a)&&a.push(g)});return a};d.fn.force_reflow=function(){this[0].offsetHeight;return this};d.fn.is_scrolled_into_view=function(){return this.is_scrolled_vertically_into_view()&&
this.is_scrolled_horizontally_into_view()};d.fn.is_scrolled_vertically_into_view=function(){var a=this[0].getBoundingClientRect();return 0<=a.top&&a.bottom<=window.innerHeight};d.fn.is_scrolled_horizontally_into_view=function(){var a=this[0].getBoundingClientRect();return 0<=a.left&&a.right<=window.innerWidth};d.fn.scroll_bottom=function(){var a=this.prop("innerHeight");if(void 0!==a)return a+this.scrollTop()};d.fn.get_bounding_client_rect=function(){for(var a=this[0].getBoundingClientRect(),a={top:a.top,
bottom:a.bottom,left:a.left,right:a.right},b=1;b<this.length;b++){var d=this[b].getBoundingClientRect();a.top=Math.min(a.top,d.top);a.bottom=Math.max(a.bottom,d.bottom);a.left=Math.min(a.left,d.left);a.right=Math.max(a.right,d.right)}a.height=a.bottom-a.top;a.width=a.right-a.left;return a};d.fn.closest_block_level_element=function(){return this.parents().filter(function(){return"block"===d(this).css("display")}).first()};d.fn.is_block_level_element=function(){var a=d(this).css("display");return void 0===
a?!1:!("inline"===a||"none"===a)};d.fn.on_screen=function(a){d(this).waypoint(a,{offset:"150%",triggerOnce:!0})};d.fn.auto_load_more_on_scroll=function(){d(this).scroll(function(){d.doTimeout("context_scroll",250,function(){Waypoint.refreshAll();var a=d("a.more:visible:not(.loading, .no_auto_more a)");a.on_screen(function(){a.click()})})});return this};d.fn.scrollToCenterOfScreen=function(a){a=a||{};if(!this.length)return this;var b=d(a.scroller||(MOBILE_DEVICE?"#container":document)),g=d(window).height(),
k=this.height();b.scrollTo(this,{offset:k/2-g/2,onAfter:a.onAfter||function(){}});return this};d.fn.retainingScrollPosition=function(a,b){if(!a.length)return b(),this;var d=a.offset().top,k=this.scrollTop();b();var e=a.offset().top;if(e===d)return this;this.scrollTop(k+(e-d));return this};d.fn.reloadTooltip=function(){var a;try{a=this.qtip("api")}catch(b){return this}a.updateContent("Loading...");a.loadContent(a.options.content.url);return this};d.fn.reset_editable=function(){this.length&&"function"===
typeof this[0].reset&&this[0].reset()};d.fn.counter_value=function(){return parseInt(this.text().replace(/[^0-9]/g,""))};d.fn.change_counter_value_by=function(a){this.text(this.text().replace(/[0-9]+/,this.counter_value()+a))};d.fn.detect=function(a){var b=null;this.each(function(){if(a.call(this))return b=this,!1});return b};d.fn.insertAtCursor=function(a){return this.each(function(){if(this.selectionStart||"0"===this.selectionStart){var b=this.selectionStart,d=this.selectionEnd,k=this.scrollTop;
this.value=this.value.substring(0,b)+a+this.value.substring(d,this.value.length);this.focus();this.selectionStart=b+a.length;this.selectionEnd=b+a.length;this.scrollTop=k}else this.value+=a,this.focus()})};d.fn.submitWithAjaxQueue=function(a){var b=(a||{}).complete||d.noop;return this.each(function(){var g=d(this);app.ajaxQueue.add(d.extend({type:this.method,url:this.action,data:g.serialize()},a,{complete:function(){g.trigger("ajax:complete");b.apply(this,arguments)}}))})};d.referents_for_this_annotation=
{settings:{selector:function(a){return'a[data-id="'+a+'"]'},attribute:"data-id"}};d.fn.referents_for_this_annotation=function(){var a=this.attr(d.referents_for_this_annotation.settings.attribute),b=d.referents_for_this_annotation.settings.selector;return void 0===a?this:d(b(a))};d.fn.hydrate_diff=function(){d(this).each(function(){var a=d(this),b=new diff_match_patch,g=b.diff_main(a.data("before"),a.data("after"));b.diff_cleanupSemantic(g);a.html(b.diff_prettyHtml(g).replace(/&para;/g,""))});return this};
d.fn.chosen_auto_choose=function(a){var b=d(this),g=b.find('option[value="'+a+'"]');b.find("option.auto-selected").removeAttr("selected").removeClass("auto-selected");g.is(":selected")||g.attr("selected",!0).addClass("auto-selected");setTimeout(function(){var a=b.parent().find("ul.chzn-choices"),c=a.parent().attr("id");a.find("#"+c+"_c_"+g.index()).addClass("locked").siblings().removeClass("locked")},0);b.trigger("liszt:updated")};d.fn.toggle_target=function(a){var l=d(this).toggleClass("pressed",
a),g=l.attr("data-relative")?l.find(l.attr("data-target")):d(l.attr("data-target")),k=l.attr("data-show-with-class");k?g.toggleClass(k,a):g.toggle(a);(a=g.is(":visible"))&&app.process_auto_load_containers&&app.process_auto_load_containers();void 0!==l.attr("data-hide-on-blur")&&b(l,g);l.attr("data-hide-siblings")&&(g.is(":visible")?(g.siblings(":visible").addClass("toggle_target_hidden_sibling"),k?g.siblings().removeClass(k):g.siblings(":visible").hide()):g.siblings().removeClass("toggle_target_hidden_sibling"),
l.siblings(".toggle_target").removeClass("pressed"));k=l.attr("data-toggles-to-hide");void 0!==k&&a&&d(k).not(l).toggle_target(!1);(l=l.attr("data-focus"))&&d(l).focus();g.trigger(a?"toggle_target:visible":"toggle_target:hidden")};d.fn.is_toggle_target_control_for=function(a){var b=d(this).closest(".toggle_target");return b.length&&a.is(b.attr("data-target"))};d.fn.dirtyable=function(){if("undefined"===typeof this.data("dirty")){var a=this;this.data("dirty",!1);this.on("dirtyable:changed",function(b,
d){a.data("dirty",d).toggleClass("dirty",d)});this.on("input propertychange",function(){a.trigger("dirtyable:changed",!!a.val())});this.each(function(){var a=d(this),b=a.closest("form")[0];if(b){var c="function"===typeof b.onsubmit?b.onsubmit.bind(b):function(){return!0};b.onsubmit=function(){a.trigger("dirtyable:changed",!1);return c()};var e="function"===typeof b.onreset?b.onreset.bind(b):function(){return!0};b.onreset=function(){a.trigger("dirtyable:changed",!1);return e()}}})}};d.fn.values_for_attribute=
function(a){return d.map(d(this),function(b){return d(b).attr(a)})};d.when_all=function(a){return d.when.apply(d,a)};d.fn.toggle_boolean_attribute=function(a){var b=d(this);b.attr(a)?b.removeAttr(a):b.attr(a,!0)};d.trim=function(a){return(a||"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};d.html_to_text=function(a){return d("<div>").prop("innerHTML",a).text()};d.capitalize_first_letter=function(a){return a.charAt(0).toUpperCase()+a.slice(1)};d.hyphen_compatible_titleize=function(a){return a.replace(/\b('?[a-z])/g,
function(a){return a.toUpperCase()})};d.trim_to_length=function(a,b){return a.length>b?d.trim(a).substring(0,b).split(" ").slice(0,-1).join(" ")+"...":a};d.fn.unwrap_contents=function(){return d(this).contents().unwrap()};d.fn.acts_like_input=function(){var a=d(this);return a.is(":input")||a.prop("isContentEditable")};d.fn.cache_iframe_contents=function(){this.each(function(){this.src||this.srcdoc||!this.contentWindow||(this.srcdoc=this.contentWindow.document.documentElement.outerHTML)})};d.fn.capture=
function(a){var b,g;2===arguments.length?g=arguments[1]:(b=arguments[1],g=arguments[2]);var k=function(a,c){var m=a.originalEvent,h;if(h=b?d(m.target).closest(b)[0]:c)m=d.extend(d.event.fix(m),{currentTarget:h,delegateTarget:c,target:m.target}),!1===g.call(h,m)&&(m.stopPropagation(),m.preventDefault())};this.each(function(){var b=d(this),f=b.data("_capture_event_listener");f||(f=d({}),b.data("_capture_event_listener",f));f.prop(a)||(f.prop(a,!0),this.addEventListener(a,function(a){f.triggerHandler(d.Event(a),
this)},!0));f.on(a,k)});return this};void 0!==d.facebox&&(d.facebox_then_reload=function(a,b){d.facebox(a);d(document).bind("close.facebox",function(){(b||PRODUCTION_ENV)&&window.location.reload(!0)})});d.ajax_with_retry=function(a){a=d.extend({},{retry_limit:2,type:"get",dataType:"html",success:function(){},data:{}},a);d.ajax({url:a.url,type:a.type,data:a.data,dataType:a.dataType,try_count:0,retry_limit:a.retry_limit,success:a.success,error:function(){this.try_count++;this.try_count<=this.retry_limit&&
d.ajax(this)}})};d.event_emitter={ensure_jquery_wrapper:function(){return this.jquery_wrapper||(this.jquery_wrapper=d(this))},emit:function(a,b){this.ensure_jquery_wrapper().triggerHandler(a,b)},once:function(a,b){this.ensure_jquery_wrapper().one(a,b)},on:function(a,b){this.ensure_jquery_wrapper().bind(a,b)},off:function(a,b){this.ensure_jquery_wrapper().unbind(a,b)}};d.get_selection=function(){var a=(window.getSelection||document.getSelection||d.noop)();if("undefined"!==typeof a&&a.rangeCount&&!a.isCollapsed)return a};
d.get_selection_range=function(){return getSelection().getRangeAt(0)};d.on_body_available=function(){var a=d.Deferred();if(document.body)a.resolve();else{var b=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(!b)return d;(new b(function(b,d){document.body&&(d.disconnect(),a.resolve())})).observe(document.documentElement,{childList:!0})}b=a.promise();return b.done.bind(b)}();d(function(){var b=function(){var a=d.get_selection();if(a)return d("<div>").append(a.getRangeAt(0).cloneContents()).html()};
d(document).on("mouseup",function(){setTimeout(function(){var a=d.get_selection();if(a)for(var b=0;b<a.rangeCount;b++){for(var c=a.getRangeAt(b),f=c.commonAncestorContainer;f.nodeType!==Node.ELEMENT_NODE;)f=f.parentNode;var m=d.Event("textselected",{selection:a,range:c,triggering_event:m});d(f).trigger(m)}},0)});if(a.touch){var l=function(a){b()&&d(a.target).trigger("textselected",{triggering_event:a});window.setImmediate(function(){d(document).one("selectionchange",l)})};d(document).one("selectionchange",
l)}})})(jQuery,Modernizr);
(function(d,a){"function"===typeof define&&define.amd?define(["jquery"],function(b){return a(b)}):"object"===typeof exports?module.exports=a(require("jquery")):a(jQuery)})(this,function(d){var a,b,c,l,g,k,e,f,m,h=[].slice,n=function(a,b){function c(){this.constructor=a}for(var d in b)q.call(b,d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a},q={}.hasOwnProperty;b=function(){function a(b){this.currentFlag=null;this.controllers={};this.aliasMaps={};this.$inputor=
d(b);this.setupRootElement();this.listen()}a.prototype.createContainer=function(a){var b;null!=(b=this.$el)&&b.remove();return d(a.body).append(this.$el=d("<div class='atwho-container'></div>"))};a.prototype.setupRootElement=function(a,b){null==b&&(b=!1);if(a)this.window=a.contentWindow,this.document=a.contentDocument||this.window.document,this.iframe=a;else{this.document=this.$inputor[0].ownerDocument;this.window=this.document.defaultView||this.document.parentWindow;try{this.iframe=this.window.frameElement}catch(c){if(this.iframe=
null,d.fn.atwho.debug)throw Error("iframe auto-discovery is failed.\nPlease use `setIframe` to set the target iframe manually.\n"+c);}}return this.createContainer((this.iframeAsRoot=b)?this.document:document)};a.prototype.controller=function(a){var b,c,d,e;if(this.aliasMaps[a])c=this.controllers[this.aliasMaps[a]];else for(d in e=this.controllers,e)if(b=e[d],d===a){c=b;break}return c?c:this.controllers[this.currentFlag]};a.prototype.setContextFor=function(a){this.currentFlag=a;return this};a.prototype.reg=
function(a,b){var c,d;d=(c=this.controllers)[a]||(c[a]=this.$inputor.is("[contentEditable]")?new g(this,a):new f(this,a));b.alias&&(this.aliasMaps[b.alias]=a);d.init(b);return this};a.prototype.listen=function(){return this.$inputor.on("compositionstart",function(a){return function(b){var c;null!=(c=a.controller())&&c.view.hide();a.isComposing=!0;return null}}(this)).on("compositionend",function(a){return function(b){a.isComposing=!1;return null}}(this)).on("keyup.atwhoInner",function(a){return function(b){return a.onKeyup(b)}}(this)).on("keydown.atwhoInner",
function(a){return function(b){return a.onKeydown(b)}}(this)).on("blur.atwhoInner",function(a){return function(b){var c;if(c=a.controller())return c.expectedQueryCBId=null,c.view.hide(b,c.getOpt("displayTimeout"))}}(this)).on("click.atwhoInner",function(a){return function(b){return a.dispatch(b)}}(this)).on("scroll.atwhoInner",function(a){return function(){var b;b=a.$inputor.scrollTop();return function(c){var d,e;d=c.target.scrollTop;b!==d&&null!=(e=a.controller())&&e.view.hide(c);b=d;return!0}}}(this)())};
a.prototype.shutdown=function(){var a,b,c;c=this.controllers;for(a in c)b=c[a],b.destroy(),delete this.controllers[a];this.$inputor.off(".atwhoInner");return this.$el.remove()};a.prototype.dispatch=function(a){var b,c,d,e;d=this.controllers;e=[];for(b in d)c=d[b],e.push(c.lookUp(a));return e};a.prototype.onKeyup=function(a){var b;switch(a.keyCode){case k.ESC:a.preventDefault();null!=(b=this.controller())&&b.view.hide();break;case k.DOWN:case k.UP:case k.CTRL:case k.ENTER:d.noop();break;case k.P:case k.N:a.ctrlKey||
this.dispatch(a);break;default:this.dispatch(a)}};a.prototype.onKeydown=function(a){var b,c;if((c=null!=(b=this.controller())?b.view:void 0)&&c.visible())switch(a.keyCode){case k.ESC:a.preventDefault();c.hide(a);break;case k.UP:a.preventDefault();c.prev();break;case k.DOWN:a.preventDefault();c.next();break;case k.P:if(!a.ctrlKey)break;a.preventDefault();c.prev();break;case k.N:if(!a.ctrlKey)break;a.preventDefault();c.next();break;case k.TAB:case k.ENTER:case k.SPACE:if(!c.visible())break;if(!this.controller().getOpt("spaceSelectsMatch")&&
a.keyCode===k.SPACE)break;if(!this.controller().getOpt("tabSelectsMatch")&&a.keyCode===k.TAB)break;c.highlighted()?(a.preventDefault(),c.choose(a)):c.hide(a);break;default:d.noop()}};return a}();c=function(){function a(b,c){this.app=b;this.at=c;this.$inputor=this.app.$inputor;this.id=this.$inputor[0].id||this.uid();this.query=this.setting=this.expectedQueryCBId=null;this.pos=0;this.range=null;0===(this.$el=d("#atwho-ground-"+this.id,this.app.$el)).length&&this.app.$el.append(this.$el=d("<div id='atwho-ground-"+
this.id+"'></div>"));this.model=new e(this);this.view=new m(this)}a.prototype.uid=function(){return(Math.random().toString(16)+"000000000").substr(2,8)+(new Date).getTime()};a.prototype.init=function(a){this.setting=d.extend({},this.setting||d.fn.atwho["default"],a);this.view.init();return this.model.reload(this.setting.data)};a.prototype.destroy=function(){this.trigger("beforeDestroy");this.model.destroy();this.view.destroy();return this.$el.remove()};a.prototype.callDefault=function(){var a,b;b=
arguments[0];a=2<=arguments.length?h.call(arguments,1):[];try{return l[b].apply(this,a)}catch(c){return a=c,d.error(a+" Or maybe At.js doesn't have function "+b)}};a.prototype.trigger=function(a,b){var c;null==b&&(b=[]);b.push(this);c=this.getOpt("alias");return this.$inputor.trigger(c?a+"-"+c+".atwho":a+".atwho",b)};a.prototype.callbacks=function(a){return this.getOpt("callbacks")[a]||l[a]};a.prototype.getOpt=function(a,b){try{return this.setting[a]}catch(c){return null}};a.prototype.insertContentFor=
function(a){var b;b=this.getOpt("insertTpl");a=d.extend({},a.data("item-data"),{"atwho-at":this.at});return this.callbacks("tplEval").call(this,b,a,"onInsert")};a.prototype.renderView=function(a){var b;b=this.getOpt("searchKey");a=this.callbacks("sorter").call(this,this.query.text,a.slice(0,1001),b);return this.view.render(a.slice(0,this.getOpt("limit")))};a.arrayToDefaultHash=function(a){var b,c,e,f;if(!d.isArray(a))return a;f=[];b=0;for(e=a.length;b<e;b++)c=a[b],d.isPlainObject(c)?f.push(c):f.push({name:c});
return f};a.prototype.lookUp=function(a){var b;if(!a||"click"!==a.type||this.getOpt("lookUpOnClick"))if(!this.getOpt("suspendOnComposing")||!this.app.isComposing){a=this.catchQuery(a);if(!a)return this.expectedQueryCBId=null,a;this.app.setContextFor(this.at);(b=this.getOpt("delay"))?this._delayLookUp(a,b):this._lookUp(a);return a}};a.prototype._delayLookUp=function(a,b){var c,d;c=Date.now?Date.now():(new Date).getTime();this.previousCallTime||(this.previousCallTime=c);d=b-(c-this.previousCallTime);
if(0<d&&d<b)return this.previousCallTime=c,this._stopDelayedCall(),this.delayedCallTimeout=setTimeout(function(b){return function(){b.previousCallTime=0;b.delayedCallTimeout=null;return b._lookUp(a)}}(this),b);this._stopDelayedCall();this.previousCallTime!==c&&(this.previousCallTime=0);return this._lookUp(a)};a.prototype._stopDelayedCall=function(){if(this.delayedCallTimeout)return clearTimeout(this.delayedCallTimeout),this.delayedCallTimeout=null};a.prototype._generateQueryCBId=function(){return{}};
a.prototype._lookUp=function(a){this.expectedQueryCBId=this._generateQueryCBId();return this.model.query(a.text,d.proxy(function(a,b){if(a===this.expectedQueryCBId)return b&&0<b.length?this.renderView(this.constructor.arrayToDefaultHash(b)):this.view.hide()},this,this.expectedQueryCBId))};return a}();f=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}n(b,a);b.prototype.catchQuery=function(){var a,b,c;b=this.$inputor.val();a=this.$inputor.caret("pos",{iframe:this.app.iframe});
b=b.slice(0,a);b=this.callbacks("matcher").call(this,this.at,b,this.getOpt("startWithSpace"));c="string"===typeof b;if(!(c&&b.length<this.getOpt("minLen",0)))return c&&b.length<=this.getOpt("maxLen",20)?(c=a-b.length,a=c+b.length,this.pos=c,b={text:b,headPos:c,endPos:a},this.trigger("matched",[this.at,b.text])):(b=null,this.view.hide()),this.query=b};b.prototype.rect=function(){var a,b;if(a=this.$inputor.caret("offset",this.pos-1,{iframe:this.app.iframe}))return this.app.iframe&&!this.app.iframeAsRoot&&
(b=d(this.app.iframe).offset(),a.left+=b.left,a.top+=b.top),b=this.app.document.selection?0:2,{left:a.left,top:a.top,bottom:a.top+a.height+b}};b.prototype.insert=function(a,b){var c,d,e,f;c=this.$inputor;d=c.val();e=d.slice(0,Math.max(this.query.headPos-this.at.length,0));f=""===(f=this.getOpt("suffix"))?f:f||" ";a+=f;d=""+e+a+d.slice(this.query.endPos||0);c.val(d);c.caret("pos",e.length+a.length,{iframe:this.app.iframe});c.is(":focus")||c.focus();return c.change()};return b}(c);g=function(a){function b(){return b.__super__.constructor.apply(this,
arguments)}n(b,a);b.prototype._getRange=function(){var a;a=this.app.window.getSelection();if(0<a.rangeCount)return a.getRangeAt(0)};b.prototype._setRange=function(a,b,c){null==c&&(c=this._getRange());if(c)return b=d(b)[0],"after"===a?(c.setEndAfter(b),c.setStartAfter(b)):(c.setEndBefore(b),c.setStartBefore(b)),c.collapse(!1),this._clearRange(c)};b.prototype._clearRange=function(a){var b;null==a&&(a=this._getRange());b=this.app.window.getSelection();if(null==this.ctrl_a_pressed)return b.removeAllRanges(),
b.addRange(a)};b.prototype._movingEvent=function(a){var b;return"click"===a.type||(b=a.which)===k.RIGHT||b===k.LEFT||b===k.UP||b===k.DOWN};b.prototype._unwrap=function(a){var b;a=d(a).unwrap().get(0);(b=a.nextSibling)&&b.nodeValue&&(a.nodeValue+=b.nodeValue,d(b).remove());return a};b.prototype.catchQuery=function(a){var b,c,e,f,h,g;if((g=this._getRange())&&g.collapsed)if(a.which===k.ENTER)(c=d(g.startContainer).closest(".atwho-query")).contents().unwrap(),c.is(":empty")&&c.remove(),(c=d(".atwho-query",
this.app.document)).text(c.text()).contents().last().unwrap(),this._clearRange();else{if(/firefox/i.test(navigator.userAgent)){if(d(g.startContainer).is(this.$inputor)){this._clearRange();return}a.which===k.BACKSPACE&&g.startContainer.nodeType===document.ELEMENT_NODE&&0<=(h=g.startOffset-1)?(b=g.cloneRange(),b.setStart(g.startContainer,h),d(b.cloneContents()).contents().last().is(".atwho-inserted")&&(b=d(g.startContainer).contents().get(h),this._setRange("after",d(b).contents().last()))):a.which===
k.LEFT&&g.startContainer.nodeType===document.TEXT_NODE&&(b=d(g.startContainer.previousSibling),b.is(".atwho-inserted")&&0===g.startOffset&&this._setRange("after",b.contents().last()))}d(g.startContainer).closest(".atwho-inserted").addClass("atwho-query").siblings().removeClass("atwho-query");0<(c=d(".atwho-query",this.app.document)).length&&c.is(":empty")&&0===c.text().length&&c.remove();this._movingEvent(a)||c.removeClass("atwho-inserted");if(0<c.length)switch(a.which){case k.LEFT:this._setRange("before",
c.get(0),g);c.removeClass("atwho-query");return;case k.RIGHT:this._setRange("after",c.get(0).nextSibling,g);c.removeClass("atwho-query");return}0<c.length&&(f=c.attr("data-atwho-at-query"))&&(c.empty().html(f).attr("data-atwho-at-query",null),this._setRange("after",c.get(0),g));b=g.cloneRange();b.setStart(g.startContainer,0);b=this.callbacks("matcher").call(this,this.at,b.toString(),this.getOpt("startWithSpace"));f="string"===typeof b;0===c.length&&f&&0<=(e=g.startOffset-this.at.length-b.length)&&
(g.setStart(g.startContainer,e),c=d("<span/>",this.app.document).attr(this.getOpt("editableAtwhoQueryAttrs")).addClass("atwho-query"),g.surroundContents(c.get(0)),e=c.contents().last().get(0),/firefox/i.test(navigator.userAgent)?(g.setStart(e,e.length),g.setEnd(e,e.length),this._clearRange(g)):this._setRange("after",e,g));if(!(f&&b.length<this.getOpt("minLen",0))){if(f&&b.length<=this.getOpt("maxLen",20))return a={text:b,el:c},this.trigger("matched",[this.at,a.text]),this.query=a;this.view.hide();
this.query={el:c};0<=c.text().indexOf(this.at)&&(this._movingEvent(a)&&c.hasClass("atwho-inserted")?c.removeClass("atwho-query"):!1!==this.callbacks("afterMatchFailed").call(this,this.at,c)&&this._setRange("after",this._unwrap(c.text(c.text()).contents().first())));return null}}};b.prototype.rect=function(){var a,b;b=this.query.el.offset();this.app.iframe&&!this.app.iframeAsRoot&&(a=d(this.app.iframe).offset(),b.left+=a.left-this.$inputor.scrollLeft(),b.top+=a.top-this.$inputor.scrollTop());b.bottom=
b.top+this.query.el.height();return b};b.prototype.insert=function(a,b){var c,d;d=""===(d=this.getOpt("suffix"))?d:d||"\u00a0";c=b.data("item-data");this.query.el.removeClass("atwho-query").addClass("atwho-inserted").html(a).attr("data-atwho-at-query",""+c["atwho-at"]+this.query.text);if(c=this._getRange())c.setEndAfter(this.query.el[0]),c.collapse(!1),c.insertNode(d=this.app.document.createTextNode("\u2060"+d)),this._setRange("after",d,c);this.$inputor.is(":focus")||this.$inputor.focus();return this.$inputor.change()};
return b}(c);e=function(){function a(b){this.context=b;this.at=this.context.at;this.storage=this.context.$inputor}a.prototype.destroy=function(){return this.storage.data(this.at,null)};a.prototype.saved=function(){return 0<this.fetch()};a.prototype.query=function(a,b){var c,d;d=this.fetch();c=this.context.getOpt("searchKey");d=this.context.callbacks("filter").call(this.context,a,d,c)||[];c=this.context.callbacks("remoteFilter");return 0<d.length||!c&&0===d.length?b(d):c.call(this.context,a,b)};a.prototype.fetch=
function(){return this.storage.data(this.at)||[]};a.prototype.save=function(a){return this.storage.data(this.at,this.context.callbacks("beforeSave").call(this.context,a||[]))};a.prototype.load=function(a){if(!this.saved()&&a)return this._load(a)};a.prototype.reload=function(a){return this._load(a)};a.prototype._load=function(a){return"string"===typeof a?d.ajax(a,{dataType:"json"}).done(function(a){return function(b){return a.save(b)}}(this)):this.save(a)};return a}();m=function(){function a(b){this.context=
b;this.$el=d("<div class='atwho-view'><ul class='atwho-view-ul'></ul></div>");this.timeoutID=null;this.context.$el.append(this.$el);this.bindEvent()}a.prototype.init=function(){var a;a=this.context.getOpt("alias")||this.context.at.charCodeAt(0);return this.$el.attr({id:"at-view-"+a})};a.prototype.destroy=function(){return this.$el.remove()};a.prototype.bindEvent=function(){var a;a=this.$el.find("ul");return a.on("mouseenter.atwho-view","li",function(b){a.find(".cur").removeClass("cur");return d(b.currentTarget).addClass("cur")}).on("click.atwho-view",
"li",function(b){return function(c){a.find(".cur").removeClass("cur");d(c.currentTarget).addClass("cur");b.choose(c);return c.preventDefault()}}(this))};a.prototype.visible=function(){return this.$el.is(":visible")};a.prototype.highlighted=function(){return 0<this.$el.find(".cur").length};a.prototype.choose=function(a){var b,c;(b=this.$el.find(".cur")).length&&(c=this.context.insertContentFor(b),this.context._stopDelayedCall(),this.context.insert(this.context.callbacks("beforeInsert").call(this.context,
c,b),b),this.context.trigger("inserted",[b,a]),this.hide(a));if(this.context.getOpt("hideWithoutSuffix"))return this.stopShowing=!0};a.prototype.reposition=function(a){var b,c;b=this.context.app.iframeAsRoot?this.context.app.window:window;a.bottom+this.$el.height()-d(b).scrollTop()>d(b).height()&&(a.bottom=a.top-this.$el.height());a.left>(b=d(b).width()-this.$el.width()-5)&&(a.left=b);a={left:a.left,top:a.bottom};null!=(c=this.context.callbacks("beforeReposition"))&&c.call(this.context,a);this.$el.offset(a);
return this.context.trigger("reposition",[a])};a.prototype.next=function(){var a,b;a=this.$el.find(".cur").removeClass("cur");b=a.next();b.length||(b=this.$el.find("li:first"));b.addClass("cur");return this.scrollTop(Math.max(0,a.innerHeight()*(b.index()+2)-this.$el.height()))};a.prototype.prev=function(){var a,b;a=this.$el.find(".cur").removeClass("cur");b=a.prev();b.length||(b=this.$el.find("li:last"));b.addClass("cur");return this.scrollTop(Math.max(0,a.innerHeight()*(b.index()+2)-this.$el.height()))};
a.prototype.scrollTop=function(a){var b;return(b=this.context.getOpt("scrollDuration"))?this.$el.animate({scrollTop:a},b):this.$el.scrollTop(a)};a.prototype.show=function(){var a;if(this.stopShowing)this.stopShowing=!1;else if(this.visible()||(this.$el.show(),this.$el.scrollTop(0),this.context.trigger("shown")),a=this.context.rect())return this.reposition(a)};a.prototype.hide=function(a,b){var c;if(this.visible()){if(isNaN(b))return this.$el.hide(),this.context.trigger("hidden",[a]);c=function(a){return function(){return a.hide()}}(this);
clearTimeout(this.timeoutID);return this.timeoutID=setTimeout(c,b)}};a.prototype.render=function(a){var b,c,e,f,h,g;if(d.isArray(a)&&0<a.length){this.$el.find("ul").empty();c=this.$el.find("ul");g=this.context.getOpt("displayTpl");e=0;for(h=a.length;e<h;e++)f=a[e],f=d.extend({},f,{"atwho-at":this.context.at}),b=this.context.callbacks("tplEval").call(this.context,g,f,"onDisplay"),b=d(this.context.callbacks("highlighter").call(this.context,b,this.context.query.text)),b.data("item-data",f),c.append(b);
this.show();if(this.context.getOpt("highlightFirst"))return c.find("li:first").addClass("cur")}else this.hide()};return a}();k={DOWN:40,UP:38,ESC:27,TAB:9,ENTER:13,CTRL:17,A:65,P:80,N:78,LEFT:37,UP:38,RIGHT:39,DOWN:40,BACKSPACE:8,SPACE:32};l={beforeSave:function(a){return c.arrayToDefaultHash(a)},matcher:function(a,b,c,d){var e;a=a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");c&&(a="(?:^|\\s)"+a);c=decodeURI("%C3%80");e=decodeURI("%C3%BF");return(a=(new RegExp(a+"([A-Za-z"+c+"-"+e+"0-9_"+
(d?" ":"")+"'.+-]*)$|"+a+"([^\\x00-\\xff]*)$","gi")).exec(b))?a[2]||a[1]:null},filter:function(a,b,c){var d,e,f,h;d=[];e=0;for(h=b.length;e<h;e++)f=b[e],~(new String(f[c])).toLowerCase().indexOf(a.toLowerCase())&&d.push(f);return d},remoteFilter:null,sorter:function(a,b,c){var d,e,f,h;if(!a)return b;d=[];e=0;for(h=b.length;e<h;e++)f=b[e],f.atwho_order=(new String(f[c])).toLowerCase().indexOf(a.toLowerCase()),-1<f.atwho_order&&d.push(f);return d.sort(function(a,b){return a.atwho_order-b.atwho_order})},
tplEval:function(a,b){var c;c=a;try{return"string"!==typeof a&&(c=a(b)),c.replace(/\$\{([^\}]*)\}/g,function(a,c,d){return b[c]})}catch(d){return""}},highlighter:function(a,b){var c;if(!b)return a;c=new RegExp(">\\s*(\\w*?)("+b.replace("+","\\+")+")(\\w*)\\s*<","ig");return a.replace(c,function(a,b,c,d){return"> "+b+"<strong>"+c+"</strong>"+d+" <"})},beforeInsert:function(a,b){return a},beforeReposition:function(a){return a},afterMatchFailed:function(a,b){}};a={load:function(a,b){var c;if(c=this.controller(a))return c.model.load(b)},
isSelecting:function(){var a;return!(null==(a=this.controller())||!a.view.visible())},hide:function(){var a;return null!=(a=this.controller())?a.view.hide():void 0},reposition:function(){var a;if(a=this.controller())return a.view.reposition(a.rect())},setIframe:function(a,b){this.setupRootElement(a,b);return null},run:function(){return this.dispatch()},destroy:function(){this.shutdown();return this.$inputor.data("atwho",null)}};d.fn.atwho=function(c){var e,f;e=arguments;f=null;this.filter('textarea, input, [contenteditable=""], [contenteditable=true]').each(function(){var h,
g;(g=(h=d(this)).data("atwho"))||h.data("atwho",g=new b(this));return"object"!==typeof c&&c?a[c]&&g?f=a[c].apply(g,Array.prototype.slice.call(e,1)):d.error("Method "+c+" does not exist on jQuery.atwho"):g.reg(c.at,c)});return null!=f?f:this};d.fn.atwho["default"]={at:void 0,alias:void 0,data:null,displayTpl:"<li>${name}</li>",insertTpl:"${atwho-at}${name}",callbacks:l,searchKey:"name",suffix:void 0,hideWithoutSuffix:!1,startWithSpace:!0,highlightFirst:!0,limit:5,maxLen:20,minLen:0,displayTimeout:300,
delay:null,spaceSelectsMatch:!1,tabSelectsMatch:!0,editableAtwhoQueryAttrs:{},scrollDuration:150,suspendOnComposing:!0,lookUpOnClick:!0};d.fn.atwho.debug=!1});$(document).on("click",".atwho-container",function(d){d.stopPropagation()});
(function(d,a){"function"===typeof define&&define.amd?define(["jquery"],function(b){return d.returnExportsGlobal=a(b)}):"object"===typeof exports?module.exports=a(require("jquery")):a(jQuery)})(this,function(d){var a,b,c,l,g,k,e,f;a=function(){function a(b){this.$inputor=b;this.domInputor=this.$inputor[0]}a.prototype.setPos=function(a){return this.domInputor};a.prototype.getIEPosition=function(){return this.getPosition()};a.prototype.getPosition=function(){var a,b;b=this.getOffset();a=this.$inputor.offset();
b.left-=a.left;b.top-=a.top;return b};a.prototype.getOldIEPos=function(){var a,b;b=k.selection.createRange();a=k.body.createTextRange();a.moveToElementText(this.domInputor);a.setEndPoint("EndToEnd",b);return a.text.length};a.prototype.getPos=function(){var a,b;if(b=this.range())return a=b.cloneRange(),a.selectNodeContents(this.domInputor),a.setEnd(b.endContainer,b.endOffset),b=a.toString().length,a.detach(),b;if(k.selection)return this.getOldIEPos()};a.prototype.getOldIEOffset=function(){var a;a=
k.selection.createRange().duplicate();a.moveStart("character",-1);a=a.getBoundingClientRect();return{height:a.bottom-a.top,left:a.left,top:a.top}};a.prototype.getOffset=function(a){var b,c;e.getSelection&&(c=this.range())?(0<c.endOffset-1&&c.endContainer===!this.domInputor&&(a=c.cloneRange(),a.setStart(c.endContainer,c.endOffset-1),a.setEnd(c.endContainer,c.endOffset),b=a.getBoundingClientRect(),b={height:b.height,left:b.left+b.width,top:b.top},a.detach()),b&&0!==(null!=b?b.height:void 0)||(a=c.cloneRange(),
c=d(k.createTextNode("|")),a.insertNode(c[0]),a.selectNode(c[0]),b=a.getBoundingClientRect(),b={height:b.height,left:b.left,top:b.top},c.remove(),a.detach())):k.selection&&(b=this.getOldIEOffset());b&&(b.top+=d(e).scrollTop(),b.left+=d(e).scrollLeft());return b};a.prototype.range=function(){var a;if(e.getSelection)return a=e.getSelection(),0<a.rangeCount?a.getRangeAt(0):null};return a}();b=function(){function a(b){this.$inputor=b;this.domInputor=this.$inputor[0]}a.prototype.getIEPos=function(){var a,
b,c,d;a=this.domInputor;c=k.selection.createRange();b=0;c&&c.parentElement()===a&&(b=a.value.replace(/\r\n/g,"\n"),b=b.length,d=a.createTextRange(),d.moveToBookmark(c.getBookmark()),a=a.createTextRange(),a.collapse(!1),b=-1<d.compareEndPoints("StartToEnd",a)?b:-d.moveStart("character",-b));return b};a.prototype.getPos=function(){return k.selection?this.getIEPos():this.domInputor.selectionStart};a.prototype.setPos=function(a){var b,c;b=this.domInputor;k.selection?(c=b.createTextRange(),c.move("character",
a),c.select()):b.setSelectionRange&&b.setSelectionRange(a,a);return b};a.prototype.getIEOffset=function(a){var b;b=this.domInputor.createTextRange();a||(a=this.getPos());b.move("character",a);return{left:b.boundingLeft,top:b.boundingTop,height:b.boundingHeight}};a.prototype.getOffset=function(a){var b,c;b=this.$inputor;if(k.selection)return c=this.getIEOffset(a),c.top+=d(e).scrollTop()+b.scrollTop(),c.left+=d(e).scrollLeft()+b.scrollLeft(),c;c=b.offset();a=this.getPosition(a);return{left:c.left+a.left-
b.scrollLeft(),top:c.top+a.top-b.scrollTop(),height:a.height}};a.prototype.getPosition=function(a){var b,d,e;b=this.$inputor;d=function(a){a=a.replace(/<|>|`|"|&/g,"?").replace(/\r\n|\r|\n/g,"<br/>");/firefox/i.test(navigator.userAgent)&&(a=a.replace(/\s/g,"&nbsp;"));return a};void 0===a&&(a=this.getPos());e=b.val().slice(0,a);a=b.val().slice(a);e="<span style='position: relative; display: inline;'>"+d(e)+"</span>";e=e+"<span id='caret' style='position: relative; display: inline;'>|</span>"+("<span style='position: relative; display: inline;'>"+
d(a)+"</span>");return(new c(b)).create(e).rect()};a.prototype.getIEPosition=function(a){var b;b=this.getIEOffset(a);a=this.$inputor.offset();return{left:b.left-a.left,top:b.top-a.top,height:b.height}};return a}();c=function(){function a(b){this.$inputor=b}a.prototype.css_attr="borderBottomWidth borderLeftWidth borderRightWidth borderTopStyle borderRightStyle borderBottomStyle borderLeftStyle borderTopWidth boxSizing fontFamily fontSize fontWeight height letterSpacing lineHeight marginBottom marginLeft marginRight marginTop outlineWidth overflow overflowX overflowY paddingBottom paddingLeft paddingRight paddingTop textAlign textOverflow textTransform whiteSpace wordBreak wordWrap".split(" ");
a.prototype.mirrorCss=function(){var a,b=this;a={position:"absolute",left:-9999,top:0,zIndex:-2E4};"TEXTAREA"===this.$inputor.prop("tagName")&&this.css_attr.push("width");d.each(this.css_attr,function(c,d){return a[d]=b.$inputor.css(d)});return a};a.prototype.create=function(a){this.$mirror=d("<div></div>");this.$mirror.css(this.mirrorCss());this.$mirror.html(a);this.$inputor.after(this.$mirror);return this};a.prototype.rect=function(){var a,b;a=this.$mirror.find("#caret");b=a.position();a={left:b.left,
top:b.top,height:a.height()};this.$mirror.remove();return a};return a}();l={contentEditable:function(a){return!(!a[0].contentEditable||"true"!==a[0].contentEditable)}};g={pos:function(a){return a||0===a?this.setPos(a):this.getPos()},position:function(a){return k.selection?this.getIEPosition(a):this.getPosition(a)},offset:function(a){return this.getOffset(a)}};e=k=null;f=function(a){if(a=null!=a?a.iframe:void 0)return e=a.contentWindow,k=a.contentDocument||e.document;e=window;return k=document};d.fn.caret=
function(c,e,k){return g[c]?(d.isPlainObject(e)?(f(e),e=void 0):f(k),k=l.contentEditable(this)?new a(this):new b(this),g[c].apply(k,[e])):d.error("Method "+c+" does not exist on jQuery.caret")};d.fn.caret.EditableCaret=a;d.fn.caret.InputCaret=b;d.fn.caret.Utils=l;d.fn.caret.apis=g});
(function(){function d(a,b){if(a!==b){var c=null===a,d=a===C,e=a===a,f=null===b,h=b===C,g=b===b;if(a>b&&!f||!e||c&&!h&&g||d&&g)return 1;if(a<b&&!c||!g||f&&!d&&e||h&&e)return-1}return 0}function a(a,b,c){for(var d=a.length,e=c?d:-1;c?e--:++e<d;)if(b(a[e],e,a))return e;return-1}function b(a,b,c){if(b!==b)return n(a,c);--c;for(var d=a.length;++c<d;)if(a[c]===b)return c;return-1}function c(a){return"function"==typeof a||!1}function l(a){return"string"==typeof a?a:null==a?"":a+""}function g(a,b){for(var c=
-1,d=a.length;++c<d&&-1<b.indexOf(a.charAt(c)););return c}function k(a,b){for(var c=a.length;c--&&-1<b.indexOf(a.charAt(c)););return c}function e(a,b){return d(a.criteria,b.criteria)||a.index-b.index}function f(a){return mb[a]}function m(a){return Wa[a]}function h(a){return"\\"+Pa[a]}function n(a,b,c){var d=a.length;for(b+=c?0:-1;c?b--:++b<d;){var e=a[b];if(e!==e)return b}return-1}function q(a){return!!a&&"object"==typeof a}function r(a){return 160>=a&&9<=a&&13>=a||32==a||160==a||5760==a||6158==a||
8192<=a&&(8202>=a||8232==a||8233==a||8239==a||8287==a||12288==a||65279==a)}function t(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;)a[c]===b&&(a[c]="__lodash_placeholder__",f[++e]=c);return f}function u(a){for(var b=-1,c=a.length;++b<c&&r(a.charCodeAt(b)););return b}function x(a){for(var b=a.length;b--&&r(a.charCodeAt(b)););return b}function w(a){return Y[a]}function v(r){function z(a){if(q(a)&&!V(a)&&!(a instanceof Y)){if(a instanceof sa)return a;if(Ea.call(a,"__chain__")&&Ea.call(a,"__wrapped__"))return Td(a)}return new sa(a)}
function Ha(){}function sa(a,b,c){this.__wrapped__=a;this.__actions__=c||[];this.__chain__=!!b}function Y(a){this.__wrapped__=a;this.__actions__=null;this.__dir__=1;this.__dropCount__=0;this.__filtered__=!1;this.__iteratees__=null;this.__takeCount__=Vd;this.__views__=null}function Wa(){this.__data__={}}function Pa(a){var b=a?a.length:0;for(this.data={hash:Le(null),set:new Me};b--;)this.push(a[b])}function Ma(a,b){var c=a.data;return("string"==typeof b||oa(b)?c.set.has(b):c.hash[b])?0:-1}function S(a,
b){var c=-1,d=a.length;for(b||(b=ma(d));++c<d;)b[c]=a[c];return b}function la(a,b){for(var c=-1,d=a.length;++c<d&&!1!==b(a[c],c,a););return a}function Qa(a,b){for(var c=-1,d=a.length;++c<d;)if(!b(a[c],c,a))return!1;return!0}function mb(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;){var h=a[c];b(h,c,a)&&(f[++e]=h)}return f}function Ia(a,b){for(var c=-1,d=a.length,e=ma(d);++c<d;)e[c]=b(a[c],c,a);return e}function ub(a,b,c,d){var e=-1,f=a.length;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function wa(a,
b){for(var c=-1,d=a.length;++c<d;)if(b(a[c],c,a))return!0;return!1}function H(a,b){return a===C?b:a}function vb(a,b,c,d){return a!==C&&Ea.call(d,c)?a:b}function fa(a,b,c){for(var d=-1,e=Ta(b),f=e.length;++d<f;){var h=e[d],g=a[h],m=c(g,b[h],h,a,b);(m===m?m===g:g!==g)&&(g!==C||h in a)||(a[h]=m)}return a}function Ib(a,b){return null==b?a:hb(b,Ta(b),a)}function Jb(a,b){for(var c=-1,d=null==a,e=!d&&Fa(a),f=e?a.length:0,h=b.length,g=ma(h);++c<h;){var m=b[c];g[c]=e?Zb(m,f)?a[m]:C:d?C:a[m]}return g}function hb(a,
b,c){c||(c={});for(var d=-1,e=b.length;++d<e;){var f=b[d];c[f]=a[f]}return c}function Kb(a,b,c){var d=typeof a;return"function"==d?b===C?a:Sa(a,b,c):null==a?Q:"object"==d?pc(a):b===C?Nb(a):Tc(a,b)}function $a(a,b,c,d,e,f,h){var g;c&&(g=e?c(a,d,e):c(a));if(g!==C)return g;if(!oa(a))return a;if(d=V(a)){if(g=vf(a),!b)return S(a,g)}else{var m=ia.call(a),k="[object Function]"==m;if("[object Object]"==m||"[object Arguments]"==m||k&&!e){if(g=uf(k?{}:a),!b)return Ib(g,a)}else return ea[m]?xe(a,m,b):e?a:{}}f||
(f=[]);h||(h=[]);for(e=f.length;e--;)if(f[e]==a)return h[e];f.push(a);h.push(g);(d?la:ab)(a,function(d,e){g[e]=$a(d,b,c,e,a,f,h)});return g}function Ac(a,b,c){if("function"!=typeof a)throw new yb("Expected a function");return Ob(function(){a.apply(C,c)},b)}function Na(a,c){var d=a?a.length:0,e=[];if(!d)return e;var f=-1,h=Ub(),g=h==b,m=g&&200<=c.length?Wd(c):null,k=c.length;m&&(h=Ma,g=!1,c=m);a:for(;++f<d;)if(m=a[f],g&&m===m){for(var n=k;n--;)if(c[n]===m)continue a;e.push(m)}else 0>h(c,m,0)&&e.push(m);
return e}function Eb(a,b){var c=!0;zb(a,function(a,d,e){return c=!!b(a,d,e)});return c}function Bc(a,b,c,d){var e=d,f=e;zb(a,function(a,h,g){h=+b(a,h,g);if(c(h,e)||h===d&&h===f)e=h,f=a});return f}function oc(a,b){var c=[];zb(a,function(a,d,e){b(a,d,e)&&c.push(a)});return c}function Cc(a,b,c,d){var e;c(a,function(a,c,f){if(b(a,c,f))return e=d?c:a,!1});return e}function ua(a,b,c){for(var d=-1,e=a.length,f=-1,h=[];++d<e;){var g=a[d];if(q(g)&&Fa(g)&&(c||V(g)||Pb(g))){b&&(g=ua(g,b,c));for(var m=-1,k=g.length;++m<
k;)h[++f]=g[m]}else c||(h[++f]=g)}return h}function kb(a,b){return Ec(a,b,N)}function ab(a,b){return Ec(a,b,Ta)}function za(a,b){return Ne(a,b,Ta)}function bb(a,b){for(var c=-1,d=b.length,e=-1,f=[];++c<d;){var h=b[c];Fc(a[h])&&(f[++e]=h)}return f}function Ra(a,b,c){if(null!=a){c!==C&&c in xb(a)&&(b=[c]);c=0;for(var d=b.length;null!=a&&c<d;)a=a[b[c++]];return c&&c==d?a:C}}function nb(a,b,c,d,e,f){if(a===b)return!0;if(null==a||null==b||!oa(a)&&!q(b))return a!==a&&b!==b;a:{var h=nb,g=V(a),m=V(b),k="[object Array]",
n="[object Array]";g||(k=ia.call(a),"[object Arguments]"==k?k="[object Object]":"[object Object]"!=k&&(g=Gc(a)));m||(n=ia.call(b),"[object Arguments]"==n?n="[object Object]":"[object Object]"!=n&&Gc(b));var l="[object Object]"==k,m="[object Object]"==n,n=k==n;if(!n||g||l){if(!d&&(k=l&&Ea.call(a,"__wrapped__"),m=m&&Ea.call(b,"__wrapped__"),k||m)){a=h(k?a.value():a,m?b.value():b,c,d,e,f);break a}if(n){e||(e=[]);f||(f=[]);for(k=e.length;k--;)if(e[k]==a){a=f[k]==b;break a}e.push(a);f.push(b);a=(g?De:
Fe)(a,b,h,c,d,e,f);e.pop();f.pop()}else a=!1}else a=Ee(a,b,k)}return a}function Yc(a,b,c){var d=b.length,e=d,f=!c;if(null==a)return!e;for(a=xb(a);d--;){var h=b[d];if(f&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++d<e;){var h=b[d],g=h[0],m=a[g],k=h[1];if(f&&h[2]){if(m===C&&!(g in a))return!1}else if(h=c?c(m,k,g):C,h===C?!nb(k,m,c,!0):!h)return!1}return!0}function wb(a,b){var c=-1,d=Fa(a)?ma(a.length):[];zb(a,function(a,e,f){d[++c]=b(a,e,f)});return d}function pc(a){var b=qd(a);if(1==b.length&&
b[0][2]){var c=b[0][0],d=b[0][1];return function(a){return null==a?!1:a[c]===d&&(d!==C||c in xb(a))}}return function(a){return Yc(a,b)}}function Tc(a,b){var c=V(a),d=$b(a)&&b===b&&!oa(b),e=a+"";a=dc(a);return function(f){if(null==f)return!1;var h=e;f=xb(f);if(!(!c&&d||h in f)){f=1==a.length?f:Ra(f,xa(a,0,-1));if(null==f)return!1;h=ob(a);f=xb(f)}return f[h]===b?b!==C||h in f:nb(b,f[h],C,!0)}}function sd(a,b,c,d,e){if(!oa(a))return a;var f=Fa(b)&&(V(b)||Gc(b)),h=f?null:Ta(b);la(h||b,function(g,m){h&&
(m=g,g=b[m]);if(q(g)){d||(d=[]);e||(e=[]);a:{for(var k=m,n=d,l=e,r=n.length,t=b[k];r--;)if(n[r]==t){a[k]=l[r];break a}var r=a[k],u=c?c(r,t,k,a,b):C,x=u===C;x&&(u=t,Fa(t)&&(V(t)||Gc(t))?u=V(r)?r:Fa(r)?S(r):[]:vd(t)||Pb(t)?u=Pb(r)?dd(r):vd(r)?r:{}:x=!1);n.push(t);l.push(u);if(x)a[k]=sd(u,t,c,n,l);else if(u===u?u!==r:r===r)a[k]=u}}else k=a[m],n=c?c(k,g,m,a,b):C,(l=n===C)&&(n=g),n===C&&(!f||m in a)||!l&&(n===n?n===k:k!==k)||(a[m]=n)});return a}function Dc(a){return function(b){return null==b?C:b[a]}}
function Zc(a){var b=a+"";a=dc(a);return function(c){return Ra(c,a,b)}}function Rb(a,b){for(var c=a?b.length:0;c--;){var d=b[c];if(d!=e&&Zb(d)){var e=d;Xd.call(a,d,1)}}return a}function Xa(a,b){return a+tc(Yd()*(b-a+1))}function Lb(a,b,c,d,e){e(a,function(a,e,f){c=d?(d=!1,a):b(c,a,e,f)});return c}function xa(a,b,c){var d=-1,e=a.length;b=null==b?0:+b||0;0>b&&(b=-b>e?0:e+b);c=c===C||c>e?e:+c||0;0>c&&(c+=e);e=b>c?0:c-b>>>0;b>>>=0;for(c=ma(e);++d<e;)c[d]=a[d+b];return c}function $c(a,b){var c;zb(a,function(a,
d,e){c=b(a,d,e);return!c});return!!c}function td(a,b){var c=a.length;for(a.sort(b);c--;)a[c]=a[c].value;return a}function qc(a,b,c){var e=ja(),f=-1;b=Ia(b,function(a){return e(a)});a=wb(a,function(a){return{criteria:Ia(b,function(b){return b(a)}),index:++f,value:a}});return td(a,function(a,b){var e;a:{e=-1;for(var f=a.criteria,h=b.criteria,g=f.length,m=c.length;++e<g;){var k=d(f[e],h[e]);if(k){if(e>=m){e=k;break a}e=k*(c[e]?1:-1);break a}}e=a.index-b.index}return e})}function ad(a,b){var c=0;zb(a,
function(a,d,e){c+=+b(a,d,e)||0});return c}function rc(a,c){var d=-1,e=Ub(),f=a.length,h=e==b,g=h&&200<=f,m=g?Wd():null,k=[];m?(e=Ma,h=!1):(g=!1,m=c?[]:k);a:for(;++d<f;){var n=a[d],l=c?c(n,d,a):n;if(h&&n===n){for(var q=m.length;q--;)if(m[q]===l)continue a;c&&m.push(l);k.push(n)}else 0>e(m,l,0)&&((c||g)&&m.push(l),k.push(n))}return k}function Mb(a,b){for(var c=-1,d=b.length,e=ma(d);++c<d;)e[c]=a[b[c]];return e}function Yb(a,b,c,d){for(var e=a.length,f=d?e:-1;(d?f--:++f<e)&&b(a[f],f,a););return c?xa(a,
d?0:f,d?f+1:e):xa(a,d?f+1:0,d?e:f)}function Va(a,b){var c=a;c instanceof Y&&(c=c.value());for(var d=-1,e=b.length;++d<e;){var c=[c],f=b[d];Zd.apply(c,f.args);c=f.func.apply(f.thisArg,c)}return c}function rb(a,b,c){var d=0,e=a?a.length:d;if("number"==typeof b&&b===b&&2147483647>=e){for(;d<e;){var f=d+e>>>1,h=a[f];(c?h<=b:h<b)&&null!==h?d=f+1:e=f}return e}return bd(a,b,Q,c)}function bd(a,b,c,d){b=c(b);for(var e=0,f=a?a.length:0,h=b!==b,g=null===b,m=b===C;e<f;){var k=tc((e+f)/2),n=c(a[k]),l=n!==C,q=
n===n;(h?q||d:g?q&&l&&(d||null!=n):m?q&&(d||l):null==n?0:d?n<=b:n<b)?e=k+1:f=k}return cb(f,4294967294)}function Sa(a,b,c){if("function"!=typeof a)return Q;if(b===C)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)};case 5:return function(c,d,e,f,h){return a.call(b,c,d,e,f,h)}}return function(){return a.apply(b,arguments)}}function ec(a){return $d.call(a,0)}function lc(a,b,
c){for(var d=c.length,e=-1,f=Ca(a.length-d,0),h=-1,g=b.length,m=ma(f+g);++h<g;)m[h]=b[h];for(;++e<d;)m[c[e]]=a[e];for(;f--;)m[h++]=a[e++];return m}function kc(a,b,c){for(var d=-1,e=c.length,f=-1,h=Ca(a.length-e,0),g=-1,m=b.length,k=ma(h+m);++f<h;)k[f]=a[f];for(h=f;++g<m;)k[h+g]=b[g];for(;++d<e;)k[h+c[d]]=a[f++];return k}function sc(a,b){return function(c,d,e){var f=b?b():{};d=ja(d,e,3);if(V(c)){e=-1;for(var h=c.length;++e<h;){var g=c[e];a(f,g,d(g,e,c),c)}}else zb(c,function(b,c,e){a(f,b,d(b,c,e),
e)});return f}}function ud(a){return da(function(b,c){var d=-1,e=null==b?0:c.length,f=2<e?c[e-2]:C,h=2<e?c[2]:C,g=1<e?c[e-1]:C;"function"==typeof f?(f=Sa(f,g,5),e-=2):(f="function"==typeof g?g:C,e-=f?1:0);h&&ba(c[0],c[1],h)&&(f=3>e?C:f,e=1);for(;++d<e;)(h=c[d])&&a(b,h,f);return b})}function cd(a,b){return function(c,d){var e=c?ed(c):0;if(!Fb(e))return a(c,d);for(var f=b?e:-1,h=xb(c);(b?f--:++f<e)&&!1!==d(h[f],f,h););return c}}function fb(a){return function(b,c,d){var e=xb(b);d=d(b);for(var f=d.length,
h=a?f:-1;a?h--:++h<f;){var g=d[h];if(!1===c(e[g],g,e))break}return b}}function we(a,b){function c(){return(this&&this!==Ba&&this instanceof c?d:a).apply(b,arguments)}var d=gb(a);return c}function Sc(a){return function(b){var c=-1;b=db(Oe(b));for(var d=b.length,e="";++c<d;)e=a(e,b[c],c);return e}}function gb(a){return function(){var b=arguments;switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],
b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4])}var c=Ab(a.prototype),b=a.apply(c,b);return oa(b)?b:c}}function Xb(a){function b(c,d,e){e&&ba(c,d,e)&&(d=null);c=Tb(c,a,null,null,null,null,null,d);c.placeholder=b.placeholder;return c}return b}function xc(a,b){return function(c,d,e){e&&ba(c,d,e)&&(d=null);d=ja(d,e,3);if(1==d.length){e=c=Gb(c);for(var f=d,h=-1,g=e.length,m=b,k=m;++h<g;){var n=e[h],l=+f(n);a(l,m)&&(m=l,k=n)}e=k;if(!c.length||e!==b)return e}return Bc(c,d,a,b)}}function od(b,
c){return function(d,e,f){e=ja(e,f,3);return V(d)?(e=a(d,e,c),-1<e?d[e]:C):Cc(d,e,b)}}function pd(b){return function(c,d,e){if(!c||!c.length)return-1;d=ja(d,e,3);return a(c,d,b)}}function Od(a){return function(b,c,d){c=ja(c,d,3);return Cc(b,c,a,!0)}}function Uc(a){return function(){for(var b,c=arguments.length,d=a?c:-1,e=0,f=ma(c);a?d--:++d<c;){var h=f[e++]=arguments[d];if("function"!=typeof h)throw new yb("Expected a function");!b&&sa.prototype.thru&&"wrapper"==Vc(h)&&(b=new sa([]))}for(d=b?-1:c;++d<
c;){var h=f[d],e=Vc(h),g="wrapper"==e?ae(h):null;b=g&&Sd(g[0])&&424==g[1]&&!g[4].length&&1==g[9]?b[Vc(g[0])].apply(b,g[3]):1==h.length&&Sd(h)?b[e]():b.thru(h)}return function(){var a=arguments;if(b&&1==a.length&&V(a[0]))return b.plant(a[0]).value();for(var d=0,a=c?f[d].apply(this,a):a[0];++d<c;)a=f[d].call(this,a);return a}}}function Pd(a,b){return function(c,d,e){return"function"==typeof d&&e===C&&V(c)?a(c,d):b(c,Sa(d,e,3))}}function ye(a){return function(b,c,d){if("function"!=typeof c||d!==C)c=
Sa(c,d,3);return a(b,c,N)}}function ze(a){return function(b,c,d){if("function"!=typeof c||d!==C)c=Sa(c,d,3);return a(b,c)}}function mc(a){return function(b,c,d){var e={};c=ja(c,d,3);ab(b,function(b,d,f){f=c(b,d,f);d=a?f:d;b=a?b:f;e[d]=b});return e}}function Ae(a){return function(b,c,d){b=l(b);return(a?b:"")+Be(b,c,d)+(a?"":b)}}function Sb(a){var b=da(function(c,d){var e=t(d,b.placeholder);return Tb(c,a,null,d,e)});return b}function Qd(a,b){return function(c,d,e,f){var h=3>arguments.length;return"function"==
typeof d&&f===C&&V(c)?a(c,d,e,h):Lb(c,ja(d,f,4),e,h,b)}}function yc(a,b,c,d,e,f,h,g,m,k){function n(){for(var v=arguments.length,y=v,B=ma(v);y--;)B[y]=arguments[y];d&&(B=lc(B,d,e));f&&(B=kc(B,f,h));if(u||w){var y=n.placeholder,A=t(B,y),v=v-A.length;if(v<k){var M=g?S(g):null,v=Ca(k-v,0),Z=u?A:null,A=u?null:A,ta=u?B:null,B=u?null:B;b|=u?32:64;b&=~(u?64:32);x||(b&=-4);B=[a,b,c,ta,Z,B,A,M,m,v];M=yc.apply(C,B);Sd(a)&&fd(M,B);M.placeholder=y;return M}}y=q?c:this;M=r?y[a]:a;if(g)for(v=B.length,Z=cb(g.length,
v),A=S(B);Z--;)ta=g[Z],B[Z]=Zb(ta,v)?A[ta]:C;l&&m<B.length&&(B.length=m);this&&this!==Ba&&this instanceof n&&(M=p||gb(a));return M.apply(y,B)}var l=b&128,q=b&1,r=b&2,u=b&8,x=b&4,w=b&16,p=r?null:gb(a);return n}function Be(a,b,c){a=a.length;b=+b;if(a>=b||!Hc(b))return"";b-=a;c=null==c?" ":c+"";return be(c,gd(b/c.length)).slice(0,b)}function Ce(a,b,c,d){function e(){for(var b=-1,g=arguments.length,m=-1,k=d.length,n=ma(g+k);++m<k;)n[m]=d[m];for(;g--;)n[m++]=arguments[++b];return(this&&this!==Ba&&this instanceof
e?h:a).apply(f?c:this,n)}var f=b&1,h=gb(a);return e}function Aa(a){return function(b,c,d,e){var f=ja(d);return null==d&&f===Kb?rb(b,c,a):bd(b,c,f(d,e,1),a)}}function Tb(a,b,c,d,e,f,h,g){var m=b&2;if(!m&&"function"!=typeof a)throw new yb("Expected a function");var k=d?d.length:0;k||(b&=-97,d=e=null);k-=e?e.length:0;if(b&64){var n=d,l=e;d=e=null}var q=m?null:ae(a);c=[a,b,c,d,e,n,l,f,h,g];if(q){d=c[1];b=q[1];g=d|b;e=128==b&&8==d||128==b&&256==d&&c[7].length<=q[8]||384==b&&8==d;if(128>g||e){b&1&&(c[2]=
q[2],g|=d&1?0:4);if(d=q[3])e=c[3],c[3]=e?lc(e,d,q[4]):S(d),c[4]=e?t(c[3],"__lodash_placeholder__"):S(q[4]);if(d=q[5])e=c[5],c[5]=e?kc(e,d,q[6]):S(d),c[6]=e?t(c[5],"__lodash_placeholder__"):S(q[6]);(d=q[7])&&(c[7]=S(d));b&128&&(c[8]=null==c[8]?q[8]:cb(c[8],q[8]));null==c[9]&&(c[9]=q[9]);c[0]=q[0];c[1]=g}b=c[1];g=c[9]}c[9]=null==g?m?0:a.length:Ca(g-k,0)||0;a=1==b?we(c[0],c[2]):32!=b&&33!=b||c[4].length?yc.apply(C,c):Ce.apply(C,c);return(q?Ya:fd)(a,c)}function De(a,b,c,d,e,f,h){var g=-1,m=a.length,k=
b.length;if(m!=k&&!(e&&k>m))return!1;for(;++g<m;){var n=a[g],k=b[g],l=d?d(e?k:n,e?n:k,g):C;if(l!==C){if(l)continue;return!1}if(e){if(!wa(b,function(a){return n===a||c(n,a,d,e,f,h)}))return!1}else if(n!==k&&!c(n,k,d,e,f,h))return!1}return!0}function Ee(a,b,c){switch(c){case "[object Boolean]":case "[object Date]":return+a==+b;case "[object Error]":return a.name==b.name&&a.message==b.message;case "[object Number]":return a!=+a?b!=+b:a==+b;case "[object RegExp]":case "[object String]":return a==b+""}return!1}
function Fe(a,b,c,d,e,f,h){var g=Ta(a),m=g.length,k=Ta(b).length;if(m!=k&&!e)return!1;for(k=m;k--;){var n=g[k];if(!(e?n in b:Ea.call(b,n)))return!1}for(var l=e;++k<m;){var n=g[k],q=a[n],r=b[n],t=d?d(e?r:q,e?q:r,n):C;if(t===C?!c(q,r,d,e,f,h):!t)return!1;l||(l="constructor"==n)}return l||(c=a.constructor,d=b.constructor,!(c!=d&&"constructor"in a&&"constructor"in b)||"function"==typeof c&&c instanceof c&&"function"==typeof d&&d instanceof d)?!0:!1}function ja(a,b,c){var d=z.callback||Ic,d=d===Ic?Kb:
d;return c?d(a,b,c):d}function Vc(a){for(var b=a.name,c=wd[b],d=c?c.length:0;d--;){var e=c[d],f=e.func;if(null==f||f==a)return e.name}return b}function Ub(a,c,d){var e=z.indexOf||ce,e=e===ce?b:e;return a?e(a,c,d):e}function qd(a){a=Wb(a);for(var b=a.length;b--;){var c=a[b],d;d=a[b][1];d=d===d&&!oa(d);c[2]=d}return a}function ib(a,b){var c=null==a?C:a[b];return de(c)?c:C}function vf(a){var b=a.length,c=new a.constructor(b);b&&"string"==typeof a[0]&&Ea.call(a,"index")&&(c.index=a.index,c.input=a.input);
return c}function uf(a){a=a.constructor;"function"==typeof a&&a instanceof a||(a=fc);return new a}function xe(a,b,c){var d=a.constructor;switch(b){case "[object ArrayBuffer]":return ec(a);case "[object Boolean]":case "[object Date]":return new d(+a);case "[object Float32Array]":case "[object Float64Array]":case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return b=
a.buffer,new d(c?ec(b):b,a.byteOffset,a.length);case "[object Number]":case "[object String]":return new d(a);case "[object RegExp]":var e=new d(a.source,Ga.exec(a));e.lastIndex=a.lastIndex}return e}function Rd(a,b,c){null==a||$b(b,a)||(b=dc(b),a=1==b.length?a:Ra(a,xa(b,0,-1)),b=ob(b));b=null==a?a:a[b];return null==b?C:b.apply(a,c)}function Fa(a){return null!=a&&Fb(ed(a))}function Zb(a,b){a="number"==typeof a||sb.test(a)?+a:-1;return-1<a&&0==a%1&&a<(null==b?9007199254740991:b)}function ba(a,b,c){if(!oa(c))return!1;
var d=typeof b;return("number"==d?Fa(c)&&Zb(b,c.length):"string"==d&&b in c)?(b=c[b],a===a?a===b:b!==b):!1}function $b(a,b){var c=typeof a;return"string"==c&&p.test(a)||"number"==c?!0:V(a)?!1:!T.test(a)||null!=b&&a in xb(b)}function Sd(a){var b=Vc(a);if(!(b in Y.prototype))return!1;b=z[b];if(a===b)return!0;b=ae(b);return!!b&&a===b[0]}function Fb(a){return"number"==typeof a&&-1<a&&0==a%1&&9007199254740991>=a}function Ge(a,b){a=xb(a);for(var c=-1,d=b.length,e={};++c<d;){var f=b[c];f in a&&(e[f]=a[f])}return e}
function He(a,b){var c={};kb(a,function(a,d,e){b(a,d,e)&&(c[d]=a)});return c}function Ie(a){var b;if(!q(a)||"[object Object]"!=ia.call(a)||!(Ea.call(a,"constructor")||(b=a.constructor,"function"!=typeof b||b instanceof b)))return!1;var c;kb(a,function(a,b){c=b});return c===C||Ea.call(a,c)}function Je(a){for(var b=N(a),c=b.length,d=c&&a.length,e=!!d&&Fb(d)&&(V(a)||Pb(a)),f=-1,h=[];++f<c;){var g=b[f];(e&&Zb(g,d)||Ea.call(a,g))&&h.push(g)}return h}function Gb(a){return null==a?[]:Fa(a)?oa(a)?a:fc(a):
pb(a)}function xb(a){return oa(a)?a:fc(a)}function dc(a){if(V(a))return a;var b=[];l(a).replace(W,function(a,c,d,e){b.push(d?e.replace(ya,"$1"):c||a)});return b}function Td(a){return a instanceof Y?a.clone():new sa(a.__wrapped__,a.__chain__,S(a.__actions__))}function Ke(a,b,c){if(!a||!a.length)return[];if(c?ba(a,b,c):null==b)b=1;return xa(a,0>b?0:b)}function Ud(a,b,c){var d=a?a.length:0;if(!d)return[];if(c?ba(a,b,c):null==b)b=1;b=d-(+b||0);return xa(a,0,0>b?0:b)}function Pe(a){return a?a[0]:C}function ce(a,
c,d){var e=a?a.length:0;if(!e)return-1;if("number"==typeof d)d=0>d?Ca(e+d,0):d;else if(d)return d=rb(a,c),a=a[d],(c===c?c===a:a!==a)?d:-1;return b(a,c,d||0)}function ob(a){var b=a?a.length:0;return b?a[b-1]:C}function xd(a){return Ke(a,1)}function ee(a,c,d,e){if(!a||!a.length)return[];null!=c&&"boolean"!=typeof c&&(e=d,d=ba(a,c,e)?null:c,c=!1);var f=ja();if(null!=d||f!==Kb)d=f(d,e,3);if(c&&Ub()==b){c=d;var h;d=-1;e=a.length;for(var f=-1,g=[];++d<e;){var m=a[d],k=c?c(m,d,a):m;d&&h===k||(h=k,g[++f]=
m)}a=g}else a=rc(a,d);return a}function yd(a){if(!a||!a.length)return[];var b=-1,c=0;a=mb(a,function(a){if(Fa(a))return c=Ca(a.length,c),!0});for(var d=ma(c);++b<c;)d[b]=Ia(a,Dc(b));return d}function Qe(a,b,c){if(!a||!a.length)return[];a=yd(a);if(null==b)return a;b=Sa(b,c,4);return Ia(a,function(a){return ub(a,b,C,!0)})}function Re(a,b){var c=-1,d=a?a.length:0,e={};for(!d||b||V(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function fe(a){a=z(a);a.__chain__=!0;return a}function hd(a,
b,c){return b.call(c,a)}function Ja(a,b,c){var d=V(a)?Qa:Eb;c&&ba(a,b,c)&&(b=null);if("function"!=typeof b||c!==C)b=ja(b,c,3);return d(a,b)}function uc(a,b,c){var d=V(a)?mb:oc;b=ja(b,c,3);return d(a,b)}function zd(a,b,c,d){var e=a?ed(a):0;Fb(e)||(a=pb(a),e=a.length);if(!e)return!1;c="number"!=typeof c||d&&ba(b,c,d)?0:0>c?Ca(e+c,0):c||0;return"string"==typeof a||!V(a)&&Ad(a)?c<e&&-1<a.indexOf(b,c):-1<Ub(a,b,c)}function Bd(a,b,c){var d=V(a)?Ia:wb;b=ja(b,c,3);return d(a,b)}function Jc(a,b,c){if(c?ba(a,
b,c):null==b){a=Gb(a);var d=a.length;return 0<d?a[Xa(0,d-1)]:C}c=-1;a=na(a);var d=a.length,e=d-1;for(b=cb(0>b?0:+b||0,d);++c<b;){var d=Xa(c,e),f=a[d];a[d]=a[c];a[c]=f}a.length=b;return a}function ge(a,b,c){var d=V(a)?wa:$c;c&&ba(a,b,c)&&(b=null);if("function"!=typeof b||c!==C)b=ja(b,c,3);return d(a,b)}function Se(a,b){var c;if("function"!=typeof b)if("function"==typeof a){var d=a;a=b;b=d}else throw new yb("Expected a function");return function(){0<--a&&(c=b.apply(this,arguments));1>=a&&(b=null);return c}}
function Te(a,b,c){function d(){var c=b-(Kc()-k);0>=c||c>b?(g&&Lc(g),c=q,g=l=q=C,c&&(r=Kc(),m=a.apply(n,h),l||g||(h=n=null))):l=Ob(d,c)}function e(){l&&Lc(l);g=l=q=C;if(u||t!==b)r=Kc(),m=a.apply(n,h),l||g||(h=n=null)}function f(){h=arguments;k=Kc();n=this;q=u&&(l||!x);if(!1===t)var c=x&&!l;else{g||x||(r=k);var w=t-(k-r),p=0>=w||w>t;p?(g&&(g=Lc(g)),r=k,m=a.apply(n,h)):g||(g=Ob(e,w))}p&&l?l=Lc(l):l||b===t||(l=Ob(d,b));c&&(p=!0,m=a.apply(n,h));!p||l||g||(h=n=null);return m}var h,g,m,k,n,l,q,r=0,t=!1,
u=!0;if("function"!=typeof a)throw new yb("Expected a function");b=0>b?0:+b||0;if(!0===c)var x=!0,u=!1;else oa(c)&&(x=c.leading,t="maxWait"in c&&Ca(+c.maxWait||0,b),u="trailing"in c?c.trailing:u);f.cancel=function(){l&&Lc(l);g&&Lc(g);g=l=q=C};return f}function Cd(a,b){if("function"!=typeof a||b&&"function"!=typeof b)throw new yb("Expected a function");var c=function(){var d=arguments,e=b?b.apply(this,d):d[0],f=c.cache;if(f.has(e))return f.get(e);d=a.apply(this,d);c.cache=f.set(e,d);return d};c.cache=
new Cd.Cache;return c}function da(a,b){if("function"!=typeof a)throw new yb("Expected a function");b=Ca(b===C?a.length-1:+b||0,0);return function(){for(var c=arguments,d=-1,e=Ca(c.length-b,0),f=ma(e);++d<e;)f[d]=c[b+d];switch(b){case 0:return a.call(this,f);case 1:return a.call(this,c[0],f);case 2:return a.call(this,c[0],c[1],f)}e=ma(b+1);for(d=-1;++d<b;)e[d]=c[d];e[b]=f;return a.apply(this,e)}}function he(a,b){return a>b}function Pb(a){return q(a)&&Fa(a)&&"[object Arguments]"==ia.call(a)}function Mc(a){return!!a&&
1===a.nodeType&&q(a)&&-1<ia.call(a).indexOf("Element")}function id(a,b,c,d){d=(c="function"==typeof c?Sa(c,d,3):C)?c(a,b):C;return d===C?nb(a,b,c):!!d}function vc(a){return q(a)&&"string"==typeof a.message&&"[object Error]"==ia.call(a)}function oa(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function de(a){return null==a?!1:"[object Function]"==ia.call(a)?Nc.test(Dd.call(a)):q(a)&&Za.test(a)}function Ed(a){return"number"==typeof a||q(a)&&"[object Number]"==ia.call(a)}function ie(a){return q(a)&&
"[object RegExp]"==ia.call(a)}function Ad(a){return"string"==typeof a||q(a)&&"[object String]"==ia.call(a)}function Gc(a){return q(a)&&Fb(a.length)&&!!U[ia.call(a)]}function Bb(a,b){return a<b}function na(a){var b=a?ed(a):0;return Fb(b)?b?S(a):[]:pb(a)}function dd(a){return hb(a,N(a))}function Qb(a){return bb(a,N(a))}function N(a){if(null==a)return[];oa(a)||(a=fc(a));for(var b=a.length,b=b&&Fb(b)&&(V(a)||Pb(a))&&b||0,c=a.constructor,d=-1,c="function"==typeof c&&c.prototype===a,e=ma(b),f=0<b;++d<b;)e[d]=
d+"";for(var h in a)f&&Zb(h,b)||"constructor"==h&&(c||!Ea.call(a,h))||e.push(h);return e}function Wb(a){a=xb(a);for(var b=-1,c=Ta(a),d=c.length,e=ma(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e}function pb(a){return Mb(a,Ta(a))}function Oe(a){return(a=l(a))&&a.replace(I,f).replace(aa,"")}function Ue(a){return(a=l(a))&&ga.test(a)?a.replace(P,"\\$&"):a}function eb(a,b,c){c&&ba(a,b,c)&&(b=0);return je(a,b)}function be(a,b){var c="";a=l(a);b=+b;if(1>b||!a||!Hc(b))return c;do b%2&&(c+=a),b=tc(b/2),a+=
a;while(b);return c}function gc(a,b,c){var d=a;a=l(a);if(!a)return a;if(c?ba(d,b,c):null==b)return a.slice(u(a),x(a)+1);b+="";return a.slice(g(a,b),k(a,b)+1)}function db(a,b,c){c&&ba(a,b,c)&&(b=null);a=l(a);return a.match(b||ha)||[]}function Ic(a,b,c){c&&ba(a,b,c)&&(b=null);return q(a)?Ve(a):Kb(a,b)}function Oc(a){return function(){return a}}function Q(a){return a}function Ve(a){return pc($a(a,!0))}function pa(a,b,c){if(null==c){var d=oa(b),e=d?Ta(b):null;((e=e&&e.length?bb(b,e):null)?e.length:d)||
(e=!1,c=b,b=a,a=this)}e||(e=bb(b,Ta(b)));var f=!0,d=-1,h=Fc(a),g=e.length;!1===c?f=!1:oa(c)&&"chain"in c&&(f=c.chain);for(;++d<g;){c=e[d];var m=b[c];a[c]=m;h&&(a.prototype[c]=function(b){return function(){var c=this.__chain__;if(f||c){var d=a(this.__wrapped__);(d.__actions__=S(this.__actions__)).push({func:b,args:arguments,thisArg:a});d.__chain__=c;return d}c=[this.value()];Zd.apply(c,arguments);return b.apply(a,c)}}(m))}return a}function ke(){}function Nb(a){return $b(a)?Dc(a):Zc(a)}r=r?ca.defaults(Ba.Object(),
r,ca.pick(Ba,tb)):Ba;var ma=r.Array,We=r.Date,Pc=r.Error,Xe=r.Function,Qc=r.Math,hc=r.Number,fc=r.Object,wc=r.RegExp,Ye=r.String,yb=r.TypeError,le=ma.prototype,jd=fc.prototype,me=Ye.prototype,ne=(ne=r.window)?ne.document:null,Dd=Xe.prototype.toString,Ea=jd.hasOwnProperty,wf=0,ia=jd.toString,xf=r._,Nc=wc("^"+Ue(Dd.call(Ea)).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ic=ib(r,"ArrayBuffer"),$d=ib(ic&&new ic(0),"slice"),gd=Qc.ceil,Lc=r.clearTimeout,tc=Qc.floor,Fd=ib(fc,
"getPrototypeOf"),yf=r.parseFloat,Zd=le.push,Me=ib(r,"Set"),Ob=r.setTimeout,Xd=le.splice,kd=ib(r,"Uint8Array"),Ze=ib(r,"WeakMap"),ld=function(){try{var a=ib(r,"Float64Array"),b=new a(new ic(10),0,1)&&a}catch(c){}return b||null}(),Le=ib(fc,"create"),zf=ib(ma,"isArray"),Hc=r.isFinite,Ka=ib(fc,"keys"),Ca=Qc.max,cb=Qc.min,Af=ib(We,"now"),$e=ib(hc,"isFinite"),je=r.parseInt,Yd=Qc.random,oe=hc.NEGATIVE_INFINITY,Vd=hc.POSITIVE_INFINITY,af=ld?ld.BYTES_PER_ELEMENT:0,Gd=Ze&&new Ze,wd={},Hd=z.support={};(function(a){var b=
function(){this.x=a},c=[];b.prototype={valueOf:a,y:a};for(var d in new b)c.push(d);try{Hd.dom=11===ne.createDocumentFragment().nodeType}catch(e){Hd.dom=!1}})(1,0);z.templateSettings={escape:J,evaluate:A,interpolate:O,variable:"",imports:{_:z}};var Ab=function(){function a(){}return function(b){if(oa(b)){a.prototype=b;var c=new a;a.prototype=null}return c||{}}}(),zb=cd(ab),pe=cd(za,!0),Ec=fb(),Ne=fb(!0),Ya=Gd?function(a,b){Gd.set(a,b);return a}:Q;$d||(ec=ic&&kd?function(a){var b=a.byteLength,c=ld?
tc(b/af):0,d=c*af,e=new ic(b);if(c){var f=new ld(e,0,c);f.set(new ld(a,0,c))}b!=d&&(f=new kd(e,d),f.set(new kd(a,d)));return e}:Oc(null));var Wd=Le&&Me?function(a){return new Pa(a)}:Oc(null),ae=Gd?function(a){return Gd.get(a)}:ke,ed=Dc("length"),fd=function(){var a=0,b=0;return function(c,d){var e=Kc(),f=16-(e-b);b=e;if(0<f){if(150<=++a)return c}else a=0;return Ya(c,d)}}(),Bf=da(function(a,b){return Fa(a)?Na(a,ua(b,!1,!0)):[]}),qe=pd(),G=pd(!0),re=da(function(a){for(var c=a.length,d=c,e=ma(n),f=Ub(),
h=f==b,g=[];d--;){var m=a[d]=Fa(m=a[d])?m:[];e[d]=h&&120<=m.length?Wd(d&&m):null}var h=a[0],k=-1,n=h?h.length:0,l=e[0];a:for(;++k<n;)if(m=h[k],0>(l?Ma(l,m):f(g,m,0))){for(d=c;--d;){var q=e[d];if(0>(q?Ma(q,m):f(a[d],m,0)))continue a}l&&l.push(m);g.push(m)}return g}),Cf=da(function(a,b){b=ua(b);var c=Jb(a,b);Rb(a,b.sort(d));return c}),jc=Aa(),Cb=Aa(!0),Df=da(function(a){return rc(ua(a,!1,!0))}),Ua=da(function(a,b){return Fa(a)?Na(a,b):[]}),bf=da(yd),cf=da(function(a){var b=a.length,c=2<b?a[b-2]:C,d=
1<b?a[b-1]:C;2<b&&"function"==typeof c?b-=2:(c=1<b&&"function"==typeof d?(--b,d):C,d=C);a.length=b;return Qe(a,c,d)}),df=da(function(a,b){return Jb(a,ua(b))}),se=sc(function(a,b,c){Ea.call(a,c)?++a[c]:a[c]=1}),te=od(zb),Ef=od(pe,!0),ef=Pd(la,zb),ff=Pd(function(a,b){for(var c=a.length;c--&&!1!==b(a[c],c,a););return a},pe),Ff=sc(function(a,b,c){Ea.call(a,c)?a[c].push(b):a[c]=[b]}),Gf=sc(function(a,b,c){a[c]=b}),Id=da(function(a,b,c){var d=-1,e="function"==typeof b,f=$b(b),h=Fa(a)?ma(a.length):[];zb(a,
function(a){var g=e?b:f&&null!=a?a[b]:null;h[++d]=g?g.apply(a,c):Rd(a,b,c)});return h}),Jd=sc(function(a,b,c){a[c?0:1].push(b)},function(){return[[],[]]}),Kd=Qd(ub,zb),gf=Qd(function(a,b,c,d){var e=a.length;for(d&&e&&(c=a[--e]);e--;)c=b(c,a[e],e,a);return c},pe),Hf=da(function(a,b){if(null==a)return[];var c=b[2];c&&ba(b[0],b[1],c)&&(b.length=1);return qc(a,ua(b),[])}),Kc=Af||function(){return(new We).getTime()},hf=da(function(a,b,c){var d=1;if(c.length)var e=t(c,hf.placeholder),d=d|32;return Tb(a,
d,b,c,e)}),If=da(function(a,b){b=b.length?ua(b):Qb(a);for(var c=-1,d=b.length;++c<d;){var e=b[c];a[e]=Tb(a[e],1,a)}return a}),jf=da(function(a,b,c){var d=3;if(c.length)var e=t(c,jf.placeholder),d=d|32;return Tb(b,d,a,c,e)}),kf=Xb(8),lf=Xb(16),ue=da(function(a,b){return Ac(a,1,b)}),mf=da(function(a,b,c){return Ac(a,b,c)}),nf=Uc(),Ld=Uc(!0),of=Sb(32),pf=Sb(64),Jf=da(function(a,b){return Tb(a,256,null,null,null,ua(b))}),V=zf||function(a){return q(a)&&Fb(a.length)&&"[object Array]"==ia.call(a)};Hd.dom||
(Mc=function(a){return!!a&&1===a.nodeType&&q(a)&&!vd(a)});var Kf=$e||function(a){return"number"==typeof a&&Hc(a)},Fc=c(/x/)||kd&&!c(kd)?function(a){return"[object Function]"==ia.call(a)}:c,vd=Fd?function(a){if(!a||"[object Object]"!=ia.call(a))return!1;var b=ib(a,"valueOf"),c=b&&(c=Fd(b))&&Fd(c);return c?a==c||Fd(a)==c:Ie(a)}:Ie,ve=ud(function(a,b,c){return c?fa(a,b,c):Ib(a,b)}),Lf=da(function(a){var b=a[0];if(null==b)return b;a.push(H);return ve.apply(C,a)}),Mf=Od(ab),Nf=Od(za),Of=ye(Ec),Pf=ye(Ne),
qf=ze(ab),Qf=ze(za),Ta=Ka?function(a){var b=null==a?null:a.constructor;return"function"==typeof b&&b.prototype===a||"function"!=typeof a&&Fa(a)?Je(a):oa(a)?Ka(a):[]}:Je,Rf=mc(!0),Sf=mc(),Tf=ud(sd),Uf=da(function(a,b){if(null==a)return{};if("function"!=typeof b[0])return b=Ia(ua(b),Ye),Ge(a,Na(N(a),b));var c=Sa(b[0],b[1],3);return He(a,function(a,b,d){return!c(a,b,d)})}),md=da(function(a,b){return null==a?{}:"function"==typeof b[0]?He(a,Sa(b[0],b[1],3)):Ge(a,ua(b))}),rf=Sc(function(a,b,c){b=b.toLowerCase();
return a+(c?b.charAt(0).toUpperCase()+b.slice(1):b)}),Rc=Sc(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()}),Md=Ae(),sf=Ae(!0);8!=je(" \t\x0B\f\u00a0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u300008")&&(eb=function(a,b,c){(c?ba(a,b,c):null==b)?b=0:b&&(b=+b);a=gc(a);return je(a,b||(va.test(a)?16:10))});var nd=Sc(function(a,b,c){return a+(c?"_":"")+b.toLowerCase()}),Vf=Sc(function(a,b,c){return a+(c?" ":"")+(b.charAt(0).toUpperCase()+
b.slice(1))}),tf=da(function(a,b){try{return a.apply(C,b)}catch(c){return vc(c)?c:new Pc(c)}}),Wf=da(function(a,b){return function(c){return Rd(c,a,b)}}),Xf=da(function(a,b){return function(c){return Rd(a,c,b)}}),Yf=xc(he,oe),Zf=xc(Bb,Vd);z.prototype=Ha.prototype;sa.prototype=Ab(Ha.prototype);sa.prototype.constructor=sa;Y.prototype=Ab(Ha.prototype);Y.prototype.constructor=Y;Wa.prototype["delete"]=function(a){return this.has(a)&&delete this.__data__[a]};Wa.prototype.get=function(a){return"__proto__"==
a?C:this.__data__[a]};Wa.prototype.has=function(a){return"__proto__"!=a&&Ea.call(this.__data__,a)};Wa.prototype.set=function(a,b){"__proto__"!=a&&(this.__data__[a]=b);return this};Pa.prototype.push=function(a){var b=this.data;"string"==typeof a||oa(a)?b.set.add(a):b.hash[a]=!0};Cd.Cache=Wa;z.after=function(a,b){if("function"!=typeof b)if("function"==typeof a){var c=a;a=b;b=c}else throw new yb("Expected a function");a=Hc(a=+a)?a:0;return function(){if(1>--a)return b.apply(this,arguments)}};z.ary=function(a,
b,c){c&&ba(a,b,c)&&(b=null);b=a&&null==b?a.length:Ca(+b||0,0);return Tb(a,128,null,null,null,null,b)};z.assign=ve;z.at=df;z.before=Se;z.bind=hf;z.bindAll=If;z.bindKey=jf;z.callback=Ic;z.chain=fe;z.chunk=function(a,b,c){b=(c?ba(a,b,c):null==b)?1:Ca(+b||1,1);c=0;for(var d=a?a.length:0,e=-1,f=ma(gd(d/b));c<d;)f[++e]=xa(a,c,c+=b);return f};z.compact=function(a){for(var b=-1,c=a?a.length:0,d=-1,e=[];++b<c;){var f=a[b];f&&(e[++d]=f)}return e};z.constant=Oc;z.countBy=se;z.create=function(a,b,c){var d=Ab(a);
c&&ba(a,b,c)&&(b=null);return b?Ib(d,b):d};z.curry=kf;z.curryRight=lf;z.debounce=Te;z.defaults=Lf;z.defer=ue;z.delay=mf;z.difference=Bf;z.drop=Ke;z.dropRight=Ud;z.dropRightWhile=function(a,b,c){return a&&a.length?Yb(a,ja(b,c,3),!0,!0):[]};z.dropWhile=function(a,b,c){return a&&a.length?Yb(a,ja(b,c,3),!0):[]};z.fill=function(a,b,c,d){var e=a?a.length:0;if(!e)return[];c&&"number"!=typeof c&&ba(a,b,c)&&(c=0,d=e);e=a.length;c=null==c?0:+c||0;0>c&&(c=-c>e?0:e+c);d=d===C||d>e?e:+d||0;0>d&&(d+=e);e=c>d?0:
d>>>0;for(c>>>=0;c<e;)a[c++]=b;return a};z.filter=uc;z.flatten=function(a,b,c){var d=a?a.length:0;c&&ba(a,b,c)&&(b=!1);return d?ua(a,b):[]};z.flattenDeep=function(a){return a&&a.length?ua(a,!0):[]};z.flow=nf;z.flowRight=Ld;z.forEach=ef;z.forEachRight=ff;z.forIn=Of;z.forInRight=Pf;z.forOwn=qf;z.forOwnRight=Qf;z.functions=Qb;z.groupBy=Ff;z.indexBy=Gf;z.initial=function(a){return Ud(a,1)};z.intersection=re;z.invert=function(a,b,c){c&&ba(a,b,c)&&(b=null);c=-1;for(var d=Ta(a),e=d.length,f={};++c<e;){var h=
d[c],g=a[h];b?Ea.call(f,g)?f[g].push(h):f[g]=[h]:f[g]=h}return f};z.invoke=Id;z.keys=Ta;z.keysIn=N;z.map=Bd;z.mapKeys=Rf;z.mapValues=Sf;z.matches=Ve;z.matchesProperty=function(a,b){return Tc(a,$a(b,!0))};z.memoize=Cd;z.merge=Tf;z.method=Wf;z.methodOf=Xf;z.mixin=pa;z.negate=function(a){if("function"!=typeof a)throw new yb("Expected a function");return function(){return!a.apply(this,arguments)}};z.omit=Uf;z.once=function(a){return Se(2,a)};z.pairs=Wb;z.partial=of;z.partialRight=pf;z.partition=Jd;z.pick=
md;z.pluck=function(a,b){return Bd(a,Nb(b))};z.property=Nb;z.propertyOf=function(a){return function(b){return Ra(a,dc(b),b+"")}};z.pull=function(){var a=arguments,b=a[0];if(!b||!b.length)return b;for(var c=0,d=Ub(),e=a.length;++c<e;)for(var f=0,h=a[c];-1<(f=d(b,h,f));)Xd.call(b,f,1);return b};z.pullAt=Cf;z.range=function(a,b,c){c&&ba(a,b,c)&&(b=c=null);a=+a||0;c=null==c?1:+c||0;null==b?(b=a,a=0):b=+b||0;var d=-1;b=Ca(gd((b-a)/(c||1)),0);for(var e=ma(b);++d<b;)e[d]=a,a+=c;return e};z.rearg=Jf;z.reject=
function(a,b,c){var d=V(a)?mb:oc;b=ja(b,c,3);return d(a,function(a,c,d){return!b(a,c,d)})};z.remove=function(a,b,c){var d=[];if(!a||!a.length)return d;var e=-1,f=[],h=a.length;for(b=ja(b,c,3);++e<h;)c=a[e],b(c,e,a)&&(d.push(c),f.push(e));Rb(a,f);return d};z.rest=xd;z.restParam=da;z.set=function(a,b,c){if(null==a)return a;var d=b+"";b=null!=a[d]||$b(b,a)?[d]:dc(b);for(var d=-1,e=b.length,f=e-1,h=a;null!=h&&++d<e;){var g=b[d];oa(h)&&(d==f?h[g]=c:null==h[g]&&(h[g]=Zb(b[d+1])?[]:{}));h=h[g]}return a};
z.shuffle=function(a){return Jc(a,Vd)};z.slice=function(a,b,c){var d=a?a.length:0;if(!d)return[];c&&"number"!=typeof c&&ba(a,b,c)&&(b=0,c=d);return xa(a,b,c)};z.sortBy=function(a,b,c){if(null==a)return[];c&&ba(a,b,c)&&(b=null);var d=-1;b=ja(b,c,3);a=wb(a,function(a,c,e){return{criteria:b(a,c,e),index:++d,value:a}});return td(a,e)};z.sortByAll=Hf;z.sortByOrder=function(a,b,c,d){if(null==a)return[];d&&ba(b,c,d)&&(c=null);V(b)||(b=null==b?[]:[b]);V(c)||(c=null==c?[]:[c]);return qc(a,b,c)};z.spread=function(a){if("function"!=
typeof a)throw new yb("Expected a function");return function(b){return a.apply(this,b)}};z.take=function(a,b,c){if(!a||!a.length)return[];if(c?ba(a,b,c):null==b)b=1;return xa(a,0,0>b?0:b)};z.takeRight=function(a,b,c){var d=a?a.length:0;if(!d)return[];if(c?ba(a,b,c):null==b)b=1;b=d-(+b||0);return xa(a,0>b?0:b)};z.takeRightWhile=function(a,b,c){return a&&a.length?Yb(a,ja(b,c,3),!1,!0):[]};z.takeWhile=function(a,b,c){return a&&a.length?Yb(a,ja(b,c,3)):[]};z.tap=function(a,b,c){b.call(c,a);return a};
z.throttle=function(a,b,c){var d=!0,e=!0;if("function"!=typeof a)throw new yb("Expected a function");!1===c?d=!1:oa(c)&&(d="leading"in c?!!c.leading:d,e="trailing"in c?!!c.trailing:e);Hb.leading=d;Hb.maxWait=+b;Hb.trailing=e;return Te(a,b,Hb)};z.thru=hd;z.times=function(a,b,c){a=tc(a);if(1>a||!Hc(a))return[];var d=-1,e=ma(cb(a,4294967295));for(b=Sa(b,c,1);++d<a;)4294967295>d?e[d]=b(d):b(d);return e};z.toArray=na;z.toPlainObject=dd;z.transform=function(a,b,c,d){var e=V(a)||Gc(a);b=ja(b,d,4);null==
c&&(e||oa(a)?(d=a.constructor,c=e?V(a)?new d:[]:Ab(Fc(d)?d.prototype:null)):c={});(e?la:ab)(a,function(a,d,e){return b(c,a,d,e)});return c};z.union=Df;z.uniq=ee;z.unzip=yd;z.unzipWith=Qe;z.values=pb;z.valuesIn=function(a){return Mb(a,N(a))};z.where=function(a,b){return uc(a,pc(b))};z.without=Ua;z.wrap=function(a,b){b=null==b?Q:b;return Tb(b,32,null,[a],[])};z.xor=function(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(Fa(c))var d=d?Na(d,c).concat(Na(c,d)):c}return d?rc(d):[]};z.zip=
bf;z.zipObject=Re;z.zipWith=cf;z.backflow=Ld;z.collect=Bd;z.compose=Ld;z.each=ef;z.eachRight=ff;z.extend=ve;z.iteratee=Ic;z.methods=Qb;z.object=Re;z.select=uc;z.tail=xd;z.unique=ee;pa(z,z);z.add=function(a,b){return(+a||0)+(+b||0)};z.attempt=tf;z.camelCase=rf;z.capitalize=function(a){return(a=l(a))&&a.charAt(0).toUpperCase()+a.slice(1)};z.clone=function(a,b,c,d){b&&"boolean"!=typeof b&&ba(a,b,c)?b=!1:"function"==typeof b&&(d=c,c=b,b=!1);return"function"==typeof c?$a(a,b,Sa(c,d,1)):$a(a,b)};z.cloneDeep=
function(a,b,c){return"function"==typeof b?$a(a,!0,Sa(b,c,1)):$a(a,!0)};z.deburr=Oe;z.endsWith=function(a,b,c){a=l(a);b+="";var d=a.length;c=c===C?d:cb(0>c?0:+c||0,d);c-=b.length;return 0<=c&&a.indexOf(b,c)==c};z.escape=function(a){return(a=l(a))&&K.test(a)?a.replace(F,m):a};z.escapeRegExp=Ue;z.every=Ja;z.find=te;z.findIndex=qe;z.findKey=Mf;z.findLast=Ef;z.findLastIndex=G;z.findLastKey=Nf;z.findWhere=function(a,b){return te(a,pc(b))};z.first=Pe;z.get=function(a,b,c){a=null==a?C:Ra(a,dc(b),b+"");return a===
C?c:a};z.gt=he;z.gte=function(a,b){return a>=b};z.has=function(a,b){if(null==a)return!1;var c=Ea.call(a,b);if(!c&&!$b(b)){b=dc(b);a=1==b.length?a:Ra(a,xa(b,0,-1));if(null==a)return!1;b=ob(b);c=Ea.call(a,b)}return c||Fb(a.length)&&Zb(b,a.length)&&(V(a)||Pb(a))};z.identity=Q;z.includes=zd;z.indexOf=ce;z.inRange=function(a,b,c){b=+b||0;"undefined"===typeof c?(c=b,b=0):c=+c||0;return a>=cb(b,c)&&a<Ca(b,c)};z.isArguments=Pb;z.isArray=V;z.isBoolean=function(a){return!0===a||!1===a||q(a)&&"[object Boolean]"==
ia.call(a)};z.isDate=function(a){return q(a)&&"[object Date]"==ia.call(a)};z.isElement=Mc;z.isEmpty=function(a){return null==a?!0:Fa(a)&&(V(a)||Ad(a)||Pb(a)||q(a)&&Fc(a.splice))?!a.length:!Ta(a).length};z.isEqual=id;z.isError=vc;z.isFinite=Kf;z.isFunction=Fc;z.isMatch=function(a,b,c,d){c="function"==typeof c?Sa(c,d,3):C;return Yc(a,qd(b),c)};z.isNaN=function(a){return Ed(a)&&a!=+a};z.isNative=de;z.isNull=function(a){return null===a};z.isNumber=Ed;z.isObject=oa;z.isPlainObject=vd;z.isRegExp=ie;z.isString=
Ad;z.isTypedArray=Gc;z.isUndefined=function(a){return a===C};z.kebabCase=Rc;z.last=ob;z.lastIndexOf=function(a,b,c){var d=a?a.length:0;if(!d)return-1;var e=d;if("number"==typeof c)e=(0>c?Ca(d+c,0):cb(c||0,d-1))+1;else if(c)return e=rb(a,b,!0)-1,a=a[e],(b===b?b===a:a!==a)?e:-1;if(b!==b)return n(a,e,!0);for(;e--;)if(a[e]===b)return e;return-1};z.lt=Bb;z.lte=function(a,b){return a<=b};z.max=Yf;z.min=Zf;z.noConflict=function(){r._=xf;return this};z.noop=ke;z.now=Kc;z.pad=function(a,b,c){a=l(a);b=+b;var d=
a.length;if(d>=b||!Hc(b))return a;d=(b-d)/2;b=tc(d);d=gd(d);c=Be("",d,c);return c.slice(0,b)+a+c};z.padLeft=Md;z.padRight=sf;z.parseInt=eb;z.random=function(a,b,c){c&&ba(a,b,c)&&(b=c=null);var d=null==a,e=null==b;null==c&&(e&&"boolean"==typeof a?(c=a,a=1):"boolean"==typeof b&&(c=b,e=!0));d&&e&&(b=1,e=!1);a=+a||0;e?(b=a,a=0):b=+b||0;return c||a%1||b%1?(c=Yd(),cb(a+c*(b-a+yf("1e-"+((c+"").length-1))),b)):Xa(a,b)};z.reduce=Kd;z.reduceRight=gf;z.repeat=be;z.result=function(a,b,c){var d=null==a?C:a[b];
d===C&&(null==a||$b(b,a)||(b=dc(b),a=1==b.length?a:Ra(a,xa(b,0,-1)),d=null==a?C:a[ob(b)]),d=d===C?c:d);return Fc(d)?d.call(a):d};z.runInContext=v;z.size=function(a){var b=a?ed(a):0;return Fb(b)?b:Ta(a).length};z.snakeCase=nd;z.some=ge;z.sortedIndex=jc;z.sortedLastIndex=Cb;z.startCase=Vf;z.startsWith=function(a,b,c){a=l(a);c=null==c?0:cb(0>c?0:+c||0,a.length);return a.lastIndexOf(b,c)==c};z.sum=function(a,b,c){c&&ba(a,b,c)&&(b=null);var d=ja(),e=null==b;e&&d===Kb||(e=!1,b=d(b,c,3));if(e){a=V(a)?a:
Gb(a);b=a.length;for(c=0;b--;)c+=+a[b]||0;a=c}else a=ad(a,b);return a};z.template=function(a,b,c){var d=z.templateSettings;c&&ba(a,b,c)&&(b=c=null);a=l(a);b=fa(Ib({},c||b),d,vb);c=fa(Ib({},b.imports),d.imports,vb);var e=Ta(c),f=Mb(c,e),g,m,k=0;c=b.interpolate||ra;var n="__p += '";c=wc((b.escape||ra).source+"|"+c.source+"|"+(c===O?ka:ra).source+"|"+(b.evaluate||ra).source+"|$","g");var q="//# sourceURL="+("sourceURL"in b?b.sourceURL:"lodash.templateSources["+ ++Oa+"]")+"\n";a.replace(c,function(b,
c,d,e,f,l){d||(d=e);n+=a.slice(k,l).replace(X,h);c&&(g=!0,n+="' +\n__e("+c+") +\n'");f&&(m=!0,n+="';\n"+f+";\n__p += '");d&&(n+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'");k=l+b.length;return b});n+="';\n";(b=b.variable)||(n="with (obj) {\n"+n+"\n}\n");n=(m?n.replace(E,""):n).replace(y,"$1").replace(B,"$1;");n="function("+(b||"obj")+") {\n"+(b?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(g?", __e = _.escape":"")+(m?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":
";\n")+n+"return __p\n}";b=tf(function(){return Xe(e,q+"return "+n).apply(C,f)});b.source=n;if(vc(b))throw b;return b};z.trim=gc;z.trimLeft=function(a,b,c){var d=a;return(a=l(a))?(c?ba(d,b,c):null==b)?a.slice(u(a)):a.slice(g(a,b+"")):a};z.trimRight=function(a,b,c){var d=a;return(a=l(a))?(c?ba(d,b,c):null==b)?a.slice(0,x(a)+1):a.slice(0,k(a,b+"")+1):a};z.trunc=function(a,b,c){c&&ba(a,b,c)&&(b=null);var d=30;c="...";if(null!=b)if(oa(b)){var e="separator"in b?b.separator:e,d="length"in b?+b.length||
0:d;c="omission"in b?l(b.omission):c}else d=+b||0;a=l(a);if(d>=a.length)return a;d-=c.length;if(1>d)return c;b=a.slice(0,d);if(null==e)return b+c;if(ie(e)){if(a.slice(d).search(e)){var f,h=a.slice(0,d);e.global||(e=wc(e.source,(Ga.exec(e)||"")+"g"));for(e.lastIndex=0;a=e.exec(h);)f=a.index;b=b.slice(0,null==f?d:f)}}else a.indexOf(e,d)!=d&&(e=b.lastIndexOf(e),-1<e&&(b=b.slice(0,e)));return b+c};z.unescape=function(a){return(a=l(a))&&L.test(a)?a.replace(D,w):a};z.uniqueId=function(a){var b=++wf;return l(a)+
b};z.words=db;z.all=Ja;z.any=ge;z.contains=zd;z.eq=id;z.detect=te;z.foldl=Kd;z.foldr=gf;z.head=Pe;z.include=zd;z.inject=Kd;pa(z,function(){var a={};ab(z,function(b,c){z.prototype[c]||(a[c]=b)});return a}(),!1);z.sample=Jc;z.prototype.sample=function(a){return this.__chain__||null!=a?this.thru(function(b){return Jc(b,a)}):Jc(this.value())};z.VERSION="3.9.3";la("bind bindKey curry curryRight partial partialRight".split(" "),function(a){z[a].placeholder=z});la(["dropWhile","filter","map","takeWhile"],
function(a,b){var c=2!=b,d=0==b;Y.prototype[a]=function(a,e){var f=this.__filtered__,h=f&&d?new Y(this):this.clone();(h.__iteratees__||(h.__iteratees__=[])).push({done:!1,count:0,index:0,iteratee:ja(a,e,1),limit:-1,type:b});h.__filtered__=f||c;return h}});la(["drop","take"],function(a,b){var c=a+"While";Y.prototype[a]=function(c){var d=this.__filtered__,e=d&&!b?this.dropWhile():this.clone();c=null==c?1:Ca(tc(c)||0,0);d?b?e.__takeCount__=cb(e.__takeCount__,c):ob(e.__iteratees__).limit=c:(e.__views__||
(e.__views__=[])).push({size:c,type:a+(0>e.__dir__?"Right":"")});return e};Y.prototype[a+"Right"]=function(b){return this.reverse()[a](b).reverse()};Y.prototype[a+"RightWhile"]=function(a,b){return this.reverse()[c](a,b).reverse()}});la(["first","last"],function(a,b){var c="take"+(b?"Right":"");Y.prototype[a]=function(){return this[c](1).value()[0]}});la(["initial","rest"],function(a,b){var c="drop"+(b?"":"Right");Y.prototype[a]=function(){return this[c](1)}});la(["pluck","where"],function(a,b){var c=
b?"filter":"map",d=b?pc:Nb;Y.prototype[a]=function(a){return this[c](d(a))}});Y.prototype.compact=function(){return this.filter(Q)};Y.prototype.reject=function(a,b){a=ja(a,b,1);return this.filter(function(b){return!a(b)})};Y.prototype.slice=function(a,b){a=null==a?0:+a||0;var c=this;0>a?c=this.takeRight(-a):a&&(c=this.drop(a));b!==C&&(b=+b||0,c=0>b?c.dropRight(-b):c.take(b-a));return c};Y.prototype.toArray=function(){return this.drop(0)};ab(Y.prototype,function(a,b){var c=z[b];if(c){var d=/^(?:filter|map|reject)|While$/.test(b),
e=/^(?:first|last)$/.test(b);z.prototype[b]=function(){var b=arguments,f=this.__chain__,h=this.__wrapped__,g=!!this.__actions__.length,m=h instanceof Y,k=b[0],n=m||V(h);n&&d&&"function"==typeof k&&1!=k.length&&(m=n=!1);k=m&&!g;if(e&&!f)return k?a.call(h):c.call(z,this.value());m=function(a){a=[a];Zd.apply(a,b);return c.apply(z,a)};return n?(h=k?h:new Y(this),h=a.apply(h,b),e||!g&&!h.__actions__||(h.__actions__||(h.__actions__=[])).push({func:hd,args:[m],thisArg:z}),new sa(h,f)):this.thru(m)}}});la("concat join pop push replace shift sort splice split unshift".split(" "),
function(a){var b=(/^(?:replace|split)$/.test(a)?me:le)[a],c=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",d=/^(?:join|pop|replace|shift)$/.test(a);z.prototype[a]=function(){var a=arguments;return d&&!this.__chain__?b.apply(this.value(),a):this[c](function(c){return b.apply(c,a)})}});ab(Y.prototype,function(a,b){var c=z[b];if(c){var d=c.name;(wd[d]||(wd[d]=[])).push({name:b,func:c})}});wd[yc(null,2).name]=[{name:"wrapper",func:null}];Y.prototype.clone=function(){var a=this.__actions__,b=this.__iteratees__,
c=this.__views__,d=new Y(this.__wrapped__);d.__actions__=a?S(a):null;d.__dir__=this.__dir__;d.__filtered__=this.__filtered__;d.__iteratees__=b?S(b):null;d.__takeCount__=this.__takeCount__;d.__views__=c?S(c):null;return d};Y.prototype.reverse=function(){if(this.__filtered__){var a=new Y(this);a.__dir__=-1;a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a};Y.prototype.value=function(){var a,b=this.__wrapped__.value();if(!V(b))return Va(b,this.__actions__);var c=this.__dir__,d=0>c;a=0;for(var e=
b.length,f=this.__views__,h=-1,g=f?f.length:0;++h<g;){var m=f[h],k=m.size;switch(m.type){case "drop":a+=k;break;case "dropRight":e-=k;break;case "take":e=cb(e,a+k);break;case "takeRight":a=Ca(a,e-k)}}f=e;e=f-a;a=d?f:a-1;f=cb(e,this.__takeCount__);g=(h=this.__iteratees__)?h.length:0;m=0;k=[];a:for(;e--&&m<f;){a+=c;for(var n=-1,l=b[a];++n<g;){var q=h[n],r=q.iteratee,t=q.type;if(0==t){if(q.done&&(d?a>q.index:a<q.index)&&(q.count=0,q.done=!1),q.index=a,!(q.done||(t=q.limit,q.done=-1<t?q.count++>=t:!r(l))))continue a}else if(q=
r(l),2==t)l=q;else if(!q)if(1==t)continue a;else break a}k[m++]=l}return k};z.prototype.chain=function(){return fe(this)};z.prototype.commit=function(){return new sa(this.value(),this.__chain__)};z.prototype.plant=function(a){for(var b,c=this;c instanceof Ha;){var d=Td(c);b?e.__wrapped__=d:b=d;var e=d,c=c.__wrapped__}e.__wrapped__=a;return b};z.prototype.reverse=function(){var a=this.__wrapped__;return a instanceof Y?(this.__actions__.length&&(a=new Y(this)),new sa(a.reverse(),this.__chain__)):this.thru(function(a){return a.reverse()})};
z.prototype.toString=function(){return this.value()+""};z.prototype.run=z.prototype.toJSON=z.prototype.valueOf=z.prototype.value=function(){return Va(this.__wrapped__,this.__actions__)};z.prototype.collect=z.prototype.map;z.prototype.head=z.prototype.first;z.prototype.select=z.prototype.filter;z.prototype.tail=z.prototype.rest;return z}var C,E=/\b__p \+= '';/g,y=/\b(__p \+=) '' \+/g,B=/(__e\(.*?\)|\b__t\)) \+\n'';/g,D=/&(?:amp|lt|gt|quot|#39|#96);/g,F=/[&<>"'`]/g,L=RegExp(D.source),K=RegExp(F.source),
J=/<%-([\s\S]+?)%>/g,A=/<%([\s\S]+?)%>/g,O=/<%=([\s\S]+?)%>/g,T=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,p=/^\w*$/,W=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,P=/[.*+?^${}()|[\]\/\\]/g,ga=RegExp(P.source),aa=/[\u0300-\u036f\ufe20-\ufe23]/g,ya=/\\(\\)?/g,ka=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ga=/\w*$/,va=/^0[xX]/,Za=/^\[object .+?Constructor\]$/,sb=/^\d+$/,I=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,ra=/($^)/,X=/['\n\r\u2028\u2029\\]/g,ha=/[A-Z\xc0-\xd6\xd8-\xde]+(?=[A-Z\xc0-\xd6\xd8-\xde][a-z\xdf-\xf6\xf8-\xff]+)|[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+|[A-Z\xc0-\xd6\xd8-\xde]+|[0-9]+/g,
tb="Array ArrayBuffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Math Number Object RegExp Set String _ clearTimeout document isFinite parseFloat parseInt setTimeout TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap window".split(" "),Oa=-1,U={};U["[object Float32Array]"]=U["[object Float64Array]"]=U["[object Int8Array]"]=U["[object Int16Array]"]=U["[object Int32Array]"]=U["[object Uint8Array]"]=U["[object Uint8ClampedArray]"]=U["[object Uint16Array]"]=
U["[object Uint32Array]"]=!0;U["[object Arguments]"]=U["[object Array]"]=U["[object ArrayBuffer]"]=U["[object Boolean]"]=U["[object Date]"]=U["[object Error]"]=U["[object Function]"]=U["[object Map]"]=U["[object Number]"]=U["[object Object]"]=U["[object RegExp]"]=U["[object Set]"]=U["[object String]"]=U["[object WeakMap]"]=!1;var ea={};ea["[object Arguments]"]=ea["[object Array]"]=ea["[object ArrayBuffer]"]=ea["[object Boolean]"]=ea["[object Date]"]=ea["[object Float32Array]"]=ea["[object Float64Array]"]=
ea["[object Int8Array]"]=ea["[object Int16Array]"]=ea["[object Int32Array]"]=ea["[object Number]"]=ea["[object Object]"]=ea["[object RegExp]"]=ea["[object String]"]=ea["[object Uint8Array]"]=ea["[object Uint8ClampedArray]"]=ea["[object Uint16Array]"]=ea["[object Uint32Array]"]=!0;ea["[object Error]"]=ea["[object Function]"]=ea["[object Map]"]=ea["[object Set]"]=ea["[object WeakMap]"]=!1;var Hb={leading:!1,maxWait:0,trailing:!1},mb={"\u00c0":"A","\u00c1":"A","\u00c2":"A","\u00c3":"A","\u00c4":"A",
"\u00c5":"A","\u00e0":"a","\u00e1":"a","\u00e2":"a","\u00e3":"a","\u00e4":"a","\u00e5":"a","\u00c7":"C","\u00e7":"c","\u00d0":"D","\u00f0":"d","\u00c8":"E","\u00c9":"E","\u00ca":"E","\u00cb":"E","\u00e8":"e","\u00e9":"e","\u00ea":"e","\u00eb":"e","\u00cc":"I","\u00cd":"I","\u00ce":"I","\u00cf":"I","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u00ef":"i","\u00d1":"N","\u00f1":"n","\u00d2":"O","\u00d3":"O","\u00d4":"O","\u00d5":"O","\u00d6":"O","\u00d8":"O","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u00f5":"o",
"\u00f6":"o","\u00f8":"o","\u00d9":"U","\u00da":"U","\u00db":"U","\u00dc":"U","\u00f9":"u","\u00fa":"u","\u00fb":"u","\u00fc":"u","\u00dd":"Y","\u00fd":"y","\u00ff":"y","\u00c6":"Ae","\u00e6":"ae","\u00de":"Th","\u00fe":"th","\u00df":"ss"},Wa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Y={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Ha={"function":!0,object:!0},Pa={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},sa=Ha[typeof exports]&&
exports&&!exports.nodeType&&exports,la=Ha[typeof module]&&module&&!module.nodeType&&module,Qa=Ha[typeof self]&&self&&self.Object&&self,Ha=Ha[typeof window]&&window&&window.Object&&window,Ma=la&&la.exports===sa&&sa,Ba=sa&&la&&"object"==typeof global&&global&&global.Object&&global||Ha!==(this&&this.window)&&Ha||Qa||this,ca=v();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Ba._=ca,define(function(){return ca})):sa&&la?Ma?(la.exports=ca)._=ca:sa._=ca:Ba._=ca}).call(this);
(function(){var d=function(a,c){c=c||_.identity;return _.transform(a,function(a,b,d){c(b,d)&&(a[d]=b)},{})},a=d({omitBy:function(a,c){return d(a,_.negate(c))}},function(a,c){return!_.has(_,c)});_.mixin(a)})();_.mixin({eachCons:function(d,a,b){return _.zipWith.apply(null,_.times(a,function(b){return _.slice(d,b,d.length-a+b+1)}).concat(b))},flattenObject:function(d){return _.reduce(d,function(a,b,c){_.isPlainObject(b)?_.each(_.flattenObject(b),function(b,d){a[c+"."+d]=b}):a[c]=b;return a},{})}});
window.JSONStore={get_object:function(d){try{return JSON.parse(localStorage.getItem(d))}catch(a){return null}},set_object:function(d,a){localStorage.setItem(d,JSON.stringify(a))},delete:function(d){localStorage.removeItem(d)},modify_store:function(d,a){this.set_object(d,a(this.get_object(d)))}};var SESSION_END_TRACKING_DATA_KEY="session_end_tracking_events",Tracking=function(){this.enabled=!1;this.reset_counters()};
Tracking.arrange_arguments=function(d){return function(a,b,c){"function"===typeof b&&(c=b,b={});return d.call(this,a,b,c)}};Tracking.if_enabled=function(d){return function(){var a=arguments[arguments.length-1];return this.enabled?d.apply(this,arguments):("function"===typeof a&&a(),!1)}};
Tracking.prototype={start_tracking:function(){if("undefined"===typeof mixpanel||"undefined"===typeof mixpanel.register)return!1;this.enabled=!0;var d;"undefined"!==typeof CURRENT_TAG&&CURRENT_TAG&&(d=CURRENT_TAG.tag.slug);mixpanel.register({"Logged In":!!CURRENT_USER,"Is Editor":CURRENT_USER&&CURRENT_USER.is_editor,"Is Moderator":CURRENT_USER&&CURRENT_USER.is_moderator,"Mobile Site":MOBILE_DEVICE,Channel:CURRENT_CHANNEL,Tag:d});CURRENT_USER&&mixpanel.identify(CURRENT_USER.id);app.is_on_song_page&&
app.is_on_song_page()&&this.track("Song Page Load");0<$("body.act-new.cont-users").length&&(d=$.deparam(location.search.substring(1)).from_question_email)&&this.track("Question email signup clicked",{question_id:d});mixpanel.track_links(".android_interstitial-download","clicked_download_from_android_interstitial",{"from url":document.location.href})},reset_counters:function(){this.annotations_opened=0;this.line_item_opens={};this.song_page_loaded_from_direct_link_to_un_annotated_line=!1;this.annotation_id_opened_from_permalink=
null},build_event_data:function(d,a){a=a||{};var b,c=-1<"Annotation Browser Navigation;play_song_media;opened_what_is_genius_dropdown;Song Page Open Edit Form;Scroll Depth;Tap Annotation Teaser;Mobile - Toggle Question View;Question email question clicked;Question email signup clicked;Metadata Edit;Page Session End;Recirculated Content;View Branded Annotation Teaser;View Branded Annotation;Tap Branded Annotation Teaser;Tap Branded Annotation Callout;Contribution Opportunity Action".split(";").indexOf(d);
a.properties?b=a.properties:c?b=a:"Song Page Load"===d?b={"Un-annotated direct link":!!this.song_page_loaded_from_direct_link_to_un_annotated_line,"Un-annotated line":this.song_page_loaded_from_direct_link_to_un_annotated_line}:"Wrapped Web Page Load"===d||"Annotated Web Page Load"===d?b={"Source location":a.source_location,script_source:a.script_source,script_source_version:a.script_source_version,"Host Page Referrer":a.referrer}:"Open Annotation"===d||"Engaged Annotation View"===d?(this.annotations_opened++,
b={"Annotation ID":a.annotation_id,"Annotator Login":a.annotator_login,"Annotatable Type":a.annotatable_type,script_source:a.script_source,script_source_version:a.script_source_version},a.skip_counters||$.extend(b,{"Cumulative Annos Opened":this.annotations_opened,"Anno Opened from Permalink":a.annotation_id===this.annotation_id_opened_from_permalink,"First Anno was Permalink":!!this.annotation_id_opened_from_permalink})):"Offsite Filter Selection"===d?b={"Filter Type":a.filter_type,"Filter Arguments":a.filter_args,
"Filter Reason":a.reason,script_source:a.script_source,script_source_version:a.script_source_version}:"Inbox Open"===d?b={"Inbox Name":a.inbox_name,"Unread Count When Opened":a.unread_count}:"Line Item Open"===d&&("undefined"==typeof this.line_item_opens[a.inbox_name]&&(this.line_item_opens[a.inbox_name]=0),b={"Inbox Name":a.inbox_name,"Line Item Index":a.index,"Action Name":a.action_name,"Target Type":a.target_type,"Viewing Context":a.viewing_context,"Cumulative Line Items Opened":this.line_item_opens[a.inbox_name]++,
"Line Item Strategy":a.strategy_name,Bagon:!!a.bagon,iframe:!!a.iframe});return $.extend({},TRACKING_DATA,_.flattenObject(b),{genius_platform:"web",dfp_enabled:"googletag"in window})},track:Tracking.arrange_arguments(Tracking.if_enabled(function(d,a,b){mixpanel.track(d,this.build_event_data(d,a),b)})),track_with_delayed_handling:Tracking.arrange_arguments(Tracking.if_enabled(function(d,a,b){bowser.mobile||bowser.tablet?JSONStore.modify_store(SESSION_END_TRACKING_DATA_KEY,function(b){b=b||[];return b.concat({event_name:d,
event_options:this.build_event_data(d,a),event_occurred_at:Date.now()})}.bind(this)):this.track(d,a,b)})),track_with_timeout:Tracking.arrange_arguments(Tracking.if_enabled(function(d,a,b){var c=this.fetch_mixpanel_config("track_links_timeout",0);b=_.once(b);setTimeout(b,c);this.track(d,a,b)})),track_link_click:function(d){var a=$(d.target).closest("a"),b=a.attr("href"),a=2===d.which||d.metaKey||d.ctrlKey||"_blank"===a.attr("target"),c=Array.prototype.slice.call(arguments,1);if(a)return this.track.apply(this,
c);d.preventDefault();var l="function"===typeof c[c.length-1]?c.pop():null;return this.track_with_timeout.apply(this,c.concat(function(){l&&l();window.location.href=b}))},set_annotation_opened_from_permalink:function(d){this.annotation_id_opened_from_permalink=d},set_song_page_loaded_from_direct_link_to_un_annotated_line:function(d){this.song_page_loaded_from_direct_link_to_un_annotated_line=d},fetch_mixpanel_config:function(d,a){return this.enabled&&"function"==typeof mixpanel.get_config?mixpanel.get_config(d):
a}};$.extend(window.app,{tracking:new Tracking});
$(function(){$(document.body).on("annotation:open","a[data-id]",function(){app.tracking.track("Open Annotation",{annotation_id:$(this).attr("data-id")})});$(document).on("click",".show_help:not(.pressed)",function(){app.tracking.track("opened_what_is_genius_dropdown",{standalone_annotation:0<$(this).closest(".stand_alone_annotation_container").length})});JSONStore.modify_store(SESSION_END_TRACKING_DATA_KEY,function(d){_.each(d,function(a){Date.now()-a.event_occurred_at<1E3*APP_CONFIG.mixpanel_delayed_events_timeout&&
mixpanel.track(a.event_name,a.event_options)});return[]})});
(function(){function d(a,b){b=b||"";"string"!==typeof a&&(a.global&&0>b.indexOf("g")&&(b+="g"),a.ignoreCase&&0>b.indexOf("i")&&(b+="i"),a.multiline&&0>b.indexOf("m")&&(b+="m"),a=a.source);return new RegExp(a.replace(/#\{(\w+)\}/g,function(a,b){var c=g.txt.regexen[b]||"";"string"!==typeof c&&(c=c.source);return c}),b)}function a(a,b){return a.replace(/#\{(\w+)\}/g,function(a,c){return b[c]||""})}function b(a,b,c){var d=String.fromCharCode(b);c!==b&&(d+="-"+String.fromCharCode(c));a.push(d);return a}
function c(a){var b={},c;for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function l(a,b,c){return c?!a||a.match(b)&&RegExp["$&"]===a:"string"===typeof a&&a.match(b)&&RegExp["$&"]===a}if("undefined"===typeof g||null===g)var g={};g.txt={};g.txt.regexen={};var k={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"};g.txt.htmlEscape=function(a){return a&&a.replace(/[&"'><]/g,function(a){return k[a]})};g.txt.regexSupplant=d;g.txt.stringSupplant=a;g.txt.addCharsToCharClass=b;var e=String.fromCharCode,
f=[e(32),e(133),e(160),e(5760),e(6158),e(8232),e(8233),e(8239),e(8287),e(12288)];b(f,9,13);b(f,8192,8202);var m=[e(65534),e(65279),e(65535)];b(m,8234,8238);g.txt.regexen.spaces_group=d(f.join(""));g.txt.regexen.spaces=d("["+f.join("")+"]");g.txt.regexen.invalid_chars_group=d(m.join(""));g.txt.regexen.punct=/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$/;g.txt.regexen.rtl_chars=/[\u0600-\u06FF]|[\u0750-\u077F]|[\u0590-\u05FF]|[\uFE70-\uFEFF]/mg;g.txt.regexen.non_bmp_code_pairs=/[\uD800-\uDBFF][\uDC00-\uDFFF]/mg;
f=[];b(f,192,214);b(f,216,246);b(f,248,255);b(f,256,591);b(f,595,596);b(f,598,599);b(f,601,601);b(f,603,603);b(f,611,611);b(f,616,616);b(f,623,623);b(f,626,626);b(f,649,649);b(f,651,651);b(f,699,699);b(f,768,879);b(f,7680,7935);g.txt.regexen.latinAccentChars=d(f.join(""));g.txt.regexen.hashSigns=/[#\uff03]/;g.txt.regexen.hashtagAlpha=/[A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u3006\u3031-\u3035\u303b\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6e5\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0c00-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d01-\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f\u109a-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u192b\u1930-\u193b\u19b0-\u19c0\u19c8\u19c9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f\u1ab0-\u1abe\u1b00-\u1b04\u1b34-\u1b44\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1be6-\u1bf3\u1c24-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1cf8\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u20d0-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9e5\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2d]/;
g.txt.regexen.hashtagAlphaNumeric=/[A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u3006\u3031-\u3035\u303b\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6e5\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0c00-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d01-\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f\u109a-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u192b\u1930-\u193b\u19b0-\u19c0\u19c8\u19c9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f\u1ab0-\u1abe\u1b00-\u1b04\u1b34-\u1b44\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1be6-\u1bf3\u1c24-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1cf8\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u20d0-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9e5\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2d0-9\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0de6-\u0def\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u1090-\u1099\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\ua620-\ua629\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\ua9f0-\ua9f9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19_\u200c\u200d\ua67e\u05be\u05f3\u05f4\u309b\u309c\u30a0\u30fb\u3003\u0f0b\u0f0c\u0f0d]/;
g.txt.regexen.endHashtagMatch=d(/^(?:#{hashSigns}|:\/\/)/);g.txt.regexen.hashtagBoundary=/(?:^|$|[^&A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u3006\u3031-\u3035\u303b\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6e5\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0c00-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d01-\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f\u109a-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u192b\u1930-\u193b\u19b0-\u19c0\u19c8\u19c9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f\u1ab0-\u1abe\u1b00-\u1b04\u1b34-\u1b44\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1be6-\u1bf3\u1c24-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1cf8\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u20d0-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9e5\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2d0-9\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0de6-\u0def\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u1090-\u1099\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\ua620-\ua629\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\ua9f0-\ua9f9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19_\u200c\u200d\ua67e\u05be\u05f3\u05f4\u309b\u309c\u30a0\u30fb\u3003\u0f0b\u0f0c\u0f0d])/;
g.txt.regexen.validHashtag=d(/(#{hashtagBoundary})(#{hashSigns})(#{hashtagAlphaNumeric}*#{hashtagAlpha}#{hashtagAlphaNumeric}*)/gi);g.txt.regexen.validMentionPrecedingChars=/(?:^|[^a-zA-Z0-9_!#$%&*@\uff20]|(?:rt|RT|rT|Rt):?)/;g.txt.regexen.atSigns=/[@\uff20]/;g.txt.regexen.validMentionOrList=d("(#{validMentionPrecedingChars})(#{atSigns})([a-zA-Z0-9_]{1,20})(/[a-zA-Z][a-zA-Z0-9_-]{0,24})?","g");g.txt.regexen.validReply=d(/^(?:#{spaces})*#{atSigns}([a-zA-Z0-9_]{1,20})/);g.txt.regexen.endMentionMatch=
d(/^(?:#{atSigns}|[#{latinAccentChars}]|:\/\/)/);g.txt.regexen.validUrlPrecedingChars=d(/(?:[^A-Za-z0-9@\uff20$#\uff03#{invalid_chars_group}]|^)/);g.txt.regexen.invalidUrlWithoutProtocolPrecedingChars=/[-_.\/]$/;g.txt.regexen.invalidDomainChars=a("#{punct}#{spaces_group}#{invalid_chars_group}",g.txt.regexen);g.txt.regexen.validDomainChars=d(/[^#{invalidDomainChars}]/);g.txt.regexen.validSubdomain=d(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/);g.txt.regexen.validDomainName=
d(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/);g.txt.regexen.validGTLD=d(/(?:(?:abogado|academy|accountants|active|actor|adult|aero|agency|airforce|allfinanz|alsace|android|aquarelle|archi|army|arpa|asia|associates|attorney|auction|audio|autos|axa|band|bar|bargains|bayern|beer|berlin|best|bid|bike|bio|biz|black|blackfriday|bloomberg|blue|bmw|bnpparibas|boo|boutique|brussels|budapest|build|builders|business|buzz|bzh|cab|cal|camera|camp|cancerresearch|capetown|capital|caravan|cards|care|career|careers|cartier|casa|cash|cat|catering|center|ceo|cern|channel|cheap|christmas|chrome|church|citic|city|claims|cleaning|click|clinic|clothing|club|coach|codes|coffee|college|cologne|com|community|company|computer|condos|construction|consulting|contractors|cooking|cool|coop|country|credit|creditcard|cricket|crs|cruises|cuisinella|cymru|dad|dance|dating|day|deals|degree|delivery|democrat|dental|dentist|desi|diamonds|diet|digital|direct|directory|discount|dnp|domains|durban|dvag|eat|edu|education|email|emerck|energy|engineer|engineering|enterprises|equipment|esq|estate|eurovision|eus|events|everbank|exchange|expert|exposed|fail|farm|fashion|feedback|finance|financial|firmdale|fish|fishing|fitness|flights|florist|flsmidth|fly|foo|forsale|foundation|frl|frogans|fund|furniture|futbol|gal|gallery|gbiz|gent|gift|gifts|gives|glass|gle|global|globo|gmail|gmo|gmx|google|gop|gov|graphics|gratis|green|gripe|guide|guitars|guru|hamburg|haus|healthcare|help|here|hiphop|hiv|holdings|holiday|homes|horse|host|hosting|house|how|ibm|immo|immobilien|industries|info|ing|ink|institute|insure|int|international|investments|irish|jetzt|jobs|joburg|juegos|kaufen|kim|kitchen|kiwi|koeln|krd|kred|lacaixa|land|latrobe|lawyer|lds|lease|legal|lgbt|life|lighting|limited|limo|link|loans|london|lotto|ltda|luxe|luxury|madrid|maison|management|mango|market|marketing|media|meet|melbourne|meme|memorial|menu|miami|mil|mini|mobi|moda|moe|monash|money|mormon|mortgage|moscow|motorcycles|mov|museum|nagoya|name|navy|net|network|neustar|new|nexus|ngo|nhk|ninja|nra|nrw|nyc|okinawa|ong|onl|ooo|org|organic|otsuka|ovh|paris|partners|parts|party|pharmacy|photo|photography|photos|physio|pics|pictures|pink|pizza|place|plumbing|pohl|poker|porn|post|praxi|press|pro|prod|productions|prof|properties|property|pub|qpon|quebec|realtor|recipes|red|rehab|reise|reisen|reit|ren|rentals|repair|report|republican|rest|restaurant|reviews|rich|rio|rip|rocks|rodeo|rsvp|ruhr|ryukyu|saarland|samsung|sarl|sca|scb|schmidt|schule|science|scot|services|sexy|shiksha|shoes|singles|social|software|sohu|solar|solutions|soy|space|spiegel|supplies|supply|support|surf|surgery|suzuki|sydney|systems|taipei|tatar|tattoo|tax|technology|tel|tienda|tips|tirol|today|tokyo|tools|top|town|toys|trade|training|travel|trust|tui|university|uno|uol|vacations|vegas|ventures|verm\u00f6gensberater|verm\u00f6gensberatung|versicherung|vet|viajes|villas|vision|vlaanderen|vodka|vote|voting|voto|voyage|wales|wang|watch|webcam|website|wed|wedding|whoswho|wien|wiki|williamhill|wme|work|works|world|wtc|wtf|xxx|xyz|yachts|yandex|yoga|yokohama|youtube|zip|zone|\u0434\u0435\u0442\u0438|\u043c\u043e\u0441\u043a\u0432\u0430|\u043e\u043d\u043b\u0430\u0439\u043d|\u043e\u0440\u0433|\u0440\u0443\u0441|\u0441\u0430\u0439\u0442|\u0628\u0627\u0632\u0627\u0631|\u0634\u0628\u0643\u0629|\u0645\u0648\u0642\u0639|\u0938\u0902\u0917\u0920\u0928|\u307f\u3093\u306a|\u30b0\u30fc\u30b0\u30eb|\u4e16\u754c|\u4e2d\u4fe1|\u4e2d\u6587\u7f51|\u4f01\u4e1a|\u4f5b\u5c71|\u516b\u5366|\u516c\u53f8|\u516c\u76ca|\u5546\u57ce|\u5546\u5e97|\u5546\u6807|\u5728\u7ebf|\u5e7f\u4e1c|\u6211\u7231\u4f60|\u624b\u673a|\u653f\u52a1|\u673a\u6784|\u6e38\u620f|\u79fb\u52a8|\u7ec4\u7ec7\u673a\u6784|\u7f51\u5740|\u7f51\u5e97|\u7f51\u7edc|\u8c37\u6b4c|\u96c6\u56e2|\uc0bc\uc131|onion)(?=[^0-9a-zA-Z@]|$))/);
g.txt.regexen.validCCTLD=d(/(?:(?:ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bl|bm|bn|bo|bq|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mf|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|\u0431\u0435\u043b|\u043c\u043a\u0434|\u043c\u043e\u043d|\u0440\u0444|\u0441\u0440\u0431|\u0443\u043a\u0440|\u049b\u0430\u0437|\u0570\u0561\u0575|\u0627\u0644\u0627\u0631\u062f\u0646|\u0627\u0644\u062c\u0632\u0627\u0626\u0631|\u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629|\u0627\u0644\u0645\u063a\u0631\u0628|\u0627\u0645\u0627\u0631\u0627\u062a|\u0627\u06cc\u0631\u0627\u0646|\u0628\u06be\u0627\u0631\u062a|\u062a\u0648\u0646\u0633|\u0633\u0648\u062f\u0627\u0646|\u0633\u0648\u0631\u064a\u0629|\u0639\u0631\u0627\u0642|\u0639\u0645\u0627\u0646|\u0641\u0644\u0633\u0637\u064a\u0646|\u0642\u0637\u0631|\u0645\u0635\u0631|\u0645\u0644\u064a\u0633\u064a\u0627|\u067e\u0627\u06a9\u0633\u062a\u0627\u0646|\u092d\u093e\u0930\u0924|\u09ac\u09be\u0982\u09b2\u09be|\u09ad\u09be\u09b0\u09a4|\u0a2d\u0a3e\u0a30\u0a24|\u0aad\u0abe\u0ab0\u0aa4|\u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe|\u0b87\u0bb2\u0b99\u0bcd\u0b95\u0bc8|\u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd|\u0c2d\u0c3e\u0c30\u0c24\u0c4d|\u0dbd\u0d82\u0d9a\u0dcf|\u0e44\u0e17\u0e22|\u10d2\u10d4|\u4e2d\u56fd|\u4e2d\u570b|\u53f0\u6e7e|\u53f0\u7063|\u65b0\u52a0\u5761|\u9999\u6e2f|\ud55c\uad6d)(?=[^0-9a-zA-Z@]|$))/);
g.txt.regexen.validPunycode=d(/(?:xn--[0-9a-z]+)/);g.txt.regexen.validSpecialCCTLD=d(/(?:(?:co|tv)(?=[^0-9a-zA-Z@]|$))/);g.txt.regexen.validDomain=d(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/);g.txt.regexen.validAsciiDomain=d(/(?:(?:[\-a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi);g.txt.regexen.invalidShortDomain=d(/^#{validDomainName}#{validCCTLD}$/i);g.txt.regexen.validSpecialShortDomain=d(/^#{validDomainName}#{validSpecialCCTLD}$/i);
g.txt.regexen.validPortNumber=d(/[0-9]+/);g.txt.regexen.validGeneralUrlPathChars=d(/[a-z0-9!\*';:=\+,\.\$\/%#\[\]\-_~@|&#{latinAccentChars}]/i);g.txt.regexen.validUrlBalancedParens=d("\\((?:#{validGeneralUrlPathChars}+|(?:#{validGeneralUrlPathChars}*\\(#{validGeneralUrlPathChars}+\\)#{validGeneralUrlPathChars}*))\\)","i");g.txt.regexen.validUrlPathEndingChars=d(/[\+\-a-z0-9=_#\/#{latinAccentChars}]|(?:#{validUrlBalancedParens})/i);g.txt.regexen.validUrlPath=d("(?:(?:#{validGeneralUrlPathChars}*(?:#{validUrlBalancedParens}#{validGeneralUrlPathChars}*)*#{validUrlPathEndingChars})|(?:@#{validGeneralUrlPathChars}+/))",
"i");g.txt.regexen.validUrlQueryChars=/[a-z0-9!?\*'@\(\);:&=\+\$\/%#\[\]\-_\.,~|]/i;g.txt.regexen.validUrlQueryEndingChars=/[a-z0-9_&=#\/]/i;g.txt.regexen.extractUrl=d("((#{validUrlPrecedingChars})((https?:\\/\\/)?(#{validDomain})(?::(#{validPortNumber}))?(\\/#{validUrlPath}*)?(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?))","gi");g.txt.regexen.validTcoUrl=/^https?:\/\/t\.co\/[a-z0-9]+/i;g.txt.regexen.urlHasProtocol=/^https?:\/\//i;g.txt.regexen.urlHasHttps=/^https:\/\//i;g.txt.regexen.cashtag=
/[a-z]{1,6}(?:[._][a-z]{1,2})?/i;g.txt.regexen.validCashtag=d("(^|#{spaces})(\\$)(#{cashtag})(?=$|\\s|[#{punct}])","gi");g.txt.regexen.validateUrlUnreserved=/[a-z0-9\-._~]/i;g.txt.regexen.validateUrlPctEncoded=/(?:%[0-9a-f]{2})/i;g.txt.regexen.validateUrlSubDelims=/[!$&'()*+,;=]/i;g.txt.regexen.validateUrlPchar=d("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|[:|@])","i");g.txt.regexen.validateUrlScheme=/(?:[a-z][a-z0-9+\-.]*)/i;g.txt.regexen.validateUrlUserinfo=d("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|:)*",
"i");g.txt.regexen.validateUrlDecOctet=/(?:[0-9]|(?:[1-9][0-9])|(?:1[0-9]{2})|(?:2[0-4][0-9])|(?:25[0-5]))/i;g.txt.regexen.validateUrlIpv4=d(/(?:#{validateUrlDecOctet}(?:\.#{validateUrlDecOctet}){3})/i);g.txt.regexen.validateUrlIpv6=/(?:\[[a-f0-9:\.]+\])/i;g.txt.regexen.validateUrlIp=d("(?:#{validateUrlIpv4}|#{validateUrlIpv6})","i");g.txt.regexen.validateUrlSubDomainSegment=/(?:[a-z0-9](?:[a-z0-9_\-]*[a-z0-9])?)/i;g.txt.regexen.validateUrlDomainSegment=/(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)/i;g.txt.regexen.validateUrlDomainTld=
/(?:[a-z](?:[a-z0-9\-]*[a-z0-9])?)/i;g.txt.regexen.validateUrlDomain=d(/(?:(?:#{validateUrlSubDomainSegment]}\.)*(?:#{validateUrlDomainSegment]}\.)#{validateUrlDomainTld})/i);g.txt.regexen.validateUrlHost=d("(?:#{validateUrlIp}|#{validateUrlDomain})","i");g.txt.regexen.validateUrlUnicodeSubDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9_\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;g.txt.regexen.validateUrlUnicodeDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;
g.txt.regexen.validateUrlUnicodeDomainTld=/(?:(?:[a-z]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;g.txt.regexen.validateUrlUnicodeDomain=d(/(?:(?:#{validateUrlUnicodeSubDomainSegment}\.)*(?:#{validateUrlUnicodeDomainSegment}\.)#{validateUrlUnicodeDomainTld})/i);g.txt.regexen.validateUrlUnicodeHost=d("(?:#{validateUrlIp}|#{validateUrlUnicodeDomain})","i");g.txt.regexen.validateUrlPort=/[0-9]{1,5}/;g.txt.regexen.validateUrlUnicodeAuthority=d("(?:(#{validateUrlUserinfo})@)?(#{validateUrlUnicodeHost})(?::(#{validateUrlPort}))?",
"i");g.txt.regexen.validateUrlAuthority=d("(?:(#{validateUrlUserinfo})@)?(#{validateUrlHost})(?::(#{validateUrlPort}))?","i");g.txt.regexen.validateUrlPath=d(/(\/#{validateUrlPchar}*)*/i);g.txt.regexen.validateUrlQuery=d(/(#{validateUrlPchar}|\/|\?)*/i);g.txt.regexen.validateUrlFragment=d(/(#{validateUrlPchar}|\/|\?)*/i);g.txt.regexen.validateUrlUnencoded=d("^(?:([^:/?#]+):\\/\\/)?([^/?#]*)([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$","i");var h={urlClass:!0,listClass:!0,usernameClass:!0,hashtagClass:!0,cashtagClass:!0,
usernameUrlBase:!0,listUrlBase:!0,hashtagUrlBase:!0,cashtagUrlBase:!0,usernameUrlBlock:!0,listUrlBlock:!0,hashtagUrlBlock:!0,linkUrlBlock:!0,usernameIncludeSymbol:!0,suppressLists:!0,suppressNoFollow:!0,targetBlank:!0,suppressDataScreenName:!0,urlEntities:!0,symbolTag:!0,textWithSymbolTag:!0,urlTarget:!0,invisibleTagAttrs:!0,linkAttributeBlock:!0,linkTextBlock:!0,htmlEscapeNonEntities:!0},n={disabled:!0,readonly:!0,multiple:!0,checked:!0};g.txt.tagAttrs=function(a){var b="",c;for(c in a){var d=a[c];
n[c]&&(d=d?c:null);null!=d&&(b+=" "+g.txt.htmlEscape(c)+'="'+g.txt.htmlEscape(d.toString())+'"')}return b};g.txt.linkToText=function(b,c,d,e){e.suppressNoFollow||(d.rel="nofollow");e.linkAttributeBlock&&e.linkAttributeBlock(b,d);e.linkTextBlock&&(c=e.linkTextBlock(b,c));b={text:c,attr:g.txt.tagAttrs(d)};return a("<a#{attr}>#{text}</a>",b)};g.txt.linkToTextWithSymbol=function(a,b,c,d,e){var f=e.symbolTag?"<"+e.symbolTag+">"+b+"</"+e.symbolTag+">":b;c=g.txt.htmlEscape(c);c=e.textWithSymbolTag?"<"+e.textWithSymbolTag+
">"+c+"</"+e.textWithSymbolTag+">":c;return e.usernameIncludeSymbol||!b.match(g.txt.regexen.atSigns)?g.txt.linkToText(a,f+c,d,e):f+g.txt.linkToText(a,c,d,e)};g.txt.linkToHashtag=function(a,b,d){b=b.substring(a.indices[0],a.indices[0]+1);var e=g.txt.htmlEscape(a.hashtag),f=c(d.htmlAttrs||{});f.href=d.hashtagUrlBase+e;f.title="#"+e;f["class"]=d.hashtagClass;e.charAt(0).match(g.txt.regexen.rtl_chars)&&(f["class"]+=" rtl");d.targetBlank&&(f.target="_blank");return g.txt.linkToTextWithSymbol(a,b,e,f,d)};
g.txt.linkToCashtag=function(a,b,d){b=g.txt.htmlEscape(a.cashtag);var e=c(d.htmlAttrs||{});e.href=d.cashtagUrlBase+b;e.title="$"+b;e["class"]=d.cashtagClass;d.targetBlank&&(e.target="_blank");return g.txt.linkToTextWithSymbol(a,"$",b,e,d)};g.txt.linkToMentionAndList=function(a,b,d){b=b.substring(a.indices[0],a.indices[0]+1);var e=g.txt.htmlEscape(a.screenName),f=g.txt.htmlEscape(a.listSlug),h=a.listSlug&&!d.suppressLists,m=c(d.htmlAttrs||{});m["class"]=h?d.listClass:d.usernameClass;m.href=h?d.listUrlBase+
e+f:d.usernameUrlBase+e;h||d.suppressDataScreenName||(m["data-screen-name"]=e);d.targetBlank&&(m.target="_blank");return g.txt.linkToTextWithSymbol(a,b,h?e+f:e,m,d)};g.txt.linkToUrl=function(a,b,d){b=a.url;var e=g.txt.htmlEscape(b),f=d.urlEntities&&d.urlEntities[b]||a;f.display_url&&(e=g.txt.linkTextWithEntity(f,d));var h=c(d.htmlAttrs||{});b.match(g.txt.regexen.urlHasProtocol)||(b="http://"+b);h.href=b;d.targetBlank&&(h.target="_blank");d.urlClass&&(h["class"]=d.urlClass);d.urlTarget&&(h.target=
d.urlTarget);!d.title&&f.display_url&&(h.title=f.expanded_url);return g.txt.linkToText(a,e,h,d)};g.txt.linkTextWithEntity=function(b,c){var d=b.display_url,e=b.expanded_url,f=d.replace(/\u2026/g,"");if(-1!=e.indexOf(f)){var h=e.indexOf(f),d={displayUrlSansEllipses:f,beforeDisplayUrl:e.substr(0,h),afterDisplayUrl:e.substr(h+f.length),precedingEllipsis:d.match(/^\u2026/)?"\u2026":"",followingEllipsis:d.match(/\u2026$/)?"\u2026":""},m;for(m in d)d.hasOwnProperty(m)&&(d[m]=g.txt.htmlEscape(d[m]));d.invisible=
c.invisibleTagAttrs;return a("<span class='tco-ellipsis'>#{precedingEllipsis}<span #{invisible}>&nbsp;</span></span><span #{invisible}>#{beforeDisplayUrl}</span><span class='js-display-url'>#{displayUrlSansEllipses}</span><span #{invisible}>#{afterDisplayUrl}</span><span class='tco-ellipsis'><span #{invisible}>&nbsp;</span>#{followingEllipsis}</span>",d)}return d};g.txt.autoLinkEntities=function(a,b,d){d=c(d||{});d.hashtagClass=d.hashtagClass||"tweet-url hashtag";d.hashtagUrlBase=d.hashtagUrlBase||
"https://twitter.com/#!/search?q=%23";d.cashtagClass=d.cashtagClass||"tweet-url cashtag";d.cashtagUrlBase=d.cashtagUrlBase||"https://twitter.com/#!/search?q=%24";d.listClass=d.listClass||"tweet-url list-slug";d.usernameClass=d.usernameClass||"tweet-url username";d.usernameUrlBase=d.usernameUrlBase||"https://twitter.com/";d.listUrlBase=d.listUrlBase||"https://twitter.com/";d.htmlAttrs=g.txt.extractHtmlAttrsFromOptions(d);d.invisibleTagAttrs=d.invisibleTagAttrs||"style='position:absolute;left:-9999px;'";
var e,f,h;if(d.urlEntities){e={};f=0;for(h=d.urlEntities.length;f<h;f++)e[d.urlEntities[f].url]=d.urlEntities[f];d.urlEntities=e}e="";h=0;b.sort(function(a,b){return a.indices[0]-b.indices[0]});var m=d.htmlEscapeNonEntities?g.txt.htmlEscape:function(a){return a};for(f=0;f<b.length;f++){var k=b[f];e+=m(a.substring(h,k.indices[0]));k.url?e+=g.txt.linkToUrl(k,a,d):k.hashtag?e+=g.txt.linkToHashtag(k,a,d):k.screenName?e+=g.txt.linkToMentionAndList(k,a,d):k.cashtag&&(e+=g.txt.linkToCashtag(k,a,d));h=k.indices[1]}return e+=
m(a.substring(h,a.length))};g.txt.autoLinkWithJSON=function(a,b,c){if(b.user_mentions)for(var d=0;d<b.user_mentions.length;d++)b.user_mentions[d].screenName=b.user_mentions[d].screen_name;if(b.hashtags)for(d=0;d<b.hashtags.length;d++)b.hashtags[d].hashtag=b.hashtags[d].text;if(b.symbols)for(d=0;d<b.symbols.length;d++)b.symbols[d].cashtag=b.symbols[d].text;var d=[],e;for(e in b)d=d.concat(b[e]);g.txt.modifyIndicesFromUnicodeToUTF16(a,d);return g.txt.autoLinkEntities(a,d,c)};g.txt.extractHtmlAttrsFromOptions=
function(a){var b={},c;for(c in a){var d=a[c];h[c]||(n[c]&&(d=d?c:null),null!=d&&(b[c]=d))}return b};g.txt.autoLink=function(a,b){var c=g.txt.extractEntitiesWithIndices(a,{extractUrlsWithoutProtocol:!1});return g.txt.autoLinkEntities(a,c,b)};g.txt.autoLinkUsernamesOrLists=function(a,b){var c=g.txt.extractMentionsOrListsWithIndices(a);return g.txt.autoLinkEntities(a,c,b)};g.txt.autoLinkHashtags=function(a,b){var c=g.txt.extractHashtagsWithIndices(a);return g.txt.autoLinkEntities(a,c,b)};g.txt.autoLinkCashtags=
function(a,b){var c=g.txt.extractCashtagsWithIndices(a);return g.txt.autoLinkEntities(a,c,b)};g.txt.autoLinkUrlsCustom=function(a,b){var c=g.txt.extractUrlsWithIndices(a,{extractUrlsWithoutProtocol:!1});return g.txt.autoLinkEntities(a,c,b)};g.txt.removeOverlappingEntities=function(a){a.sort(function(a,b){return a.indices[0]-b.indices[0]});for(var b=a[0],c=1;c<a.length;c++)b.indices[1]>a[c].indices[0]?(a.splice(c,1),c--):b=a[c]};g.txt.extractEntitiesWithIndices=function(a,b){var c=g.txt.extractUrlsWithIndices(a,
b).concat(g.txt.extractMentionsOrListsWithIndices(a)).concat(g.txt.extractHashtagsWithIndices(a,{checkUrlOverlap:!1})).concat(g.txt.extractCashtagsWithIndices(a));if(0==c.length)return[];g.txt.removeOverlappingEntities(c);return c};g.txt.extractMentions=function(a){var b=[];a=g.txt.extractMentionsWithIndices(a);for(var c=0;c<a.length;c++)b.push(a[c].screenName);return b};g.txt.extractMentionsWithIndices=function(a){for(var b=[],c=g.txt.extractMentionsOrListsWithIndices(a),d=0;d<c.length;d++)a=c[d],
""==a.listSlug&&b.push({screenName:a.screenName,indices:a.indices});return b};g.txt.extractMentionsOrListsWithIndices=function(a){if(!a||!a.match(g.txt.regexen.atSigns))return[];var b=[];a.replace(g.txt.regexen.validMentionOrList,function(a,c,d,e,f,h,m){m.slice(h+a.length).match(g.txt.regexen.endMentionMatch)||(f=f||"",a=h+c.length,b.push({screenName:e,listSlug:f,indices:[a,a+e.length+f.length+1]}))});return b};g.txt.extractReplies=function(a){if(!a)return null;a=a.match(g.txt.regexen.validReply);
return!a||RegExp.rightContext.match(g.txt.regexen.endMentionMatch)?null:a[1]};g.txt.extractUrls=function(a,b){for(var c=[],d=g.txt.extractUrlsWithIndices(a,b),e=0;e<d.length;e++)c.push(d[e].url);return c};g.txt.extractUrlsWithIndices=function(a,b){b||(b={extractUrlsWithoutProtocol:!0});if(!a||(b.extractUrlsWithoutProtocol?!a.match(/\./):!a.match(/:/)))return[];for(var c=[];g.txt.regexen.extractUrl.exec(a);){var d=RegExp.$2,e=RegExp.$3,f=RegExp.$5,h=RegExp.$7,m=g.txt.regexen.extractUrl.lastIndex,k=
m-e.length;if(RegExp.$4)e.match(g.txt.regexen.validTcoUrl)&&(e=RegExp.lastMatch,m=k+e.length),c.push({url:e,indices:[k,m]});else if(b.extractUrlsWithoutProtocol&&!d.match(g.txt.regexen.invalidUrlWithoutProtocolPrecedingChars)){var n=null,l=0;f.replace(g.txt.regexen.validAsciiDomain,function(a){var b=f.indexOf(a,l);l=b+a.length;n={url:a,indices:[k+b,k+l]};(h||a.match(g.txt.regexen.validSpecialShortDomain)||!a.match(g.txt.regexen.invalidShortDomain))&&c.push(n)});null!=n&&h&&(n.url=e.replace(f,n.url),
n.indices[1]=m)}}return c};g.txt.extractHashtags=function(a){var b=[];a=g.txt.extractHashtagsWithIndices(a);for(var c=0;c<a.length;c++)b.push(a[c].hashtag);return b};g.txt.extractHashtagsWithIndices=function(a,b){b||(b={checkUrlOverlap:!0});if(!a||!a.match(g.txt.regexen.hashSigns))return[];var c=[];a.replace(g.txt.regexen.validHashtag,function(a,b,d,e,f,h){h.slice(f+a.length).match(g.txt.regexen.endHashtagMatch)||(a=f+b.length,c.push({hashtag:e,indices:[a,a+e.length+1]}))});if(b.checkUrlOverlap){var d=
g.txt.extractUrlsWithIndices(a);if(0<d.length){d=c.concat(d);g.txt.removeOverlappingEntities(d);for(var c=[],e=0;e<d.length;e++)d[e].hashtag&&c.push(d[e])}}return c};g.txt.extractCashtags=function(a){var b=[];a=g.txt.extractCashtagsWithIndices(a);for(var c=0;c<a.length;c++)b.push(a[c].cashtag);return b};g.txt.extractCashtagsWithIndices=function(a){if(!a||-1==a.indexOf("$"))return[];var b=[];a.replace(g.txt.regexen.validCashtag,function(a,c,d,e,f,h){a=f+c.length;b.push({cashtag:e,indices:[a,a+e.length+
1]})});return b};g.txt.modifyIndicesFromUnicodeToUTF16=function(a,b){g.txt.convertUnicodeIndices(a,b,!1)};g.txt.modifyIndicesFromUTF16ToUnicode=function(a,b){g.txt.convertUnicodeIndices(a,b,!0)};g.txt.getUnicodeTextLength=function(a){return a.replace(g.txt.regexen.non_bmp_code_pairs," ").length};g.txt.convertUnicodeIndices=function(a,b,c){if(0!=b.length){var d=0,e=0;b.sort(function(a,b){return a.indices[0]-b.indices[0]});for(var f=0,h=b[0];d<a.length;){if(h.indices[0]==(c?d:e)){var g=h.indices[1]-
h.indices[0];h.indices[0]=c?e:d;h.indices[1]=h.indices[0]+g;f++;if(f==b.length)break;h=b[f]}g=a.charCodeAt(d);55296<=g&&56319>=g&&d<a.length-1&&(g=a.charCodeAt(d+1),56320<=g&&57343>=g&&d++);e++;d++}}};g.txt.splitTags=function(a){a=a.split("<");for(var b,c=[],d=0;d<a.length;d+=1)if(b=a[d]){b=b.split(">");for(var e=0;e<b.length;e+=1)c.push(b[e])}else c.push("");return c};g.txt.hitHighlight=function(a,b,c){b=b||[];c=c||{};if(0===b.length)return a;c=c.tag||"em";c=["<"+c+">","</"+c+">"];a=g.txt.splitTags(a);
var d,e,f="",h=0,m=a[0],k=0,n=0,l=!1,q=m,r=[],t;for(d=0;d<b.length;d+=1)for(e=0;e<b[d].length;e+=1)r.push(b[d][e]);for(b=0;b<r.length;b+=1){e=r[b];d=c[b%2];for(t=!1;null!=m&&e>=k+m.length;)f+=q.slice(n),l&&e===k+q.length&&(f+=d,t=!0),a[h+1]&&(f+="<"+a[h+1]+">"),k+=q.length,n=0,h+=2,q=m=a[h],l=!1;t||null==m?t||(f+=d):(l=e-k,f+=q.slice(n,l)+d,n=l,l=0===b%2?!0:!1)}if(null!=m)for(n<q.length&&(f+=q.slice(n)),b=h+1;b<a.length;b+=1)f+=0===b%2?a[b]:"<"+a[b]+">";return f};var q=[e(65534),e(65279),e(65535),
e(8234),e(8235),e(8236),e(8237),e(8238)];g.txt.getTweetLength=function(a,b){b||(b={short_url_length:22,short_url_length_https:23});var c=g.txt.getUnicodeTextLength(a),d=g.txt.extractUrlsWithIndices(a);g.txt.modifyIndicesFromUTF16ToUnicode(a,d);for(var e=0;e<d.length;e++)c+=d[e].indices[0]-d[e].indices[1],c=d[e].url.toLowerCase().match(g.txt.regexen.urlHasHttps)?c+b.short_url_length_https:c+b.short_url_length;return c};g.txt.isInvalidTweet=function(a){return a?140<g.txt.getTweetLength(a)?"too_long":
g.txt.hasInvalidCharacters(a)?"invalid_characters":!1:"empty"};g.txt.hasInvalidCharacters=function(a){for(var b=0;b<q.length;b++)if(0<=a.indexOf(q[b]))return!0;return!1};g.txt.isValidTweetText=function(a){return!g.txt.isInvalidTweet(a)};g.txt.isValidUsername=function(a){if(!a)return!1;var b=g.txt.extractMentions(a);return 1===b.length&&b[0]===a.slice(1)};var r=d(/^#{validMentionOrList}$/);g.txt.isValidList=function(a){a=a.match(r);return!(!a||""!=a[1]||!a[4])};g.txt.isValidHashtag=function(a){if(!a)return!1;
var b=g.txt.extractHashtags(a);return 1===b.length&&b[0]===a.slice(1)};g.txt.isValidUrl=function(a,b,c){null==b&&(b=!0);null==c&&(c=!0);if(!a)return!1;var d=a.match(g.txt.regexen.validateUrlUnencoded);if(!d||d[0]!==a)return!1;a=d[1];var e=d[2],f=d[3],h=d[4],d=d[5];return(!c||l(a,g.txt.regexen.validateUrlScheme)&&a.match(/^https?$/i))&&l(f,g.txt.regexen.validateUrlPath)&&l(h,g.txt.regexen.validateUrlQuery,!0)&&l(d,g.txt.regexen.validateUrlFragment,!0)?b&&l(e,g.txt.regexen.validateUrlUnicodeAuthority)||
!b&&l(e,g.txt.regexen.validateUrlAuthority):!1};"undefined"!=typeof module&&module.exports&&(module.exports=g.txt);"function"==typeof define&&define.amd&&define([],g.txt);if("undefined"!=typeof window)if(window.twttr)for(var t in g)window.twttr[t]=g[t];else window.twttr=g})();
$(function(){$(document).ajaxError(function(d,a,b){if(!1!==b.alert_on_error&&0!==a.readyState)app.on_ajax_error(a,b)}).ajaxComplete(app.on_ajax_complete).ajaxSend(function(d,a,b){a.setRequestHeader("Accept","application/x-javascript, text/javascript, text/html, application/xml, text/xml, */*");d=app.get_csrf_token();b.skip_csrf||b.type.match(/^get$/i)||!d||a.setRequestHeader("X-CSRF-Token",d)})});
(function(){window["com.genius.Genius"].require.define({"shared/universal/annotation_filter":function(d,a,b){var c={all:function(){return function(){return!0}},featured:function(){return function(a){return a.featured}},annotator:function(a){return function(b){return b.annotator_login===a}}};d=function(a){this.filter_string=a;a=this.filter_args=a.split(":");var b=this.filter_type=a.shift();this.test=c[b].apply(null,a)};d.ALL=new d("all");b.exports=d}})})();window.app=window.app||{};
$.extend(window.app,{ajaxQueue:jQuery.manageAjax.create("queue",{queue:!0}),markdown_to_html:function(d,a,b){var c=function(a){var b=new Attacklab.showdown.converter;a=a.replace(/(?:^|\s+)https?:\/\/(?:[a-z0-9\-]+\.)+[a-z]{2,6}(?:\/[^\/#?]+)+\.(?:jpe?g|gif|png)(?=$|\s+)/igm,function(a){return"\n\n![]("+$.trim(a)+")"});a=b.makeHtml(a);return $("<div>").append(a).find("a").each(function(){var a=$(this);a.attr("href").match(/^\d+$/)&&a.attr("href","/"+a.attr("href"))}).end().html()};if(null==a)return c(d);
var l=a.attr("data-autolink-mentions")&&d.match(/@\S/);-1<d.indexOf("[[")||l||a.html(c(d));$.ajax_with_retry({url:"/utils/markdown_preview",type:"POST",data:{md:d,autolink_mentions:l},success:function(c){a.html(c);b=b||$.noop;b(a);app.setup_embedly()}});return a},get_csrf_token:function(){return $.cookie("_csrf_token")},setup_zeroclipboard:function(){var d;d="https://assets.genius.com/flash/ZeroClipboard.swf?1479924659".replace("https:",window.location.protocol);ZeroClipboard.config({swfPath:d});
$(document.body).on("click",".copy_to_clipboard",function(){return!1});$(document.body).on("click",".copy_content input, .embed_content input",function(){this.select()});var a=new ZeroClipboard;a.on("ready",function(){a.on("copy",function(a){a.clipboardData.setData("text/plain",$(a.target).attr("title"))});a.on("aftercopy",function(a){var c=$(a.target),d=c.text();c.text("Copied!").addClass("copied");setTimeout(function(){c.text(d).removeClass("copied")},500)})});$(document).on("mouseenter",".copy_to_clipboard.inactive",
function(){ZeroClipboard.focus(this);a.clip(this);$(this).removeClass("inactive")})},is_on_song_page:function(){return 0<$("body.act-show.cont-songs").length&&0<$(".lyrics").length},set_up_timeago:function(){var d=null,a=function(a){$(a||"body").find("[data-timeago]").each(function(){var a=$(this),b=a.data("timeago"),d=null;a.data("timeago-shortened")?(d=$.timeago.settings.strings,$.timeago.settings.strings={suffixAgo:"",seconds:"<1m",minute:"1m",minutes:"%dm",hour:"1h",hours:"%dh",day:"1d",days:"%dd",
month:"1 month",months:"%d months",year:"1 year",years:"%d years"},b=$.timeago(b),$.timeago.settings.strings=d,d=b):d=$.timeago(b).replace(/^about /,"");d!==a.text()&&a.text(d)})};return function(b){a(b);d||(d=setInterval(function(){a()},6E4))}}(),set_up_autogrow:function(){$(document).on("focus",".autogrow",function(){$(this).autosize({callback:function(){$(this).trigger("textarea:autogrown")}}).removeClass("autogrow")})},set_up_dirtyable_inputs:function(){$(document).on("focus","textarea:not([data-not-dirtyable])",
function(){$(this).dirtyable()})},delete_annotation:function(d){var a={_method:"delete"},b=$("#explain_as").attr("login");b&&(a.explain_as=b);app.ajaxQueue.add({type:"post",url:d,data:a})},set_up_disable_annotation_draft_status_button:function(){$(document).on("click",".disable_annotation_draft_status",function(){if(!confirm("Are you sure? This annotation will be publicly visible."))return!1;var d=$(this);$.post(d.attr("href"),{_method:"put"}).then(function(){d.prop("href","#").removeClass(".disable_annotation_draft_status").text("published!")});
return!1})},start_annotation_edit_mode:function(d,a){a||(a="");var b=d.closest(".annotation_container");d.hide().after($("#edit_annotation_form").html());b.addClass("editing_annotation");b=d.nextAll(".edit_annotation_form").addClass("editing_explanation");b.find("textarea").trigger("dirtyable:changed",!0);d.find(".edit_annotation").data("proposed_edit")&&(b.find(".submit_annotation").attr("data-proposed_edit",!0),b.find(".annotation_text_wrapper .edit_label").first().html("Propose an edit:"));""!==
$.trim(a)&&b.children(".edit_annotation_form-integration_notice").removeClass("hide");var c=$.trim(d.find(".markdown_version").val()+a);d.hasClass("description")&&"?"===c&&(c="");b.find(".annotation_text").focus().val(c).trigger("autosize.resize");app.set_up_vidyard_id_container(d);app.set_up_tooltip_lyric_editor();$("#explain_as").attr("login")&&$(".annotation_container").addClass("current_user_can_add_verified_to_this_song");return b},process_auto_load_containers:function(d){$(d||".auto_load_url:visible, .auto_load_url.load_if_not_visible").each(function(){var a=
$(this);$.ajax_with_retry({url:a.attr("data-url"),success:function(b){if(""==$.trim(b))return a.remove();a.html(b).removeClass("auto_load_url").trigger("auto_load_url:loaded");setTimeout(function(){app.activate_more_links(a)},250)}})})},activate_more_links:function(d){$(d||"body").find("a.more:visible:not(.loading, .no_auto_more a)").click()},angular_inject_get__deprecated:function(d){return angular.element(document.body).injector().get(d)}});
(function(){window["com.genius.Genius"].require.define({"shared/universal/flash":function(d,a,b){b.exports={read:function(){var a=$.cookie("flash");if(!a)return{};this.clear();return JSON.parse(a)},clear:function(){$.removeCookie("flash",{path:"/"})}}}})})();
$(function(){$(document).on("click",".toggle_target",function(d){$(this).toggle_target();d.stopImmediatePropagation();return!1});$(document).on("click",".click_to_select_all",function(){$(this).select()});$(document).on("click",".click_to_toggle_hidden_radio_button",function(){var d=$(this).find('input[type="radio"]');d.prop("checked",!d.is(":checked"));return!1});$(document).on("click",".custom_share[data-service='facebook']",function(){FB.ui({method:"share",href:$(this).attr("href")},function(){});
return!1});$(document).on("click","[data-focuses-form-field]",function(){$("[data-focusable-form-field="+$(this).data("focuses-form-field")+"]").focus()});$(document).on("click",".custom_share[data-service='twitter']:not(.tweet_composer, .auth)",function(d){d.stopImmediatePropagation();return!1});$(document).on("focus",".condensed textarea, .condensed input",function(){$(this).closest(".condensed").removeClass("condensed");$(this).trigger("genius:resized")});$(document).on("click",'form.validate input[type="submit"], form[data-validate] input[type="submit"]',
function(d){var a=$(this.form).validate();if(!a.form())return a.showErrors(),d.stopImmediatePropagation(),!1}).on("click","[data-disable-with]",function(d){var a=$(this);if(!a.attr("disabled")){var b=a.data("disable-with"),c=a.is("button")?"html":"val";a.data("value-before-disabled",a.data("value-before-disabled")||a[c]());a[c](b);a.attr("disabled",!0);a.attr("href","#");d.preventDefault();this.form&&(d=$(this.form),d.trigger("submit"),d.one("ajax:complete",function(){a[c](a.data("value-before-disabled"));
a.removeAttr("disabled")}))}});$(document).on("click","[data-method]",function(){var d=$(this),a=d.attr("target"),d=$("<form>",{method:"post",action:d.attr("href")}).append($("<input>",{name:"_method",value:d.attr("data-method"),type:"hidden"})).append($("<input>",{name:"authenticity_token",value:app.get_csrf_token(),type:"hidden"}));a&&d.attr("target",a);d.hide().appendTo("body").submit();return!1});$(".header-primary").on("click",".create_account:not(.pressed)",function(){$.cookie("desired_location",
window.location.href,{path:"/"});$.cookie("attempted_offsite_signup",!0,{path:"/",expires:1})});$(document).on("click",".edit_annotation",function(){if($(".edit_annotation_form:visible").length)return!1;app.start_annotation_edit_mode($(this).closest(".annotation_unit"));return!1});$(document).on("click",".report_annotation, .report_forum_post",function(){if(!confirm("Are you sure?"))return!1;var d=$(this);$.post(d.data("href")).done(function(){d.text("thanks, we\u2019ll notify the moderators").removeClass("report_annotation").removeClass("report_forum_post").removeAttr("href")});
return!1});$(document).on("click",".feature_annotation",function(){var d=$(this);$.post(d.attr("href")).done(function(){d.closest(".annotation_unit").trigger("annotation:featured");d.text("featured").addClass("unfeature_annotation").removeClass("feature_annotation");d.attr("href",d.attr("data-report-url"));setTimeout(function(){d.text("unfeature")},2E3)});return!1});$(document).on("click",".unfeature_annotation",function(){var d=$(this);$.post(d.attr("href")).done(function(){d.closest(".annotation_unit").trigger("annotation:unfeatured");
d.text("unfeatured").addClass("feature_annotation").removeClass("unfeature_annotation");d.attr("href",d.attr("data-feature-url"));setTimeout(function(){d.text("feature")},2E3)});return!1});$(document).on("click",".cancel_annotation",function(){var d=$(this),a=d.closest(".edit_annotation_form"),b=a.prev(".annotation_unit"),c=b.closest(".annotation_container"),d=d.closest(".qtip.explanation");d.length&&(d.qtip("api").beforeHide=function(){return!0},b.hasClass("un_edited")&&b.find(".delete_annotation").data("no-confirm",
!0).click());c.removeClass("editing_annotation");a.find("textarea").trigger("dirtyable:changed",!1);a.remove();b.hasClass("needs_exegesis")&&!b.hasClass("description")||b.show();d.length&&d.is(":visible")&&d.qtip("api").reposition();return!1});$(document).on("click",".submit_annotation",function(){var d=$(this),a=d.closest(".edit_annotation_form"),b=a.prev(".annotation_unit"),c=b.closest(".annotation_container"),l=b.attr("data-id"),g=c.attr("data-id"),k=!!b.closest(".stand_alone_annotation_container").length||
b.hasClass("description"),e=d.data("proposed_edit"),f=$.trim(a.find(".annotation_text").val()),m=$.trim(a.find(".video_id").val()),h=$.trim(a.find(".edit_annotation_note").val()),n=f||m||b.hasClass("video_processing");if(!n&&!b.hasClass("verified")&&!b.hasClass("description"))return!1;var l=d.attr("data-url")||"/annotations/"+l,q={_method:d.attr("data-method")||"put","annotation[body]":f};m&&(q["annotation[video_id]"]=m);h&&(q["annotation[edit_note]"]=h);if(m=$("#explain_as").attr("login"))q.explain_as=
m;(n||b.hasClass("description"))&&app.ajaxQueue.add({type:"post",url:l,data:q,success:function(a){k||app.update_editorial_state(g,a.editorial_state);a.user_can_clear_votes&&b.find(".footer .voting_links").addClass("user_can_clear_votes")}});b.find(".markdown_version").text(f);b.removeClass("being_created");b.hasClass("description")&&(f?b.removeClass("blank"):b.addClass("blank"),"?"===f?b.addClass("needs_exegesis"):b.removeClass("needs_exegesis"));if(0<a.find(".lyric_editor").length&&(h=a.find(".lyric_text").data("old-value"),
m=$.trim(a.find(".lyric_text").val()),""!==m&&m!==h&&(h=$("div.lyrics a[data-id='"+g+"']"),m=m.replace(/\n/gi,"<br>"),h.html().match(/<br[\s\/]?>$/i)&&(m+="<br>"),h.html(m),app.save_lyrics()),!n&&b.hasClass("verified")))return c.find("button.cancel_annotation").click(),!1;var r;k||(r=d.closest(".qtip"),r.qtip("api").beforeHide=function(){return!0},f.match(/^\?$/)?b.addClass("needs_exegesis"):b.removeClass("needs_exegesis"));a.find("textarea").trigger("dirtyable:changed",!1);c.removeClass("editing_annotation");
a.remove();e?(d=b.find(".editor_links .view_proposed_edits").closest("a"),$.facebox("Your edit has been proposed and will be reviewed!<br>"+$("<div>").append(d.clone()).html()),b.find(".view_proposed_edits_wrapper").addClass("has_pending_edits")):app.markdown_to_html(f,b.find(".annotation_body .body_text"),function(){k||(r.qtip("api").reposition(),app.update_bulk_loaded_annotation(r.find(".annotation_container")))});b.show().addClass("just_submitted_edit").removeClass("un_edited").closest(".annotation_container").addClass("just_submitted_edit");
!k&&r.qtip("api").reposition()});$(document).on("submit","form[data-submit-with-ajax-queue]",function(d){var a=$(this);a.find('input[type="submit"]').each(function(){var b=$(this);a.data("disable-with")&&b.prop("value",a.data("disable-with"));b.prop("disabled",!0)});a.submitWithAjaxQueue({dataType:a.data("ajax-data-type")||"script",success:function(b){a.trigger("submit_with_ajax_queue:success",b)},error:function(b){a.trigger("submit_with_ajax_queue:error",b)},complete:function(b){a.trigger("submit_with_ajax_queue:complete",
b)}});d.stopImmediatePropagation();return!1});$(document).on("click","[data-select-on-click]",function(){this.select()})});(function(){var d=$(document.documentElement);d.toggleClass("chrome",!!bowser.chrome);d.toggleClass("iphone",!!bowser.iphone);d.toggleClass("ios",!!bowser.ios);d.toggleClass("win",/Windows/i.test(navigator.userAgent));d.toggleClass("msie",!!bowser.msie);d.toggleClass("firefox",!!bowser.firefox)})();
(function(){window["com.genius.Genius"].require.define({"shared/universal/jquery":function(d,a,b){b.exports=(window["com.genius.Genius"]||{}).jQuery||jQuery}})})();(function(){window["com.genius.Genius"].require.define({"shared/universal/keyboard_shortcuts":function(d,a,b){var c=a("shared/universal/jquery");b.exports={shortcut:function(a,b){c(window).bind("keydown",a,function(a){b(a);return!1})}}}})})();
(function(){window["com.genius.Genius"].require.define({"shared/universal/lodash":function(d,a,b){b.exports=(window["com.genius.Genius"]||{}).lodash}})})();Modernizr.addTest("flash_enabled",function(){try{return!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(d){return navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin}});
(function(){window["com.genius.Genius"].require.define({"shared/universal/mutation_observer":function(d,a,b){b.exports=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}})})();(function(){window["com.genius.Genius"].require.define({"shared/universal/performance_mark_once":function(d,a,b){var c={};b.exports=function(a){if(!c.hasOwnProperty(a))return c[a]=!0,window.performance.mark("genius."+a)}}})})();
String.prototype.startsWith||(String.prototype.startsWith=function(d,a){a=a||0;return this.indexOf(d,a)===a});(function(){window["com.genius.Genius"].require.define({"shared/universal/promise_channel":function(d,a,b){var c=function(a){this.buffer=[];a.done(function(a){this.buffer.forEach(function(b){a[b.method].apply(a,b.arguments)})}.bind(this))};["bind","notify","call"].forEach(function(a){c.prototype[a]=function(){this.buffer.push({method:a,arguments:arguments})}});b.exports=c}})})();
$(function(){$(document).on("rg:toggled",".toggle_follow",function(){var d=$(this),a=d.hasClass("new_status_follow");d.removeClass("disabled");d.toggleClass("new_status_follow",!a);d.toggleClass("new_status_unfollow",a);d.find("span").text(a?"Following":"Follow")});$(document).on("click",".toggle_follow:not(.disabled)",function(d){d.preventDefault();d=$(this);var a=d.hasClass("new_status_follow");d.addClass("disabled");d.trigger("rg:toggled");$.ajax({type:a?"post":"delete",url:d.attr("href")})});
$(document).on("hover",".toggle_follow.new_status_unfollow",function(d){var a=$(this);"mouseenter"===d.type?a.find("span").text("Unfollow!"):"mouseleave"===d.type&&(d=a.hasClass("new_status_unfollow"),a.find("span").text(d?"Following":"Follow"))})});
(function(){window["com.genius.Genius"].require.define({"shared/universal/tweet_composer":function(d,a,b){var c=a("shared/universal/jquery");d=function(a){var b=a.find(".twitter_button");b.attr({"data-href":b.attr("href"),href:"#"});this.$annotation=a;this.$compose_tweet_wrapper=this.$annotation.find(".compose_tweet_wrapper");this.attach_events()};d.prototype={show_tweet_composer:function(){this.$compose_tweet_wrapper.show();var a=this.$compose_tweet_wrapper.find("#tweet_text");a.focus();Modernizr.touch||
(a[0].selectionStart=0,a[0].selectionEnd=parseInt(a.attr("data-tweet-body-length"),10))},validate_tweet_text:function(){var a=this.$compose_tweet_wrapper.find("#tweet_text"),b=a.closest(".annotation_tweet_form"),c=a.closest(".compose_tweet_wrapper"),d=a.val(),f=b.find(".referent_image"),a=b.find(".characters_remaining"),b=b.find('input[type="submit"]');c.hasClass("has_image_attachment")&&(d=d+" "+(f.attr("src")||"http://www.example.com/image.png"));c=140-twttr.txt.getTweetLength(d);a.html(c);c=0>
c;a.toggleClass("warning",c);b.prop("disabled",c)},toggle_image_attachment:function(){var a=!this.$compose_tweet_wrapper.hasClass("has_image_attachment");this.$compose_tweet_wrapper.toggleClass("has_image_attachment",a);this.$compose_tweet_wrapper.find("#include_referent_image").val(a);this.$compose_tweet_wrapper.find("#tweet_text").focus();this.validate_tweet_text()},attach_events:function(){var a=this.$compose_tweet_wrapper;this.$annotation.find(".twitter_button.tweet_composer").on("click",function(){this.show_tweet_composer();
return!1}.bind(this));this.$annotation.find(".twitter_button.auth").on("click",function(){c.cookie("desired_location",c(this).closest(".embedded_annotation").attr("data-path"),{path:"/"});c.cookie("focus_tweet_text",!0,{path:"/",expires:1/24/60})});if(c.cookie("focus_tweet_text"))c(window).one("frame_visible",function(){this.show_tweet_composer();return!1}.bind(this));this.$annotation.find(".annotation_tweet_form").on("click","input[type='submit']",function(){c(this).val("Tweeting...")}).on("submit_with_ajax_queue:success",
function(b,c){a.html(c)}).on("submit_with_ajax_queue:error",function(){a.find("footer").html('<span class="tweet_composer_error"><em>Whoops!</em> Refresh the page to try again.</span>')}).on("submit_with_ajax_queue:complete",function(){a.find("#tweet_text").attr("disabled",!0)});a.on("click",".referent_image",function(){c(this).toggleClass("zoom")});this.$annotation.find("#tweet_text").on("input focus",this.validate_tweet_text.bind(this));this.$annotation.find(".toggle_attachment_label").on("click",
function(){this.toggle_image_attachment();return!1}.bind(this))}};b.exports=d}})})();
(function(d){function a(a,b){b=b||Error;return function(){var c=arguments,d=c[0],e="["+(a?a+":":"")+d+"] ",f,e=e+c[1].replace(/\{\d+\}/g,function(a){var b=+a.slice(1,-1)+2;return b<c.length?ac(c[b]):a}),e=e+("\nhttp://errors.angularjs.org/1.5.5/"+(a?a+"/":"")+d);f=2;for(d="?";f<c.length;f++,d="&")e+=d+"p"+(f-2)+"="+encodeURIComponent(ac(c[f]));return new b(e)}}function b(a){if(null==a||L(a))return!1;if(Q(a)||E(a)||N&&a instanceof N)return!0;var b="length"in Object(a)&&a.length;return y(b)&&(0<=b&&
(b-1 in a||a instanceof Array)||"function"==typeof a.item)}function c(a,d,e){var f,h;if(a)if(D(a))for(f in a)"prototype"==f||"length"==f||"name"==f||a.hasOwnProperty&&!a.hasOwnProperty(f)||d.call(e,a[f],f,a);else if(Q(a)||b(a)){var g="object"!==typeof a;f=0;for(h=a.length;f<h;f++)(g||f in a)&&d.call(e,a[f],f,a)}else if(a.forEach&&a.forEach!==c)a.forEach(d,e,a);else if(C(a))for(f in a)d.call(e,a[f],f,a);else if("function"===typeof a.hasOwnProperty)for(f in a)a.hasOwnProperty(f)&&d.call(e,a[f],f,a);
else for(f in a)Bb.call(a,f)&&d.call(e,a[f],f,a);return a}function l(a,b,c){for(var d=Object.keys(a).sort(),e=0;e<d.length;e++)b.call(c,a[d[e]],d[e]);return d}function g(a){return function(b,c){a(c,b)}}function k(){return++Oc}function e(a,b,c){for(var d=a.$$hashKey,f=0,h=b.length;f<h;++f){var g=b[f];if(v(g)||D(g))for(var m=Object.keys(g),k=0,n=m.length;k<n;k++){var l=m[k],q=g[l];c&&v(q)?B(q)?a[l]=new Date(q.valueOf()):F(q)?a[l]=new RegExp(q):q.nodeName?a[l]=q.cloneNode(!0):O(q)?a[l]=q.clone():(v(a[l])||
(a[l]=Q(q)?[]:{}),e(a[l],[q],!0)):a[l]=q}}d?a.$$hashKey=d:delete a.$$hashKey;return a}function f(a){return e(a,pb.call(arguments,1),!1)}function m(a){return e(a,pb.call(arguments,1),!0)}function h(a){return parseInt(a,10)}function n(a,b){return f(Object.create(a),b)}function q(){}function r(a){return a}function t(a){return function(){return a}}function u(a){return D(a.toString)&&a.toString!==eb}function x(a){return"undefined"===typeof a}function w(a){return"undefined"!==typeof a}function v(a){return null!==
a&&"object"===typeof a}function C(a){return null!==a&&"object"===typeof a&&!be(a)}function E(a){return"string"===typeof a}function y(a){return"number"===typeof a}function B(a){return"[object Date]"===eb.call(a)}function D(a){return"function"===typeof a}function F(a){return"[object RegExp]"===eb.call(a)}function L(a){return a&&a.window===a}function K(a){return a&&a.$evalAsync&&a.$watch}function J(a){return"boolean"===typeof a}function A(a){return a&&y(a.length)&&Ve.test(eb.call(a))}function O(a){return!(!a||
!(a.nodeName||a.prop&&a.attr&&a.find))}function T(a){var b={};a=a.split(",");var c;for(c=0;c<a.length;c++)b[a[c]]=!0;return b}function p(a){return na(a.nodeName||a[0]&&a[0].nodeName)}function W(a,b){var c=a.indexOf(b);0<=c&&a.splice(c,1);return c}function P(a,b){function d(a,b){var c=b.$$hashKey,f;if(Q(a)){f=0;for(var h=a.length;f<h;f++)b.push(e(a[f]))}else if(C(a))for(f in a)b[f]=e(a[f]);else if(a&&"function"===typeof a.hasOwnProperty)for(f in a)a.hasOwnProperty(f)&&(b[f]=e(a[f]));else for(f in a)Bb.call(a,
f)&&(b[f]=e(a[f]));c?b.$$hashKey=c:delete b.$$hashKey;return b}function e(a){if(!v(a))return a;var b=h.indexOf(a);if(-1!==b)return g[b];if(L(a)||K(a))throw gc("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var b=!1,c=f(a);void 0===c&&(c=Q(a)?[]:Object.create(be(a)),b=!0);h.push(a);g.push(c);return b?d(a,c):c}function f(a){switch(eb.call(a)){case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Float32Array]":case "[object Float64Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return new a.constructor(e(a.buffer));
case "[object ArrayBuffer]":if(!a.slice){var b=new ArrayBuffer(a.byteLength);(new Uint8Array(b)).set(new Uint8Array(a));return b}return a.slice(0);case "[object Boolean]":case "[object Number]":case "[object String]":case "[object Date]":return new a.constructor(a.valueOf());case "[object RegExp]":return b=new RegExp(a.source,a.toString().match(/[^\/]*$/)[0]),b.lastIndex=a.lastIndex,b;case "[object Blob]":return new a.constructor([a],{type:a.type})}if(D(a.cloneNode))return a.cloneNode(!0)}var h=[],
g=[];if(b){if(A(b)||"[object ArrayBuffer]"===eb.call(b))throw gc("cpta","Can't copy! TypedArray destination cannot be mutated.");if(a===b)throw gc("cpi","Can't copy! Source and destination are identical.");Q(b)?b.length=0:c(b,function(a,c){"$$hashKey"!==c&&delete b[c]});h.push(a);g.push(b);return d(a,b)}return e(a)}function ga(a,b){if(Q(a)){b=b||[];for(var c=0,d=a.length;c<d;c++)b[c]=a[c]}else if(v(a))for(c in b=b||{},a)if("$"!==c.charAt(0)||"$"!==c.charAt(1))b[c]=a[c];return b||a}function aa(a,b){if(a===
b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var c=typeof a,d;if(c==typeof b&&"object"==c)if(Q(a)){if(!Q(b))return!1;if((c=a.length)==b.length){for(d=0;d<c;d++)if(!aa(a[d],b[d]))return!1;return!0}}else{if(B(a))return B(b)?aa(a.getTime(),b.getTime()):!1;if(F(a))return F(b)?a.toString()==b.toString():!1;if(K(a)||K(b)||L(a)||L(b)||Q(b)||B(b)||F(b))return!1;c=ca();for(d in a)if("$"!==d.charAt(0)&&!D(a[d])){if(!aa(a[d],b[d]))return!1;c[d]=!0}for(d in b)if(!(d in c)&&"$"!==d.charAt(0)&&
w(b[d])&&!D(b[d]))return!1;return!0}return!1}function ya(a,b,c){return a.concat(pb.call(b,c))}function ka(a,b){var c=2<arguments.length?pb.call(arguments,2):[];return!D(b)||b instanceof RegExp?b:c.length?function(){return arguments.length?b.apply(a,ya(c,arguments,0)):b.apply(a,c)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function Ga(a,b){var c=b;"string"===typeof a&&"$"===a.charAt(0)&&"$"===a.charAt(1)?c=void 0:L(b)?c="$WINDOW":b&&d.document===b?c="$DOCUMENT":K(b)&&(c="$SCOPE");
return c}function va(a,b){if(!x(a))return y(b)||(b=b?2:null),JSON.stringify(a,Ga,b)}function Za(a){return E(a)?JSON.parse(a):a}function sb(a,b){a=a.replace(We,"");var c=Date.parse("Jan 01, 1970 00:00:00 "+a)/6E4;return isNaN(c)?b:c}function I(a,b,c){c=c?-1:1;var d=a.getTimezoneOffset();b=sb(b,d);c*=b-d;a=new Date(a.getTime());a.setMinutes(a.getMinutes()+c);return a}function ra(a){a=N(a).clone();try{a.empty()}catch(b){}var c=N("<div>").append(a).html();try{return a[0].nodeType===hc?na(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,
function(a,b){return"<"+na(b)})}catch(b){return na(c)}}function X(a){try{return decodeURIComponent(a)}catch(b){}}function ha(a){var b={};c((a||"").split("&"),function(a){var c,d,e;a&&(d=a=a.replace(/\+/g,"%20"),c=a.indexOf("="),-1!==c&&(d=a.substring(0,c),e=a.substring(c+1)),d=X(d),w(d)&&(e=w(e)?X(e):!0,Bb.call(b,d)?Q(b[d])?b[d].push(e):b[d]=[b[d],e]:b[d]=e))});return b}function tb(a){var b=[];c(a,function(a,d){Q(a)?c(a,function(a){b.push(U(d,!0)+(!0===a?"":"="+U(a,!0)))}):b.push(U(d,!0)+(!0===a?
"":"="+U(a,!0)))});return b.length?b.join("&"):""}function Oa(a){return U(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function U(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,b?"%20":"+")}function ea(a,b){var c,d,e=Pc.length;for(d=0;d<e;++d)if(c=Pc[d]+b,E(c=a.getAttribute(c)))return c;return null}function Hb(a,b){var d,e,f={};c(Pc,function(b){b+="app";!d&&a.hasAttribute&&
a.hasAttribute(b)&&(d=a,e=a.getAttribute(b))});c(Pc,function(b){b+="app";var c;!d&&(c=a.querySelector("["+b.replace(":","\\:")+"]"))&&(d=c,e=c.getAttribute(b))});d&&(f.strictDi=null!==ea(d,"strict-di"),b(d,e?[e]:[],f))}function mb(a,b,e){v(e)||(e={});e=f({strictDi:!1},e);var h=function(){a=N(a);if(a.injector()){var c=a[0]===d.document?"document":ra(a);throw gc("btstrpd","App already bootstrapped with this element '{0}'",c.replace(/</,"&lt;").replace(/>/,"&gt;"));}b=b||[];b.unshift(["$provide",function(b){b.value("$rootElement",
a)}]);e.debugInfoEnabled&&b.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]);b.unshift("ng");c=bb(b,e.strictDi);c.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",d);c(b)(a)})}]);return c},g=/^NG_ENABLE_DEBUG_INFO!/,m=/^NG_DEFER_BOOTSTRAP!/;d&&g.test(d.name)&&(e.debugInfoEnabled=!0,d.name=d.name.replace(g,""));if(d&&!m.test(d.name))return h();d.name=d.name.replace(m,"");db.resumeBootstrap=function(a){c(a,function(a){b.push(a)});
return h()};D(db.resumeDeferredBootstrap)&&db.resumeDeferredBootstrap()}function Wa(){d.name="NG_ENABLE_DEBUG_INFO!"+d.name;d.location.reload()}function Y(a){a=db.element(a).injector();if(!a)throw gc("test","no injector found for element argument to getTestability");return a.get("$$testability")}function Ha(a,b){b=b||"_";return a.replace(Xe,function(a,c){return(c?b:"")+a.toLowerCase()})}function Pa(){var a;if(!Qc){var b=ma();(Wb=x(b)?d.jQuery:b?d[b]:void 0)&&Wb.fn.on?(N=Wb,f(Wb.fn,{scope:Nc.scope,
isolateScope:Nc.isolateScope,controller:Nc.controller,injector:Nc.injector,inheritedData:Nc.inheritedData}),a=Wb.cleanData,Wb.cleanData=function(b){for(var c,d=0,e;null!=(e=b[d]);d++)(c=Wb._data(e,"events"))&&c.$destroy&&Wb(e).triggerHandler("$destroy");a(b)}):N=S;db.element=N;Qc=!0}}function sa(a,b,c){if(!a)throw gc("areq","Argument '{0}' is {1}",b||"?",c||"required");return a}function la(a,b,c){c&&Q(a)&&(a=a[a.length-1]);sa(D(a),b,"not a function, got "+(a&&"object"===typeof a?a.constructor.name||
"Object":typeof a));return a}function Qa(a,b){if("hasOwnProperty"===a)throw gc("badname","hasOwnProperty is not a valid {0} name",b);}function Ma(a,b,c){if(!b)return a;b=b.split(".");for(var d,e=a,f=b.length,h=0;h<f;h++)d=b[h],a&&(a=(e=a)[d]);return!c&&D(a)?ka(e,a):a}function Ba(a){for(var b=a[0],c=a[a.length-1],d,e=1;b!==c&&(b=b.nextSibling);e++)if(d||a[e]!==b)d||(d=N(pb.call(a,0,e))),d.push(b);return d||a}function ca(){return Object.create(null)}function jb(b){function c(a,b,d){return a[b]||(a[b]=
d())}var d=a("$injector"),e=a("ng");b=c(b,"angular",Object);b.$$minErr=b.$$minErr||a;return c(b,"module",function(){var a={};return function(b,f,h){if("hasOwnProperty"===b)throw e("badname","hasOwnProperty is not a valid {0} name","module");f&&a.hasOwnProperty(b)&&(a[b]=null);return c(a,b,function(){function a(b,c,d,f){f||(f=e);return function(){f[d||"push"]([b,c,arguments]);return n}}function c(a,d){return function(c,f){f&&D(f)&&(f.$$moduleName=b);e.push([a,d,arguments]);return n}}if(!f)throw d("nomod",
"Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",b);var e=[],g=[],m=[],k=a("$injector","invoke","push",g),n={_invokeQueue:e,_configBlocks:g,_runBlocks:m,requires:f,name:b,provider:c("$provide","provider"),factory:c("$provide","factory"),service:c("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),decorator:c("$provide","decorator"),
animation:c("$animateProvider","register"),filter:c("$filterProvider","register"),controller:c("$controllerProvider","register"),directive:c("$compileProvider","directive"),component:c("$compileProvider","component"),config:k,run:function(a){m.push(a);return this}};h&&k(h);return n})}})}function z(a){var b=[];return JSON.stringify(a,function(a,c){c=Ga(a,c);if(v(c)){if(0<=b.indexOf(c))return"...";b.push(c)}return c})}function ac(a){return"function"===typeof a?a.toString().replace(/ \{[\s\S]*$/,""):
x(a)?"undefined":"string"!==typeof a?z(a):a}function Wc(b){f(b,{bootstrap:mb,copy:P,extend:f,merge:m,equals:aa,element:N,forEach:c,injector:bb,noop:q,bind:ka,toJson:va,fromJson:Za,identity:r,isUndefined:x,isDefined:w,isString:E,isFunction:D,isObject:v,isNumber:y,isElement:O,isArray:Q,version:fc,isDate:B,lowercase:na,uppercase:dd,callbacks:{counter:0},getTestability:Y,$$minErr:a,$$csp:Nb,reloadWithDebugInfo:Wa});Ic=jb(d);Ic("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:Zb});a.provider("$compile",
Zc).directive({a:Gf,input:pf,textarea:pf,form:gf,script:rg,select:ug,style:wg,option:vg,ngBind:Kf,ngBindHtml:vd,ngBindTemplate:Fc,ngClass:Lf,ngClassEven:Nf,ngClassOdd:Mf,ngCloak:Of,ngController:Pf,ngForm:Hf,ngHide:kg,ngIf:Ta,ngInclude:Rf,ngInit:Tf,ngNonBindable:Yf,ngPluralize:hg,ngRepeat:ig,ngShow:jg,ngStyle:lg,ngSwitch:mg,ngSwitchWhen:ng,ngSwitchDefault:og,ngOptions:gg,ngTransclude:qg,ngModel:tf,ngList:Uf,ngChange:ve,pattern:cg,ngPattern:cg,required:bg,ngRequired:bg,minlength:eg,ngMinlength:eg,maxlength:dg,
ngMaxlength:dg,ngValue:V,ngModelOptions:Xf}).directive({ngInclude:Sf}).directive(Id).directive(qf);a.provider({$anchorScroll:Ra,$animate:ld,$animateCss:Hc,$$animateJs:kd,$$animateQueue:Ze,$$AnimateRunner:zf,$$animateAsyncRun:Le,$browser:Tc,$cacheFactory:sd,$controller:td,$document:qc,$exceptionHandler:ad,$filter:Ud,$$forceReflow:je,$interpolate:ud,$interval:cd,$http:ec,$httpParamSerializer:Mb,$httpParamSerializerJQLike:Yb,$httpBackend:kc,$xhrFactory:lc,$location:ye,$log:ze,$parse:ib,$rootScope:Fa,
$q:vf,$$q:uf,$sce:Fb,$sceDelegate:Sd,$sniffer:Ge,$templateCache:Dc,$templateRequest:He,$$testability:Ie,$timeout:Je,$window:dc,$$rAF:Rd,$$jqLite:Cc,$$HashMap:Lc,$$cookieReader:Ke})}])}function bc(a){return a.replace(yb,function(a,b,c,d){return d?c.toUpperCase():c}).replace(le,"Moz$1")}function nc(a){a=a.nodeType;return 1===a||!a||9===a}function rd(a,b){var d,e,f=b.createDocumentFragment(),h=[];if(Dd.test(a)){d=d||f.appendChild(b.createElement("div"));e=(Ea.exec(a)||["",""])[1].toLowerCase();e=ia[e]||
ia._default;d.innerHTML=e[1]+a.replace(wf,"<$1></$2>")+e[2];for(e=e[0];e--;)d=d.lastChild;h=ya(h,d.childNodes);d=f.firstChild;d.textContent=""}else h.push(b.createTextNode(a));f.textContent="";f.innerHTML="";c(h,function(a){f.appendChild(a)});return f}function Xc(a,b){var c=a.parentNode;c&&c.replaceChild(b,a);b.appendChild(a)}function S(a){if(a instanceof S)return a;var b;E(a)&&(a=pa(a),b=!0);if(!(this instanceof S)){if(b&&"<"!=a.charAt(0))throw me("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");
return new S(a)}if(b){b=d.document;var c;a=(c=ne.exec(a))?[b.createElement(c[1])]:(c=rd(a,b))?c.childNodes:[]}Ib(this,a)}function zc(a){return a.cloneNode(!0)}function Vb(a,b){b||Ia(a);if(a.querySelectorAll)for(var c=a.querySelectorAll("*"),d=0,e=c.length;d<e;d++)Ia(c[d])}function cc(a,b,d,e){if(w(e))throw me("offargs","jqLite#off() does not support the `selector` argument");var f=(e=ub(a))&&e.events,h=e&&e.handle;if(h)if(b){var g=function(b){var c=f[b];w(d)&&W(c||[],d);w(d)&&c&&0<c.length||(a.removeEventListener(b,
h,!1),delete f[b])};c(b.split(" "),function(a){g(a);jd[a]&&g(jd[a])})}else for(b in f)"$destroy"!==b&&a.removeEventListener(b,h,!1),delete f[b]}function Ia(a,b){var c=a.ng339,d=c&&wc[c];d&&(b?delete d.data[b]:(d.handle&&(d.events.$destroy&&d.handle({},"$destroy"),cc(a)),delete wc[c],a.ng339=void 0))}function ub(a,b){var c=a.ng339,c=c&&wc[c];b&&!c&&(a.ng339=c=++Ye,c=wc[c]={events:{},data:{},handle:void 0});return c}function wa(a,b,c){if(nc(a)){var d=w(c),e=!d&&b&&!v(b),h=!b;a=(a=ub(a,!e))&&a.data;
if(d)a[b]=c;else{if(h)return a;if(e)return a&&a[b];f(a,b)}}}function H(a,b){return a.getAttribute?-1<(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" "):!1}function vb(a,b){b&&a.setAttribute&&c(b.split(" "),function(b){a.setAttribute("class",pa((" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+pa(b)+" "," ")))})}function fa(a,b){if(b&&a.setAttribute){var d=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");c(b.split(" "),function(a){a=
pa(a);-1===d.indexOf(" "+a+" ")&&(d+=a+" ")});a.setAttribute("class",pa(d))}}function Ib(a,b){if(b)if(b.nodeType)a[a.length++]=b;else{var c=b.length;if("number"===typeof c&&b.window!==b){if(c)for(var d=0;d<c;d++)a[a.length++]=b[d]}else a[a.length++]=b}}function Jb(a,b){return hb(a,"$"+(b||"ngController")+"Controller")}function hb(a,b,c){9==a.nodeType&&(a=a.documentElement);for(b=Q(b)?b:[b];a;){for(var d=0,e=b.length;d<e;d++)if(w(c=N.data(a,b[d])))return c;a=a.parentNode||11===a.nodeType&&a.host}}
function Kb(a){for(Vb(a,!0);a.firstChild;)a.removeChild(a.firstChild)}function $a(a,b){b||Vb(a);var c=a.parentNode;c&&c.removeChild(a)}function Ac(a,b){b=b||d;if("complete"===b.document.readyState)b.setTimeout(a);else N(b).on("load",a)}function Na(a,b){var c=ic[b.toLowerCase()];return c&&$d[p(a)]&&c}function Eb(a,b){var c=function(c,d){c.isDefaultPrevented=function(){return c.defaultPrevented};var e=b[d||c.type],f=e?e.length:0;if(f){if(x(c.immediatePropagationStopped)){var h=c.stopImmediatePropagation;
c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0;c.stopPropagation&&c.stopPropagation();h&&h.call(c)}}c.isImmediatePropagationStopped=function(){return!0===c.immediatePropagationStopped};var g=e.specialHandlerWrapper||Bc;1<f&&(e=ga(e));for(var m=0;m<f;m++)c.isImmediatePropagationStopped()||g(a,c,e[m])}};c.elem=a;return c}function Bc(a,b,c){c.call(a,b)}function oc(a,b,c){var d=b.relatedTarget;d&&(d===a||xf.call(a,d))||c.call(a,b)}function Cc(){this.$get=function(){return f(S,
{hasClass:function(a,b){a.attr&&(a=a[0]);return H(a,b)},addClass:function(a,b){a.attr&&(a=a[0]);return fa(a,b)},removeClass:function(a,b){a.attr&&(a=a[0]);return vb(a,b)}})}}function ua(a,b){var c=a&&a.$$hashKey;if(c)return"function"===typeof c&&(c=a.$$hashKey()),c;c=typeof a;return c="function"==c||"object"==c&&null!==a?a.$$hashKey=c+":"+(b||k)():c+":"+a}function kb(a,b){if(b){var d=0;this.nextUid=function(){return++d}}c(a,this.put,this)}function ab(a){a=Function.prototype.toString.call(a).replace(Me,
"");return a.match(tc)||a.match(Fd)}function za(a){return(a=ab(a))?"function("+(a[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function bb(a,b){function d(a){return function(b,d){if(v(b))c(b,g(a));else return a(b,d)}}function e(a,b){Qa(a,"service");if(D(b)||Q(b))b=u.instantiate(b);if(!b.$get)throw Ob("pget","Provider '{0}' must define $get factory method.",a);return r[a+"Provider"]=b}function f(a,b){return function(){var c=y.invoke(b,this);if(x(c))throw Ob("undef","Provider '{0}' must return a value from $get factory method.",
a);return c}}function h(a,b,c){return e(a,{$get:!1!==c?f(a,b):b})}function m(a){sa(x(a)||Q(a),"modulesToLoad","not an array");var b=[],d;c(a,function(a){function c(a){var b,d;b=0;for(d=a.length;b<d;b++){var e=a[b],f=u.get(e[0]);f[e[1]].apply(f,e[2])}}if(!q.get(a)){q.put(a,!0);try{E(a)?(d=Ic(a),b=b.concat(m(d.requires)).concat(d._runBlocks),c(d._invokeQueue),c(d._configBlocks)):D(a)?b.push(u.invoke(a)):Q(a)?b.push(u.invoke(a)):la(a,"module")}catch(e){throw Q(a)&&(a=a[a.length-1]),e.message&&e.stack&&
-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Ob("modulerr","Failed to instantiate module {0} due to:\n{1}",a,e.stack||e.message||e);}}});return b}function k(a,c){function d(b,e){if(a.hasOwnProperty(b)){if(a[b]===n)throw Ob("cdep","Circular dependency found: {0}",b+" <- "+l.join(" <- "));return a[b]}try{return l.unshift(b),a[b]=n,a[b]=c(b,e)}catch(f){throw a[b]===n&&delete a[b],f;}finally{l.shift()}}function e(a,c,f){var h=[];a=bb.$$annotate(a,b,f);for(var g=0,m=a.length;g<m;g++){var k=
a[g];if("string"!==typeof k)throw Ob("itkn","Incorrect injection token! Expected service name as string, got {0}",k);h.push(c&&c.hasOwnProperty(k)?c[k]:d(k,f))}return h}return{invoke:function(a,b,c,d){"string"===typeof c&&(d=c,c=null);c=e(a,c,d);Q(a)&&(a=a[a.length-1]);d=11>=Qb?!1:"function"===typeof a&&/^(?:class\s|constructor\()/.test(Function.prototype.toString.call(a));return d?(c.unshift(null),new (Function.prototype.bind.apply(a,c))):a.apply(b,c)},instantiate:function(a,b,c){var d=Q(a)?a[a.length-
1]:a;a=e(a,b,c);a.unshift(null);return new (Function.prototype.bind.apply(d,a))},get:d,annotate:bb.$$annotate,has:function(b){return r.hasOwnProperty(b+"Provider")||a.hasOwnProperty(b)}}}b=!0===b;var n={},l=[],q=new kb([],!0),r={$provide:{provider:d(e),factory:d(h),service:d(function(a,b){return h(a,["$injector",function(a){return a.instantiate(b)}])}),value:d(function(a,b){return h(a,t(b),!1)}),constant:d(function(a,b){Qa(a,"constant");r[a]=b;p[a]=b}),decorator:function(a,b){var c=u.get(a+"Provider"),
d=c.$get;c.$get=function(){var a=y.invoke(d,c);return y.invoke(b,null,{$delegate:a})}}}},u=r.$injector=k(r,function(a,b){db.isString(b)&&l.push(b);throw Ob("unpr","Unknown provider: {0}",l.join(" <- "));}),p={},w=k(p,function(a,b){var c=u.get(a+"Provider",b);return y.invoke(c.$get,c,void 0,a)}),y=w;r.$injectorProvider={$get:t(w)};var B=m(a),y=w.get("$injector");y.strictDi=b;c(B,function(a){a&&y.invoke(a)});return y}function Ra(){var a=!0;this.disableAutoScrolling=function(){a=!1};this.$get=["$window",
"$location","$rootScope",function(b,c,d){function e(a){var b=null;Array.prototype.some.call(a,function(a){if("a"===p(a))return b=a,!0});return b}function f(a){if(a){a.scrollIntoView();var c;c=h.yOffset;D(c)?c=c():O(c)?(c=c[0],c="fixed"!==b.getComputedStyle(c).position?0:c.getBoundingClientRect().bottom):y(c)||(c=0);c&&(a=a.getBoundingClientRect().top,b.scrollBy(0,a-c))}else b.scrollTo(0,0)}function h(a){a=E(a)?a:c.hash();var b;a?(b=g.getElementById(a))?f(b):(b=e(g.getElementsByName(a)))?f(b):"top"===
a&&f(null):f(null)}var g=b.document;a&&d.$watch(function(){return c.hash()},function(a,b){a===b&&""===a||Ac(function(){d.$evalAsync(h)})});return h}]}function nb(a,b){if(!a&&!b)return"";if(!a)return b;if(!b)return a;Q(a)&&(a=a.join(" "));Q(b)&&(b=b.join(" "));return a+" "+b}function Yc(a){E(a)&&(a=a.split(" "));var b=ca();c(a,function(a){a.length&&(b[a]=!0)});return b}function wb(a){return v(a)?a:{}}function pc(a,b,d,e){function f(a){try{a.apply(null,pb.call(arguments,1))}finally{if(p--,0===p)for(;w.length;)try{w.pop()()}catch(b){d.error(b)}}}
function h(){D=null;g();m()}function g(){y=E();y=x(y)?null:y;aa(y,z)&&(y=z);z=y}function m(){if(v!==k.url()||B!==y)v=k.url(),B=y,c(C,function(a){a(k.url(),y)})}var k=this,n=a.location,l=a.history,r=a.setTimeout,t=a.clearTimeout,u={};k.isMock=!1;var p=0,w=[];k.$$completeOutstandingRequest=f;k.$$incOutstandingRequestCount=function(){p++};k.notifyWhenNoOutstandingRequests=function(a){0===p?a():w.push(a)};var y,B,v=n.href,A=b.find("base"),D=null,E=e.history?function(){try{return l.state}catch(a){}}:q;
g();B=y;k.url=function(b,c,d){x(d)&&(d=null);n!==a.location&&(n=a.location);l!==a.history&&(l=a.history);if(b){var f=B===d;if(v===b&&(!e.history||f))return k;var h=v&&Xb(v)===Xb(b);v=b;B=d;if(!e.history||h&&f){if(!h||D)D=b;c?n.replace(b):h?(c=n,d=b.indexOf("#"),d=-1===d?"":b.substr(d),c.hash=d):n.href=b;n.href!==b&&(D=b)}else l[c?"replaceState":"pushState"](d,"",b),g(),B=y;return k}return D||n.href.replace(/%27/g,"'")};k.state=function(){return y};var C=[],F=!1,z=null;k.onUrlChange=function(b){if(!F){if(e.history)N(a).on("popstate",
h);N(a).on("hashchange",h);F=!0}C.push(b);return b};k.$$applicationDestroyed=function(){N(a).off("hashchange popstate",h)};k.$$checkUrlChange=m;k.baseHref=function(){var a=A.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""};k.defer=function(a,b){var c;p++;c=r(function(){delete u[c];f(a)},b||0);u[c]=!0;return c};k.defer.cancel=function(a){return u[a]?(delete u[a],t(a),f(q),!0):!1}}function Tc(){this.$get=["$window","$log","$sniffer","$document",function(a,b,c,d){return new pc(a,d,b,
c)}]}function sd(){this.$get=function(){function b(c,e){function h(a){a!=r&&(M?M==a&&(M=a.n):M=a,g(a.n,a.p),g(a,r),r=a,r.n=null)}function g(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(c in d)throw a("$cacheFactory")("iid","CacheId '{0}' is already taken!",c);var m=0,k=f({},e,{id:c}),n=ca(),l=e&&e.capacity||Number.MAX_VALUE,q=ca(),r=null,M=null;return d[c]={put:function(a,b){if(!x(b)){if(l<Number.MAX_VALUE){var c=q[a]||(q[a]={key:a});h(c)}a in n||m++;n[a]=b;m>l&&this.remove(M.key);return b}},get:function(a){if(l<
Number.MAX_VALUE){var b=q[a];if(!b)return;h(b)}return n[a]},remove:function(a){if(l<Number.MAX_VALUE){var b=q[a];if(!b)return;b==r&&(r=b.p);b==M&&(M=b.n);g(b.n,b.p);delete q[a]}a in n&&(delete n[a],m--)},removeAll:function(){n=ca();m=0;q=ca();r=M=null},destroy:function(){q=k=n=null;delete d[c]},info:function(){return f({},k,{size:m})}}}var d={};b.info=function(){var a={};c(d,function(b,c){a[c]=b.info()});return a};b.get=function(a){return d[a]};return b}}function Dc(){this.$get=["$cacheFactory",function(a){return a("templates")}]}
function Zc(a,b){function e(a,b,d){var f=/^\s*([@&<]|=(\*?))(\??)\s*(\w*)\s*$/,h=ca();c(a,function(a,c){if(a in A)h[c]=A[a];else{var e=a.match(f);if(!e)throw Ka("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",b,c,a,d?"controller bindings definition":"isolate scope definition");h[c]={mode:e[1][0],collection:"*"===e[2],optional:"?"===e[3],attrName:e[4]||c};e[4]&&(A[a]=h[c])}});return h}function h(a){var b=a.charAt(0);if(!b||b!==na(b))throw Ka("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",
a);if(a!==a.trim())throw Ka("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",a);}var m={},k=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,l=/(([\w\-]+)(?:\:([^;]+))?;?)/,u=T("ngSrc,ngSrcset,src,srcset"),y=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,B=/^(on[a-z]+|formaction)$/,A=ca();this.directive=function yg(b,d){Qa(b,"directive");E(b)?(h(b),sa(d,"directiveFactory"),m.hasOwnProperty(b)||(m[b]=[],a.factory(b+"Directive",["$injector","$exceptionHandler",function(a,
d){var e=[];c(m[b],function(c,f){try{var h=a.invoke(c);D(h)?h={compile:t(h)}:!h.compile&&h.link&&(h.compile=t(h.link));h.priority=h.priority||0;h.index=f;h.name=h.name||b;h.require=h.require||h.controller&&h.name;h.restrict=h.restrict||"EA";h.$$moduleName=c.$$moduleName;e.push(h)}catch(g){d(g)}});return e}])),m[b].push(d)):c(b,g(yg));return this};this.component=function(a,b){function d(a){function f(b){return D(b)||Q(b)?function(c,d){return a.invoke(b,this,{$element:c,$attrs:d})}:b}var h=b.template||
b.templateUrl?b.template:"",g={controller:e,controllerAs:$c(b.controller)||b.controllerAs||"$ctrl",template:f(h),templateUrl:f(b.templateUrl),transclude:b.transclude,scope:{},bindToController:b.bindings||{},restrict:"E",require:b.require};c(b,function(a,b){"$"===b.charAt(0)&&(g[b]=a)});return g}var e=b.controller||function(){};c(b,function(a,b){"$"===b.charAt(0)&&(d[b]=a,D(e)&&(e[b]=a))});d.$inject=["$injector"];return this.directive(a,d)};this.aHrefSanitizationWhitelist=function(a){return w(a)?(b.aHrefSanitizationWhitelist(a),
this):b.aHrefSanitizationWhitelist()};this.imgSrcSanitizationWhitelist=function(a){return w(a)?(b.imgSrcSanitizationWhitelist(a),this):b.imgSrcSanitizationWhitelist()};var C=!0;this.debugInfoEnabled=function(a){return w(a)?(C=a,this):C};var F=10;this.onChangesTtl=function(a){return arguments.length?(F=a,this):F};this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(a,b,h,g,M,t,Z,qa,w,A){function z(){try{if(!--da)throw ka=
void 0,Ka("infchng","{0} $onChanges() iterations reached. Aborting!\n",F);Z.$apply(function(){for(var a=0,b=ka.length;a<b;++a)ka[a]();ka=void 0})}finally{da++}}function $f(a,b){if(b){var c=Object.keys(b),d,e,f;d=0;for(e=c.length;d<e;d++)f=c[d],this[f]=b[f]}else this.$attr={};this.$$element=a}function ha(a,b,c){Qa.innerHTML="<span "+b+">";b=Qa.firstChild.attributes;var d=b[0];b.removeNamedItem(d.name);d.value=c;a.attributes.setNamedItem(d)}function I(a,b){try{a.addClass(b)}catch(c){}}function X(a,
b,c,e,f){a instanceof N||(a=N(a));for(var h=/\S+/,g=0,m=a.length;g<m;g++){var k=a[g];k.nodeType===hc&&k.nodeValue.match(h)&&Xc(k,a[g]=d.document.createElement("span"))}var n=L(a,b,a,c,e,f);X.$$addScopeClass(a);var l=null;return function(b,c,d){sa(b,"scope");f&&f.needsNewScope&&(b=b.$parent.$new());d=d||{};var e=d.parentBoundTranscludeFn,h=d.transcludeControllers;d=d.futureParentElement;e&&e.$$boundTransclude&&(e=e.$$boundTransclude);l||(l=(d=d&&d[0])?"foreignobject"!==p(d)&&eb.call(d).match(/SVG/)?
"svg":"html":"html");d="html"!==l?N(Ma(l,N("<div>").append(a).html())):c?Nc.clone.call(a):a;if(h)for(var g in h)d.data("$"+g+"Controller",h[g].instance);X.$$addScopeInfo(d,b);c&&c(d,b);n&&n(b,d,d,e);return d}}function L(a,b,c,d,e,f){function h(a,c,d,e){var f,m,k,n,l,r,M;if(q)for(M=Array(c.length),n=0;n<g.length;n+=3)f=g[n],M[f]=c[f];else M=c;n=0;for(l=g.length;n<l;)m=M[g[n++]],c=g[n++],f=g[n++],c?(c.scope?(k=a.$new(),X.$$addScopeInfo(N(m),k)):k=a,r=c.transcludeOnThisElement?O(a,c.transclude,e):!c.templateOnThisElement&&
e?e:!e&&b?O(a,b):null,c(f,k,m,d,r)):f&&f(a,m.childNodes,void 0,e)}for(var g=[],m,k,n,l,q,r=0;r<a.length;r++){m=new $f;k=T(a[r],[],m,0===r?d:void 0,e);(f=k.length?G(k,a[r],m,b,c,null,[],[],f):null)&&f.scope&&X.$$addScopeClass(m.$$element);m=f&&f.terminal||!(n=a[r].childNodes)||!n.length?null:L(n,f?(f.transcludeOnThisElement||!f.templateOnThisElement)&&f.transclude:b);if(f||m)g.push(r,f,m),l=!0,q=q||f;f=null}return l?h:null}function O(a,b,c){function d(e,f,h,g,m){e||(e=a.$new(!1,m),e.$$transcluded=
!0);return b(e,f,{parentBoundTranscludeFn:c,transcludeControllers:h,futureParentElement:g})}var e=d.$$slots=ca(),f;for(f in b.$$slots)e[f]=b.$$slots[f]?O(a,b.$$slots[f],c):null;return d}function T(a,b,c,d,e){var f=c.$attr,h;switch(a.nodeType){case 1:ea(b,Xa(p(a)),"E",d,e);for(var g,m,n,q=a.attributes,r=0,M=q&&q.length;r<M;r++){var t=!1,u=!1;g=q[r];h=g.name;m=pa(g.value);g=Xa(h);if(n=ma.test(g))h=h.replace(cb,"").substr(8).replace(/_(.)/g,function(a,b){return b.toUpperCase()});(g=g.match(oa))&&ga(g[1])&&
(t=h,u=h.substr(0,h.length-5)+"end",h=h.substr(0,h.length-6));g=Xa(h.toLowerCase());f[g]=h;if(n||!c.hasOwnProperty(g))c[g]=m,Na(a,g)&&(c[g]=!0);ya(a,b,m,g,n);ea(b,g,"A",d,e,t,u)}a=a.className;v(a)&&(a=a.animVal);if(E(a)&&""!==a)for(;h=l.exec(a);)g=Xa(h[2]),ea(b,g,"C",d,e)&&(c[g]=pa(h[3])),a=a.substr(h.index+h[0].length);break;case hc:if(11===Qb)for(;a.parentNode&&a.nextSibling&&a.nextSibling.nodeType===hc;)a.nodeValue+=a.nextSibling.nodeValue,a.parentNode.removeChild(a.nextSibling);S(b,a.nodeValue);
break;case 8:try{if(h=k.exec(a.nodeValue))g=Xa(h[1]),ea(b,g,"M",d,e)&&(c[g]=pa(h[2]))}catch(Z){}}b.sort(Hb);return b}function tb(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw Ka("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",b,c);1==a.nodeType&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--);d.push(a);a=a.nextSibling}while(0<e)}else d.push(a);return N(d)}function U(a,b,c){return function(d,e,f,h,g){e=tb(e[0],b,c);return a(d,e,f,h,g)}}function Oa(a,
b,c,d,e,f){var h;return a?X(b,c,d,e,f):function(){h||(h=X(b,c,d,e,f),b=c=f=null);return h.apply(this,arguments)}}function G(a,b,d,e,g,m,k,n,l){function q(a,b,c,d){if(a){c&&(a=U(a,c,d));a.require=y.require;a.directiveName=Db;if(Z===y||y.$$isolateScope)a=Ba(a,{isolateScope:!0});k.push(a)}if(b){c&&(b=U(b,c,d));b.require=y.require;b.directiveName=Db;if(Z===y||y.$$isolateScope)b=Ba(b,{isolateScope:!0});n.push(b)}}function r(a,e,h,g,m){function l(a,b,c,d){var e;K(a)||(d=c,c=b,b=a,a=void 0);La&&(e=Da);c||
(c=La?R.parent():R);if(d){var f=m.$$slots[d];if(f)return f(a,b,e,c,lb);if(x(f))throw Ka("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',d,ra(R));}else return m(a,b,e,c,lb)}var q,M,p,ta,w,Da,y,R;b===h?(g=d,R=d.$$element):(R=N(h),g=new $f(R,d));w=e;Z?ta=e.$new(!0):t&&(w=e.$parent);m&&(y=l,y.$$boundTransclude=m,y.isSlotFilled=function(a){return!!m.$$slots[a]});u&&(Da=P(R,g,y,u,ta,e,Z));Z&&(X.$$addScopeInfo(R,ta,!0,!(qa&&(qa===Z||qa===Z.$$originalDirective))),
X.$$addScopeClass(R,!0),ta.$$isolateBindings=Z.$$isolateBindings,M=Ga(e,g,ta,ta.$$isolateBindings,Z),M.removeWatches&&ta.$on("$destroy",M.removeWatches));for(q in Da){M=u[q];p=Da[q];var Db=M.$$bindings.bindToController;p.bindingInfo=p.identifier&&Db?Ga(w,g,p.instance,Db,M):{};var B=p();B!==p.instance&&(p.instance=B,R.data("$"+M.name+"Controller",B),p.bindingInfo.removeWatches&&p.bindingInfo.removeWatches(),p.bindingInfo=Ga(w,g,p.instance,Db,M))}c(u,function(a,b){var c=a.require;a.bindToController&&
!Q(c)&&v(c)&&f(Da[b].instance,H(b,c,R,Da))});c(Da,function(a){var b=a.instance;D(b.$onChanges)&&b.$onChanges(a.bindingInfo.initialChanges);D(b.$onInit)&&b.$onInit();D(b.$onDestroy)&&w.$on("$destroy",function(){b.$onDestroy()})});q=0;for(M=k.length;q<M;q++)p=k[q],jb(p,p.isolateScope?ta:e,R,g,p.require&&H(p.directiveName,p.require,R,Da),y);var lb=e;Z&&(Z.template||null===Z.templateUrl)&&(lb=ta);a&&a(lb,h.childNodes,void 0,m);for(q=n.length-1;0<=q;q--)p=n[q],jb(p,p.isolateScope?ta:e,R,g,p.require&&H(p.directiveName,
p.require,R,Da),y);c(Da,function(a){a=a.instance;D(a.$postLink)&&a.$postLink()})}l=l||{};for(var M=-Number.MAX_VALUE,t=l.newScopeDirective,u=l.controllerDirectives,Z=l.newIsolateScopeDirective,qa=l.templateDirective,ta=l.nonTlbTranscludeDirective,w=!1,Da=!1,La=l.hasElementTranscludeDirective,R=d.$$element=N(b),y,Db,B,lb=e,A,qb=!1,E=!1,C,F=0,Nd=a.length;F<Nd;F++){y=a[F];var z=y.$$start,ha=y.$$end;z&&(R=tb(b,z,ha));B=void 0;if(M>y.priority)break;if(C=y.scope)y.templateUrl||(v(C)?(Pa("new/isolated scope",
Z||t,y,R),Z=y):Pa("new/isolated scope",Z,y,R)),t=t||y;Db=y.name;if(!qb&&(y.replace&&(y.templateUrl||y.template)||y.transclude&&!y.$$tlb)){for(C=F+1;qb=a[C++];)if(qb.transclude&&!qb.$$tlb||qb.replace&&(qb.templateUrl||qb.template)){E=!0;break}qb=!0}!y.templateUrl&&y.controller&&(C=y.controller,u=u||ca(),Pa("'"+Db+"' controller",u[Db],y,R),u[Db]=y);if(C=y.transclude)if(w=!0,y.$$tlb||(Pa("transclusion",ta,y,R),ta=y),"element"==C)La=!0,M=y.priority,B=R,R=d.$$element=N(X.$$createComment(Db,d[Db])),b=R[0],
V(g,pb.call(B,0),b),B[0].$$parentNode=B[0].parentNode,lb=Oa(E,B,e,M,m&&m.name,{nonTlbTranscludeDirective:ta});else{var I=ca();B=N(zc(b)).contents();if(v(C)){B=[];var L=ca(),J=ca();c(C,function(a,b){var c="?"===a.charAt(0);a=c?a.substring(1):a;L[a]=b;I[b]=null;J[b]=c});c(R.contents(),function(a){var b=L[Xa(p(a))];b?(J[b]=!0,I[b]=I[b]||[],I[b].push(a)):B.push(a)});c(J,function(a,b){if(!a)throw Ka("reqslot","Required transclusion slot `{0}` was not filled.",b);});for(var ag in I)I[ag]&&(I[ag]=Oa(E,I[ag],
e))}R.empty();lb=Oa(E,B,e,void 0,void 0,{needsNewScope:y.$$isolateScope||y.$$newScope});lb.$$slots=I}if(y.template)if(Da=!0,Pa("template",qa,y,R),qa=y,C=D(y.template)?y.template(R,d):y.template,C=ja(C),y.replace){m=y;B=Dd.test(C)?xa(Ma(y.templateNamespace,pa(C))):[];b=B[0];if(1!=B.length||1!==b.nodeType)throw Ka("tplrt","Template for directive '{0}' must have exactly one root element. {1}",Db,"");V(g,R,b);Nd={$attr:{}};C=T(b,[],Nd);var xg=a.splice(F+1,a.length-(F+1));(Z||t)&&Y(C,Z,t);a=a.concat(C).concat(xg);
Wa(d,Nd);Nd=a.length}else R.html(C);if(y.templateUrl)Da=!0,Pa("template",qa,y,R),qa=y,y.replace&&(m=y),r=la(a.splice(F,a.length-F),R,d,g,w&&lb,k,n,{controllerDirectives:u,newScopeDirective:t!==y&&t,newIsolateScopeDirective:Z,templateDirective:qa,nonTlbTranscludeDirective:ta}),Nd=a.length;else if(y.compile)try{A=y.compile(R,d,lb),D(A)?q(null,A,z,ha):A&&q(A.pre,A.post,z,ha)}catch(O){h(O,ra(R))}y.terminal&&(r.terminal=!0,M=Math.max(M,y.priority))}r.scope=t&&!0===t.scope;r.transcludeOnThisElement=w;r.templateOnThisElement=
Da;r.transclude=lb;l.hasElementTranscludeDirective=La;return r}function H(a,b,d,e){var f;if(E(b)){var h=b.match(y);b=b.substring(h[0].length);var g=h[1]||h[3],h="?"===h[2];"^^"===g?d=d.parent():f=(f=e&&e[b])&&f.instance;if(!f){var m="$"+b+"Controller";f=g?d.inheritedData(m):d.data(m)}if(!f&&!h)throw Ka("ctreq","Controller '{0}', required by directive '{1}', can't be found!",b,a);}else if(Q(b))for(f=[],g=0,h=b.length;g<h;g++)f[g]=H(a,b[g],d,e);else v(b)&&(f={},c(b,function(b,c){f[c]=H(a,b,d,e)}));
return f||null}function P(a,b,c,d,e,f,h){var g=ca(),m;for(m in d){var k=d[m],n={$scope:k===h||k.$$isolateScope?e:f,$element:a,$attrs:b,$transclude:c},l=k.controller;"@"==l&&(l=b[k.name]);n=t(l,n,!0,k.controllerAs);g[k.name]=n;a.data("$"+k.name+"Controller",n.instance)}return g}function Y(a,b,c){for(var d=0,e=a.length;d<e;d++)a[d]=n(a[d],{$$isolateScope:b,$$newScope:c})}function ea(b,c,d,f,g,k,l){if(c===g)return null;g=null;if(m.hasOwnProperty(c)){var q;c=a.get(c+"Directive");for(var r=0,M=c.length;r<
M;r++)try{if(q=c[r],(x(f)||f>q.priority)&&-1!=q.restrict.indexOf(d)){k&&(q=n(q,{$$start:k,$$end:l}));if(!q.$$bindings){var t=q,u=q,Z=q.name,p={isolateScope:null,bindToController:null};v(u.scope)&&(!0===u.bindToController?(p.bindToController=e(u.scope,Z,!0),p.isolateScope={}):p.isolateScope=e(u.scope,Z,!1));v(u.bindToController)&&(p.bindToController=e(u.bindToController,Z,!0));if(v(p.bindToController)){var qa=u.controller,w=u.controllerAs;if(!qa)throw Ka("noctrl","Cannot bind to controller without directive '{0}'s controller.",
Z);if(!$c(qa,w))throw Ka("noident","Cannot bind to controller without identifier for directive '{0}'.",Z);}var La=t.$$bindings=p;v(La.isolateScope)&&(q.$$isolateBindings=La.isolateScope)}b.push(q);g=q}}catch(R){h(R)}}return g}function ga(b){if(m.hasOwnProperty(b))for(var c=a.get(b+"Directive"),d=0,e=c.length;d<e;d++)if(b=c[d],b.multiElement)return!0;return!1}function Wa(a,b){var d=b.$attr,e=a.$attr,f=a.$$element;c(a,function(c,e){"$"!=e.charAt(0)&&(b[e]&&b[e]!==c&&(c+=("style"===e?";":" ")+b[e]),
a.$set(e,c,!0,d[e]))});c(b,function(b,c){"class"==c?(I(f,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==c?(f.attr("style",f.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==c.charAt(0)||a.hasOwnProperty(c)||(a[c]=b,e[c]=d[c])})}function la(a,b,d,e,f,h,m,k){var l=[],q,r,M=b[0],t=a.shift(),u=n(t,{templateUrl:null,transclude:null,replace:null,$$originalDirective:t}),Z=D(t.templateUrl)?t.templateUrl(b,d):t.templateUrl,p=t.templateNamespace;b.empty();g(Z).then(function(g){var n,
x;g=ja(g);if(t.replace){g=Dd.test(g)?xa(Ma(p,pa(g))):[];n=g[0];if(1!=g.length||1!==n.nodeType)throw Ka("tplrt","Template for directive '{0}' must have exactly one root element. {1}",t.name,Z);g={$attr:{}};V(e,b,n);var qa=T(n,[],g);v(t.scope)&&Y(qa,!0);a=qa.concat(a);Wa(d,g)}else n=M,b.html(g);a.unshift(u);q=G(a,n,d,f,b,t,h,m,k);c(e,function(a,c){a==n&&(e[c]=b[0])});for(r=L(b[0].childNodes,f);l.length;){g=l.shift();x=l.shift();var ta=l.shift(),w=l.shift(),qa=b[0];if(!g.$$destroyed){if(x!==M){var Da=
x.className;k.hasElementTranscludeDirective&&t.replace||(qa=zc(n));V(ta,N(x),qa);I(N(qa),Da)}x=q.transcludeOnThisElement?O(g,q.transclude,w):w;q(r,g,qa,e,x)}}l=null});return function(a,b,c,d,e){a=e;b.$$destroyed||(l?l.push(b,c,d,a):(q.transcludeOnThisElement&&(a=O(b,q.transclude,e)),q(r,b,c,d,a)))}}function Hb(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function Pa(a,b,c,d){function e(a){return a?" (module: "+a+")":""}if(b)throw Ka("multidir",
"Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",b.name,e(b.$$moduleName),c.name,e(c.$$moduleName),a,ra(d));}function S(a,c){var d=b(c,!0);d&&a.push({priority:0,compile:function(a){a=a.parent();var b=!!a.length;b&&X.$$addBindingClass(a);return function(a,c){var e=c.parent();b||X.$$addBindingClass(e);X.$$addBindingInfo(e,d.expressions);a.$watch(d,function(a){c[0].nodeValue=a})}}})}function Ma(a,b){a=na(a||"html");switch(a){case "svg":case "math":var c=d.document.createElement("div");c.innerHTML=
"<"+a+">"+b+"</"+a+">";return c.childNodes[0].childNodes;default:return b}}function ba(a,b){if("srcdoc"==b)return qa.HTML;var c=p(a);if("xlinkHref"==b||"form"==c&&"action"==b||"img"!=c&&("src"==b||"ngSrc"==b))return qa.RESOURCE_URL}function ya(a,c,d,e,f){var h=ba(a,e);f=u[e]||f;var g=b(d,!0,h,f);if(g){if("multiple"===e&&"select"===p(a))throw Ka("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",ra(a));c.push({priority:100,compile:function(){return{pre:function(a,c,m){c=
m.$$observers||(m.$$observers=ca());if(B.test(e))throw Ka("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var k=m[e];k!==d&&(g=k&&b(k,!0,h,f),d=k);g&&(m[e]=g(a),(c[e]||(c[e]=[])).$$inter=!0,(m.$$observers&&m.$$observers[e].$$scope||a).$watch(g,function(a,b){"class"===e&&a!=b?m.$updateClass(a,b):m.$set(e,a)}))}}}})}}function V(a,b,c){var e=b[0],f=b.length,h=e.parentNode,g,m;if(a)for(g=0,m=a.length;g<
m;g++)if(a[g]==e){a[g++]=c;m=g+f-1;for(var k=a.length;g<k;g++,m++)m<k?a[g]=a[m]:delete a[g];a.length-=f-1;a.context===e&&(a.context=c);break}h&&h.replaceChild(c,e);a=d.document.createDocumentFragment();for(g=0;g<f;g++)a.appendChild(b[g]);N.hasData(e)&&(N.data(c,N.data(e)),N(e).off("$destroy"));N.cleanData(a.querySelectorAll("*"));for(g=1;g<f;g++)delete b[g];b[0]=c;b.length=1}function Ba(a,b){return f(function(){return a.apply(null,arguments)},a,b)}function jb(a,b,c,d,e,f){try{a(b,c,d,e,f)}catch(g){h(g,
ra(c))}}function Ga(a,d,e,f,h){function g(b,c,d){D(e.$onChanges)&&c!==d&&(ka||(a.$$postDigest(z),ka=[]),l||(l={},ka.push(m)),l[b]&&(d=l[b].previousValue),l[b]=new Rb(d,c))}function m(){e.$onChanges(l);l=void 0}var k=[],n={},l;c(f,function(c,f){var m=c.attrName,l=c.optional,r,t,u,Z;switch(c.mode){case "@":l||Bb.call(d,m)||(e[f]=d[m]=void 0);d.$observe(m,function(a){if(E(a)||J(a))g(f,a,e[f]),e[f]=a});d.$$observers[m].$$scope=a;r=d[m];E(r)?e[f]=b(r)(a):J(r)&&(e[f]=r);n[f]=new Rb(Ca,e[f]);break;case "=":if(!Bb.call(d,
m)){if(l)break;d[m]=void 0}if(l&&!d[m])break;t=M(d[m]);Z=t.literal?aa:function(a,b){return a===b||a!==a&&b!==b};u=t.assign||function(){r=e[f]=t(a);throw Ka("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",d[m],m,h.name);};r=e[f]=t(a);l=function(b){Z(b,e[f])||(Z(b,r)?u(a,b=e[f]):e[f]=b);return r=b};l.$stateful=!0;l=c.collection?a.$watchCollection(d[m],l):a.$watch(M(d[m],l),null,t.literal);k.push(l);break;case "<":if(!Bb.call(d,m)){if(l)break;d[m]=void 0}if(l&&
!d[m])break;t=M(d[m]);e[f]=t(a);n[f]=new Rb(Ca,e[f]);l=a.$watch(t,function(a,b){a===b&&(b=e[f]);g(f,a,b);e[f]=a},t.literal);k.push(l);break;case "&":t=d.hasOwnProperty(m)?M(d[m]):q;if(t===q&&l)break;e[f]=function(b){return t(a,b)}}});return{initialChanges:n,removeWatches:k.length&&function(){for(var a=0,b=k.length;a<b;++a)k[a]()}}}var mb=/^\w/,Qa=d.document.createElement("div"),da=F,ka;$f.prototype={$normalize:Xa,$addClass:function(a){a&&0<a.length&&w.addClass(this.$$element,a)},$removeClass:function(a){a&&
0<a.length&&w.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=Lb(a,b);c&&c.length&&w.addClass(this.$$element,c);(c=Lb(b,a))&&c.length&&w.removeClass(this.$$element,c)},$set:function(a,b,d,e){var f=Na(this.$$element[0],a),g=gd[a],m=a;f?(this.$$element.prop(a,b),e=f):g&&(this[g]=b,m=g);this[a]=b;e?this.$attr[a]=e:(e=this.$attr[a])||(this.$attr[a]=e=Ha(a,"-"));f=p(this.$$element);if("a"===f&&("href"===a||"xlinkHref"===a)||"img"===f&&"src"===a)this[a]=b=A(b,"src"===a);else if("img"===
f&&"srcset"===a){for(var f="",g=pa(b),k=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,k=/\s/.test(g)?k:/(,)/,g=g.split(k),k=Math.floor(g.length/2),n=0;n<k;n++)var l=2*n,f=f+A(pa(g[l]),!0),f=f+(" "+pa(g[l+1]));g=pa(g[2*n]).split(/\s/);f+=A(pa(g[0]),!0);2===g.length&&(f+=" "+pa(g[1]));this[a]=b=f}!1!==d&&(null===b||x(b)?this.$$element.removeAttr(e):mb.test(e)?this.$$element.attr(e,b):ha(this.$$element[0],e,b));(a=this.$$observers)&&c(a[m],function(a){try{a(b)}catch(c){h(c)}})},$observe:function(a,b){var c=
this,d=c.$$observers||(c.$$observers=ca()),e=d[a]||(d[a]=[]);e.push(b);Z.$evalAsync(function(){e.$$inter||!c.hasOwnProperty(a)||x(c[a])||b(c[a])});return function(){W(e,b)}}};var fa=b.startSymbol(),ia=b.endSymbol(),ja="{{"==fa&&"}}"==ia?r:function(a){return a.replace(/\{\{/g,fa).replace(/}}/g,ia)},ma=/^ngAttr[A-Z]/,oa=/^(.+)Start$/;X.$$addBindingInfo=C?function(a,b){var c=a.data("$binding")||[];Q(b)?c=c.concat(b):c.push(b);a.data("$binding",c)}:q;X.$$addBindingClass=C?function(a){I(a,"ng-binding")}:
q;X.$$addScopeInfo=C?function(a,b,c,d){a.data(c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope",b)}:q;X.$$addScopeClass=C?function(a,b){I(a,b?"ng-isolate-scope":"ng-scope")}:q;X.$$createComment=function(a,b){var c="";C&&(c=" "+(a||"")+": "+(b||"")+" ");return d.document.createComment(c)};return X}]}function Rb(a,b){this.previousValue=a;this.currentValue=b}function Xa(a){return bc(a.replace(cb,""))}function Lb(a,b){var c="",d=a.split(/\s+/),e=b.split(/\s+/),f=0;a:for(;f<d.length;f++){for(var h=
d[f],g=0;g<e.length;g++)if(h==e[g])continue a;c+=(0<c.length?" ":"")+h}return c}function xa(a){a=N(a);var b=a.length;if(1>=b)return a;for(;b--;)8===a[b].nodeType&&Oe.call(a,b,1);return a}function $c(a,b){if(b&&E(b))return b;if(E(a)){var c=$e.exec(a);if(c)return c[3]}}function td(){var b={},c=!1;this.has=function(a){return b.hasOwnProperty(a)};this.register=function(a,c){Qa(a,"controller");v(a)?f(b,a):b[a]=c};this.allowGlobals=function(){c=!0};this.$get=["$injector","$window",function(d,e){function h(b,
c,d,e){if(!b||!v(b.$scope))throw a("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",e,c);b.$scope[c]=d}return function(a,g,m,k){var n,l,q;m=!0===m;k&&E(k)&&(q=k);if(E(a)){k=a.match($e);if(!k)throw Af("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",a);l=k[1];q=q||k[3];a=b.hasOwnProperty(l)?b[l]:Ma(g.$scope,l,!0)||(c?Ma(e,l,!0):void 0);la(a,l,!0)}if(m)return m=(Q(a)?a[a.length-1]:a).prototype,n=
Object.create(m||null),q&&h(g,q,n,l||a.name),f(function(){var b=d.invoke(a,n,g,l);b!==n&&(v(b)||D(b))&&(n=b,q&&h(g,q,n,l||a.name));return n},{instance:n,identifier:q});n=d.instantiate(a,g,l);q&&h(g,q,n,l||a.name);return n}}]}function qc(){this.$get=["$window",function(a){return N(a.document)}]}function ad(){this.$get=["$log",function(a){return function(b,c){a.error.apply(a,arguments)}}]}function rc(a){return v(a)?B(a)?a.toISOString():va(a):a}function Mb(){this.$get=function(){return function(a){if(!a)return"";
var b=[];l(a,function(a,d){null===a||x(a)||(Q(a)?c(a,function(a){b.push(U(d)+"="+U(rc(a)))}):b.push(U(d)+"="+U(rc(a))))});return b.join("&")}}}function Yb(){this.$get=function(){return function(a){function b(a,e,f){null===a||x(a)||(Q(a)?c(a,function(a,c){b(a,e+"["+(v(a)?c:"")+"]")}):v(a)&&!B(a)?l(a,function(a,c){b(a,e+(f?"":"[")+c+(f?"":"]"))}):d.push(U(e)+"="+U(rc(a))))}if(!a)return"";var d=[];b(a,"",!0);return d.join("&")}}}function Va(a,b){if(E(a)){var c=a.replace(Gd,"").trim();if(c){var d=b("Content-Type");
(d=d&&0===d.indexOf(Yd))||(d=(d=c.match(Vd))&&af[d[0]].test(c));d&&(a=Za(c))}}return a}function rb(a){var b=ca(),d;E(a)?c(a.split("\n"),function(a){d=a.indexOf(":");var c=na(pa(a.substr(0,d)));a=pa(a.substr(d+1));c&&(b[c]=b[c]?b[c]+", "+a:a)}):v(a)&&c(a,function(a,c){var d=na(c),e=pa(a);d&&(b[d]=b[d]?b[d]+", "+e:e)});return b}function bd(a){var b;return function(c){b||(b=rb(a));return c?(c=b[na(c)],void 0===c&&(c=null),c):b}}function Sa(a,b,d,e){if(D(e))return e(a,b,d);c(e,function(c){a=c(a,b,d)});
return a}function ec(){var b=this.defaults={transformResponse:[Va],transformRequest:[function(a){return v(a)&&"[object File]"!==eb.call(a)&&"[object Blob]"!==eb.call(a)&&"[object FormData]"!==eb.call(a)?va(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:ga(oe),put:ga(oe),patch:ga(oe)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},d=!1;this.useApplyAsync=function(a){return w(a)?(d=!!a,this):d};var e=!0;this.useLegacyPromiseExtensions=
function(a){return w(a)?(e=!!a,this):e};var h=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(g,m,k,n,l,q){function r(d){function h(a){var b=f({},a);b.data=Sa(a.data,a.headers,a.status,m.transformResponse);a=a.status;return 200<=a&&300>a?b:l.reject(b)}function g(a,b){var d,e={};c(a,function(a,c){D(a)?(d=a(b),null!=d&&(e[c]=d)):e[c]=a});return e}if(!v(d))throw a("$http")("badreq","Http request configuration must be an object.  Received: {0}",
d);if(!E(d.url))throw a("$http")("badreq","Http request configuration url must be a string.  Received: {0}",d.url);var m=f({method:"get",transformRequest:b.transformRequest,transformResponse:b.transformResponse,paramSerializer:b.paramSerializer},d);m.headers=function(a){var c=b.headers,d=f({},a.headers),e,h,m,c=f({},c.common,c[na(a.method)]);a:for(e in c){h=na(e);for(m in d)if(na(m)===h)continue a;d[e]=c[e]}return g(d,ga(a))}(d);m.method=dd(m.method);m.paramSerializer=E(m.paramSerializer)?q.get(m.paramSerializer):
m.paramSerializer;var k=[function(a){var d=a.headers,e=Sa(a.data,bd(d),void 0,a.transformRequest);x(e)&&c(d,function(a,b){"content-type"===na(b)&&delete d[b]});x(a.withCredentials)&&!x(b.withCredentials)&&(a.withCredentials=b.withCredentials);return t(a,e).then(h,h)},void 0],n=l.when(m);for(c(y,function(a){(a.request||a.requestError)&&k.unshift(a.request,a.requestError);(a.response||a.responseError)&&k.push(a.response,a.responseError)});k.length;){d=k.shift();var u=k.shift(),n=n.then(d,u)}e?(n.success=
function(a){la(a,"fn");n.then(function(b){a(b.data,b.status,b.headers,m)});return n},n.error=function(a){la(a,"fn");n.then(null,function(b){a(b.data,b.status,b.headers,m)});return n}):(n.success=Hd("success"),n.error=Hd("error"));return n}function t(a,e){function f(a){if(a){var b={};c(a,function(a,c){b[c]=function(b){function c(){a(b)}d?n.$applyAsync(c):n.$$phase?c():n.$apply(c)}});return b}}function h(a,b,c,e){function f(){k(b,a,c,e)}R&&(200<=a&&300>a?R.put(qb,[a,b,rb(c),e]):R.remove(qb));d?n.$applyAsync(f):
(f(),n.$$phase||n.$apply())}function k(b,c,d,e){c=-1<=c?c:0;(200<=c&&300>c?ta.resolve:ta.reject)({data:b,status:c,headers:bd(d),config:a,statusText:e})}function q(a){k(a.data,a.status,ga(a.headers()),a.statusText)}function qa(){var b=r.pendingRequests.indexOf(a);-1!==b&&r.pendingRequests.splice(b,1)}var ta=l.defer(),y=ta.promise,R,B,A=a.headers,qb=u(a.url,a.paramSerializer(a.params));r.pendingRequests.push(a);y.then(qa,qa);!a.cache&&!b.cache||!1===a.cache||"GET"!==a.method&&"JSONP"!==a.method||(R=
v(a.cache)?a.cache:v(b.cache)?b.cache:p);R&&(B=R.get(qb),w(B)?B&&D(B.then)?B.then(q,q):Q(B)?k(B[1],B[0],ga(B[2]),B[3]):k(B,200,{},"OK"):R.put(qb,y));x(B)&&((B=xb(a.url)?m()[a.xsrfCookieName||b.xsrfCookieName]:void 0)&&(A[a.xsrfHeaderName||b.xsrfHeaderName]=B),g(a.method,qb,e,h,A,a.timeout,a.withCredentials,a.responseType,f(a.eventHandlers),f(a.uploadEventHandlers)));return y}function u(a,b){0<b.length&&(a+=(-1==a.indexOf("?")?"?":"&")+b);return a}var p=k("$http");b.paramSerializer=E(b.paramSerializer)?
q.get(b.paramSerializer):b.paramSerializer;var y=[];c(h,function(a){y.unshift(E(a)?q.get(a):q.invoke(a))});r.pendingRequests=[];(function(a){c(arguments,function(a){r[a]=function(b,c){return r(f({},c||{},{method:a,url:b}))}})})("get","delete","head","jsonp");(function(a){c(arguments,function(a){r[a]=function(b,c,d){return r(f({},d||{},{method:a,url:b,data:c}))}})})("post","put","patch");r.defaults=b;return r}]}function lc(){this.$get=function(){return function(){return new d.XMLHttpRequest}}}function kc(){this.$get=
["$browser","$window","$document","$xhrFactory",function(a,b,c,d){return sc(a,d,a.defer,b.angular.callbacks,c[0])}]}function sc(a,b,d,e,f){function h(a,b,c){var d=f.createElement("script"),g=null;d.type="text/javascript";d.src=a;d.async=!0;g=function(a){d.removeEventListener("load",g,!1);d.removeEventListener("error",g,!1);f.body.removeChild(d);d=null;var h=-1,m="unknown";a&&("load"!==a.type||e[b].called||(a={type:"error"}),m=a.type,h="error"===a.type?404:200);c&&c(h,m)};d.addEventListener("load",
g,!1);d.addEventListener("error",g,!1);f.body.appendChild(d);return g}return function(f,g,m,k,n,l,r,t,u,p){function Da(){A&&A();v&&v.abort()}function y(b,c,e,f,h){w(C)&&d.cancel(C);A=v=null;b(c,e,f,h);a.$$completeOutstandingRequest(q)}a.$$incOutstandingRequestCount();g=g||a.url();if("jsonp"==na(f)){var B="_"+(e.counter++).toString(36);e[B]=function(a){e[B].data=a;e[B].called=!0};var A=h(g.replace("JSON_CALLBACK","angular.callbacks."+B),B,function(a,b){y(k,a,e[B].data,"",b);e[B]=q})}else{var v=b(f,
g);v.open(f,g,!0);c(n,function(a,b){w(a)&&v.setRequestHeader(b,a)});v.onload=function(){var a=v.statusText||"",b="response"in v?v.response:v.responseText,c=1223===v.status?204:v.status;0===c&&(c=b?200:"file"==Gb(g).protocol?404:0);y(k,c,b,v.getAllResponseHeaders(),a)};f=function(){y(k,-1,null,null,"")};v.onerror=f;v.onabort=f;c(u,function(a,b){v.addEventListener(b,a)});c(p,function(a,b){v.upload.addEventListener(b,a)});r&&(v.withCredentials=!0);if(t)try{v.responseType=t}catch(E){if("json"!==t)throw E;
}v.send(x(m)?null:m)}if(0<l)var C=d(Da,l);else l&&D(l.then)&&l.then(Da)}}function ud(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a};this.endSymbol=function(a){return a?(b=a,this):b};this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function h(a){return"\\\\\\"+a}function g(c){return c.replace(q,a).replace(r,b)}function m(a,b,c,d){var e;return e=a.$watch(function(a){e();return d(a)},b,c)}function k(h,q,r,u){function p(a){try{var b=a;a=r?e.getTrusted(r,b):e.valueOf(b);
var c;if(u&&!w(a))c=a;else if(null==a)c="";else{switch(typeof a){case "string":break;case "number":a=""+a;break;default:a=va(a)}c=a}return c}catch(f){d(Ab.interr(h,f))}}if(!h.length||-1===h.indexOf(a)){var y;q||(q=g(h),y=t(q),y.exp=h,y.expressions=[],y.$$watchDelegate=m);return y}u=!!u;var La,B,v=0,A=[],lb=[];y=h.length;for(var E=[],C=[];v<y;)if(-1!=(La=h.indexOf(a,v))&&-1!=(B=h.indexOf(b,La+n)))v!==La&&E.push(g(h.substring(v,La))),v=h.substring(La+n,B),A.push(v),lb.push(c(v,p)),v=B+l,C.push(E.length),
E.push("");else{v!==y&&E.push(g(h.substring(v)));break}r&&1<E.length&&Ab.throwNoconcat(h);if(!q||A.length){var F=function(a){for(var b=0,c=A.length;b<c;b++){if(u&&x(a[b]))return;E[C[b]]=a[b]}return E.join("")};return f(function(a){var b=0,c=A.length,e=Array(c);try{for(;b<c;b++)e[b]=lb[b](a);return F(e)}catch(f){d(Ab.interr(h,f))}},{exp:h,expressions:A,$$watchDelegate:function(a,b){var c;return a.$watchGroup(lb,function(d,e){var f=F(d);D(b)&&b.call(this,f,d!==e?c:f,a);c=f})}})}}var n=a.length,l=b.length,
q=new RegExp(a.replace(/./g,h),"g"),r=new RegExp(b.replace(/./g,h),"g");k.startSymbol=function(){return a};k.endSymbol=function(){return b};return k}]}function cd(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(a,b,c,d,e){function f(g,m,k,n){function l(){q?g.apply(null,r):g(p)}var q=4<arguments.length,r=q?pb.call(arguments,4):[],t=b.setInterval,u=b.clearInterval,p=0,x=w(n)&&!n,y=(x?d:c).defer(),La=y.promise;k=w(k)?k:0;La.$$intervalId=t(function(){x?e.defer(l):a.$evalAsync(l);y.notify(p++);
0<k&&p>=k&&(y.resolve(p),u(La.$$intervalId),delete h[La.$$intervalId]);x||a.$apply()},m);h[La.$$intervalId]=y;return La}var h={};f.cancel=function(a){return a&&a.$$intervalId in h?(h[a.$$intervalId].reject("canceled"),b.clearInterval(a.$$intervalId),delete h[a.$$intervalId],!0):!1};return f}]}function fb(a){a=a.split("/");for(var b=a.length;b--;)a[b]=Oa(a[b]);return a.join("/")}function we(a,b){var c=Gb(a);b.$$protocol=c.protocol;b.$$host=c.hostname;b.$$port=h(c.port)||pe[c.protocol]||null}function Sc(a,
b){var c="/"!==a.charAt(0);c&&(a="/"+a);var d=Gb(a);b.$$path=decodeURIComponent(c&&"/"===d.pathname.charAt(0)?d.pathname.substring(1):d.pathname);b.$$search=ha(d.search);b.$$hash=decodeURIComponent(d.hash);b.$$path&&"/"!=b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function gb(a,b){if(0===b.indexOf(a))return b.substr(a.length)}function Xb(a){var b=a.indexOf("#");return-1==b?a:a.substr(0,b)}function xc(a){return a.replace(/(#.+)|#$/,"$1")}function od(a,b,c){this.$$html5=!0;c=c||"";we(a,this);this.$$parse=
function(a){var c=gb(b,a);if(!E(c))throw Ec("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',a,b);Sc(c,this);this.$$path||(this.$$path="/");this.$$compose()};this.$$compose=function(){var a=tb(this.$$search),c=this.$$hash?"#"+Oa(this.$$hash):"";this.$$url=fb(this.$$path)+(a?"?"+a:"")+c;this.$$absUrl=b+this.$$url.substr(1)};this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,h;w(f=gb(a,d))?(h=f,h=w(f=gb(c,f))?b+(gb("/",f)||f):a+h):w(f=gb(b,d))?h=b+f:b==
d+"/"&&(h=b);h&&this.$$parse(h);return!!h}}function pd(a,b,c){we(a,this);this.$$parse=function(d){var e=gb(a,d)||gb(b,d),f;x(e)||"#"!==e.charAt(0)?this.$$html5?f=e:(f="",x(e)&&(a=d,this.replace())):(f=gb(c,e),x(f)&&(f=e));Sc(f,this);d=this.$$path;var e=a,h=/^\/[A-Z]:(\/.*)/;0===f.indexOf(e)&&(f=f.replace(e,""));h.exec(f)||(d=(f=h.exec(d))?f[1]:d);this.$$path=d;this.$$compose()};this.$$compose=function(){var b=tb(this.$$search),d=this.$$hash?"#"+Oa(this.$$hash):"";this.$$url=fb(this.$$path)+(b?"?"+
b:"")+d;this.$$absUrl=a+(this.$$url?c+this.$$url:"")};this.$$parseLinkUrl=function(b,c){return Xb(a)==Xb(b)?(this.$$parse(b),!0):!1}}function Od(a,b,c){this.$$html5=!0;pd.apply(this,arguments);this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,h;a==Xb(d)?f=d:(h=gb(b,d))?f=a+c+h:b===d+"/"&&(f=b);f&&this.$$parse(f);return!!f};this.$$compose=function(){var b=tb(this.$$search),d=this.$$hash?"#"+Oa(this.$$hash):"";this.$$url=fb(this.$$path)+(b?"?"+b:"")+d;this.$$absUrl=
a+c+this.$$url}}function Uc(a){return function(){return this[a]}}function Pd(a,b){return function(c){if(x(c))return this[a];this[a]=b(c);this.$$compose();return this}}function ye(){var a="",b={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(b){return w(b)?(a=b,this):a};this.html5Mode=function(a){return J(a)?(b.enabled=a,this):v(a)?(J(a.enabled)&&(b.enabled=a.enabled),J(a.requireBase)&&(b.requireBase=a.requireBase),J(a.rewriteLinks)&&(b.rewriteLinks=a.rewriteLinks),this):b};this.$get=
["$rootScope","$browser","$sniffer","$rootElement","$window",function(c,d,e,f,h){function g(a,b,c){var e=k.url(),f=k.$$state;try{d.url(a,b,c),k.$$state=d.state()}catch(h){throw k.url(e),k.$$state=f,h;}}function m(a,b){c.$broadcast("$locationChangeSuccess",k.absUrl(),a,k.$$state,b)}var k,n;n=d.baseHref();var l=d.url(),q;if(b.enabled){if(!n&&b.requireBase)throw Ec("nobase","$location in HTML5 mode requires a <base> tag to be present!");q=l.substring(0,l.indexOf("/",l.indexOf("//")+2))+(n||"/");n=e.history?
od:Od}else q=Xb(l),n=pd;var r=q.substr(0,Xb(q).lastIndexOf("/")+1);k=new n(q,r,"#"+a);k.$$parseLinkUrl(l,l);k.$$state=d.state();var t=/^\s*(javascript|mailto):/i;f.on("click",function(a){if(b.rewriteLinks&&!a.ctrlKey&&!a.metaKey&&!a.shiftKey&&2!=a.which&&2!=a.button){for(var e=N(a.target);"a"!==p(e[0]);)if(e[0]===f[0]||!(e=e.parent())[0])return;var g=e.prop("href"),m=e.attr("href")||e.attr("xlink:href");v(g)&&"[object SVGAnimatedString]"===g.toString()&&(g=Gb(g.animVal).href);t.test(g)||!g||e.attr("target")||
a.isDefaultPrevented()||!k.$$parseLinkUrl(g,m)||(a.preventDefault(),k.absUrl()!=d.url()&&(c.$apply(),h.angular["ff-684208-preventDefault"]=!0))}});xc(k.absUrl())!=xc(l)&&d.url(k.absUrl(),!0);var u=!0;d.onUrlChange(function(a,b){x(gb(r,a))?h.location.href=a:(c.$evalAsync(function(){var d=k.absUrl(),e=k.$$state,f;a=xc(a);k.$$parse(a);k.$$state=b;f=c.$broadcast("$locationChangeStart",a,d,b,e).defaultPrevented;k.absUrl()===a&&(f?(k.$$parse(d),k.$$state=e,g(d,!1,e)):(u=!1,m(d,e)))}),c.$$phase||c.$digest())});
c.$watch(function(){var a=xc(d.url()),b=xc(k.absUrl()),f=d.state(),h=k.$$replace,n=a!==b||k.$$html5&&e.history&&f!==k.$$state;if(u||n)u=!1,c.$evalAsync(function(){var b=k.absUrl(),d=c.$broadcast("$locationChangeStart",b,a,k.$$state,f).defaultPrevented;k.absUrl()===b&&(d?(k.$$parse(a),k.$$state=f):(n&&g(b,h,f===k.$$state?null:k.$$state),m(a,f)))});k.$$replace=!1});return k}]}function ze(){var a=!0,b=this;this.debugEnabled=function(b){return w(b)?(a=b,this):a};this.$get=["$window",function(d){function e(a){a instanceof
Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line));return a}function f(a){var b=d.console||{},h=b[a]||b.log||q;a=!1;try{a=!!h.apply}catch(g){}return a?function(){var a=[];c(arguments,function(b){a.push(e(b))});return h.apply(b,a)}:function(a,b){h(a,null==b?"":b)}}return{log:f("log"),info:f("info"),warn:f("warn"),error:f("error"),debug:function(){var c=f("debug");return function(){a&&c.apply(b,
arguments)}}()}}]}function mc(a,b){if("__defineGetter__"===a||"__defineSetter__"===a||"__lookupGetter__"===a||"__lookupSetter__"===a||"__proto__"===a)throw Ya("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",b);return a}function Ae(a){return a+""}function Sb(a,b){if(a){if(a.constructor===a)throw Ya("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a.window===a)throw Ya("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",
b);if(a.children&&(a.nodeName||a.prop&&a.attr&&a.find))throw Ya("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",b);if(a===Object)throw Ya("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",b);}return a}function Qd(a,b){if(a){if(a.constructor===a)throw Ya("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a===Wd||a===ae||a===ed)throw Ya("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",
b);}}function yc(a,b){if(a&&(a===(0).constructor||a===(!1).constructor||a==="".constructor||a==={}.constructor||a===[].constructor||a===Function.constructor))throw Ya("isecaf","Assigning to a constructor is disallowed! Expression: {0}",b);}function Be(a,b){return"undefined"!==typeof a?a:b}function Ce(a,b){return"undefined"===typeof a?b:"undefined"===typeof b?a:a+b}function Aa(a,b){var d,e;switch(a.type){case G.Program:d=!0;c(a.body,function(a){Aa(a.expression,b);d=d&&a.expression.constant});a.constant=
d;break;case G.Literal:a.constant=!0;a.toWatch=[];break;case G.UnaryExpression:Aa(a.argument,b);a.constant=a.argument.constant;a.toWatch=a.argument.toWatch;break;case G.BinaryExpression:Aa(a.left,b);Aa(a.right,b);a.constant=a.left.constant&&a.right.constant;a.toWatch=a.left.toWatch.concat(a.right.toWatch);break;case G.LogicalExpression:Aa(a.left,b);Aa(a.right,b);a.constant=a.left.constant&&a.right.constant;a.toWatch=a.constant?[]:[a];break;case G.ConditionalExpression:Aa(a.test,b);Aa(a.alternate,
b);Aa(a.consequent,b);a.constant=a.test.constant&&a.alternate.constant&&a.consequent.constant;a.toWatch=a.constant?[]:[a];break;case G.Identifier:a.constant=!1;a.toWatch=[a];break;case G.MemberExpression:Aa(a.object,b);a.computed&&Aa(a.property,b);a.constant=a.object.constant&&(!a.computed||a.property.constant);a.toWatch=[a];break;case G.CallExpression:d=a.filter?!b(a.callee.name).$stateful:!1;e=[];c(a.arguments,function(a){Aa(a,b);d=d&&a.constant;a.constant||e.push.apply(e,a.toWatch)});a.constant=
d;a.toWatch=a.filter&&!b(a.callee.name).$stateful?e:[a];break;case G.AssignmentExpression:Aa(a.left,b);Aa(a.right,b);a.constant=a.left.constant&&a.right.constant;a.toWatch=[a];break;case G.ArrayExpression:d=!0;e=[];c(a.elements,function(a){Aa(a,b);d=d&&a.constant;a.constant||e.push.apply(e,a.toWatch)});a.constant=d;a.toWatch=e;break;case G.ObjectExpression:d=!0;e=[];c(a.properties,function(a){Aa(a.value,b);d=d&&a.value.constant;a.value.constant||e.push.apply(e,a.value.toWatch)});a.constant=d;a.toWatch=
e;break;case G.ThisExpression:a.constant=!1;a.toWatch=[];break;case G.LocalsExpression:a.constant=!1,a.toWatch=[]}}function Tb(a){if(1==a.length){a=a[0].expression;var b=a.toWatch;return 1!==b.length?b:b[0]!==a?b:void 0}}function De(a){return a.type===G.Identifier||a.type===G.MemberExpression}function Ee(a){if(1===a.body.length&&De(a.body[0].expression))return{type:G.AssignmentExpression,left:a.body[0].expression,right:{type:G.NGValueParameter},operator:"="}}function Fe(a){return 0===a.body.length||
1===a.body.length&&(a.body[0].expression.type===G.Literal||a.body[0].expression.type===G.ArrayExpression||a.body[0].expression.type===G.ObjectExpression)}function ja(a,b){this.astBuilder=a;this.$filter=b}function Vc(a,b){this.astBuilder=a;this.$filter=b}function Ub(a){return"constructor"==a}function qd(a){return D(a.valueOf)?a.valueOf():Cf.call(a)}function ib(){var a=ca(),b=ca(),d={"true":!0,"false":!1,"null":null,undefined:void 0},e,f;this.addLiteral=function(a,b){d[a]=b};this.setIdentifierFns=function(a,
b){e=a;f=b;return this};this.$get=["$filter",function(h){function g(c,d,e){var f,k,p;e=e||B;switch(typeof c){case "string":p=c=c.trim();var w=e?b:a;f=w[p];if(!f){":"===c.charAt(0)&&":"===c.charAt(1)&&(k=!0,c=c.substring(2));f=e?y:x;var qa=new qe(f);f=(new re(qa,h,f)).parse(c);f.constant?f.$$watchDelegate=t:k?f.$$watchDelegate=f.literal?r:l:f.inputs&&(f.$$watchDelegate=n);e&&(f=m(f));w[p]=f}return u(f,d);case "function":return u(c,d);default:return u(q,d)}}function m(a){function b(c,d,e,f){var h=B;
B=!0;try{return a(c,d,e,f)}finally{B=h}}if(!a)return a;b.$$watchDelegate=a.$$watchDelegate;b.assign=m(a.assign);b.constant=a.constant;b.literal=a.literal;for(var c=0;a.inputs&&c<a.inputs.length;++c)a.inputs[c]=m(a.inputs[c]);b.inputs=a.inputs;return b}function k(a,b){return null==a||null==b?a===b:"object"===typeof a&&(a=qd(a),"object"===typeof a)?!1:a===b||a!==a&&b!==b}function n(a,b,c,d,e){var f=d.inputs,h;if(1===f.length){var g=k,f=f[0];return a.$watch(function(a){var b=f(a);k(b,g)||(h=d(a,void 0,
void 0,[b]),g=b&&qd(b));return h},b,c,e)}for(var m=[],l=[],q=0,r=f.length;q<r;q++)m[q]=k,l[q]=null;return a.$watch(function(a){for(var b=!1,c=0,e=f.length;c<e;c++){var g=f[c](a);if(b||(b=!k(g,m[c])))l[c]=g,m[c]=g&&qd(g)}b&&(h=d(a,void 0,void 0,l));return h},b,c,e)}function l(a,b,c,d){var e,f;return e=a.$watch(function(a){return d(a)},function(a,c,d){f=a;D(b)&&b.apply(this,arguments);w(a)&&d.$$postDigest(function(){w(f)&&e()})},c)}function r(a,b,d,e){function f(a){var b=!0;c(a,function(a){w(a)||(b=
!1)});return b}var h,g;return h=a.$watch(function(a){return e(a)},function(a,c,d){g=a;D(b)&&b.call(this,a,c,d);f(a)&&d.$$postDigest(function(){f(g)&&h()})},d)}function t(a,b,c,d){var e;return e=a.$watch(function(a){e();return d(a)},b,c)}function u(a,b){if(!b)return a;var c=a.$$watchDelegate,d=!1,c=c!==r&&c!==l?function(c,e,f,h){f=d&&h?h[0]:a(c,e,f,h);return b(f,c,e)}:function(c,d,e,f){e=a(c,d,e,f);c=b(e,c,d);return w(e)?c:e};a.$$watchDelegate&&a.$$watchDelegate!==n?c.$$watchDelegate=a.$$watchDelegate:
b.$stateful||(c.$$watchDelegate=n,d=!a.inputs,c.inputs=a.inputs?a.inputs:[a]);return c}var p=Nb().noUnsafeEval,x={csp:p,expensiveChecks:!1,literals:P(d),isIdentifierStart:D(e)&&e,isIdentifierContinue:D(f)&&f},y={csp:p,expensiveChecks:!0,literals:P(d),isIdentifierStart:D(e)&&e,isIdentifierContinue:D(f)&&f},B=!1;g.$$runningExpensiveChecks=function(){return B};return g}]}function vf(){this.$get=["$rootScope","$exceptionHandler",function(a,b){return xe(function(b){a.$evalAsync(b)},b)}]}function uf(){this.$get=
["$browser","$exceptionHandler",function(a,b){return xe(function(b){a.defer(b)},b)}]}function xe(b,d){function e(){this.$$state={status:0}}function h(a,b){return function(c){b.call(a,c)}}function g(a){!a.processScheduled&&a.pending&&(a.processScheduled=!0,b(function(){var b,c,e;e=a.pending;a.processScheduled=!1;a.pending=void 0;for(var f=0,h=e.length;f<h;++f){c=e[f][0];b=e[f][a.status];try{D(b)?c.resolve(b(a.value)):1===a.status?c.resolve(a.value):c.reject(a.value)}catch(g){c.reject(g),d(g)}}}))}
function m(){this.promise=new e}var k=a("$q",TypeError);f(e.prototype,{then:function(a,b,c){if(x(a)&&x(b)&&x(c))return this;var d=new m;this.$$state.pending=this.$$state.pending||[];this.$$state.pending.push([d,a,b,c]);0<this.$$state.status&&g(this.$$state);return d.promise},"catch":function(a){return this.then(null,a)},"finally":function(a,b){return this.then(function(b){return l(b,!0,a)},function(b){return l(b,!1,a)},b)}});f(m.prototype,{resolve:function(a){this.promise.$$state.status||(a===this.promise?
this.$$reject(k("qcycle","Expected promise to be resolved with value other than itself '{0}'",a)):this.$$resolve(a))},$$resolve:function(a){function b(a){m||(m=!0,f.$$resolve(a))}function c(a){m||(m=!0,f.$$reject(a))}var e,f=this,m=!1;try{if(v(a)||D(a))e=a&&a.then;D(e)?(this.promise.$$state.status=-1,e.call(a,b,c,h(this,this.notify))):(this.promise.$$state.value=a,this.promise.$$state.status=1,g(this.promise.$$state))}catch(k){c(k),d(k)}},reject:function(a){this.promise.$$state.status||this.$$reject(a)},
$$reject:function(a){this.promise.$$state.value=a;this.promise.$$state.status=2;g(this.promise.$$state)},notify:function(a){var c=this.promise.$$state.pending;0>=this.promise.$$state.status&&c&&c.length&&b(function(){for(var b,e,f=0,h=c.length;f<h;f++){e=c[f][0];b=c[f][3];try{e.notify(D(b)?b(a):a)}catch(g){d(g)}}})}});var n=function(a,b){var c=new m;b?c.resolve(a):c.reject(a);return c.promise},l=function(a,b,c){var d=null;try{D(c)&&(d=c())}catch(e){return n(e,!1)}return d&&D(d.then)?d.then(function(){return n(a,
b)},function(a){return n(a,!1)}):n(a,b)},q=function(a,b,c,d){var e=new m;e.resolve(a);return e.promise.then(b,c,d)},r=function(a){if(!D(a))throw k("norslvr","Expected resolverFn, got '{0}'",a);var b=new m;a(function(a){b.resolve(a)},function(a){b.reject(a)});return b.promise};r.prototype=e.prototype;r.defer=function(){var a=new m;a.resolve=h(a,a.resolve);a.reject=h(a,a.reject);a.notify=h(a,a.notify);return a};r.reject=function(a){var b=new m;b.reject(a);return b.promise};r.when=q;r.resolve=q;r.all=
function(a){var b=new m,d=0,e=Q(a)?[]:{};c(a,function(a,c){d++;q(a).then(function(a){e.hasOwnProperty(c)||(e[c]=a,--d||b.resolve(e))},function(a){e.hasOwnProperty(c)||b.reject(a)})});0===d&&b.resolve(e);return b.promise};return r}function Rd(){this.$get=["$window","$timeout",function(a,b){var c=a.requestAnimationFrame||a.webkitRequestAnimationFrame,d=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,e=!!c,f=e?function(a){var b=c(a);return function(){d(b)}}:
function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};f.supported=e;return f}]}function Fa(){function d(a){function b(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$id=++Oc;this.$$ChildScope=null}b.prototype=a;return b}var e=10,f=a("$rootScope"),h=null,g=null;this.digestTtl=function(a){arguments.length&&(e=a);return e};this.$get=["$exceptionHandler","$parse","$browser",function(a,m,k){function n(a){a.currentScope.$$destroyed=
!0}function l(a){9===Qb&&(a.$$childHead&&l(a.$$childHead),a.$$nextSibling&&l(a.$$nextSibling));a.$parent=a.$$nextSibling=a.$$prevSibling=a.$$childHead=a.$$childTail=a.$root=a.$$watchers=null}function r(){this.$id=++Oc;this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this.$root=this;this.$$destroyed=!1;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$$isolateBindings=null}function t(a){if(A.$$phase)throw f("inprog",
"{0} already in progress",A.$$phase);A.$$phase=a}function u(a,b){do a.$$watchersCount+=b;while(a=a.$parent)}function p(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function w(){}function y(){for(;F.length;)try{F.shift()()}catch(b){a(b)}g=null}function B(){null===g&&(g=k.defer(function(){A.$apply(y)}))}r.prototype={constructor:r,$new:function(a,b){var c;b=b||this;a?(c=new r,c.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=d(this)),
c=new this.$$ChildScope);c.$parent=b;c.$$prevSibling=b.$$childTail;b.$$childHead?(b.$$childTail.$$nextSibling=c,b.$$childTail=c):b.$$childHead=b.$$childTail=c;(a||b!=this)&&c.$on("$destroy",n);return c},$watch:function(a,b,c,d){var e=m(a);if(e.$$watchDelegate)return e.$$watchDelegate(this,b,c,e,a);var f=this,g=f.$$watchers,k={fn:b,last:w,get:e,exp:d||a,eq:!!c};h=null;D(b)||(k.fn=q);g||(g=f.$$watchers=[]);g.unshift(k);u(this,1);return function(){0<=W(g,k)&&u(f,-1);h=null}},$watchGroup:function(a,b){function d(){m=
!1;k?(k=!1,b(f,f,g)):b(f,e,g)}var e=Array(a.length),f=Array(a.length),h=[],g=this,m=!1,k=!0;if(!a.length){var n=!0;g.$evalAsync(function(){n&&b(f,f,g)});return function(){n=!1}}if(1===a.length)return this.$watch(a[0],function(a,c,d){f[0]=a;e[0]=c;b(f,a===c?f:e,d)});c(a,function(a,b){var c=g.$watch(a,function(a,c){f[b]=a;e[b]=c;m||(m=!0,g.$evalAsync(d))});h.push(c)});return function(){for(;h.length;)h.shift()()}},$watchCollection:function(a,c){function d(a){f=a;var c,e,g,m;if(!x(f)){if(v(f))if(b(f))for(h!==
q&&(h=q,u=h.length=0,n++),a=f.length,u!==a&&(n++,h.length=u=a),c=0;c<a;c++)m=h[c],g=f[c],e=m!==m&&g!==g,e||m===g||(n++,h[c]=g);else{h!==r&&(h=r={},u=0,n++);a=0;for(c in f)Bb.call(f,c)&&(a++,g=f[c],m=h[c],c in h?(e=m!==m&&g!==g,e||m===g||(n++,h[c]=g)):(u++,h[c]=g,n++));if(u>a)for(c in n++,h)Bb.call(f,c)||(u--,delete h[c])}else h!==f&&(h=f,n++);return n}}d.$stateful=!0;var e=this,f,h,g,k=1<c.length,n=0,l=m(a,d),q=[],r={},t=!0,u=0;return this.$watch(l,function(){t?(t=!1,c(f,f,e)):c(f,g,e);if(k)if(v(f))if(b(f)){g=
Array(f.length);for(var a=0;a<f.length;a++)g[a]=f[a]}else for(a in g={},f)Bb.call(f,a)&&(g[a]=f[a]);else g=f})},$digest:function(){var b,c,d,m,n,l,q,r,u=e,M,p=[],x,R;t("$digest");k.$$checkUrlChange();this===A&&null!==g&&(k.defer.cancel(g),y());h=null;do{r=!1;for(M=this;E.length;){try{R=E.shift(),R.scope.$eval(R.expression,R.locals)}catch(B){a(B)}h=null}a:do{if(l=M.$$watchers)for(q=l.length;q--;)try{if(b=l[q])if(n=b.get,(c=n(M))!==(d=b.last)&&!(b.eq?aa(c,d):"number"===typeof c&&"number"===typeof d&&
isNaN(c)&&isNaN(d)))r=!0,h=b,b.last=b.eq?P(c,null):c,m=b.fn,m(c,d===w?c:d,M),5>u&&(x=4-u,p[x]||(p[x]=[]),p[x].push({msg:D(b.exp)?"fn: "+(b.exp.name||b.exp.toString()):b.exp,newVal:c,oldVal:d}));else if(b===h){r=!1;break a}}catch(B){a(B)}if(!(l=M.$$watchersCount&&M.$$childHead||M!==this&&M.$$nextSibling))for(;M!==this&&!(l=M.$$nextSibling);)M=M.$parent}while(M=l);if((r||E.length)&&!u--)throw A.$$phase=null,f("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",
e,p);}while(r||E.length);for(A.$$phase=null;C.length;)try{C.shift()()}catch(B){a(B)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;this===A&&k.$$applicationDestroyed();u(this,-this.$$watchersCount);for(var b in this.$$listenerCount)p(this,this.$$listenerCount[b],b);a&&a.$$childHead==this&&(a.$$childHead=this.$$nextSibling);a&&a.$$childTail==this&&(a.$$childTail=this.$$prevSibling);this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=
this.$$nextSibling);this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling);this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=q;this.$on=this.$watch=this.$watchGroup=function(){return q};this.$$listeners={};this.$$nextSibling=null;l(this)}},$eval:function(a,b){return m(a)(this,b)},$evalAsync:function(a,b){A.$$phase||E.length||k.defer(function(){E.length&&A.$digest()});E.push({scope:this,expression:m(a),locals:b})},$$postDigest:function(a){C.push(a)},$apply:function(b){try{t("$apply");
try{return this.$eval(b)}finally{A.$$phase=null}}catch(c){a(c)}finally{try{A.$digest()}catch(c){throw a(c),c;}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&F.push(b);a=m(a);B()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]);c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(c[d]=null,p(e,1,a))}},$emit:function(b,c){var d=[],e,f=this,
h=!1,g={name:b,targetScope:f,stopPropagation:function(){h=!0},preventDefault:function(){g.defaultPrevented=!0},defaultPrevented:!1},m=ya([g],arguments,1),k,n;do{e=f.$$listeners[b]||d;g.currentScope=f;k=0;for(n=e.length;k<n;k++)if(e[k])try{e[k].apply(null,m)}catch(l){a(l)}else e.splice(k,1),k--,n--;if(h)return g.currentScope=null,g;f=f.$parent}while(f);g.currentScope=null;return g},$broadcast:function(b,c){var d=this,e=this,f={name:b,targetScope:this,preventDefault:function(){f.defaultPrevented=!0},
defaultPrevented:!1};if(!this.$$listenerCount[b])return f;for(var h=ya([f],arguments,1),g,m;d=e;){f.currentScope=d;e=d.$$listeners[b]||[];g=0;for(m=e.length;g<m;g++)if(e[g])try{e[g].apply(null,h)}catch(k){a(k)}else e.splice(g,1),g--,m--;if(!(e=d.$$listenerCount[b]&&d.$$childHead||d!==this&&d.$$nextSibling))for(;d!==this&&!(e=d.$$nextSibling);)d=d.$parent}f.currentScope=null;return f}};var A=new r,E=A.$$asyncQueue=[],C=A.$$postDigestQueue=[],F=A.$$applyAsyncQueue=[];return A}]}function Zb(){var a=
/^\s*(https?|ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(b){return w(b)?(a=b,this):a};this.imgSrcSanitizationWhitelist=function(a){return w(a)?(b=a,this):b};this.$get=function(){return function(c,d){var e=d?b:a,f;f=Gb(c).href;return""===f||f.match(e)?c:"unsafe:"+f}}}function ba(a){if("self"===a)return a;if(E(a)){if(-1<a.indexOf("***"))throw jc("iwcard","Illegal sequence *** in string matcher.  String: {0}",a);a=ke(a).replace("\\*\\*",
".*").replace("\\*","[^:/.?&;]*");return new RegExp("^"+a+"$")}if(F(a))return new RegExp("^"+a.source+"$");throw jc("imatcher",'Matchers may only be "self", string patterns or RegExp objects');}function $b(a){var b=[];w(a)&&c(a,function(a){b.push(ba(a))});return b}function Sd(){this.SCE_CONTEXTS=Cb;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){arguments.length&&(a=$b(b));return a};this.resourceUrlBlacklist=function(a){arguments.length&&(b=$b(a));return b};this.$get=["$injector",function(c){function d(a,
b){return"self"===a?xb(b):!!a.exec(b.href)}function e(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};a&&(b.prototype=new a);b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()};b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()};return b}var f=function(a){throw jc("unsafe","Attempting to use an unsafe value in a safe context.");};c.has("$sanitize")&&(f=c.get("$sanitize"));var h=e(),g={};g[Cb.HTML]=e(h);g[Cb.CSS]=e(h);g[Cb.URL]=e(h);g[Cb.JS]=
e(h);g[Cb.RESOURCE_URL]=e(g[Cb.URL]);return{trustAs:function(a,b){var c=g.hasOwnProperty(a)?g[a]:null;if(!c)throw jc("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",a,b);if(null===b||x(b)||""===b)return b;if("string"!==typeof b)throw jc("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",a);return new c(b)},getTrusted:function(c,e){if(null===e||x(e)||""===e)return e;var h=g.hasOwnProperty(c)?g[c]:null;if(h&&e instanceof
h)return e.$$unwrapTrustedValue();if(c===Cb.RESOURCE_URL){var h=Gb(e.toString()),m,k,n=!1;m=0;for(k=a.length;m<k;m++)if(d(a[m],h)){n=!0;break}if(n)for(m=0,k=b.length;m<k;m++)if(d(b[m],h)){n=!1;break}if(n)return e;throw jc("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",e.toString());}if(c===Cb.HTML)return f(e);throw jc("unsafe","Attempting to use an unsafe value in a safe context.");},valueOf:function(a){return a instanceof h?a.$$unwrapTrustedValue():a}}}]}
function Fb(){var a=!0;this.enabled=function(b){arguments.length&&(a=!!b);return a};this.$get=["$parse","$sceDelegate",function(b,d){if(a&&8>Qb)throw jc("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var e=ga(Cb);e.isEnabled=function(){return a};e.trustAs=d.trustAs;e.getTrusted=d.getTrusted;
e.valueOf=d.valueOf;a||(e.trustAs=e.getTrusted=function(a,b){return b},e.valueOf=r);e.parseAs=function(a,c){var d=b(c);return d.literal&&d.constant?d:b(c,function(b){return e.getTrusted(a,b)})};var f=e.parseAs,h=e.getTrusted,g=e.trustAs;c(Cb,function(a,b){var c=na(b);e[bc("parse_as_"+c)]=function(b){return f(a,b)};e[bc("get_trusted_"+c)]=function(b){return h(a,b)};e[bc("trust_as_"+c)]=function(b){return g(a,b)}});return e}]}function Ge(){this.$get=["$window","$document",function(a,b){var c={},d=!(a.chrome&&
a.chrome.app&&a.chrome.app.runtime)&&a.history&&a.history.pushState,e=h((/android (\d+)/.exec(na((a.navigator||{}).userAgent))||[])[1]),f=/Boxee/i.test((a.navigator||{}).userAgent),g=b[0]||{},m,k=/^(Moz|webkit|ms)(?=[A-Z])/,n=g.body&&g.body.style,l=!1,q=!1;if(n){for(var r in n)if(l=k.exec(r)){m=l[0];m=m.substr(0,1).toUpperCase()+m.substr(1);break}m||(m="WebkitOpacity"in n&&"webkit");l=!!("transition"in n||m+"Transition"in n);q=!!("animation"in n||m+"Animation"in n);!e||l&&q||(l=E(n.webkitTransition),
q=E(n.webkitAnimation))}return{history:!(!d||4>e||f),hasEvent:function(a){if("input"===a&&11>=Qb)return!1;if(x(c[a])){var b=g.createElement("div");c[a]="on"+a in b}return c[a]},csp:Nb(),vendorPrefix:m,transitions:l,animations:q,android:e}}]}function He(){var a;this.httpOptions=function(b){return b?(a=b,this):a};this.$get=["$templateCache","$http","$q","$sce",function(b,c,d,e){function h(g,m){h.totalPendingRequests++;E(g)&&b.get(g)||(g=e.getTrustedResourceUrl(g));var k=c.defaults&&c.defaults.transformResponse;
Q(k)?k=k.filter(function(a){return a!==Va}):k===Va&&(k=null);return c.get(g,f({cache:b,transformResponse:k},a))["finally"](function(){h.totalPendingRequests--}).then(function(a){b.put(g,a.data);return a.data},function(a){if(!m)throw Df("tpload","Failed to load template: {0} (HTTP status: {1} {2})",g,a.status,a.statusText);return d.reject(a)})}h.totalPendingRequests=0;return h}]}function Ie(){this.$get=["$rootScope","$browser","$location",function(a,b,d){return{findBindings:function(a,b,d){a=a.getElementsByClassName("ng-binding");
var e=[];c(a,function(a){var f=db.element(a).data("$binding");f&&c(f,function(c){d?(new RegExp("(^|\\s)"+ke(b)+"(\\s|\\||$)")).test(c)&&e.push(a):-1!=c.indexOf(b)&&e.push(a)})});return e},findModels:function(a,b,c){for(var d=["ng-","data-ng-","ng\\:"],e=0;e<d.length;++e){var f=a.querySelectorAll("["+d[e]+"model"+(c?"=":"*=")+'"'+b+'"]');if(f.length)return f}},getLocation:function(){return d.url()},setLocation:function(b){b!==d.url()&&(d.url(b),a.$digest())},whenStable:function(a){b.notifyWhenNoOutstandingRequests(a)}}}]}
function Je(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(a,b,c,d,e){function f(g,m,k){D(g)||(k=m,m=g,g=q);var n=pb.call(arguments,3),l=w(k)&&!k,r=(l?d:c).defer(),t=r.promise,u;u=b.defer(function(){try{r.resolve(g.apply(null,n))}catch(b){r.reject(b),e(b)}finally{delete h[t.$$timeoutId]}l||a.$apply()},m);t.$$timeoutId=u;h[u]=r;return t}var h={};f.cancel=function(a){return a&&a.$$timeoutId in h?(h[a.$$timeoutId].reject("canceled"),delete h[a.$$timeoutId],b.defer.cancel(a.$$timeoutId)):
!1};return f}]}function Gb(a){Qb&&(Ua.setAttribute("href",a),a=Ua.href);Ua.setAttribute("href",a);return{href:Ua.href,protocol:Ua.protocol?Ua.protocol.replace(/:$/,""):"",host:Ua.host,search:Ua.search?Ua.search.replace(/^\?/,""):"",hash:Ua.hash?Ua.hash.replace(/^#/,""):"",hostname:Ua.hostname,port:Ua.port,pathname:"/"===Ua.pathname.charAt(0)?Ua.pathname:"/"+Ua.pathname}}function xb(a){a=E(a)?Gb(a):a;return a.protocol===bf.protocol&&a.host===bf.host}function dc(){this.$get=t(d)}function Td(a){function b(a){try{return decodeURIComponent(a)}catch(c){return a}}
var c=a[0]||{},d={},e="";return function(){var a,f,h,g,m;a=c.cookie||"";if(a!==e)for(e=a,a=e.split("; "),d={},h=0;h<a.length;h++)f=a[h],g=f.indexOf("="),0<g&&(m=b(f.substring(0,g)),x(d[m])&&(d[m]=b(f.substring(g+1))));return d}}function Ke(){this.$get=Td}function Ud(a){function b(d,e){if(v(d)){var f={};c(d,function(a,c){f[c]=b(c,a)});return f}return a.factory(d+"Filter",e)}this.register=b;this.$get=["$injector",function(a){return function(b){return a.get(b+"Filter")}}];b("currency",ee);b("date",ge);
b("filter",Pe);b("json",Se);b("limitTo",Te);b("lowercase",ff);b("number",yd);b("orderBy",Cd);b("uppercase",Ff)}function Pe(){return function(c,d,e){if(!b(c)){if(null==c)return c;throw a("filter")("notarray","Expected array but received: {0}",c);}var f;switch(xd(d)){case "function":break;case "boolean":case "null":case "number":case "string":f=!0;case "object":d=ce(d,e,f);break;default:return c}return Array.prototype.filter.call(c,d)}}function ce(a,b,c){var d=v(a)&&"$"in a;!0===b?b=aa:D(b)||(b=function(a,
b){if(x(a))return!1;if(null===a||null===b)return a===b;if(v(b)||v(a)&&!u(a))return!1;a=na(""+a);b=na(""+b);return-1!==a.indexOf(b)});return function(e){return d&&!v(e)?ob(e,a.$,b,!1):ob(e,a,b,c)}}function ob(a,b,c,d,e){var f=xd(a),h=xd(b);if("string"===h&&"!"===b.charAt(0))return!ob(a,b.substring(1),c,d);if(Q(a))return a.some(function(a){return ob(a,b,c,d)});switch(f){case "object":var g;if(d){for(g in a)if("$"!==g.charAt(0)&&ob(a[g],b,c,!0))return!0;return e?!1:ob(a,b,c,!1)}if("object"===h){for(g in b)if(e=
b[g],!D(e)&&!x(e)&&(f="$"===g,!ob(f?a:a[g],e,c,f,f)))return!1;return!0}return c(a,b);case "function":return!1;default:return c(a,b)}}function xd(a){return null===a?"null":typeof a}function ee(a){var b=a.NUMBER_FORMATS;return function(a,c,d){x(c)&&(c=b.CURRENCY_SYM);x(d)&&(d=b.PATTERNS[1].maxFrac);return null==a?a:fe(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,d).replace(/\u00A4/g,c)}}function yd(a){var b=a.NUMBER_FORMATS;return function(a,c){return null==a?a:fe(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,
c)}}function Qe(a){var b=0,c,d,e,f,h;-1<(d=a.indexOf(df))&&(a=a.replace(df,""));0<(e=a.search(/e/i))?(0>d&&(d=e),d+=+a.slice(e+1),a=a.substring(0,e)):0>d&&(d=a.length);for(e=0;a.charAt(e)==se;e++);if(e==(h=a.length))c=[0],d=1;else{for(h--;a.charAt(h)==se;)h--;d-=e;c=[];for(f=0;e<=h;e++,f++)c[f]=+a.charAt(e)}d>cf&&(c=c.splice(0,cf-1),b=d-1,d=1);return{d:c,e:b,i:d}}function Re(a,b,c,d){var e=a.d,f=e.length-a.i;b=x(b)?Math.min(Math.max(c,f),d):+b;c=b+a.i;d=e[c];if(0<c){e.splice(Math.max(a.i,c));for(var h=
c;h<e.length;h++)e[h]=0}else for(f=Math.max(0,f),a.i=1,e.length=Math.max(1,c=b+1),e[0]=0,h=1;h<c;h++)e[h]=0;if(5<=d)if(0>c-1){for(d=0;d>c;d--)e.unshift(0),a.i++;e.unshift(1);a.i++}else e[c-1]++;for(;f<Math.max(0,b);f++)e.push(0);if(b=e.reduceRight(function(a,b,c,d){b+=a;d[c]=b%10;return Math.floor(b/10)},0))e.unshift(b),a.i++}function fe(a,b,c,d,e){if(!E(a)&&!y(a)||isNaN(a))return"";var f=!isFinite(a),h=!1,g=Math.abs(a)+"",m="";if(f)m="\u221e";else{h=Qe(g);Re(h,e,b.minFrac,b.maxFrac);m=h.d;g=h.i;
e=h.e;f=[];for(h=m.reduce(function(a,b){return a&&!b},!0);0>g;)m.unshift(0),g++;0<g?f=m.splice(g):(f=m,m=[0]);g=[];for(m.length>=b.lgSize&&g.unshift(m.splice(-b.lgSize).join(""));m.length>b.gSize;)g.unshift(m.splice(-b.gSize).join(""));m.length&&g.unshift(m.join(""));m=g.join(c);f.length&&(m+=d+f.join(""));e&&(m+="e+"+e)}return 0>a&&!h?b.negPre+m+b.negSuf:b.posPre+m+b.posSuf}function hd(a,b,c,d){var e="";if(0>a||d&&0>=a)d?a=-a+1:(a=-a,e="-");for(a=""+a;a.length<b;)a=se+a;c&&(a=a.substr(a.length-b));
return e+a}function Ja(a,b,c,d,e){c=c||0;return function(f){f=f["get"+a]();if(0<c||f>-c)f+=c;0===f&&-12==c&&(f=12);return hd(f,b,d,e)}}function uc(a,b,c){return function(d,e){var f=d["get"+a](),h=dd((c?"STANDALONE":"")+(b?"SHORT":"")+a);return e[h][f]}}function zd(a){var b=(new Date(a,0,1)).getDay();return new Date(a,0,(4>=b?5:12)-b)}function Bd(a){return function(b){var c=zd(b.getFullYear());b=+new Date(b.getFullYear(),b.getMonth(),b.getDate()+(4-b.getDay()))-+c;return hd(1+Math.round(b/6048E5),
a)}}function Jc(a,b){return 0>=a.getFullYear()?b.ERAS[0]:b.ERAS[1]}function ge(a){function b(a){var c;if(c=a.match(d)){a=new Date(0);var e=0,f=0,g=c[8]?a.setUTCFullYear:a.setFullYear,m=c[8]?a.setUTCHours:a.setHours;c[9]&&(e=h(c[9]+c[10]),f=h(c[9]+c[11]));g.call(a,h(c[1]),h(c[2])-1,h(c[3]));e=h(c[4]||0)-e;f=h(c[5]||0)-f;g=h(c[6]||0);c=Math.round(1E3*parseFloat("0."+(c[7]||0)));m.call(a,e,f,g,c)}return a}var d=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;
return function(d,e,f){var g="",m=[],k,n;e=e||"mediumDate";e=a.DATETIME_FORMATS[e]||e;E(d)&&(d=ef.test(d)?h(d):b(d));y(d)&&(d=new Date(d));if(!B(d)||!isFinite(d.getTime()))return d;for(;e;)(n=Ef.exec(e))?(m=ya(m,n,1),e=m.pop()):(m.push(e),e=null);var l=d.getTimezoneOffset();f&&(l=sb(f,l),d=I(d,f,!0));c(m,function(b){k=te[b];g+=k?k(d,a.DATETIME_FORMATS,l):"''"===b?"'":b.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return g}}function Se(){return function(a,b){x(b)&&(b=2);return va(a,b)}}function Te(){return function(a,
b,c){b=Infinity===Math.abs(Number(b))?Number(b):h(b);if(isNaN(b))return a;y(a)&&(a=a.toString());if(!Q(a)&&!E(a))return a;c=!c||isNaN(c)?0:h(c);c=0>c?Math.max(0,a.length+c):c;return 0<=b?a.slice(c,c+b):0===c?a.slice(b,a.length):a.slice(Math.max(0,c+b),c)}}function Cd(c){function d(a,b){b=b?-1:1;return a.map(function(a){var d=1,e=r;if(D(a))e=a;else if(E(a)){if("+"==a.charAt(0)||"-"==a.charAt(0))d="-"==a.charAt(0)?-1:1,a=a.substring(1);if(""!==a&&(e=c(a),e.constant))var f=e(),e=function(a){return a[f]}}return{get:e,
descending:d*b}})}function e(a){switch(typeof a){case "number":case "boolean":case "string":return!0;default:return!1}}return function(c,f,h){if(null==c)return c;if(!b(c))throw a("orderBy")("notarray","Expected array but received: {0}",c);Q(f)||(f=[f]);0===f.length&&(f=["+"]);var g=d(f,h);g.push({get:function(){return{}},descending:h?-1:1});c=Array.prototype.map.call(c,function(a,b){return{value:a,predicateValues:g.map(function(c){var d=c.get(a);c=typeof d;if(null===d)c="string",d="null";else if("string"===
c)d=d.toLowerCase();else if("object"===c)a:{if("function"===typeof d.valueOf&&(d=d.valueOf(),e(d)))break a;if(u(d)&&(d=d.toString(),e(d)))break a;d=b}return{value:d,type:c}})}});c.sort(function(a,b){for(var c=0,d=0,e=g.length;d<e;++d){var c=a.predicateValues[d],f=b.predicateValues[d],h=0;c.type===f.type?c.value!==f.value&&(h=c.value<f.value?-1:1):h=c.type<f.type?-1:1;if(c=h*g[d].descending)break}return c});return c=c.map(function(a){return a.value})}}function da(a){D(a)&&(a={link:a});a.restrict=a.restrict||
"AC";return t(a)}function he(a,b,d,e,f){var h=this,g=[];h.$error={};h.$$success={};h.$pending=void 0;h.$name=f(b.name||b.ngForm||"")(d);h.$dirty=!1;h.$pristine=!0;h.$valid=!0;h.$invalid=!1;h.$submitted=!1;h.$$parentForm=Jd;h.$rollbackViewValue=function(){c(g,function(a){a.$rollbackViewValue()})};h.$commitViewValue=function(){c(g,function(a){a.$commitViewValue()})};h.$addControl=function(a){Qa(a.$name,"input");g.push(a);a.$name&&(h[a.$name]=a);a.$$parentForm=h};h.$$renameControl=function(a,b){var c=
a.$name;h[c]===a&&delete h[c];h[b]=a;a.$name=b};h.$removeControl=function(a){a.$name&&h[a.$name]===a&&delete h[a.$name];c(h.$pending,function(b,c){h.$setValidity(c,null,a)});c(h.$error,function(b,c){h.$setValidity(c,null,a)});c(h.$$success,function(b,c){h.$setValidity(c,null,a)});W(g,a);a.$$parentForm=Jd};ie({ctrl:this,$element:a,set:function(a,b,c){var d=a[b];d?-1===d.indexOf(c)&&d.push(c):a[b]=[c]},unset:function(a,b,c){var d=a[b];d&&(W(d,c),0===d.length&&delete a[b])},$animate:e});h.$setDirty=
function(){e.removeClass(a,Rc);e.addClass(a,Md);h.$dirty=!0;h.$pristine=!1;h.$$parentForm.$setDirty()};h.$setPristine=function(){e.setClass(a,Rc,Md+" ng-submitted");h.$dirty=!1;h.$pristine=!0;h.$submitted=!1;c(g,function(a){a.$setPristine()})};h.$setUntouched=function(){c(g,function(a){a.$setUntouched()})};h.$setSubmitted=function(){e.addClass(a,"ng-submitted");h.$submitted=!0;h.$$parentForm.$setSubmitted()}}function Pb(a){a.$formatters.push(function(b){return a.$isEmpty(b)?b:b.toString()})}function Mc(a,
b,c,d,e,f){var h=na(b[0].type);if(!e.android){var g=!1;b.on("compositionstart",function(){g=!0});b.on("compositionend",function(){g=!1;k()})}var m,k=function(a){m&&(f.defer.cancel(m),m=null);if(!g){var e=b.val();a=a&&a.type;"password"===h||c.ngTrim&&"false"===c.ngTrim||(e=pa(e));(d.$viewValue!==e||""===e&&d.$$hasNativeValidators)&&d.$setViewValue(e,a)}};if(e.hasEvent("input"))b.on("input",k);else{var n=function(a,b,c){m||(m=f.defer(function(){m=null;b&&b.value===c||k(a)}))};b.on("keydown",function(a){var b=
a.keyCode;91===b||15<b&&19>b||37<=b&&40>=b||n(a,this,this.value)});if(e.hasEvent("paste"))b.on("paste cut",n)}b.on("change",k);if(Ld[h]&&d.$$hasNativeValidators&&h===c.type)b.on("keydown wheel mousedown",function(a){if(!m){var b=this.validity,c=b.badInput,d=b.typeMismatch;m=f.defer(function(){m=null;b.badInput===c&&b.typeMismatch===d||k(a)})}});d.$render=function(){var a=d.$isEmpty(d.$viewValue)?"":d.$viewValue;b.val()!==a&&b.val(a)}}function id(a,b){return function(d,e){var f,h;if(B(d))return d;
if(E(d)){'"'==d.charAt(0)&&'"'==d.charAt(d.length-1)&&(d=d.substring(1,d.length-1));if(Kc.test(d))return new Date(d);a.lastIndex=0;if(f=a.exec(d))return f.shift(),h=e?{yyyy:e.getFullYear(),MM:e.getMonth()+1,dd:e.getDate(),HH:e.getHours(),mm:e.getMinutes(),ss:e.getSeconds(),sss:e.getMilliseconds()/1E3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},c(f,function(a,c){c<b.length&&(h[b[c]]=+a)}),new Date(h.yyyy,h.MM-1,h.dd,h.HH,h.mm,h.ss||0,1E3*h.sss||0)}return NaN}}function vc(a,b,c,d){return function(e,
f,h,g,m,k,n){function l(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function q(a){return w(a)&&!B(a)?c(a)||void 0:a}oa(e,f,h,g);Mc(e,f,h,g,m,k);var r=g&&g.$options&&g.$options.timezone,t;g.$$parserName=a;g.$parsers.push(function(a){if(g.$isEmpty(a))return null;if(b.test(a))return a=c(a,t),r&&(a=I(a,r)),a});g.$formatters.push(function(a){if(a&&!B(a))throw nd("datefmt","Expected `{0}` to be a date",a);if(l(a))return(t=a)&&r&&(t=I(t,r,!0)),n("date")(a,d,r);t=null;return""});if(w(h.min)||h.ngMin){var u;
g.$validators.min=function(a){return!l(a)||x(u)||c(a)>=u};h.$observe("min",function(a){u=q(a);g.$validate()})}if(w(h.max)||h.ngMax){var p;g.$validators.max=function(a){return!l(a)||x(p)||c(a)<=p};h.$observe("max",function(a){p=q(a);g.$validate()})}}}function oa(a,b,c,d){(d.$$hasNativeValidators=v(b[0].validity))&&d.$parsers.push(function(a){var c=b.prop("validity")||{};return c.badInput||c.typeMismatch?void 0:a})}function de(a,b,c,d,e){if(w(d)){a=a(d);if(!a.constant)throw nd("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",
c,d);return a(b)}return e}function Ed(a,b){a="ngClass"+a;return["$animate",function(d){function e(a,b){var c=[],d=0;a:for(;d<a.length;d++){for(var f=a[d],h=0;h<b.length;h++)if(f==b[h])continue a;c.push(f)}return c}function f(a){var b=[];return Q(a)?(c(a,function(a){b=b.concat(f(a))}),b):E(a)?a.split(" "):v(a)?(c(a,function(a,c){a&&(b=b.concat(c.split(" ")))}),b):a}return{restrict:"AC",link:function(h,g,m){function k(a){a=n(a,1);m.$addClass(a)}function n(a,b){var d=g.data("$classCounts")||ca(),e=[];
c(a,function(a){if(0<b||d[a])d[a]=(d[a]||0)+b,d[a]===+(0<b)&&e.push(a)});g.data("$classCounts",d);return e.join(" ")}function l(a,b){var c=e(b,a),f=e(a,b),c=n(c,1),f=n(f,-1);c&&c.length&&d.addClass(g,c);f&&f.length&&d.removeClass(g,f)}function q(a){if(!0===b||h.$index%2===b){var c=f(a||[]);if(!r)k(c);else if(!aa(a,r)){var d=f(r);l(d,c)}}r=Q(a)?a.map(function(a){return ga(a)}):ga(a)}var r;h.$watch(m[a],q,!0);m.$observe("class",function(b){q(h.$eval(m[a]))});"ngClass"!==a&&h.$watch("$index",function(c,
d){var e=c&1;if(e!==(d&1)){var g=f(h.$eval(m[a]));e===b?k(g):(e=n(g,-1),m.$removeClass(e))}})}}}]}function ie(a){function b(a,c){c&&!f[a]?(m.addClass(e,a),f[a]=!0):!c&&f[a]&&(m.removeClass(e,a),f[a]=!1)}function c(a,d){a=a?"-"+Ha(a,"-"):"";b(md+a,!0===d);b(rf+a,!1===d)}var d=a.ctrl,e=a.$element,f={},h=a.set,g=a.unset,m=a.$animate;f[rf]=!(f[md]=e.hasClass(md));d.$setValidity=function(a,e,f){x(e)?(d.$pending||(d.$pending={}),h(d.$pending,a,f)):(d.$pending&&g(d.$pending,a,f),Ad(d.$pending)&&(d.$pending=
void 0));J(e)?e?(g(d.$error,a,f),h(d.$$success,a,f)):(h(d.$error,a,f),g(d.$$success,a,f)):(g(d.$error,a,f),g(d.$$success,a,f));d.$pending?(b(sf,!0),d.$valid=d.$invalid=void 0,c("",null)):(b(sf,!1),d.$valid=Ad(d.$error),d.$invalid=!d.$valid,c("",d.$valid));e=d.$pending&&d.$pending[a]?void 0:d.$error[a]?!1:d.$$success[a]?!0:null;c(a,e);d.$$parentForm.$setValidity(a,e,d)}}function Ad(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}var Gc=/^\/(.+)\/([a-z]*)$/,Bb=Object.prototype.hasOwnProperty,
na=function(a){return E(a)?a.toLowerCase():a},dd=function(a){return E(a)?a.toUpperCase():a},Qb,N,Wb,pb=[].slice,Oe=[].splice,Ue=[].push,eb=Object.prototype.toString,be=Object.getPrototypeOf,gc=a("ng"),db=d.angular||(d.angular={}),Ic,Oc=0;Qb=d.document.documentMode;q.$inject=[];r.$inject=[];var Q=Array.isArray,Ve=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/,pa=function(a){return E(a)?a.trim():a},ke=function(a){return a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,
"\\$1").replace(/\x08/g,"\\x08")},Nb=function(){if(!w(Nb.rules)){var a=d.document.querySelector("[ng-csp]")||d.document.querySelector("[data-ng-csp]");if(a){var b=a.getAttribute("ng-csp")||a.getAttribute("data-ng-csp");Nb.rules={noUnsafeEval:!b||-1!==b.indexOf("no-unsafe-eval"),noInlineStyle:!b||-1!==b.indexOf("no-inline-style")}}else{a=Nb;try{new Function(""),b=!1}catch(c){b=!0}a.rules={noUnsafeEval:b,noInlineStyle:!1}}}return Nb.rules},ma=function(){if(w(ma.name_))return ma.name_;var a,b,c=Pc.length,
e,f;for(b=0;b<c;++b)if(e=Pc[b],a=d.document.querySelector("["+e.replace(":","\\:")+"jq]")){f=a.getAttribute(e+"jq");break}return ma.name_=f},We=/:/g,Pc=["ng-","data-ng-","ng:","x-ng-"],Xe=/[A-Z]/g,Qc=!1,hc=3,fc={full:"1.5.5",major:1,minor:5,dot:5,codeName:"material-conspiration"};S.expando="ng339";var wc=S.cache={},Ye=1;S._data=function(a){return this.cache[a[this.expando]]||{}};var yb=/([\:\-\_]+(.))/g,le=/^moz([A-Z])/,jd={mouseleave:"mouseout",mouseenter:"mouseover"},me=a("jqLite"),ne=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,
Dd=/<|&#?\w+;/,Ea=/<([\w:-]+)/,wf=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ia={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ia.optgroup=ia.option;ia.tbody=ia.tfoot=ia.colgroup=ia.caption=ia.thead;ia.th=ia.td;var xf=d.Node.prototype.contains||function(a){return!!(this.compareDocumentPosition(a)&
16)},Nc=S.prototype={ready:function(a){function b(){c||(c=!0,a())}var c=!1;"complete"===d.document.readyState?d.setTimeout(b):(this.on("DOMContentLoaded",b),S(d).on("load",b))},toString:function(){var a=[];c(this,function(b){a.push(""+b)});return"["+a.join(", ")+"]"},eq:function(a){return 0<=a?N(this[a]):N(this[this.length+a])},length:0,push:Ue,sort:[].sort,splice:[].splice},ic={};c("multiple selected checked disabled readOnly required open".split(" "),function(a){ic[na(a)]=a});var $d={};c("input select option textarea button form details".split(" "),
function(a){$d[a]=!0});var gd={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};c({data:wa,removeData:Ia,hasData:function(a){for(var b in wc[a.ng339])return!0;return!1},cleanData:function(a){for(var b=0,c=a.length;b<c;b++)Ia(a[b])}},function(a,b){S[b]=a});c({data:wa,inheritedData:hb,scope:function(a){return N.data(a,"$scope")||hb(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return N.data(a,"$isolateScope")||N.data(a,"$isolateScopeNoTemplate")},
controller:Jb,injector:function(a){return hb(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:H,css:function(a,b,c){b=bc(b);if(w(c))a.style[b]=c;else return a.style[b]},attr:function(a,b,c){var d=a.nodeType;if(d!==hc&&2!==d&&8!==d)if(d=na(b),ic[d])if(w(c))c?(a[b]=!0,a.setAttribute(b,d)):(a[b]=!1,a.removeAttribute(d));else return a[b]||(a.attributes.getNamedItem(b)||q).specified?d:void 0;else if(w(c))a.setAttribute(b,c);else if(a.getAttribute)return a=a.getAttribute(b,2),null===
a?void 0:a},prop:function(a,b,c){if(w(c))a[b]=c;else return a[b]},text:function(){function a(b,c){if(x(c)){var d=b.nodeType;return 1===d||d===hc?b.textContent:""}b.textContent=c}a.$dv="";return a}(),val:function(a,b){if(x(b)){if(a.multiple&&"select"===p(a)){var d=[];c(a.options,function(a){a.selected&&d.push(a.value||a.text)});return 0===d.length?null:d}return a.value}a.value=b},html:function(a,b){if(x(b))return a.innerHTML;Vb(a,!0);a.innerHTML=b},empty:Kb},function(a,b){S.prototype[b]=function(b,
c){var d,e,f=this.length;if(a!==Kb&&x(2==a.length&&a!==H&&a!==Jb?b:c)){if(v(b)){for(d=0;d<f;d++)if(a===wa)a(this[d],b);else for(e in b)a(this[d],e,b[e]);return this}d=a.$dv;f=x(d)?Math.min(f,1):f;for(e=0;e<f;e++){var h=a(this[e],b,c);d=d?d+h:h}return d}for(d=0;d<f;d++)a(this[d],b,c);return this}});c({removeData:Ia,on:function(a,b,c,d){if(w(d))throw me("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(nc(a)){d=ub(a,!0);var e=d.events,f=d.handle;f||(f=d.handle=Eb(a,
e));d=0<=b.indexOf(" ")?b.split(" "):[b];for(var h=d.length,g=function(b,d,h){var g=e[b];g||(g=e[b]=[],g.specialHandlerWrapper=d,"$destroy"===b||h||a.addEventListener(b,f,!1));g.push(c)};h--;)b=d[h],jd[b]?(g(jd[b],oc),g(b,void 0,!0)):g(b)}},off:cc,one:function(a,b,c){a=N(a);a.on(b,function Da(){a.off(b,c);a.off(b,Da)});a.on(b,c)},replaceWith:function(a,b){var d,e=a.parentNode;Vb(a);c(new S(b),function(b){d?e.insertBefore(b,d.nextSibling):e.replaceChild(b,a);d=b})},children:function(a){var b=[];c(a.childNodes,
function(a){1===a.nodeType&&b.push(a)});return b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){var c=a.nodeType;if(1===c||11===c){b=new S(b);for(var c=0,d=b.length;c<d;c++)a.appendChild(b[c])}},prepend:function(a,b){if(1===a.nodeType){var d=a.firstChild;c(new S(b),function(b){a.insertBefore(b,d)})}},wrap:function(a,b){Xc(a,N(b).eq(0).clone()[0])},remove:$a,detach:function(a){$a(a,!0)},after:function(a,b){var c=a,d=a.parentNode;b=new S(b);for(var e=0,f=b.length;e<
f;e++){var h=b[e];d.insertBefore(h,c.nextSibling);c=h}},addClass:fa,removeClass:vb,toggleClass:function(a,b,d){b&&c(b.split(" "),function(b){var c=d;x(c)&&(c=!H(a,b));(c?fa:vb)(a,b)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){return a.nextElementSibling},find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:zc,triggerHandler:function(a,b,d){var e,h,g=b.type||b,m=ub(a);if(m=(m=m&&m.events)&&m[g])e={preventDefault:function(){this.defaultPrevented=
!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:q,type:g,target:a},b.type&&(e=f(e,b)),b=ga(m),h=d?[e].concat(d):[e],c(b,function(b){e.isImmediatePropagationStopped()||b.apply(a,h)})}},function(a,b){S.prototype[b]=function(b,c,d){for(var e,f=0,h=this.length;f<h;f++)x(e)?(e=a(this[f],b,c,d),w(e)&&(e=N(e))):
Ib(e,a(this[f],b,c,d));return w(e)?e:this};S.prototype.bind=S.prototype.on;S.prototype.unbind=S.prototype.off});kb.prototype={put:function(a,b){this[ua(a,this.nextUid)]=b},get:function(a){return this[ua(a,this.nextUid)]},remove:function(a){var b=this[a=ua(a,this.nextUid)];delete this[a];return b}};var Lc=[function(){this.$get=[function(){return kb}]}],tc=/^([^\(]+?)=>/,Fd=/^[^\(]*\(\s*([^\)]*)\)/m,yf=/,/,Zd=/^\s*(_?)(\S+?)\1\s*$/,Me=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,Ob=a("$injector");bb.$$annotate=
function(a,b,d){var e;if("function"===typeof a){if(!(e=a.$inject)){e=[];if(a.length){if(b)throw E(d)&&d||(d=a.name||za(a)),Ob("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",d);b=ab(a);c(b[1].split(yf),function(a){a.replace(Zd,function(a,b,c){e.push(c)})})}a.$inject=e}}else Q(a)?(b=a.length-1,la(a[b],"fn"),e=a.slice(0,b)):la(a,"fn",!0);return e};var Xd=a("$animate"),kd=function(){this.$get=q},Ze=function(){var a=new kb,b=[];this.$get=["$$AnimateRunner","$rootScope",
function(d,e){function f(a,b,d){var e=!1;b&&(b=E(b)?b.split(" "):Q(b)?b:[],c(b,function(b){b&&(e=!0,a[b]=d)}));return e}function h(){c(b,function(b){var d=a.get(b);if(d){var e=Yc(b.attr("class")),f="",h="";c(d,function(a,b){a!==!!e[b]&&(a?f+=(f.length?" ":"")+b:h+=(h.length?" ":"")+b)});c(b,function(a){f&&fa(a,f);h&&vb(a,h)});a.remove(b)}});b.length=0}return{enabled:q,on:q,off:q,pin:q,push:function(c,g,m,k){k&&k();m=m||{};m.from&&c.css(m.from);m.to&&c.css(m.to);if(m.addClass||m.removeClass)if(g=m.addClass,
k=m.removeClass,m=a.get(c)||{},g=f(m,g,!0),k=f(m,k,!1),g||k)a.put(c,m),b.push(c),1===b.length&&e.$$postDigest(h);c=new d;c.complete();return c}}}]},ld=["$provide",function(a){var b=this;this.$$registeredAnimations=Object.create(null);this.register=function(c,d){if(c&&"."!==c.charAt(0))throw Xd("notcsel","Expecting class selector starting with '.' got '{0}'.",c);var e=c+"-animation";b.$$registeredAnimations[c.substr(1)]=e;a.factory(e,d)};this.classNameFilter=function(a){if(1===arguments.length&&(this.$$classNameFilter=
a instanceof RegExp?a:null)&&/(\s+|\/)ng-animate(\s+|\/)/.test(this.$$classNameFilter.toString()))throw Xd("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',"ng-animate");return this.$$classNameFilter};this.$get=["$$animateQueue",function(a){function b(a,c,d){if(d){var e;a:{for(e=0;e<d.length;e++){var f=d[e];if(1===f.nodeType){e=f;break a}}e=void 0}!e||e.parentNode||e.previousElementSibling||(d=null)}d?d.after(a):c.prepend(a)}
return{on:a.on,off:a.off,pin:a.pin,enabled:a.enabled,cancel:function(a){a.end&&a.end()},enter:function(c,d,e,f){d=d&&N(d);e=e&&N(e);d=d||e.parent();b(c,d,e);return a.push(c,"enter",wb(f))},move:function(c,d,e,f){d=d&&N(d);e=e&&N(e);d=d||e.parent();b(c,d,e);return a.push(c,"move",wb(f))},leave:function(b,c){return a.push(b,"leave",wb(c),function(){b.remove()})},addClass:function(b,c,d){d=wb(d);d.addClass=nb(d.addclass,c);return a.push(b,"addClass",d)},removeClass:function(b,c,d){d=wb(d);d.removeClass=
nb(d.removeClass,c);return a.push(b,"removeClass",d)},setClass:function(b,c,d,e){e=wb(e);e.addClass=nb(e.addClass,c);e.removeClass=nb(e.removeClass,d);return a.push(b,"setClass",e)},animate:function(b,c,d,e,h){h=wb(h);h.from=h.from?f(h.from,c):c;h.to=h.to?f(h.to,d):d;h.tempClasses=nb(h.tempClasses,e||"ng-inline-animate");return a.push(b,"animate",h)}}}]}],Le=function(){this.$get=["$$rAF",function(a){function b(d){c.push(d);1<c.length||a(function(){for(var a=0;a<c.length;a++)c[a]();c=[]})}var c=[];
return function(){var a=!1;b(function(){a=!0});return function(c){a?c():b(c)}}}]},zf=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$document","$timeout",function(a,b,d,e,f){function h(a){this.setHost(a);var b=d();this._doneCallbacks=[];this._tick=function(a){var c=e[0];c&&c.hidden?f(a,0,!1):b(a)};this._state=0}h.chain=function(a,b){function c(){if(d===a.length)b(!0);else a[d](function(a){!1===a?b(!1):(d++,c())})}var d=0;c()};h.all=function(a,b){function d(c){f=f&&c;++e===a.length&&b(f)}
var e=0,f=!0;c(a,function(a){a.done(d)})};h.prototype={setHost:function(a){this.host=a||{}},done:function(a){2===this._state?a():this._doneCallbacks.push(a)},progress:q,getPromise:function(){if(!this.promise){var b=this;this.promise=a(function(a,c){b.done(function(b){!1===b?c():a()})})}return this.promise},then:function(a,b){return this.getPromise().then(a,b)},"catch":function(a){return this.getPromise()["catch"](a)},"finally":function(a){return this.getPromise()["finally"](a)},pause:function(){this.host.pause&&
this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end();this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel();this._resolve(!1)},complete:function(a){var b=this;0===b._state&&(b._state=1,b._tick(function(){b._resolve(a)}))},_resolve:function(a){2!==this._state&&(c(this._doneCallbacks,function(b){b(a)}),this._doneCallbacks.length=0,this._state=2)}};return h}]},Hc=function(){this.$get=["$$rAF","$q","$$AnimateRunner",
function(a,b,c){return function(b,d){function e(){a(function(){f.addClass&&(b.addClass(f.addClass),f.addClass=null);f.removeClass&&(b.removeClass(f.removeClass),f.removeClass=null);f.to&&(b.css(f.to),f.to=null);h||g.complete();h=!0});return g}var f=d||{};f.$$prepared||(f=P(f));f.cleanupStyles&&(f.from=f.to=null);f.from&&(b.css(f.from),f.from=null);var h,g=new c;return{start:e,end:e}}}]},Ka=a("$compile"),Ca=new function(){};Zc.$inject=["$provide","$$sanitizeUriProvider"];Rb.prototype.isFirstChange=
function(){return this.previousValue===Ca};var cb=/^((?:x|data)[\:\-_])/i,Af=a("$controller"),$e=/^(\S+)(\s+as\s+([\w$]+))?$/,je=function(){this.$get=["$document",function(a){return function(b){b?!b.nodeType&&b instanceof N&&(b=b[0]):b=a[0].body;return b.offsetWidth+1}}]},Yd="application/json",oe={"Content-Type":Yd+";charset=utf-8"},Vd=/^\[|^\{(?!\{)/,af={"[":/]$/,"{":/}$/},Gd=/^\)\]\}',?\n/,wd=a("$http"),Hd=function(a){return function(){throw wd("legacy","The method `{0}` on the promise returned from `$http` has been disabled.",
a);}},Ab=db.$interpolateMinErr=a("$interpolate");Ab.throwNoconcat=function(a){throw Ab("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",a);};Ab.interr=function(a,b){return Ab("interr","Can't interpolate: {0}\n{1}",a,b.toString())};var zb=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,pe={http:80,https:443,ftp:21},Ec=a("$location"),Ne={$$html5:!1,$$replace:!1,
absUrl:Uc("$$absUrl"),url:function(a){if(x(a))return this.$$url;var b=zb.exec(a);(b[1]||""===a)&&this.path(decodeURIComponent(b[1]));(b[2]||b[1]||""===a)&&this.search(b[3]||"");this.hash(b[5]||"");return this},protocol:Uc("$$protocol"),host:Uc("$$host"),port:Uc("$$port"),path:Pd("$$path",function(a){a=null!==a?a.toString():"";return"/"==a.charAt(0)?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(E(a)||y(a))a=a.toString(),this.$$search=ha(a);else if(v(a))a=
P(a,{}),c(a,function(b,c){null==b&&delete a[c]}),this.$$search=a;else throw Ec("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");break;default:x(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}this.$$compose();return this},hash:Pd("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){this.$$replace=!0;return this}};c([Od,pd,od],function(a){a.prototype=Object.create(Ne);a.prototype.state=function(b){if(!arguments.length)return this.$$state;
if(a!==od||!this.$$html5)throw Ec("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");this.$$state=x(b)?null:b;return this}});var Ya=a("$parse"),Wd=Function.prototype.call,ae=Function.prototype.apply,ed=Function.prototype.bind,fd=ca();c("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(a){fd[a]=!0});var Bf={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},qe=function(a){this.options=a};qe.prototype={constructor:qe,
lex:function(a){this.text=a;this.index=0;for(this.tokens=[];this.index<this.text.length;)if(a=this.text.charAt(this.index),'"'===a||"'"===a)this.readString(a);else if(this.isNumber(a)||"."===a&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(a,"(){}[].,;:?"))this.tokens.push({index:this.index,text:a}),this.index++;else if(this.isWhitespace(a))this.index++;else{var b=a+this.peek(),c=b+this.peek(2),d=fd[b],e=fd[c];fd[a]||
d||e?(a=e?c:d?b:a,this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(a,b){return-1!==b.indexOf(a)},peek:function(a){a=a||1;return this.index+a<this.text.length?this.text.charAt(this.index+a):!1},isNumber:function(a){return"0"<=a&&"9">=a&&"string"===typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||"\u00a0"===a},isIdentifierStart:function(a){return this.options.isIdentifierStart?
this.options.isIdentifierStart(a,this.codePointAt(a)):this.isValidIdentifierStart(a)},isValidIdentifierStart:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isIdentifierContinue:function(a){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(a,this.codePointAt(a)):this.isValidIdentifierContinue(a)},isValidIdentifierContinue:function(a,b){return this.isValidIdentifierStart(a,b)||this.isNumber(a)},codePointAt:function(a){return 1===a.length?a.charCodeAt(0):
(a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888},peekMultichar:function(){var a=this.text.charAt(this.index),b=this.peek();if(!b)return a;var c=a.charCodeAt(0),d=b.charCodeAt(0);return 55296<=c&&56319>=c&&56320<=d&&57343>=d?a+b:a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,c){c=c||this.index;b=w(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,c)+"]":" "+c;throw Ya("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",a,b,this.text);},readNumber:function(){for(var a=
"",b=this.index;this.index<this.text.length;){var c=na(this.text.charAt(this.index));if("."==c||this.isNumber(c))a+=c;else{var d=this.peek();if("e"==c&&this.isExpOperator(d))a+=c;else if(this.isExpOperator(c)&&d&&this.isNumber(d)&&"e"==a.charAt(a.length-1))a+=c;else if(!this.isExpOperator(c)||d&&this.isNumber(d)||"e"!=a.charAt(a.length-1))break;else this.throwError("Invalid exponent")}this.index++}this.tokens.push({index:b,text:a,constant:!0,value:Number(a)})},readIdent:function(){var a=this.index;
for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var b=this.peekMultichar();if(!this.isIdentifierContinue(b))break;this.index+=b.length}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var b=this.index;this.index++;for(var c="",d=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index),d=d+f;if(e)"u"===f?(e=this.text.substring(this.index+1,this.index+5),e.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+
e+"]"),this.index+=4,c+=String.fromCharCode(parseInt(e,16))):c+=Bf[f]||f,e=!1;else if("\\"===f)e=!0;else{if(f===a){this.index++;this.tokens.push({index:b,text:d,constant:!0,value:c});return}c+=f}this.index++}this.throwError("Unterminated quote",b)}};var G=function(a,b){this.lexer=a;this.options=b};G.Program="Program";G.ExpressionStatement="ExpressionStatement";G.AssignmentExpression="AssignmentExpression";G.ConditionalExpression="ConditionalExpression";G.LogicalExpression="LogicalExpression";G.BinaryExpression=
"BinaryExpression";G.UnaryExpression="UnaryExpression";G.CallExpression="CallExpression";G.MemberExpression="MemberExpression";G.Identifier="Identifier";G.Literal="Literal";G.ArrayExpression="ArrayExpression";G.Property="Property";G.ObjectExpression="ObjectExpression";G.ThisExpression="ThisExpression";G.LocalsExpression="LocalsExpression";G.NGValueParameter="NGValueParameter";G.prototype={ast:function(a){this.text=a;this.tokens=this.lexer.lex(a);a=this.program();0!==this.tokens.length&&this.throwError("is an unexpected token",
this.tokens[0]);return a},program:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.expressionStatement()),!this.expect(";"))return{type:G.Program,body:a}},expressionStatement:function(){return{type:G.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var a=this.expression();this.expect("|");)a=this.filter(a);return a},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary();this.expect("=")&&(a=
{type:G.AssignmentExpression,left:a,right:this.assignment(),operator:"="});return a},ternary:function(){var a=this.logicalOR(),b,c;return this.expect("?")&&(b=this.expression(),this.consume(":"))?(c=this.expression(),{type:G.ConditionalExpression,test:a,alternate:b,consequent:c}):a},logicalOR:function(){for(var a=this.logicalAND();this.expect("||");)a={type:G.LogicalExpression,operator:"||",left:a,right:this.logicalAND()};return a},logicalAND:function(){for(var a=this.equality();this.expect("&&");)a=
{type:G.LogicalExpression,operator:"&&",left:a,right:this.equality()};return a},equality:function(){for(var a=this.relational(),b;b=this.expect("==","!=","===","!==");)a={type:G.BinaryExpression,operator:b.text,left:a,right:this.relational()};return a},relational:function(){for(var a=this.additive(),b;b=this.expect("<",">","<=",">=");)a={type:G.BinaryExpression,operator:b.text,left:a,right:this.additive()};return a},additive:function(){for(var a=this.multiplicative(),b;b=this.expect("+","-");)a={type:G.BinaryExpression,
operator:b.text,left:a,right:this.multiplicative()};return a},multiplicative:function(){for(var a=this.unary(),b;b=this.expect("*","/","%");)a={type:G.BinaryExpression,operator:b.text,left:a,right:this.unary()};return a},unary:function(){var a;return(a=this.expect("+","-","!"))?{type:G.UnaryExpression,operator:a.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?
a=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?a=P(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?a={type:G.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var b;b=this.expect("(","[",".");)"("===b.text?(a={type:G.CallExpression,callee:a,arguments:this.parseArguments()},this.consume(")")):
"["===b.text?(a={type:G.MemberExpression,object:a,property:this.expression(),computed:!0},this.consume("]")):"."===b.text?a={type:G.MemberExpression,object:a,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return a},filter:function(a){a=[a];for(var b={type:G.CallExpression,callee:this.identifier(),arguments:a,filter:!0};this.expect(":");)a.push(this.expression());return b},parseArguments:function(){var a=[];if(")"!==this.peekToken().text){do a.push(this.expression());while(this.expect(","))
}return a},identifier:function(){var a=this.consume();a.identifier||this.throwError("is not a valid identifier",a);return{type:G.Identifier,name:a.text}},constant:function(){return{type:G.Literal,value:this.consume().value}},arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text){do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","))}this.consume("]");return{type:G.ArrayExpression,elements:a}},object:function(){var a=[],b;if("}"!==this.peekToken().text){do{if(this.peek("}"))break;
b={type:G.Property,kind:"init"};this.peek().constant?b.key=this.constant():this.peek().identifier?b.key=this.identifier():this.throwError("invalid key",this.peek());this.consume(":");b.value=this.expression();a.push(b)}while(this.expect(","))}this.consume("}");return{type:G.ObjectExpression,properties:a}},throwError:function(a,b){throw Ya("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",b.text,a,b.index+1,this.text,this.text.substring(b.index));},consume:function(a){if(0===
this.tokens.length)throw Ya("ueoe","Unexpected end of expression: {0}",this.text);var b=this.expect(a);b||this.throwError("is unexpected, expecting ["+a+"]",this.peek());return b},peekToken:function(){if(0===this.tokens.length)throw Ya("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(a,b,c,d){return this.peekAhead(0,a,b,c,d)},peekAhead:function(a,b,c,d,e){if(this.tokens.length>a){a=this.tokens[a];var f=a.text;if(f===b||f===c||f===d||f===e||!(b||c||d||e))return a}return!1},
expect:function(a,b,c,d){return(a=this.peek(a,b,c,d))?(this.tokens.shift(),a):!1},selfReferential:{"this":{type:G.ThisExpression},$locals:{type:G.LocalsExpression}}};ja.prototype={compile:function(a,b){var d=this,e=this.astBuilder.ast(a);this.state={nextId:0,filters:{},expensiveChecks:b,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]};Aa(e,d.$filter);var f="",h;this.stage="assign";if(h=Ee(e))this.state.computing="assign",f=this.nextId(),this.recurse(h,f),this.return_(f),f="fn.assign="+
this.generateFunction("assign","s,v,l");h=Tb(e.body);d.stage="inputs";c(h,function(a,b){var c="fn"+b;d.state[c]={vars:[],body:[],own:{}};d.state.computing=c;var e=d.nextId();d.recurse(a,e);d.return_(e);d.state.inputs.push(c);a.watchId=b});this.state.computing="fn";this.stage="main";this.recurse(e);f='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+f+this.watchFns()+"return fn;";f=(new Function("$filter","ensureSafeMemberName","ensureSafeObject",
"ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",f))(this.$filter,mc,Sb,Qd,Ae,yc,Be,Ce,a);this.state=this.stage=void 0;f.literal=Fe(e);f.constant=e.constant;return f},USE:"use",STRICT:"strict",watchFns:function(){var a=[],b=this.state.inputs,d=this;c(b,function(b){a.push("var "+b+"="+d.generateFunction(b,"s"))});b.length&&a.push("fn.inputs=["+b.join(",")+"];");return a.join("")},generateFunction:function(a,b){return"function("+b+"){"+this.varsPrefix(a)+this.body(a)+
"};"},filterPrefix:function(){var a=[],b=this;c(this.state.filters,function(c,d){a.push(c+"=$filter("+b.escape(d)+")")});return a.length?"var "+a.join(",")+";":""},varsPrefix:function(a){return this.state[a].vars.length?"var "+this.state[a].vars.join(",")+";":""},body:function(a){return this.state[a].body.join("")},recurse:function(a,b,d,e,f,h){var g,m,k=this,n,l;e=e||q;if(!h&&w(a.watchId))b=b||this.nextId(),this.if_("i",this.lazyAssign(b,this.computedMember("i",a.watchId)),this.lazyRecurse(a,b,d,
e,f,!0));else switch(a.type){case G.Program:c(a.body,function(b,c){k.recurse(b.expression,void 0,void 0,function(a){m=a});c!==a.body.length-1?k.current().body.push(m,";"):k.return_(m)});break;case G.Literal:l=this.escape(a.value);this.assign(b,l);e(l);break;case G.UnaryExpression:this.recurse(a.argument,void 0,void 0,function(a){m=a});l=a.operator+"("+this.ifDefined(m,0)+")";this.assign(b,l);e(l);break;case G.BinaryExpression:this.recurse(a.left,void 0,void 0,function(a){g=a});this.recurse(a.right,
void 0,void 0,function(a){m=a});l="+"===a.operator?this.plus(g,m):"-"===a.operator?this.ifDefined(g,0)+a.operator+this.ifDefined(m,0):"("+g+")"+a.operator+"("+m+")";this.assign(b,l);e(l);break;case G.LogicalExpression:b=b||this.nextId();k.recurse(a.left,b);k.if_("&&"===a.operator?b:k.not(b),k.lazyRecurse(a.right,b));e(b);break;case G.ConditionalExpression:b=b||this.nextId();k.recurse(a.test,b);k.if_(b,k.lazyRecurse(a.alternate,b),k.lazyRecurse(a.consequent,b));e(b);break;case G.Identifier:b=b||this.nextId();
d&&(d.context="inputs"===k.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",a.name)+"?l:s"),d.computed=!1,d.name=a.name);mc(a.name);k.if_("inputs"===k.stage||k.not(k.getHasOwnProperty("l",a.name)),function(){k.if_("inputs"===k.stage||"s",function(){f&&1!==f&&k.if_(k.not(k.nonComputedMember("s",a.name)),k.lazyAssign(k.nonComputedMember("s",a.name),"{}"));k.assign(b,k.nonComputedMember("s",a.name))})},b&&k.lazyAssign(b,k.nonComputedMember("l",a.name)));(k.state.expensiveChecks||Ub(a.name))&&
k.addEnsureSafeObject(b);e(b);break;case G.MemberExpression:g=d&&(d.context=this.nextId())||this.nextId();b=b||this.nextId();k.recurse(a.object,g,void 0,function(){k.if_(k.notNull(g),function(){f&&1!==f&&k.addEnsureSafeAssignContext(g);if(a.computed)m=k.nextId(),k.recurse(a.property,m),k.getStringValue(m),k.addEnsureSafeMemberName(m),f&&1!==f&&k.if_(k.not(k.computedMember(g,m)),k.lazyAssign(k.computedMember(g,m),"{}")),l=k.ensureSafeObject(k.computedMember(g,m)),k.assign(b,l),d&&(d.computed=!0,d.name=
m);else{mc(a.property.name);f&&1!==f&&k.if_(k.not(k.nonComputedMember(g,a.property.name)),k.lazyAssign(k.nonComputedMember(g,a.property.name),"{}"));l=k.nonComputedMember(g,a.property.name);if(k.state.expensiveChecks||Ub(a.property.name))l=k.ensureSafeObject(l);k.assign(b,l);d&&(d.computed=!1,d.name=a.property.name)}},function(){k.assign(b,"undefined")});e(b)},!!f);break;case G.CallExpression:b=b||this.nextId();a.filter?(m=k.filter(a.callee.name),n=[],c(a.arguments,function(a){var b=k.nextId();k.recurse(a,
b);n.push(b)}),l=m+"("+n.join(",")+")",k.assign(b,l),e(b)):(m=k.nextId(),g={},n=[],k.recurse(a.callee,m,g,function(){k.if_(k.notNull(m),function(){k.addEnsureSafeFunction(m);c(a.arguments,function(a){k.recurse(a,k.nextId(),void 0,function(a){n.push(k.ensureSafeObject(a))})});g.name?(k.state.expensiveChecks||k.addEnsureSafeObject(g.context),l=k.member(g.context,g.name,g.computed)+"("+n.join(",")+")"):l=m+"("+n.join(",")+")";l=k.ensureSafeObject(l);k.assign(b,l)},function(){k.assign(b,"undefined")});
e(b)}));break;case G.AssignmentExpression:m=this.nextId();g={};if(!De(a.left))throw Ya("lval","Trying to assign a value to a non l-value");this.recurse(a.left,void 0,g,function(){k.if_(k.notNull(g.context),function(){k.recurse(a.right,m);k.addEnsureSafeObject(k.member(g.context,g.name,g.computed));k.addEnsureSafeAssignContext(g.context);l=k.member(g.context,g.name,g.computed)+a.operator+m;k.assign(b,l);e(b||l)})},1);break;case G.ArrayExpression:n=[];c(a.elements,function(a){k.recurse(a,k.nextId(),
void 0,function(a){n.push(a)})});l="["+n.join(",")+"]";this.assign(b,l);e(l);break;case G.ObjectExpression:n=[];c(a.properties,function(a){k.recurse(a.value,k.nextId(),void 0,function(b){n.push(k.escape(a.key.type===G.Identifier?a.key.name:""+a.key.value)+":"+b)})});l="{"+n.join(",")+"}";this.assign(b,l);e(l);break;case G.ThisExpression:this.assign(b,"s");e("s");break;case G.LocalsExpression:this.assign(b,"l");e("l");break;case G.NGValueParameter:this.assign(b,"v"),e("v")}},getHasOwnProperty:function(a,
b){var c=a+"."+b,d=this.current().own;d.hasOwnProperty(c)||(d[c]=this.nextId(!1,a+"&&("+this.escape(b)+" in "+a+")"));return d[c]},assign:function(a,b){if(a)return this.current().body.push(a,"=",b,";"),a},filter:function(a){this.state.filters.hasOwnProperty(a)||(this.state.filters[a]=this.nextId(!0));return this.state.filters[a]},ifDefined:function(a,b){return"ifDefined("+a+","+this.escape(b)+")"},plus:function(a,b){return"plus("+a+","+b+")"},return_:function(a){this.current().body.push("return ",
a,";")},if_:function(a,b,c){if(!0===a)b();else{var d=this.current().body;d.push("if(",a,"){");b();d.push("}");c&&(d.push("else{"),c(),d.push("}"))}},not:function(a){return"!("+a+")"},notNull:function(a){return a+"!=null"},nonComputedMember:function(a,b){var c=/[^$_a-zA-Z0-9]/g;return/[$_a-zA-Z][$_a-zA-Z0-9]*/.test(b)?a+"."+b:a+'["'+b.replace(c,this.stringEscapeFn)+'"]'},computedMember:function(a,b){return a+"["+b+"]"},member:function(a,b,c){return c?this.computedMember(a,b):this.nonComputedMember(a,
b)},addEnsureSafeObject:function(a){this.current().body.push(this.ensureSafeObject(a),";")},addEnsureSafeMemberName:function(a){this.current().body.push(this.ensureSafeMemberName(a),";")},addEnsureSafeFunction:function(a){this.current().body.push(this.ensureSafeFunction(a),";")},addEnsureSafeAssignContext:function(a){this.current().body.push(this.ensureSafeAssignContext(a),";")},ensureSafeObject:function(a){return"ensureSafeObject("+a+",text)"},ensureSafeMemberName:function(a){return"ensureSafeMemberName("+
a+",text)"},ensureSafeFunction:function(a){return"ensureSafeFunction("+a+",text)"},getStringValue:function(a){this.assign(a,"getStringValue("+a+")")},ensureSafeAssignContext:function(a){return"ensureSafeAssignContext("+a+",text)"},lazyRecurse:function(a,b,c,d,e,f){var h=this;return function(){h.recurse(a,b,c,d,e,f)}},lazyAssign:function(a,b){var c=this;return function(){c.assign(a,b)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)},
escape:function(a){if(E(a))return"'"+a.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(y(a))return a.toString();if(!0===a)return"true";if(!1===a)return"false";if(null===a)return"null";if("undefined"===typeof a)return"undefined";throw Ya("esc","IMPOSSIBLE");},nextId:function(a,b){var c="v"+this.state.nextId++;a||this.current().vars.push(c+(b?"="+b:""));return c},current:function(){return this.state[this.state.computing]}};Vc.prototype={compile:function(a,b){var d=this,e=this.astBuilder.ast(a);
this.expression=a;this.expensiveChecks=b;Aa(e,d.$filter);var f,h;if(f=Ee(e))h=this.recurse(f);f=Tb(e.body);var g;f&&(g=[],c(f,function(a,b){var c=d.recurse(a);a.input=c;g.push(c);a.watchId=b}));var m=[];c(e.body,function(a){m.push(d.recurse(a.expression))});f=0===e.body.length?q:1===e.body.length?m[0]:function(a,b){var d;c(m,function(c){d=c(a,b)});return d};h&&(f.assign=function(a,b,c){return h(a,c,b)});g&&(f.inputs=g);f.literal=Fe(e);f.constant=e.constant;return f},recurse:function(a,b,d){var e,
f,h=this,g;if(a.input)return this.inputs(a.input,a.watchId);switch(a.type){case G.Literal:return this.value(a.value,b);case G.UnaryExpression:return f=this.recurse(a.argument),this["unary"+a.operator](f,b);case G.BinaryExpression:return e=this.recurse(a.left),f=this.recurse(a.right),this["binary"+a.operator](e,f,b);case G.LogicalExpression:return e=this.recurse(a.left),f=this.recurse(a.right),this["binary"+a.operator](e,f,b);case G.ConditionalExpression:return this["ternary?:"](this.recurse(a.test),
this.recurse(a.alternate),this.recurse(a.consequent),b);case G.Identifier:return mc(a.name,h.expression),h.identifier(a.name,h.expensiveChecks||Ub(a.name),b,d,h.expression);case G.MemberExpression:return e=this.recurse(a.object,!1,!!d),a.computed||(mc(a.property.name,h.expression),f=a.property.name),a.computed&&(f=this.recurse(a.property)),a.computed?this.computedMember(e,f,b,d,h.expression):this.nonComputedMember(e,f,h.expensiveChecks,b,d,h.expression);case G.CallExpression:return g=[],c(a.arguments,
function(a){g.push(h.recurse(a))}),a.filter&&(f=this.$filter(a.callee.name)),a.filter||(f=this.recurse(a.callee,!0)),a.filter?function(a,c,d,e){for(var h=[],m=0;m<g.length;++m)h.push(g[m](a,c,d,e));a=f.apply(void 0,h,e);return b?{context:void 0,name:void 0,value:a}:a}:function(a,c,d,e){var m=f(a,c,d,e),k;if(null!=m.value){Sb(m.context,h.expression);Qd(m.value,h.expression);k=[];for(var n=0;n<g.length;++n)k.push(Sb(g[n](a,c,d,e),h.expression));k=Sb(m.value.apply(m.context,k),h.expression)}return b?
{value:k}:k};case G.AssignmentExpression:return e=this.recurse(a.left,!0,1),f=this.recurse(a.right),function(a,c,d,g){var m=e(a,c,d,g);a=f(a,c,d,g);Sb(m.value,h.expression);yc(m.context);m.context[m.name]=a;return b?{value:a}:a};case G.ArrayExpression:return g=[],c(a.elements,function(a){g.push(h.recurse(a))}),function(a,c,d,e){for(var f=[],h=0;h<g.length;++h)f.push(g[h](a,c,d,e));return b?{value:f}:f};case G.ObjectExpression:return g=[],c(a.properties,function(a){g.push({key:a.key.type===G.Identifier?
a.key.name:""+a.key.value,value:h.recurse(a.value)})}),function(a,c,d,e){for(var f={},h=0;h<g.length;++h)f[g[h].key]=g[h].value(a,c,d,e);return b?{value:f}:f};case G.ThisExpression:return function(a){return b?{value:a}:a};case G.LocalsExpression:return function(a,c){return b?{value:c}:c};case G.NGValueParameter:return function(a,c,d){return b?{value:d}:d}}},"unary+":function(a,b){return function(c,d,e,f){c=a(c,d,e,f);c=w(c)?+c:0;return b?{value:c}:c}},"unary-":function(a,b){return function(c,d,e,
f){c=a(c,d,e,f);c=w(c)?-c:0;return b?{value:c}:c}},"unary!":function(a,b){return function(c,d,e,f){c=!a(c,d,e,f);return b?{value:c}:c}},"binary+":function(a,b,c){return function(d,e,f,h){var g=a(d,e,f,h);d=b(d,e,f,h);g=Ce(g,d);return c?{value:g}:g}},"binary-":function(a,b,c){return function(d,e,f,h){var g=a(d,e,f,h);d=b(d,e,f,h);g=(w(g)?g:0)-(w(d)?d:0);return c?{value:g}:g}},"binary*":function(a,b,c){return function(d,e,f,h){d=a(d,e,f,h)*b(d,e,f,h);return c?{value:d}:d}},"binary/":function(a,b,c){return function(d,
e,f,h){d=a(d,e,f,h)/b(d,e,f,h);return c?{value:d}:d}},"binary%":function(a,b,c){return function(d,e,f,h){d=a(d,e,f,h)%b(d,e,f,h);return c?{value:d}:d}},"binary===":function(a,b,c){return function(d,e,f,h){d=a(d,e,f,h)===b(d,e,f,h);return c?{value:d}:d}},"binary!==":function(a,b,c){return function(d,e,f,h){d=a(d,e,f,h)!==b(d,e,f,h);return c?{value:d}:d}},"binary==":function(a,b,c){return function(d,e,f,h){d=a(d,e,f,h)==b(d,e,f,h);return c?{value:d}:d}},"binary!=":function(a,b,c){return function(d,
e,f,h){d=a(d,e,f,h)!=b(d,e,f,h);return c?{value:d}:d}},"binary<":function(a,b,c){return function(d,e,f,h){d=a(d,e,f,h)<b(d,e,f,h);return c?{value:d}:d}},"binary>":function(a,b,c){return function(d,e,f,h){d=a(d,e,f,h)>b(d,e,f,h);return c?{value:d}:d}},"binary<=":function(a,b,c){return function(d,e,f,h){d=a(d,e,f,h)<=b(d,e,f,h);return c?{value:d}:d}},"binary>=":function(a,b,c){return function(d,e,f,h){d=a(d,e,f,h)>=b(d,e,f,h);return c?{value:d}:d}},"binary&&":function(a,b,c){return function(d,e,f,h){d=
a(d,e,f,h)&&b(d,e,f,h);return c?{value:d}:d}},"binary||":function(a,b,c){return function(d,e,f,h){d=a(d,e,f,h)||b(d,e,f,h);return c?{value:d}:d}},"ternary?:":function(a,b,c,d){return function(e,f,h,g){e=a(e,f,h,g)?b(e,f,h,g):c(e,f,h,g);return d?{value:e}:e}},value:function(a,b){return function(){return b?{context:void 0,name:void 0,value:a}:a}},identifier:function(a,b,c,d,e){return function(f,h,g,m){f=h&&a in h?h:f;d&&1!==d&&f&&!f[a]&&(f[a]={});h=f?f[a]:void 0;b&&Sb(h,e);return c?{context:f,name:a,
value:h}:h}},computedMember:function(a,b,c,d,e){return function(f,h,g,m){var k=a(f,h,g,m),n,l;null!=k&&(n=b(f,h,g,m),n+="",mc(n,e),d&&1!==d&&(yc(k),k&&!k[n]&&(k[n]={})),l=k[n],Sb(l,e));return c?{context:k,name:n,value:l}:l}},nonComputedMember:function(a,b,c,d,e,f){return function(h,g,m,k){h=a(h,g,m,k);e&&1!==e&&(yc(h),h&&!h[b]&&(h[b]={}));g=null!=h?h[b]:void 0;(c||Ub(b))&&Sb(g,f);return d?{context:h,name:b,value:g}:g}},inputs:function(a,b){return function(c,d,e,f){return f?f[b]:a(c,d,e)}}};var re=
function(a,b,c){this.lexer=a;this.$filter=b;this.options=c;this.ast=new G(a,c);this.astCompiler=c.csp?new Vc(this.ast,b):new ja(this.ast,b)};re.prototype={constructor:re,parse:function(a){return this.astCompiler.compile(a,this.options.expensiveChecks)}};var Cf=Object.prototype.valueOf,jc=a("$sce"),Cb={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Df=a("$compile"),Ua=d.document.createElement("a"),bf=Gb(d.location.href);Td.$inject=["$document"];Ud.$inject=["$provide"];var cf=22,
df=".",se="0";ee.$inject=["$locale"];yd.$inject=["$locale"];var te={yyyy:Ja("FullYear",4,0,!1,!0),yy:Ja("FullYear",2,0,!0,!0),y:Ja("FullYear",1,0,!1,!0),MMMM:uc("Month"),MMM:uc("Month",!0),MM:Ja("Month",2,1),M:Ja("Month",1,1),LLLL:uc("Month",!1,!0),dd:Ja("Date",2),d:Ja("Date",1),HH:Ja("Hours",2),H:Ja("Hours",1),hh:Ja("Hours",2,-12),h:Ja("Hours",1,-12),mm:Ja("Minutes",2),m:Ja("Minutes",1),ss:Ja("Seconds",2),s:Ja("Seconds",1),sss:Ja("Milliseconds",3),EEEE:uc("Day"),EEE:uc("Day",!0),a:function(a,b){return 12>
a.getHours()?b.AMPMS[0]:b.AMPMS[1]},Z:function(a,b,c){a=-1*c;return a=(0<=a?"+":"")+(hd(Math[0<a?"floor":"ceil"](a/60),2)+hd(Math.abs(a%60),2))},ww:Bd(2),w:Bd(1),G:Jc,GG:Jc,GGG:Jc,GGGG:function(a,b){return 0>=a.getFullYear()?b.ERANAMES[0]:b.ERANAMES[1]}},Ef=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,ef=/^\-?\d+$/;ge.$inject=["$locale"];var ff=t(na),Ff=t(dd);Cd.$inject=["$parse"];var Gf=t({restrict:"E",compile:function(a,b){if(!b.href&&!b.xlinkHref)return function(a,
b){if("a"===b[0].nodeName.toLowerCase()){var c="[object SVGAnimatedString]"===eb.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(c)||a.preventDefault()})}}}}),Id={};c(ic,function(a,b){function c(a,e,f){a.$watch(f[d],function(a){f.$set(b,!!a)})}if("multiple"!=a){var d=Xa("ng-"+b),e=c;"checked"===a&&(e=function(a,b,e){e.ngModel!==e[d]&&c(a,b,e)});Id[d]=function(){return{restrict:"A",priority:100,link:e}}}});c(gd,function(a,b){Id[b]=function(){return{priority:100,link:function(a,
c,d){if("ngPattern"===b&&"/"==d.ngPattern.charAt(0)&&(c=d.ngPattern.match(Gc))){d.$set("ngPattern",new RegExp(c[1],c[2]));return}a.$watch(d[b],function(a){d.$set(b,a)})}}}});c(["src","srcset","href"],function(a){var b=Xa("ng-"+a);Id[b]=function(){return{priority:99,link:function(c,d,e){var f=a,h=a;"href"===a&&"[object SVGAnimatedString]"===eb.call(d.prop("href"))&&(h="xlinkHref",e.$attr[h]="xlink:href",f=null);e.$observe(b,function(b){b?(e.$set(h,b),Qb&&f&&d.prop(f,e[h])):"href"===a&&e.$set(h,null)})}}}});
var Jd={$addControl:q,$$renameControl:function(a,b){a.$name=b},$removeControl:q,$setValidity:q,$setDirty:q,$setPristine:q,$setSubmitted:q};he.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Kd=function(a){return["$timeout","$parse",function(b,c){function d(a){return""===a?c('this[""]').assign:c(a).assign||q}return{name:"form",restrict:a?"EAC":"E",require:["form","^^?form"],controller:he,compile:function(c,e){c.addClass(Rc).addClass(md);var h=e.name?"name":a&&e.ngForm?"ngForm":
!1;return{pre:function(a,c,e,g){var m=g[0];if(!("action"in e)){var k=function(b){a.$apply(function(){m.$commitViewValue();m.$setSubmitted()});b.preventDefault()};c[0].addEventListener("submit",k,!1);c.on("$destroy",function(){b(function(){c[0].removeEventListener("submit",k,!1)},0,!1)})}(g[1]||m.$$parentForm).$addControl(m);var n=h?d(m.$name):q;h&&(n(a,m),e.$observe(h,function(b){m.$name!==b&&(n(a,void 0),m.$$parentForm.$$renameControl(m,b),n=d(m.$name),n(a,m))}));c.on("$destroy",function(){m.$$parentForm.$removeControl(m);
n(a,void 0);f(m,Jd)})}}}}}]},gf=Kd(),Hf=Kd(!0),Kc=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,hf=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+\])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,If=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,jf=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,kf=/^(\d{4,})-(\d{2})-(\d{2})$/,lf=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,
ue=/^(\d{4,})-W(\d\d)$/,mf=/^(\d{4,})-(\d\d)$/,nf=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Ld=ca();c(["date","datetime-local","month","time","week"],function(a){Ld[a]=!0});var of={text:function(a,b,c,d,e,f){Mc(a,b,c,d,e,f);Pb(d)},date:vc("date",kf,id(kf,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":vc("datetimelocal",lf,id(lf,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:vc("time",nf,id(nf,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:vc("week",ue,function(a,b){if(B(a))return a;
if(E(a)){ue.lastIndex=0;var c=ue.exec(a);if(c){var d=+c[1],e=+c[2],f=c=0,h=0,g=0,m=zd(d),e=7*(e-1);b&&(c=b.getHours(),f=b.getMinutes(),h=b.getSeconds(),g=b.getMilliseconds());return new Date(d,0,m.getDate()+e,c,f,h,g)}}return NaN},"yyyy-Www"),month:vc("month",mf,id(mf,["yyyy","MM"]),"yyyy-MM"),number:function(a,b,c,d,e,f){oa(a,b,c,d);Mc(a,b,c,d,e,f);d.$$parserName="number";d.$parsers.push(function(a){if(d.$isEmpty(a))return null;if(jf.test(a))return parseFloat(a)});d.$formatters.push(function(a){if(!d.$isEmpty(a)){if(!y(a))throw nd("numfmt",
"Expected `{0}` to be a number",a);a=a.toString()}return a});if(w(c.min)||c.ngMin){var h;d.$validators.min=function(a){return d.$isEmpty(a)||x(h)||a>=h};c.$observe("min",function(a){w(a)&&!y(a)&&(a=parseFloat(a,10));h=y(a)&&!isNaN(a)?a:void 0;d.$validate()})}if(w(c.max)||c.ngMax){var g;d.$validators.max=function(a){return d.$isEmpty(a)||x(g)||a<=g};c.$observe("max",function(a){w(a)&&!y(a)&&(a=parseFloat(a,10));g=y(a)&&!isNaN(a)?a:void 0;d.$validate()})}},url:function(a,b,c,d,e,f){Mc(a,b,c,d,e,f);
Pb(d);d.$$parserName="url";d.$validators.url=function(a,b){var c=a||b;return d.$isEmpty(c)||hf.test(c)}},email:function(a,b,c,d,e,f){Mc(a,b,c,d,e,f);Pb(d);d.$$parserName="email";d.$validators.email=function(a,b){var c=a||b;return d.$isEmpty(c)||If.test(c)}},radio:function(a,b,c,d){x(c.name)&&b.attr("name",++Oc);b.on("click",function(a){b[0].checked&&d.$setViewValue(c.value,a&&a.type)});d.$render=function(){b[0].checked=c.value==d.$viewValue};c.$observe("value",d.$render)},checkbox:function(a,b,c,
d,e,f,h,g){var m=de(g,a,"ngTrueValue",c.ngTrueValue,!0),k=de(g,a,"ngFalseValue",c.ngFalseValue,!1);b.on("click",function(a){d.$setViewValue(b[0].checked,a&&a.type)});d.$render=function(){b[0].checked=d.$viewValue};d.$isEmpty=function(a){return!1===a};d.$formatters.push(function(a){return aa(a,m)});d.$parsers.push(function(a){return a?m:k})},hidden:q,button:q,submit:q,reset:q,file:q},pf=["$browser","$sniffer","$filter","$parse",function(a,b,c,d){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,
f,h,g){g[0]&&(of[na(h.type)]||of.text)(e,f,h,g[0],b,a,c,d)}}}}],Jf=/^(true|false|\d+)$/,V=function(){return{restrict:"A",priority:100,compile:function(a,b){return Jf.test(b.ngValue)?function(a,b,c){c.$set("value",a.$eval(c.ngValue))}:function(a,b,c){a.$watch(c.ngValue,function(a){c.$set("value",a)})}}}},Kf=["$compile",function(a){return{restrict:"AC",compile:function(b){a.$$addBindingClass(b);return function(b,c,d){a.$$addBindingInfo(c,d.ngBind);c=c[0];b.$watch(d.ngBind,function(a){c.textContent=
x(a)?"":a})}}}}],Fc=["$interpolate","$compile",function(a,b){return{compile:function(c){b.$$addBindingClass(c);return function(c,d,e){c=a(d.attr(e.$attr.ngBindTemplate));b.$$addBindingInfo(d,c.expressions);d=d[0];e.$observe("ngBindTemplate",function(a){d.textContent=x(a)?"":a})}}}}],vd=["$sce","$parse","$compile",function(a,b,c){return{restrict:"A",compile:function(d,e){var f=b(e.ngBindHtml),h=b(e.ngBindHtml,function(a){return(a||"").toString()});c.$$addBindingClass(d);return function(b,d,e){c.$$addBindingInfo(d,
e.ngBindHtml);b.$watch(h,function(){d.html(a.getTrustedHtml(f(b))||"")})}}}}],ve=t({restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$viewChangeListeners.push(function(){a.$eval(c.ngChange)})}}),Lf=Ed("",!0),Mf=Ed("Odd",0),Nf=Ed("Even",1),Of=da({compile:function(a,b){b.$set("ngCloak",void 0);a.removeClass("ng-cloak")}}),Pf=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],qf={},Qf={blur:!0,focus:!0};c("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),
function(a){var b=Xa("ng-"+a);qf[b]=["$parse","$rootScope",function(c,d){return{restrict:"A",compile:function(e,f){var h=c(f[b],null,!0);return function(b,c){c.on(a,function(c){var e=function(){h(b,{$event:c})};Qf[a]&&d.$$phase?b.$evalAsync(e):b.$apply(e)})}}}}]});var Ta=["$animate","$compile",function(a,b){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,h){var g,m,k;c.$watch(e.ngIf,function(c){c?m||h(function(c,f){m=f;c[c.length++]=
b.$$createComment("end ngIf",e.ngIf);g={clone:c};a.enter(c,d.parent(),d)}):(k&&(k.remove(),k=null),m&&(m.$destroy(),m=null),g&&(k=Ba(g.clone),a.leave(k).then(function(){k=null}),g=null))})}}}],Rf=["$templateRequest","$anchorScroll","$animate",function(a,b,c){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:db.noop,compile:function(d,e){var f=e.ngInclude||e.src,h=e.onload||"",g=e.autoscroll;return function(d,e,m,k,n){var l=0,q,r,t,u=function(){r&&(r.remove(),r=null);q&&
(q.$destroy(),q=null);t&&(c.leave(t).then(function(){r=null}),r=t,t=null)};d.$watch(f,function(f){var m=function(){!w(g)||g&&!d.$eval(g)||b()},r=++l;f?(a(f,!0).then(function(a){if(!d.$$destroyed&&r===l){var b=d.$new();k.template=a;a=n(b,function(a){u();c.enter(a,null,e).then(m)});q=b;t=a;q.$emit("$includeContentLoaded",f);d.$eval(h)}},function(){d.$$destroyed||r!==l||(u(),d.$emit("$includeContentError",f))}),d.$emit("$includeContentRequested",f)):(u(),k.template=null)})}}}}],Sf=["$compile",function(a){return{restrict:"ECA",
priority:-400,require:"ngInclude",link:function(b,c,e,f){eb.call(c[0]).match(/SVG/)?(c.empty(),a(rd(f.template,d.document).childNodes)(b,function(a){c.append(a)},{futureParentElement:c})):(c.html(f.template),a(c.contents())(b))}}}],Tf=da({priority:450,compile:function(){return{pre:function(a,b,c){a.$eval(c.ngInit)}}}}),Uf=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,b,d,e){var f=b.attr(d.$attr.ngList)||", ",h="false"!==d.ngTrim,g=h?pa(f):f;e.$parsers.push(function(a){if(!x(a)){var b=
[];a&&c(a.split(g),function(a){a&&b.push(h?pa(a):a)});return b}});e.$formatters.push(function(a){if(Q(a))return a.join(f)});e.$isEmpty=function(a){return!a||!a.length}}}},md="ng-valid",rf="ng-invalid",Rc="ng-pristine",Md="ng-dirty",sf="ng-pending",nd=a("ngModel"),Vf=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(a,b,d,e,f,h,g,m,k,n){this.$modelValue=this.$viewValue=Number.NaN;this.$$rawModelValue=void 0;this.$validators={};
this.$asyncValidators={};this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=!0;this.$touched=!1;this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$error={};this.$$success={};this.$pending=void 0;this.$name=n(d.name||"",!1)(a);this.$$parentForm=Jd;var l=f(d.ngModel),r=l.assign,t=l,u=r,p=null,B,v=this;this.$$setOptions=function(a){if((v.$options=a)&&a.getterSetter){var b=f(d.ngModel+"()"),c=f(d.ngModel+"($$$p)");t=function(a){var c=l(a);D(c)&&(c=b(a));
return c};u=function(a,b){D(l(a))?c(a,{$$$p:b}):r(a,b)}}else if(!l.assign)throw nd("nonassign","Expression '{0}' is non-assignable. Element: {1}",d.ngModel,ra(e));};this.$render=q;this.$isEmpty=function(a){return x(a)||""===a||null===a||a!==a};this.$$updateEmptyClasses=function(a){v.$isEmpty(a)?(h.removeClass(e,"ng-not-empty"),h.addClass(e,"ng-empty")):(h.removeClass(e,"ng-empty"),h.addClass(e,"ng-not-empty"))};var A=0;ie({ctrl:this,$element:e,set:function(a,b){a[b]=!0},unset:function(a,b){delete a[b]},
$animate:h});this.$setPristine=function(){v.$dirty=!1;v.$pristine=!0;h.removeClass(e,Md);h.addClass(e,Rc)};this.$setDirty=function(){v.$dirty=!0;v.$pristine=!1;h.removeClass(e,Rc);h.addClass(e,Md);v.$$parentForm.$setDirty()};this.$setUntouched=function(){v.$touched=!1;v.$untouched=!0;h.setClass(e,"ng-untouched","ng-touched")};this.$setTouched=function(){v.$touched=!0;v.$untouched=!1;h.setClass(e,"ng-touched","ng-untouched")};this.$rollbackViewValue=function(){g.cancel(p);v.$viewValue=v.$$lastCommittedViewValue;
v.$render()};this.$validate=function(){if(!y(v.$modelValue)||!isNaN(v.$modelValue)){var a=v.$$rawModelValue,b=v.$valid,c=v.$modelValue,d=v.$options&&v.$options.allowInvalid;v.$$runValidators(a,v.$$lastCommittedViewValue,function(e){d||b===e||(v.$modelValue=e?a:void 0,v.$modelValue!==c&&v.$$writeModelToScope())})}};this.$$runValidators=function(a,b,d){function e(){var d=!0;c(v.$validators,function(c,e){var f=c(a,b);d=d&&f;h(e,f)});return d?!0:(c(v.$asyncValidators,function(a,b){h(b,null)}),!1)}function f(){var d=
[],e=!0;c(v.$asyncValidators,function(c,f){var g=c(a,b);if(!g||!D(g.then))throw nd("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",g);h(f,void 0);d.push(g.then(function(){h(f,!0)},function(){e=!1;h(f,!1)}))});d.length?k.all(d).then(function(){g(e)},q):g(!0)}function h(a,b){m===A&&v.$setValidity(a,b)}function g(a){m===A&&d(a)}A++;var m=A;(function(){var a=v.$$parserName||"parse";if(x(B))h(a,null);else return B||(c(v.$validators,function(a,b){h(b,null)}),c(v.$asyncValidators,
function(a,b){h(b,null)})),h(a,B),B;return!0})()?e()?f():g(!1):g(!1)};this.$commitViewValue=function(){var a=v.$viewValue;g.cancel(p);if(v.$$lastCommittedViewValue!==a||""===a&&v.$$hasNativeValidators)v.$$updateEmptyClasses(a),v.$$lastCommittedViewValue=a,v.$pristine&&this.$setDirty(),this.$$parseAndValidate()};this.$$parseAndValidate=function(){var b=v.$$lastCommittedViewValue;if(B=x(b)?void 0:!0)for(var c=0;c<v.$parsers.length;c++)if(b=v.$parsers[c](b),x(b)){B=!1;break}y(v.$modelValue)&&isNaN(v.$modelValue)&&
(v.$modelValue=t(a));var d=v.$modelValue,e=v.$options&&v.$options.allowInvalid;v.$$rawModelValue=b;e&&(v.$modelValue=b,v.$modelValue!==d&&v.$$writeModelToScope());v.$$runValidators(b,v.$$lastCommittedViewValue,function(a){e||(v.$modelValue=a?b:void 0,v.$modelValue!==d&&v.$$writeModelToScope())})};this.$$writeModelToScope=function(){u(a,v.$modelValue);c(v.$viewChangeListeners,function(a){try{a()}catch(c){b(c)}})};this.$setViewValue=function(a,b){v.$viewValue=a;v.$options&&!v.$options.updateOnDefault||
v.$$debounceViewValueCommit(b)};this.$$debounceViewValueCommit=function(b){var c=0,d=v.$options;d&&w(d.debounce)&&(d=d.debounce,y(d)?c=d:y(d[b])?c=d[b]:y(d["default"])&&(c=d["default"]));g.cancel(p);c?p=g(function(){v.$commitViewValue()},c):m.$$phase?v.$commitViewValue():a.$apply(function(){v.$commitViewValue()})};a.$watch(function(){var b=t(a);if(b!==v.$modelValue&&(v.$modelValue===v.$modelValue||b===b)){v.$modelValue=v.$$rawModelValue=b;B=void 0;for(var c=v.$formatters,d=c.length,e=b;d--;)e=c[d](e);
v.$viewValue!==e&&(v.$$updateEmptyClasses(e),v.$viewValue=v.$$lastCommittedViewValue=e,v.$render(),v.$$runValidators(b,e,q))}return b})}],tf=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Vf,priority:1,compile:function(b){b.addClass(Rc).addClass("ng-untouched").addClass(md);return{pre:function(a,b,c,d){var e=d[0];b=d[1]||e.$$parentForm;e.$$setOptions(d[2]&&d[2].$options);b.$addControl(e);c.$observe("name",function(a){e.$name!==a&&e.$$parentForm.$$renameControl(e,
a)});a.$on("$destroy",function(){e.$$parentForm.$removeControl(e)})},post:function(b,c,d,e){var f=e[0];if(f.$options&&f.$options.updateOn)c.on(f.$options.updateOn,function(a){f.$$debounceViewValueCommit(a&&a.type)});c.on("blur",function(){f.$touched||(a.$$phase?b.$evalAsync(f.$setTouched):b.$apply(f.$setTouched))})}}}}}],Wf=/(\s+|^)default(\s+|$)/,Xf=function(){return{restrict:"A",controller:["$scope","$attrs",function(a,b){var c=this;this.$options=P(a.$eval(b.ngModelOptions));w(this.$options.updateOn)?
(this.$options.updateOnDefault=!1,this.$options.updateOn=pa(this.$options.updateOn.replace(Wf,function(){c.$options.updateOnDefault=!0;return" "}))):this.$options.updateOnDefault=!0}]}},Yf=da({terminal:!0,priority:1E3}),Zf=a("ngOptions"),fg=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,gg=["$compile","$document",
"$parse",function(a,e,f){function h(a,c,d){function e(a,b,c,d,f){this.selectValue=a;this.viewValue=b;this.label=c;this.group=d;this.disabled=f}function g(a){var c;if(!n&&b(a))c=a;else{c=[];for(var d in a)a.hasOwnProperty(d)&&"$"!==d.charAt(0)&&c.push(d)}return c}var m=a.match(fg);if(!m)throw Zf("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",a,ra(c));var k=m[5]||m[7],n=m[6];a=/ as /.test(m[0])&&m[1];var l=m[9];c=f(m[2]?
m[1]:k);var q=a&&f(a)||c,r=l&&f(l),t=l?function(a,b){return r(d,b)}:function(a){return ua(a)},u=function(a,b){return t(a,B(a,b))},p=f(m[2]||m[1]),x=f(m[3]||""),w=f(m[4]||""),y=f(m[8]),v={},B=n?function(a,b){v[n]=b;v[k]=a;return v}:function(a){v[k]=a;return v};return{trackBy:l,getTrackByValue:u,getWatchables:f(y,function(a){var b=[];a=a||[];for(var c=g(a),e=c.length,f=0;f<e;f++){var h=a===c?f:c[f],k=a[h],h=B(k,h),k=t(k,h);b.push(k);if(m[2]||m[1])k=p(d,h),b.push(k);m[4]&&(h=w(d,h),b.push(h))}return b}),
getOptions:function(){for(var a=[],b={},c=y(d)||[],f=g(c),h=f.length,m=0;m<h;m++){var k=c===f?m:f[m],n=B(c[k],k),r=q(d,n),k=t(r,n),v=p(d,n),A=x(d,n),n=w(d,n),r=new e(k,r,v,A,n);a.push(r);b[k]=r}return{items:a,selectValueMap:b,getOptionFromViewValue:function(a){return b[u(a)]},getViewValueFromOption:function(a){return l?db.copy(a.viewValue):a.viewValue}}}}}var g=d.document.createElement("option"),m=d.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(a,
b,c,d){d[0].registerOption=q},post:function(b,d,f,k){function n(a,b){a.element=b;b.disabled=a.disabled;a.label!==b.label&&(b.label=a.label,b.textContent=a.label);a.value!==b.value&&(b.value=a.selectValue)}function l(){var a=B&&q.readValue();if(B)for(var b=B.items.length-1;0<=b;b--){var c=B.items[b];c.group?$a(c.element.parentNode):$a(c.element)}B=A.getOptions();var e={};y&&d.prepend(u);B.items.forEach(function(a){var b;if(w(a.group)){b=e[a.group];b||(b=m.cloneNode(!1),D.appendChild(b),b.label=a.group,
e[a.group]=b);var c=g.cloneNode(!1)}else b=D,c=g.cloneNode(!1);b.appendChild(c);n(a,c)});d[0].appendChild(D);r.$render();r.$isEmpty(a)||(b=q.readValue(),(A.trackBy||t?aa(a,b):a===b)||(r.$setViewValue(b),r.$render()))}var q=k[0],r=k[1],t=f.multiple,u;k=0;for(var p=d.children(),x=p.length;k<x;k++)if(""===p[k].value){u=p.eq(k);break}var y=!!u,v=N(g.cloneNode(!1));v.val("?");var B,A=h(f.ngOptions,d,b),D=e[0].createDocumentFragment();t?(r.$isEmpty=function(a){return!a||0===a.length},q.writeValue=function(a){B.items.forEach(function(a){a.element.selected=
!1});a&&a.forEach(function(a){if(a=B.getOptionFromViewValue(a))a.element.selected=!0})},q.readValue=function(){var a=d.val()||[],b=[];c(a,function(a){(a=B.selectValueMap[a])&&!a.disabled&&b.push(B.getViewValueFromOption(a))});return b},A.trackBy&&b.$watchCollection(function(){if(Q(r.$viewValue))return r.$viewValue.map(function(a){return A.getTrackByValue(a)})},function(){r.$render()})):(q.writeValue=function(a){var b=B.getOptionFromViewValue(a);b?(d[0].value!==b.selectValue&&(v.remove(),y||u.remove(),
d[0].value=b.selectValue,b.element.selected=!0),b.element.setAttribute("selected","selected")):null===a||y?(v.remove(),y||d.prepend(u),d.val(""),u.prop("selected",!0),u.attr("selected",!0)):(y||u.remove(),d.prepend(v),d.val("?"),v.prop("selected",!0),v.attr("selected",!0))},q.readValue=function(){var a=B.selectValueMap[d.val()];return a&&!a.disabled?(y||u.remove(),v.remove(),B.getViewValueFromOption(a)):null},A.trackBy&&b.$watch(function(){return A.getTrackByValue(r.$viewValue)},function(){r.$render()}));
y?(u.remove(),a(u)(b),u.removeClass("ng-scope")):u=N(g.cloneNode(!1));d.empty();l();b.$watchCollection(A.getWatchables,l)}}}}],hg=["$locale","$interpolate","$log",function(a,b,d){var e=/{}/g,f=/^when(Minus)?(.+)$/;return{link:function(h,g,m){function k(a){g.text(a||"")}var n=m.count,l=m.$attr.when&&g.attr(m.$attr.when),r=m.offset||0,t=h.$eval(l)||{},u={},p=b.startSymbol(),w=b.endSymbol(),v=p+n+"-"+r+w,B=db.noop,A;c(m,function(a,b){var c=f.exec(b);c&&(c=(c[1]?"-":"")+na(c[2]),t[c]=g.attr(m.$attr[b]))});
c(t,function(a,c){u[c]=b(a.replace(e,v))});h.$watch(n,function(b){var c=parseFloat(b),e=isNaN(c);e||c in t||(c=a.pluralCat(c-r));c===A||e&&y(A)&&isNaN(A)||(B(),e=u[c],x(e)?(null!=b&&d.debug("ngPluralize: no rule defined for '"+c+"' in "+l),B=q,k()):B=h.$watch(e,k),A=c)})}}}],ig=["$parse","$animate","$compile",function(d,e,f){var h=a("ngRepeat"),g=function(a,b,c,d,e,f,h){a[c]=d;e&&(a[e]=f);a.$index=b;a.$first=0===b;a.$last=b===h-1;a.$middle=!(a.$first||a.$last);a.$odd=!(a.$even=0===(b&1))};return{restrict:"A",
multiElement:!0,transclude:"element",priority:1E3,terminal:!0,$$tlb:!0,compile:function(a,m){var k=m.ngRepeat,n=f.$$createComment("end ngRepeat",k),l=k.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!l)throw h("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",k);var q=l[1],r=l[2],t=l[3],u=l[4],l=q.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/);if(!l)throw h("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",
q);var p=l[3]||l[1],x=l[2];if(t&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(t)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(t)))throw h("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",t);var w,y,v,B,A={$id:ua};u?w=d(u):(v=function(a,b){return ua(b)},B=function(a){return a});return function(a,d,f,m,l){w&&(y=function(b,c,d){x&&(A[x]=b);A[p]=c;A.$index=d;return w(a,A)});var q=ca();a.$watchCollection(r,function(f){var m,
r,u=d[0],w,A=ca(),D,E,C,F,z,I,ha;t&&(a[t]=f);if(b(f))z=f,r=y||v;else for(ha in r=y||B,z=[],f)Bb.call(f,ha)&&"$"!==ha.charAt(0)&&z.push(ha);D=z.length;ha=Array(D);for(m=0;m<D;m++)if(E=f===z?m:z[m],C=f[E],F=r(E,C,m),q[F])I=q[F],delete q[F],A[F]=I,ha[m]=I;else{if(A[F])throw c(ha,function(a){a&&a.scope&&(q[a.id]=a)}),h("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",k,F,C);ha[m]={id:F,scope:void 0,
clone:void 0};A[F]=!0}for(w in q){I=q[w];F=Ba(I.clone);e.leave(F);if(F[0].parentNode)for(m=0,r=F.length;m<r;m++)F[m].$$NG_REMOVED=!0;I.scope.$destroy()}for(m=0;m<D;m++)if(E=f===z?m:z[m],C=f[E],I=ha[m],I.scope){w=u;do w=w.nextSibling;while(w&&w.$$NG_REMOVED);I.clone[0]!=w&&e.move(Ba(I.clone),null,u);u=I.clone[I.clone.length-1];g(I.scope,m,p,C,x,E,D)}else l(function(a,b){I.scope=b;var c=n.cloneNode(!1);a[a.length++]=c;e.enter(a,null,u);u=c;I.clone=a;A[I.id]=I;g(I.scope,m,p,C,x,E,D)});q=A})}}}}],jg=
["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngShow,function(b){a[b?"removeClass":"addClass"](c,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],kg=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngHide,function(b){a[b?"addClass":"removeClass"](c,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],lg=da(function(a,b,d){a.$watch(d.ngStyle,function(a,d){d&&a!==d&&c(d,function(a,c){b.css(c,"")});a&&b.css(a)},!0)}),
mg=["$animate","$compile",function(a,b){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(d,e,f,h){var g=[],m=[],k=[],n=[],l=function(a,b){return function(){a.splice(b,1)}};d.$watch(f.ngSwitch||f.on,function(d){var e,f;e=0;for(f=k.length;e<f;++e)a.cancel(k[e]);e=k.length=0;for(f=n.length;e<f;++e){var q=Ba(m[e].clone);n[e].$destroy();(k[e]=a.leave(q)).then(l(k,e))}m.length=0;n.length=0;(g=h.cases["!"+d]||h.cases["?"])&&c(g,function(c){c.transclude(function(d,e){n.push(e);
var f=c.element;d[d.length++]=b.$$createComment("end ngSwitchWhen");m.push({clone:d});a.enter(d,f.parent(),f)})})})}}}],ng=da({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,d,e){d.cases["!"+c.ngSwitchWhen]=d.cases["!"+c.ngSwitchWhen]||[];d.cases["!"+c.ngSwitchWhen].push({transclude:e,element:b})}}),og=da({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,d,e){d.cases["?"]=d.cases["?"]||[];d.cases["?"].push({transclude:e,
element:b})}}),pg=a("ngTransclude"),qg=da({restrict:"EAC",link:function(a,b,c,d,e){c.ngTransclude===c.$attr.ngTransclude&&(c.ngTransclude="");if(!e)throw pg("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",ra(b));e(function(a){a.length&&(b.empty(),b.append(a))},null,c.ngTransclude||c.ngTranscludeSlot)}}),rg=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,c){"text/ng-template"==c.type&&
a.put(c.id,b[0].text)}}}],sg={$setViewValue:q,$render:q},tg=["$element","$scope",function(a,b){var c=this,e=new kb;c.ngModelCtrl=sg;c.unknownOption=N(d.document.createElement("option"));c.renderUnknownOption=function(b){b="? "+ua(b)+" ?";c.unknownOption.val(b);a.prepend(c.unknownOption);a.val(b)};b.$on("$destroy",function(){c.renderUnknownOption=q});c.removeUnknownOption=function(){c.unknownOption.parent()&&c.unknownOption.remove()};c.readValue=function(){c.removeUnknownOption();return a.val()};c.writeValue=
function(b){c.hasOption(b)?(c.removeUnknownOption(),a.val(b),""===b&&c.emptyOption.prop("selected",!0)):null==b&&c.emptyOption?(c.removeUnknownOption(),a.val("")):c.renderUnknownOption(b)};c.addOption=function(a,b){if(8!==b[0].nodeType){Qa(a,'"option value"');""===a&&(c.emptyOption=b);var d=e.get(a)||0;e.put(a,d+1);c.ngModelCtrl.$render();b[0].hasAttribute("selected")&&(b[0].selected=!0)}};c.removeOption=function(a){var b=e.get(a);b&&(1===b?(e.remove(a),""===a&&(c.emptyOption=void 0)):e.put(a,b-1))};
c.hasOption=function(a){return!!e.get(a)};c.registerOption=function(a,b,d,e,f){if(e){var h;d.$observe("value",function(a){w(h)&&c.removeOption(h);h=a;c.addOption(a,b)})}else f?a.$watch(f,function(a,e){d.$set("value",a);e!==a&&c.removeOption(e);c.addOption(a,b)}):c.addOption(d.value,b);b.on("$destroy",function(){c.removeOption(d.value);c.ngModelCtrl.$render()})}}],ug=function(){return{restrict:"E",require:["select","?ngModel"],controller:tg,priority:1,link:{pre:function(a,b,d,e){var f=e[1];if(f){var h=
e[0];h.ngModelCtrl=f;b.on("change",function(){a.$apply(function(){f.$setViewValue(h.readValue())})});if(d.multiple){h.readValue=function(){var a=[];c(b.find("option"),function(b){b.selected&&a.push(b.value)});return a};h.writeValue=function(a){var d=new kb(a);c(b.find("option"),function(a){a.selected=w(d.get(a.value))})};var g,m=NaN;a.$watch(function(){m!==f.$viewValue||aa(g,f.$viewValue)||(g=ga(f.$viewValue),f.$render());m=f.$viewValue});f.$isEmpty=function(a){return!a||0===a.length}}}},post:function(a,
b,c,d){var e=d[1];if(e){var f=d[0];e.$render=function(){f.writeValue(e.$viewValue)}}}}}},vg=["$interpolate",function(a){return{restrict:"E",priority:100,compile:function(b,c){if(w(c.value))var d=a(c.value,!0);else{var e=a(b.text(),!0);e||c.$set("value",b.text())}return function(a,b,c){var f=b.parent();(f=f.data("$selectController")||f.parent().data("$selectController"))&&f.registerOption(a,b,c,d,e)}}}}],wg=t({restrict:"E",terminal:!1}),bg=function(){return{restrict:"A",require:"?ngModel",link:function(a,
b,c,d){d&&(c.required=!0,d.$validators.required=function(a,b){return!c.required||!d.$isEmpty(b)},c.$observe("required",function(){d.$validate()}))}}},cg=function(){return{restrict:"A",require:"?ngModel",link:function(b,c,d,e){if(e){var f,h=d.ngPattern||d.pattern;d.$observe("pattern",function(b){E(b)&&0<b.length&&(b=new RegExp("^"+b+"$"));if(b&&!b.test)throw a("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",h,b,ra(c));f=b||void 0;e.$validate()});e.$validators.pattern=
function(a,b){return e.$isEmpty(b)||x(f)||f.test(b)}}}}},dg=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=-1;c.$observe("maxlength",function(a){a=h(a);e=isNaN(a)?-1:a;d.$validate()});d.$validators.maxlength=function(a,b){return 0>e||d.$isEmpty(b)||b.length<=e}}}}},eg=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=0;c.$observe("minlength",function(a){e=h(a)||0;d.$validate()});d.$validators.minlength=function(a,b){return d.$isEmpty(b)||
b.length>=e}}}}};d.angular.bootstrap?d.console&&console.log("WARNING: Tried to load angular more than once."):(Pa(),Wc(db),db.module("ngLocale",[],["$provide",function(a){function b(a){a+="";var c=a.indexOf(".");return-1==c?0:a.length-c-1}a.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:"January February March April May June July August September October November December".split(" "),
SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),STANDALONEMONTH:"January February March April May June July August September October November December".split(" "),WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",
PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-\u00a4",negSuf:"",posPre:"\u00a4",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(a,c){var d=a|0,e=c;void 0===e&&(e=Math.min(b(a),3));return 1==d&&0==e?"one":"other"}})}]),N(d.document).ready(function(){Hb(d.document,mb)}))})(window);!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>');
(function(d,a){function b(b){var c=[];e(c,a.noop).chars(b);return c.join("")}function c(b,c){var d={},e=b.split(","),f;for(f=0;f<e.length;f++)d[c?a.lowercase(e[f]):e[f]]=!0;return d}function l(a,b){null===a||void 0===a?a="":"string"!==typeof a&&(a=""+a);y.innerHTML=a;var c=5;do{if(0===c)throw m("uinput","Failed to sanitize html because the input is unstable");c--;d.document.documentMode&&f(y);a=y.innerHTML;y.innerHTML=a}while(a!==y.innerHTML);for(c=y.firstChild;c;){switch(c.nodeType){case 1:b.start(c.nodeName.toLowerCase(),
g(c.attributes));break;case 3:b.chars(c.textContent)}var e;if(!(e=c.firstChild)&&(1==c.nodeType&&b.end(c.nodeName.toLowerCase()),e=c.nextSibling,!e))for(;null==e;){c=c.parentNode;if(c===y)break;e=c.nextSibling;1==c.nodeType&&b.end(c.nodeName.toLowerCase())}c=e}for(;c=y.firstChild;)y.removeChild(c)}function g(a){for(var b={},c=0,d=a.length;c<d;c++){var e=a[c];b[e.name]=e.value}return b}function k(a){return a.replace(/&/g,"&amp;").replace(h,function(a){var b=a.charCodeAt(0);a=a.charCodeAt(1);return"&#"+
(1024*(b-55296)+(a-56320)+65536)+";"}).replace(n,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function e(b,c){var d=!1,e=a.bind(b,b.push);return{start:function(b,f){b=a.lowercase(b);!d&&w[b]&&(d=b);d||!0!==v[b]||(e("<"),e(b),a.forEach(f,function(d,f){var h=a.lowercase(f),g="img"===b&&"src"===h||"background"===h;!0!==E[h]||!0===C[h]&&!c(d,g)||(e(" "),e(f),e('="'),e(k(d)),e('"'))}),e(">"))},end:function(b){b=a.lowercase(b);d||!0!==v[b]||!0===q[b]||(e("</"),
e(b),e(">"));b==d&&(d=!1)},chars:function(a){d||e(k(a))}}}function f(a){if(a.nodeType===d.Node.ELEMENT_NODE)for(var b=a.attributes,c=0,e=b.length;c<e;c++){var h=b[c],g=h.name.toLowerCase();if("xmlns:ns1"===g||0===g.indexOf("ns1:"))a.removeAttributeNode(h),c--,e--}(b=a.firstChild)&&f(b);(b=a.nextSibling)&&f(b)}var m=a.$$minErr("$sanitize"),h=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,n=/([^\#-~ |!])/g,q=c("area,br,col,hr,img,wbr"),r=c("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),t=c("rp,rt"),u=a.extend({},
t,r),r=a.extend({},r,c("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),t=a.extend({},t,c("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),x=c("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),
w=c("script,style"),v=a.extend({},q,r,t,u),C=c("background,cite,href,longdesc,src,xlink:href"),u=c("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),t=c("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",
!0),E=a.extend({},C,t,u),y;(function(a){if(a.document&&a.document.implementation)a=a.document.implementation.createHTMLDocument("inert");else throw m("noinert","Can't create an inert html document");var b=(a.documentElement||a.getDocumentElement()).getElementsByTagName("body");1===b.length?y=b[0]:(b=a.createElement("html"),y=a.createElement("body"),b.appendChild(y),a.appendChild(b))})(d);a.module("ngSanitize",[]).provider("$sanitize",function(){var b=!1;this.$get=["$$sanitizeUri",function(c){b&&a.extend(v,
x);return function(a){var b=[];l(a,e(b,function(a,b){return!/^unsafe:/.test(c(a,b))}));return b.join("")}}];this.enableSvg=function(c){return a.isDefined(c)?(b=c,this):b}});a.module("ngSanitize").filter("linky",["$sanitize",function(c){var d=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,e=/^mailto:/i,f=a.$$minErr("linky"),h=a.isString;return function(g,m,k){function n(a){a&&r.push(b(a))}function l(b,c){var d;r.push("<a ");a.isFunction(k)&&(k=k(b));if(a.isObject(k))for(d in k)r.push(d+
'="'+k[d]+'" ');else k={};!a.isDefined(m)||"target"in k||r.push('target="',m,'" ');r.push('href="',b.replace(/"/g,"&quot;"),'">');n(c);r.push("</a>")}if(null==g||""===g)return g;if(!h(g))throw f("notstring","Expected string but received: {0}",g);for(var q=g,r=[],t,u;g=q.match(d);)t=g[0],g[2]||g[4]||(t=(g[3]?"http://":"mailto:")+t),u=g.index,n(q.substr(0,u)),l(t,g[0].replace(e,"")),q=q.substring(u+g[0].length);n(q);return c(r.join(""))}}])})(window,window.angular);
angular.module("genius",["ngSanitize"]).config(["$httpProvider",function(d){d.interceptors.push("OnsiteInterceptor");d.interceptors.push("RetryFailureInterceptor")}]);window.app=window.app||{};$.extend(window.app,{set_up_tooltip_lyric_editor:$.noop,set_up_vidyard_id_container:$.noop,update_editorial_state:$.noop,set_desired_location_cookie:function(d){var a;try{a=window.top.location.href,a.length}catch(b){a=document.referrer,d&&d.fallback&&(a=d.fallback)}$.cookie("desired_location",a,{path:"/"})}});
angular.module("genius").run(["$templateCache",function(d){d.put("authentication_form.html","<div></div>\n");d.put("fact_track_simulator.html",'<div class="fact_track_card fact_track_card-{{ current_annotation.content_type }}_card fact_track_card--front" ng-click="ctrl.card_clicked()">\n  <div class="fact_track_card-album_image" ng-show="!variants.alt_mode && album.images.length && current_annotation.content_type === \'intro\'" ng-attr-style="background-image: url(\'{{ album.images[0].url }}\')"></div>\n  <div class="fact_track_card-headline" ng-switch="current_annotation.content_type" ng-hide="variants.alt_mode">\n    <span ng-switch-when="lyrics">Lyrics</span>\n    <span ng-switch-when="verified">Lyrics</span>\n    <span ng-switch-when="verified_annotation">\n      <span class="fact_track_card-headline-artist_name">{{ (current_annotation.spotify_artist_uuid | spotify_artist_metadata).name }}</span> Exclusive\n    </span>\n    <span ng-switch-when="annotation">Behind the Lyrics</span>\n    <span ng-switch-when="iq">Track Fact</span>\n    <span ng-switch-when="credits">Credits</span>\n  </div>\n  <div class="fact_track_card-body fact_track_card-body--{{ current_annotation.content_type }}">\n    <div class="fact_track_card-alt_mode_verified_annotation" ng-show="variants.alt_mode && current_annotation.content_type == \'verified_annotation\'">\n      <div class="clipped_avatar clipped_avatar--medium" ng-attr-style="background-image: url(\'{{ ((current_annotation.spotify_artist_uuid | spotify_artist_metadata).images | minBy:\'width\').url }}\')"></div>\n      <span class="fact_track_card-alt_mode_artist_name">{{ (current_annotation.spotify_artist_uuid | spotify_artist_metadata).name }}</span>\n      <div class="fact_track_card-connect_button">Connect</div>\n    </div>\n    <span class="fact_track_card-body-highlight" ng-bind-html="current_annotation.content | highlight_braced:{class_name:\'fact_track_card-emphasis\'}"></span>\n  </div>\n  <div class="fact_track_card-verified_headline" ng-show="!variants.alt_mode && current_annotation.content_type == \'verified_annotation\'">\n    <div class="clipped_avatar clipped_avatar--medium" ng-attr-style="background-image: url(\'{{ ((current_annotation.spotify_artist_uuid | spotify_artist_metadata).images | minBy:\'width\').url }}\')"></div>\n  </div>\n  <div class="fact_track_card-countdown_timer">\n    <div class="fact_track_card-countdown_timer-time_remaining" style="width:{{ (ctrl.annotation_percentage() * 100).toFixed(3) }}%"></div>\n  </div>\n  <div class="fact_track_card-view_lyrics" ng-hide="current_annotation.content_type == \'verified\' || variants.fullscreen || variants.alt_mode">Tap for More</div>\n</div>\n\n<div class="fact_track_controls">\n  <div class="fact_track_controls-annotation_index" ng-show="variants.fullscreen">{{ current_annotation_index + 1 }}/{{ annotations.length }}</div>\n  <div class="fact_track_controls-title" ng-hide="variants.fullscreen || variants.alt_mode">{{ spotify_song.metadata.name }}</div>\n  <div class="fact_track_controls-artist" ng-hide="variants.fullscreen || variants.alt_mode">{{ spotify_song.metadata.artists[0].name }}</div>\n\n  <div class="fact_track_controls-time_elapsed">{{ time | timestamp_for_display:{skip_millis:true} }}</div>\n  <div class="fact_track_controls-time_remaining">-{{ (duration | minusModulo:1000) - time | timestamp_for_display:{skip_millis:true} }}</div>\n\n  <div class="fact_track_controls-timeline" scale="0.46" scrubber scrub-percentage="scrub_percentage" scrubbed="ctrl.seek_to_percentage(percentage)">\n    <div class="fact_track_controls-timeline-bar"></div>\n    <div class="fact_track_controls-scrubber" style="left:{{ ((scrub_percentage || (time / duration)) * 100).toFixed(3) }}%;"><div class="fact_track_controls-scrubber-contents"></div></div>\n  </div>\n\n  <div class="fact_track_controls-back" ng-click="ctrl.seek_to(0)"></div>\n  <div class="fact_track_controls-play_pause fact_track_controls-play_pause--{{ playing ? \'playing\' : \'paused\'}}" ng-click="ctrl.toggle_play_pause()"></div>\n</div>\n');
d.put("header_admin.html",'<div\n  class="header-action"\n  ng-class="{\'header-action--active\': $ctrl.open_header_menus.admin_menu}"\n  ng-click="$ctrl.open_header_menus.admin_menu = !$ctrl.open_header_menus.admin_menu"\n  stop-propagation="click"\n>\n  <div\n    class="header-user_avatar"\n    clipped-background-image=":: $ctrl.user.avatar.thumb.url"\n  ></div>\n  <div class="header-action-label">{{ $ctrl.user.iq | number:0 }} IQ</div>\n</div>\n\n<div\n  click-outside="$ctrl.open_header_menus.admin_menu = false"\n  class="feed_dropdown feed_dropdown--narrow_width"\n  ng-show="$ctrl.open_header_menus.admin_menu"\n  fixed-position-scroll-container\n>\n  <div fixed-position-scroll>\n    <div class="feed_dropdown-header">\n      <span class="text_label">Account</span>\n    </div>\n\n    <a\n      ng-href="{{$ctrl.user.url}}"\n      class="feed_dropdown-item feed_dropdown-item--link"\n    >View Profile</a>\n\n    <a\n      href="/feedback/new"\n      class="feed_dropdown-item feed_dropdown-item--link"\n    >Report a Problem</a>\n\n    <a\n      ng-click="$ctrl.logout()"\n      class="feed_dropdown-item feed_dropdown-item--link"\n    >Sign out</a>\n\n    <a\n      ng-if="$ctrl.can(\'view_activity_stream_firehose\')"\n      href="/firehose"\n      class="feed_dropdown-item feed_dropdown-item--link"\n    >Firehose</a>\n\n    <a\n      ng-if="$ctrl.can(\'manage_messages\')"\n      href="/messages/all"\n      class="feed_dropdown-item feed_dropdown-item--link"\n    >MsgSnoop</a>\n\n    <a\n      ng-if="$ctrl.can(\'impersonate\')"\n      ng-click="$ctrl.impersonate_user()"\n      class="feed_dropdown-item feed_dropdown-item--link"\n    >Impersonate Another User</a>\n    <modal-window ng-if="$ctrl.impersonating">\n      <p><b>Hang tight!</b> We\'re trying to log you in to the account you specified...</p>\n    </modal-window>\n\n    <a\n      ng-if="$ctrl.can(\'remove_asset\')"\n      ng-click="$ctrl.remove_asset()"\n      class="feed_dropdown-item feed_dropdown-item--link"\n    >Remove Asset</a>\n\n    <a\n      ng-if="$ctrl.can(\'view_rate_limits\')"\n      href="/rate_limits"\n      class="feed_dropdown-item feed_dropdown-item--link"\n    >View Rate Limits</a>\n\n    <a\n      ng-if="$ctrl.can(\'view_penalties\')"\n      href="/penalties"\n      class="feed_dropdown-item feed_dropdown-item--link"\n    >View Penalties</a>\n\n    <a\n      ng-if="$ctrl.can(\'search_user_aliases\')"\n      ng-click="$ctrl.search_user_aliases()"\n      class="feed_dropdown-item feed_dropdown-item--link"\n    >Search User Aliases</a>\n\n    <a\n      ng-if="$ctrl.can(\'manage_incoming_emails\')"\n      href="/incoming_emails/manage"\n      class="feed_dropdown-item feed_dropdown-item--link"\n    >Manage Incoming Emails</a>\n\n    <a\n      ng-if="$ctrl.can(\'view_probably_spam_songs\')"\n      href="/songs/probably_spam"\n      class="feed_dropdown-item feed_dropdown-item--link"\n    >View Probably Spam Songs</a>\n\n    <div ng-if="$ctrl.can(\'view_chartbeat\')">\n      <a\n        href="/chartbeat"\n        class="feed_dropdown-item feed_dropdown-item--link"\n      >View Chartbeat</a>\n\n      <a\n        href="/chartbeat?bigboard=1"\n        class="feed_dropdown-item feed_dropdown-item--link"\n      >View Chartbeat Top Pages</a>\n\n      <a\n        href="/chartbeat?ios=1"\n        class="feed_dropdown-item feed_dropdown-item--link"\n      >View iOS Chartbeat</a>\n    </div>\n  </div>\n</div>\n');
d.put("header_menu_item.html",'<li class="nav_menu-item" click-outside="opened = false" ng-if="!url">\n  <a ng-click="opened = !opened" class="nav_menu-link nav_menu-link--has_dropdown" ng-class="{pressed: opened}">{{ name }}</a>\n  <div ng-transclude ng-show="opened"></div>\n</li>\n\n<li class="nav_menu-item" ng-if="url">\n  <a class="nav_menu-link" ng-href="{{ url }}">{{ name }}</a>\n</li>\n');d.put("inbox_icon.html",'<span class="header-action" ng-class="{\'header-action--active\': $ctrl.opened}">\n  <span class="header-action-icon header-action-icon--{{ $ctrl.inbox_name }}"></span>\n  <span class="header-action-label">{{ \'header.\' + $ctrl.inbox_name | i18n }}</span>\n  <span class="header-action-count" ng-class="{\'header-action-count--unread\': $ctrl.unread_count}">{{ $ctrl.unread_count | boundedCount:$ctrl.abbreviate_after }}</span>\n</span>\n');
d.put("notification_inbox.html",'<a href="#"\n   id="{{ inbox_name }}_icon"\n   class="notification_inbox prevent_default"\n   ng-class="{active:inbox_tooltip_open,has_unread_items:unread_count && unread_count > 0}"\n   ng-click="go_to_full_page_if_mobile()"\n>\n  <inbox-icon\n    inbox-name="{{inbox_name}}"\n    sync-count-to-title="sync_count_to_title"\n    abbreviate-after="abbreviate_after"\n  ></inbox-icon>\n</a>\n');d.put("search_form.html",'<form\n  action="/search"\n  method="get"\n  class="global_search global_search--{{ style }}"\n  ng-class="{\'global_search--focused\': focused}"\n  click-outside="unfocus()"\n  ng-click="focus()"\n>\n  <kb shortcut="/" action="focus()"></kb>\n\n  <input\n    autocomplete="false"\n    ng-model="search_text"\n    ng-disabled="submitting"\n    name="q"\n    type="text"\n    class="quick_search autocomplete search quick_search--{{ style }}"\n    placeholder="Search lyrics &amp; more"\n    quick-search\n  />\n\n  <div class="global_search-submit_button" ng-class="{\'global_search-submit_button--focused\': focused}">\n    <svg\n      src="magnifying_glass.svg"\n      class="global_search-search_icon"\n      ng-show="!focused"\n    ></svg>\n    <svg\n      src="x.svg"\n      class="global_search-search_icon global_search-search_icon--close inline_icon inline_icon--stroke inline_icon--down_4"\n      ng-show="focused"\n      ng-click="unfocus()"\n      stop-propagation="click"\n    ></svg>\n  </div>\n</form>\n')}]);
angular.module("genius").component("activeReferent",{bindings:{referent:"<",on_navigate:"&onNavigate",on_close:"&onClose"},templateUrl:"active_referent.html",controller:function(){this.is_not_branded=function(){return this.referent.stub?!this.referent.possibly_branded:!this.is_branded()};this.is_branded=function(){return _.any(this.referent.annotations,"brand")};this.branded_annotation=function(){return _.find(this.referent.annotations,"brand")}}});
angular.module("genius").component("adminUserInfo",{templateUrl:"admin_user_info.html",bindings:{user:"<"}});angular.module("genius").component("adwordsAdForm",{templateUrl:"adwords_ad_form.html",bindings:{onSave:"&",onClose:"&",ad_group:"<adGroup"},controller:["AdwordsAdService",function(d){this.save=function(a){this.saving=!0;d.create(this.ad_group.id,a).then(function(){this.onSave();this.onClose()}.bind(this)).finally(function(){delete this.saving}.bind(this))}}]});
angular.module("genius").component("adwordsAdGroupForm",{templateUrl:"adwords_ad_group_form.html",bindings:{onSave:"&",onClose:"&",campaign:"<"},controller:["AdwordsAdGroupService",function(d){this.save=function(a){this.saving=!0;d.create(this.campaign.id,a).then(function(){this.onSave();this.onClose()}.bind(this)).finally(function(){delete this.saving}.bind(this))}}]});
angular.module("genius").component("adwordsAdGroupList",{templateUrl:"adwords_ad_group_list.html",bindings:{campaign:"<"},controller:["AdwordsAdGroupService","AdwordsAdService",function(d,a){this.change_ad_status=function(b,c){a.update(b.id,{status:c}).then(function(a){_.extend(b,a)})};this.load_ad_groups=function(){this.loading=!0;d.all(this.campaign.id).then(function(a){this.ad_groups=a}.bind(this)).finally(function(){delete this.loading}.bind(this))};this.$onChanges=function(a){a.campaign&&this.load_ad_groups()}}]});
angular.module("genius").component("adwordsCampaignForm",{templateUrl:"adwords_campaign_form.html",bindings:{onSave:"&",onClose:"&"},controller:["AdwordsNetworkService","AdwordsCampaignService",function(d,a){this.available_adwords_networks=[];this.save=function(b){this.saving=!0;return a.create(b).then(function(){this.onSave();this.onClose()}.bind(this)).finally(function(){delete this.saving}.bind(this))};d.all().then(function(a){this.available_adwords_networks=a}.bind(this))}]});
angular.module("genius").component("adwordsCampaignList",{templateUrl:"adwords_campaign_list.html",bindings:{onSelect:"&",selected_campaign:"<selectedCampaign"},controller:["AdwordsCampaignService",function(d){this.select=function(a){this.onSelect({campaign:a})};this.load_campaigns=function(){this.loading=!0;d.all().then(function(a){this.grouped_campaigns=_.values(_.groupBy(a,"network.id"))}.bind(this)).finally(function(){delete this.loading}.bind(this))};this.$onInit=function(){this.load_campaigns()}}]});
angular.module("genius").component("adwordsEditor",{templateUrl:"adwords_editor.html"});angular.module("genius").component("airbrakeErrors",{templateUrl:"airbrake_errors.html",bindings:{user:"<"},controller:["PagedScrollableDataFactory","UserService",function(d,a){this.infinite_scroll_data=new d(_.partial(a.airbrake_errors,this.user.id),"airbrake_errors")}]});
(function(){var d=["to identify songs on the go","to get lyrics to the songs you play","for a faster experience"];angular.module("genius").component("androidBanner",{templateUrl:"android_banner.html",controller:["Bowser","AppConfig",function(a,b){this.benefit=_.sample(d);this.is_android=a.android;this.play_store_url=b.play_store_url}]})})();
angular.module("genius").component("annotationPreview",{bindings:{annotation_preview:"<annotationPreview",click_handler:"&clickHandler",dismissal_handler:"&dismissalHandler",reactivation_handler:"&reactivationHandler",is_dismissed:"<isDismissed"},templateUrl:"annotation_preview.html",controller:["$scope","Tracking","SessionTracking",function(d,a,b){this.$onInit=function(){var a=Rx.Observable.$watch(d,"$ctrl.annotation_preview").map(function(a){return!!_.get(a,"brand.logical_name")});b.track("Time Viewing Branded Annotation Preview",
Rx.Observable.combineLatest(b.page_focused,a.concat(Rx.Observable.of(!1)),function(a,b){return a&&b}))};d.$watch("$ctrl.annotation_preview.brand",function(a){this.brand=a}.bind(this));d.$watch("$ctrl.annotation_preview",function(){this.annotation_preview&&(this.annotation_content_switch=!this.annotation_content_switch,this.annotation_preview.brand&&a.track("View Branded Annotation Teaser",this.tracking_params()))}.bind(this));this.on_click=function(){this.annotation_preview.brand?a.track("Tap Branded Annotation Teaser",
this.tracking_params()):a.track("Tap Annotation Teaser",this.tracking_params());this.click_handler()};this.tracking_params=function(){return{"Annotation ID":_.get(this.annotation_preview,"id"),"Brand Name":_.get(this.annotation_preview,"brand.logical_name")}}}]});angular.module("genius").component("annotationShareMenu",{templateUrl:"annotation_share_menu.html",bindings:{annotation:"<",variants:"<"}});
angular.module("genius").component("answer",{bindings:{answer:"<",question:"<",yieldsApi:"&",on_pending_event:"&onPendingEvent",yields_iq:"&yieldsIq",variants:"<"},templateUrl:"answer.html",controller:["Reversible","AnswerService","Session",function(d,a,b){var c=this;this.user_signed_in=b.user_signed_in;this.source_form_open=this.answer&&this.answer.answer_source;this.can=function(a,c){return b.has_permission(a,c)};this.show_contributors=function(){if(_.get(c,"answer.answer_source.source_name")){if(c.can("update_answer_source",
c.question))return c.question.contributors_count}else return c.question.contributors_count};this.answer_is_unwritten=function(){return!_.get(c,"answer.body.html")};this.question_is_archived=function(){return"archived"===c.question.state};this.question_is_pinned=function(){return"pinned"===c.question.state};this.start_editing=function(){c.answer||(c.answer={body:{}});c.answer._editing=_.defaults(c.answer._editing||{},{_form_active:!0,html:c.answer.body.html,markdown:c.answer.body.markdown})};this.cancel_editing=
function(){Reflect.deleteProperty(c.answer,"_editing")};this.finish_editing=function(){if(!c.disable_saving_with){c.disable_saving_with="Saving";c.errors=null;var b=d.modify(c.answer,{"_editing._form_active":!1});!c.source_form_open&&c.answer.answer_source&&(c.answer.answer_source=null);var f=a.save(c.answer,{question:c.question}).then(c.cancel_editing);c.on_pending_event({event:"UserCreateAnswer",result:f});f.catch(function(a){c.errors=a.errors;b()}).finally(function(){c.disable_saving_with=!1})}};
this.destroy=function(){var b=c.answer;c.answer={body:{}};a.destroy(b,{question:c.question}).catch(function(){c.answer=b})};this.showing_contributors=!1;this.toggle_contributors=function(){c.showing_contributors=!c.showing_contributors};this.show_answer_form_by_default=function(){return c.can("add_answer",c.question)&&c.answer_is_unwritten()&&!c.question_is_archived()};this.show_answer_edit_form=function(){return _.get(c,"answer._editing._form_active")||c.show_answer_form_by_default()};this.show_answer=
function(){return!c.answer_is_unwritten()&&!_.get(c,"answer._editing._form_active")};this.show_blank_answer_message=function(){return c.answer_is_unwritten()&&!c.show_answer_form_by_default()&&!_.get(c,"answer._editing._form_active")};var l=this;this.yieldsApi({answerApi:{start_editing:function(){l.start_editing()},can_edit:function(){return l.can("edit",l.answer)},clear_answer:function(){l.destroy()},can_clear:function(){return l.can("destroy",l.answer)}}});var g=this.question.current_user_metadata.iq_by_action.answer;
this.iq_change=function(){var a=(_.max([c.question.votes_total,1])-g.primary.multiplier)*g.primary.base,b=_.get(c.answer,"_editing.pin_question")?g.pin.base:0;return a+b};var k={};_.forEach(this.question.current_user_metadata.iq_by_action,function(a,b){k[b]={params:a}});k.answer&&Reflect.defineProperty(k.answer,"change",{get:this.iq_change});this.yields_iq({iq_api:k})}]});angular.module("genius").component("artistBadge",{bindings:{artist:"<"},templateUrl:"artist_badge.html"});
angular.module("genius").component("artistSongs",{templateUrl:"artist_songs.html",bindings:{artist:"<"},controller:["PagedScrollableDataFactory","SongService","Session","$debounce",function(d,a,b,c){this.search_text="";this.can=function(a,c){return b.has_permission(a,c)};var l=function(b){this.artist_song_infinite_scrollable_data=new d(_.partial(a.for_artist,this.artist.id),"songs",{sort:b})}.bind(this);this.sort_songs_by=function(a){this.sort_method!==a&&(this.search_text||l(a),this.sort_method=
a)};this.search=function(){this.searching=!0;this.search_debounced()};this.search_debounced=c(function(){if(this.search_text){this.artist_song_infinite_scrollable_data=new d(_.partial(a.search_with_artist,this.artist.id),"songs",{sort:this.sort_method,q:this.search_text});var b=this.artist_song_infinite_scrollable_data.next;this.artist_song_infinite_scrollable_data.next=function(){return b().then(function(a){this.searching=!1;return a}.bind(this))}.bind(this)}else l(this.sort_method)}.bind(this),
200);this.sort_songs_by("popularity")}]});angular.module("genius").component("artistSongsAndAlbums",{templateUrl:"artist_songs_and_albums.html",bindings:{artist:"<",artist_songs:"<artistSongs",artist_albums:"<artistAlbums",artist_has_more_songs:"<artistHasMoreSongs",open_all_songs_pane:"&openAllSongsPane"},controller:["PagedScrollableDataFactory","ArtistService",function(d,a){this.artist&&(this.artist_album_scrollable_data=new d(_.partial(a.load_albums,this.artist.id),"albums"))}]});
angular.module("genius").component("artistSongsModal",{templateUrl:"artist_songs_modal.html",bindings:{artist:"<",yields_open:"&yieldsOpen"},controller:function(){this.open=function(){this.modal_open=!0}.bind(this);this.yields_open({open:this.open})}});
angular.module("genius").component("artistTooltip",{bindings:{artist:"<"},templateUrl:"artist_tooltip.html",controller:["ArtistService",function(d){this.$onInit=function(){if(!this.artist.description){var a=this.artist;d.load(a.id).then(function(b){_.extend(a,b)})}}}]});
angular.module("genius").component("artistVerification",{templateUrl:"artist_verification.html",bindings:{user:"<",artist:"<",close:"&"},controller:["UserService","AppConfig",function(d,a){this.name=_.get(this.artist,"name");this.role=this.user.verification_role;this.user_verification_roles=a.user_verification_roles;this.updating=function(){return this.verifying||this.unverifying};this.verify=function(){this.updating()||(this.verifying=!0,delete this.errors,d.associate_with_artist(this.user.id,{name:this.name,
role:this.role}).then(function(a){_.extend(this.user,a.user);this.form.$setPristine();window.location.href=this.user.url}.bind(this)).catch(function(a){this.errors=a.errors;delete this.verifying}.bind(this)))}.bind(this);this.unverify=function(){this.updating()||(this.unverifying=!0,delete this.errors,d.dissociate_from_artist(this.user.id).then(function(a){_.extend(this.user,a.user);this.form.$setPristine();window.location.href=this.user.url}.bind(this)).catch(function(a){this.errors=a.errors;delete this.unverifying}.bind(this)))}.bind(this)}]});
angular.module("genius").component("audioSourceLabel",{templateUrl:"audio_source_label.html",bindings:{track:"<"}});
angular.module("genius").component("brandedAnnotation",{bindings:{annotation:"<"},templateUrl:"branded_annotation.html",controller:["$scope","Tracking","SessionTracking","StopWatch",function(d,a,b,c){this.$onInit=function(){var a=Rx.Observable.$watch(d,"$ctrl.annotation").map(function(a){return!!_.get(a,"brand.logical_name")});b.track("Time Viewing Branded Annotation",Rx.Observable.combineLatest(b.page_focused,a.concat(Rx.Observable.of(!1)),function(a,b){return a&&b}))};d.$watch("$ctrl.annotation.brand",
function(a){this.brand=a}.bind(this));var l=new c;d.$watch("$ctrl.annotation",function(){this.annotation&&(l.start(),a.track("View Branded Annotation",this.tracking_params()))}.bind(this));d.$on("$destroy",function(){this.annotation&&a.track("Close Branded Annotation",this.tracking_params({"Duration Viewed in Seconds":l.time_elapsed}))}.bind(this));this.on_annotation_callout_clicked=function(b){var c=$(b.target).closest("[data-tracking-click-target]").data("tracking-click-target");a.track_link_click(b,
"Tap Branded Annotation Callout",this.tracking_params({"Tap Target":c}))};this.tracking_params=function(a){return _.extend({"Annotation ID":_.get(this.annotation,"id"),"Brand Name":_.get(this.annotation,"brand.logical_name")},a)}}]});
angular.module("genius").component("cancellableTimer",{bindings:{delay:"@",message:"@",on_complete:"&onComplete",on_cancel:"&onCancel"},templateUrl:"cancellable_timer.html",controller:["$interval","StopWatch",function(d,a){this.current=0;var b=new a;b.start();this.timer=d(function(){var a=b.time_elapsed;a>this.delay?(this.current=this.delay,d.cancel(this.timer),this.on_complete()):this.current=a}.bind(this));this.cancel=function(){d.cancel(this.timer);this.on_cancel()}}]});
angular.module("genius").component("collapsibleContent",{templateUrl:"collapsible_content.html",transclude:!0,bindings:{maxCollapsedHeight:"<",minExpansionHeight:"<",text:"@"},controller:function(){this.expand=function(){delete this.max_height};this.content_height_changed=function(d){d>this.maxCollapsedHeight+this.minExpansionHeight&&(this.max_height=this.maxCollapsedHeight)}}});
angular.module("genius").component("contactButton",{templateUrl:"contact_button.html",controller:["FeedbackService",function(d){var a=this;this.submit=function(){a.sending=!0;d.post_feedback(a.feedback_body).then(function(){return a.success=!0}).finally(function(){return a.sending=!1})};this.close=function(){a.open_contact_form=!1;a.success=!1}}]});
angular.module("genius").component("contributionOpportunityAssignment",{bindings:{assignment:"<",completed:"<",on_dismiss:"&onDismiss"},templateUrl:"contribution_opportunity_assignment.html",controller:["ContributionOpportunityAssignmentService","Tracking",function(d,a){var b=this;this.$onInit=function(){b.contribution_opportunity=b.assignment.contribution_opportunity};this.track=function(c,d){var g={action:c,contribution_opportunity_id:b.contribution_opportunity.id};d?a.track_link_click(d,"Contribution Opportunity Action",
g):a.track("Contribution Opportunity Action",g)};this.track_open=function(a){b.track("open",a)};this.on_pending_event=function(a,d){_.includes(b.contribution_opportunity.complete_on_events,a)&&(b.submitted=!0,d.then(function(){b.track("complete")}).catch(function(){b.submitted=!1}))};this.dismiss=function(){d.update(b.assignment.id,{dismissed:!0}).then(function(){b.track("dismiss");b.on_dismiss({assignment:b.assignment})})}}]});
angular.module("genius").component("deletedAnswer",{bindings:{answer:"<"},templateUrl:"deleted_answer.html"});
angular.module("genius").component("detailedSongSearch",{templateUrl:"detailed_song_search.html",bindings:{mode:"<",cancel:"&onCancel",select:"&onSelect",confirm:"&onConfirm"},controller:["$q","$scope","LookupService","SongService",function(d,a,b,c){a.$watch("$ctrl.url",function(a){delete this.song_data;delete this.error;a&&b.lookup(a).then(function(a){delete this.autocompleted_song;if("song"!==a._type)return d.reject(Error("URL is for a non-song page"));this.song=a}.bind(this)).catch(function(a){this.error=
a}.bind(this))}.bind(this));a.$watch("$ctrl.autocompleted_song.id",function(a){delete this.url;delete this.song_data;delete this.error;a&&(this.song_data={id:this.autocompleted_song.id,title:this.autocompleted_song.title,artists:[this.autocompleted_song.primary_artist],albums:[]},c.load_song(a).then(function(a){this.song=a}.bind(this)))}.bind(this));a.$watch("$ctrl.song.id",function(a){a&&(this.song_data={id:this.song.id,title:this.song.title,artists:[this.song.primary_artist].concat(this.song.featured_artists),
albums:this.song.albums},this.select({song:this.song}))}.bind(this));this.submit=function(){this.saving=!0;d.when(this.confirm({song:this.song})).finally(function(){delete this.saving}.bind(this))}}]});
angular.module("genius").component("dfpAd",{templateUrl:"dfp_ad.html",bindings:{ad_classes:"@adClasses",kv:"<",name:"@",instance_id:"@instanceId"},controller:["$immediate","Ads",function(d,a){var b=this;this.$onInit=function(){a.register_or_identify(b.instance_id,b.name,b.kv).then(function(c){b.id=c;d(function(){return a.display(b.id)})})}}]});
angular.module("genius").component("editArtistProfile",{templateUrl:"edit_artist_profile.html",bindings:{artist:"<",close:"&"},controller:["ArtistService","$location","Session","only_changes",function(d,a,b,c){this.editable_artist=angular.copy(this.artist);this.can=function(a){return b.has_permission(a,this.artist)};this.update_artist=function(){delete this.errors;this.saving||(this.saving=!0,d.update(this.artist.id,c(this.editable_artist,this.artist)).then(function(b){_.extend(this.artist,b);this.close();
delete this.errors;a.path(d.get_path(b));a.replace()}.bind(this)).catch(function(a){this.errors=a.data.response.errors}.bind(this)).finally(function(){delete this.saving}.bind(this)))}.bind(this)}]});
angular.module("genius").component("editUserEmailPreferences",{templateUrl:"edit_user_email_preferences.html",bindings:{user:"<",close:"&"},controller:["UserService",function(d){this.editable_user=angular.copy(this.user);this.update_user=function(){this.saving||(this.saving=!0,delete this.errors,d.update(this.editable_user.id,{user:_.pick(this.editable_user,["preferences"])}).then(function(a){_.extend(this.user,a.user);this.close();delete this.errors}.bind(this)).catch(function(a){this.errors=a.errors}.bind(this)).finally(function(){delete this.saving}.bind(this)))}.bind(this)}]});
angular.module("genius").component("editUserProfile",{templateUrl:"edit_user_profile.html",bindings:{user:"<",disable_image_edit:"<disableImageEdit",disable_user_bio_edit:"<disableUserBioEdit",close:"&"},controller:["UserService","Session","$location","only_changes",function(d,a,b,c){this.editable_user=angular.copy(this.user);this.can=function(b){return a.has_permission(b,this.user)};this.update_user=function(){if(this.editable_user.password!==this.editable_user.confirm_password)this.errors=["Passwords do not match"];
else if(!this.saving){this.saving=!0;delete this.errors;var a=_.pick(this.editable_user,"login about_me email password photo_url custom_header_image_url".split(" "));a.about_me=a.about_me.markdown;d.update(this.editable_user.id,{user:c(a,this.user)}).then(function(a){_.extend(this.user,a.user);this.close();delete this.errors;b.path(d.get_path(a.user));b.replace()}.bind(this)).catch(function(a){this.errors=a.errors}.bind(this)).finally(function(){delete this.saving}.bind(this))}}.bind(this)}]});
angular.module("genius").component("embedlyEmbed",{templateUrl:"embedly_embed.html",bindings:{embed:"<"},controller:["$element","PlayerJS","$scope","$sce","$immediate",function(d,a,b,c,l){this.ended=!1;this.$postLink=function(){"video"===this.embed.type&&l(function(){a.Player(d.find("iframe")[0]).on("ended",function(){b.$digest()}.bind(this))}.bind(this))};this.trusted_html=function(){return c.trustAsHtml(this.embed.html)}}]});
angular.module("genius").component("embedlyYoutube",{templateUrl:"embedly_youtube.html",bindings:{video_id:"@videoId",start:"@"},controller:["$scope","Tracking",function(d,a){var b=this;this.started=this.ended=!1;d.$on("youtube.player.ended",function(){b.ended=!0});d.$on("youtube.player.playing",function(){b.started||(a.track("Play embedded video",{properties:{"Video provider":"youtube"}}),b.started=!0)})}]});
angular.module("genius").component("expandableContainer",{templateUrl:"expandable_container.html",transclude:{expandable_container_title:"?expandableContainerTitle"},bindings:{start_expanded:"<startExpanded",start_initialized:"<startInitialized",title:"@",variants:"<",yields_api:"&yieldsApi"},controller:function(){this.$onInit=function(){this.expanded=this.start_expanded;this.yields_api({api:this.api})};this.$onChanges=function(d){d.start_expanded&&(this.expanded=this.start_expanded)};this.toggle_expand=
function(){this.expanded=!this.expanded}.bind(this);this.api=function(){return{expanded:function(){return this.expanded}.bind(this)}}.call(this)}});angular.module("genius").component("facebookShareButton",{templateUrl:"facebook_share_button.html",bindings:{url:"<",variants:"<"},controller:["Facebook","Tracking",function(d,a){this.share_on_facebook=function(){a.track("Bagon Facebook Share");d.share(this.url)}}]});
angular.module("genius").component("headerActions",{templateUrl:"header_actions.html",controller:["Session",function(d){var a=this;this.$onInit=function(){a.user_signed_in=d.user_signed_in;a.can=function(a){return d.has_permission(a,d.current_user)}}}]});
angular.module("genius").component("headerAdmin",{bindings:{open_header_menus:"<openHeaderMenus"},templateUrl:"header_admin.html",controller:["Session","UserService","AssetService","$window",function(d,a,b,c){var l=this;this.$onInit=function(){l.user=d.current_user;l.can=function(a){return d.has_permission(a,l.user)}};this.logout=function(){a.logout().then(function(){c.location.reload()})};this.impersonate_user=function(){var b=prompt("Enter the login of the user you want to sign in as");""!==_.trim(b)&&
(l.impersonating=!0,a.impersonate(b).then(function(){c.location.reload()}))};this.search_user_aliases=function(){var a=prompt("Find all users who've ever had this login");""!==_.trim(a)&&(c.location.href="/users/aliases?alias="+encodeURIComponent(a))};this.remove_asset=function(){var a=prompt("Enter the url to remove");""!==_.trim(a)&&b.remove(a)}}]});angular.module("genius").component("headerAuth",{templateUrl:"header_auth.html"});
angular.module("genius").component("homeCharts",{bindings:{hot_songs:"<hotSongs"},templateUrl:"home_charts.html",controller:["SongService","PagedScrollableDataFactory","Tracking",function(d,a,b){var c=this;this.$onInit=function(){c.is_featured_chart=function(a){return 3>a};c.hot_songs_feed=new a(_.partial(d.hot),"songs",{per_page:10},2)};this.track_load=function(){b.track("Home Page Charts Show More",{properties:{page:c.hot_songs_feed.next_page}})}}]});
angular.module("genius").component("homeCommunity",{bindings:{total_iq:"<totalIq",top_users:"<topUsers",tags:"<"},templateUrl:"home_community.html",controller:["Session","Leaderboard","Tracking",function(d,a,b){var c=this;this.$onInit=function(){c.user_signed_in=d.user_signed_in;c.period_options=l;c.tag_options=[g].concat(c.options_for_tags(c.tags));c.selected_period="day";c.selected_tag=null;c.loading=!1;c.leaderboard=c.top_users;c.pending_leaderboard=new Rx.Subject;c.pending_leaderboard.switchMap(Rx.Observable.fromPendingPromise).subscribe(function(a){var b=
a.value;c.loading=a.pending;c.leaderboard=_.get(b,"leaderboard",[])})};this.filter_leaderboard=function(){b.track("Home Page Community Filter",{properties:{period:c.selected_period,tag:_.get(c.selected_tag,"name")}});c.pending_leaderboard.next(c.fetch_leaderboard_data())};this.fetch_leaderboard_data=function(){return null==c.selected_tag?a.global({period:c.selected_period}):a.for_tag(c.selected_tag,{period:c.selected_period})};this.filter_by_period=function(a){c.selected_period=a;c.filter_leaderboard()};
this.filter_by_tag=function(a){c.selected_tag=a;c.filter_leaderboard()};this.options_for_tags=function(a){return _.map(a,function(a){return{label:"In "+a.name,value:a}})};var l=[{label:"Top Scholars Today",value:"day"},{label:"Top Scholars This Week",value:"week"},{label:"Top Scholars This Month",value:"month"},{label:"Top Scholars of All Time",value:"all_time"}],g={label:"In All Genres",value:null}}]});
angular.module("genius").component("homeFeaturedStories",{bindings:{stories:"<stories"},templateUrl:"home_featured_stories.html",controller:["ScrollPoint",function(d){this.scroll_to=d.scroll_to}]});angular.module("genius").component("homeFeaturedStory",{bindings:{story:"<story",variants:"<"},templateUrl:"home_featured_story.html",controller:[function(){}]});
angular.module("genius").component("homePage",{templateUrl:"home_page.html",controller:["PageData",function(d){var a=this;this.$onInit=function(){Object.assign(a,d.preloaded_page_data())}}]});angular.module("genius").component("homeRecentStories",{bindings:{recent_stories:"<recentStories"},templateUrl:"home_recent_stories.html",controller:[function(){}]});angular.module("genius").component("homepageArticleCard",{templateUrl:"homepage_article_card.html",bindings:{article:"<",featured:"<",variants:"<"}});
angular.module("genius").component("homepageArticlesAndSongs",{templateUrl:"homepage_articles_and_songs.html",controller:["MixedScrollableDataFactory","PagedScrollableDataFactory","SongService","ArticleService",function(d,a,b,c){this.songs_and_artists=new d([{type:"article",src:new a(_.partial(c.index),"articles",{per_page:2},2)},{type:"song",src:new a(_.partial(b.hot),"songs",{},2)}])}]});
angular.module("genius").component("homepageSongCard",{templateUrl:"homepage_song_card.html",bindings:{song:"<",rank:"<"}});
angular.module("genius").component("hotSwapPlayer",{templateUrl:"hot_swap_player.html",controller:["PagedScrollableDataFactory","VideoService",function(d,a){this.video_scrollable_data=new d(_.partial(a.index),"videos",{per_page:1});this.load_next=function(){this.loading||(this.loading=!0,this.video_scrollable_data.next().then(function(a){this.video=a[0]}.bind(this)).finally(function(){this.loading=!1}.bind(this)))};this.load_next()}]});
angular.module("genius").component("hyperRelevantVideo",{bindings:{video:"<",on_click:"&onClick"},templateUrl:"hyper_relevant_video.html",controller:["Tracking",function(d){var a=this;this.clicked=function(b){a.on_click({video:b,relevance_level:"hyper_relevant"})};this.firstplay=function(a){d.track("Play Related Video",{properties:{video_id:a.id,placement:"hyper_relevant"}})}}]});
angular.module("genius").component("imageUploadButton",{templateUrl:"image_upload_button.html",bindings:{default_image:"<defaultImage",on_file_picked:"&onFilePicked",allow_crop_to_square:"<allowCropToSquare",variants:"<"},controller:["Filepicker",function(d){var a=new d;this.pick_image_for_artist=function(b){b={container:"modal",services:["COMPUTER","URL","FACEBOOK","INSTAGRAM","IMAGE_SEARCH"],openTo:b};this.allow_crop_to_square&&(b.services.unshift("CONVERT"),b.conversions=["crop"],b.cropRatio=1);
a.pick_and_store(b).then(function(a){this.on_file_picked({url:a})}.bind(this))}.bind(this)}]});
angular.module("genius").component("inbox",{bindings:{inbox_name:"@inboxName",opened:"<opened",clear_unread_count:"&clearUnreadCount"},templateUrl:"inbox.html",controller:["InboxService","Tracking",function(d,a){var b=this,c,l,g;this.should_paginate=function(){return b.opened&&!g&&!b.done_loading};this.load_next_page=function(){g||(g=d.line_items(b.inbox_name,c).then(function(a){(d=b.line_items).push.apply(d,a);g=null;a.length?c=a.timestamp_for_next_page:b.done_loading=!0;b.opened&&f(a);var d}))};
var k=function(){b.line_items=[];b.done_loading=!1;c=void 0;b.load_next_page()},e=function(){b.opened?l=Date.now():k()},f=function(a){d.mark_read(b.inbox_name,_(a).filter("unread").map("event_ids").value());b.clear_unread_count()};this.$onInit=function(){k();d.on_update(b.inbox_name,e)};this.$onChanges=function(c){if(c.opened){var d=c.opened.currentValue,e=c.opened.previousValue;!d||e&&!c.opened.isFirstChange()?e&&!d&&l&&l<Date.now()&&k():(f(b.line_items),a.track("Inbox Open",{inbox_name:b.inbox_name}))}}}]});
angular.module("genius").component("inboxContainer",{bindings:{inbox_name:"@inboxName",open_inboxes:"<openInboxes",sync_count_to_title:"<syncCountToTitle",abbreviate_after:"<abbreviateAfter",use_messages_inbox:"<useMessagesInbox",use_iq_inbox:"<useIqInbox"},templateUrl:"inbox_container.html"});
angular.module("genius").component("inboxIcon",{bindings:{inbox_name:"@inboxName",opened:"<",sync_count_to_title:"<syncCountToTitle",abbreviate_after:"<abbreviateAfter",yields_api:"&yieldsApi"},templateUrl:"inbox_icon.html",controller:["Session","TopBarIndicatorsLoader","TitleService","InboxService",function(d,a,b,c){var l=this,g=function(a){l.unread_count=a;l.sync_count_to_title&&b.update_count(l.unread_count)};this.$onInit=function(){g(d.current_user["unread_"+l.inbox_name+"_count"]);a.listen_for(l.inbox_name,
g);c.on_update(l.inbox_name,a.refresh)};var k=this;this.yields_api({api:{decrement:function(a){g(k.unread_count-a)},clear:function(){g(0)}}})}]});
angular.module("genius").component("inboxLineItemDetail",{templateUrl:"inbox_line_item_detail.html",bindings:{detail:"<lineItemDetail"},controller:["ReferentRegistry","Session",function(d,a){var b=this;this.current_user=a.current_user;var c="user_pyonged_song user_followed_user user_de_modded_user user_made_an_editor_out_of_user user_made_a_moderator_out_of_user user_mediatored_user user_hit_pageview_threshold_song".split(" ");this.show_actors=function(){return b.detail.actors.length&&!_.contains(c,
b.detail.strategy)};this.detail.targets=_.map(this.detail.targets,function(a){return"referent"===a._type?d.update_if_present(a):a});this.is_forum_item=function(){return _.all(b.detail.targets,{_type:"forum_post"})}}]});angular.module("genius").component("inboxLineItemDetailForumPost",{bindings:{post:"<object"},templateUrl:"inbox_line_item_detail_forum_post.html"});angular.module("genius").component("inboxLineItemMessage",{bindings:{template:"<",key:"<",params:"<",state:"<"},template:'<ng-include src="$ctrl.template"></ng-include>'});
angular.module("genius").component("iqInbox",{bindings:{opened:"<"},templateUrl:"iq_inbox.html",controller:["Session","UserService","Pusher","$timeout","Tracking",function(d,a,b,c,l){var g=this;this.load=function(){a.contribution_opportunity_assignments(g.user.id).then(function(a){g.loaded=!0;var b=_.map(g.assignments,"id");a=_.reject(a.contribution_opportunity_assignments,function(a){return _.includes(b,a.id)});g.assignments=g.assignments.concat(a)})};this.is_completed=function(a){return _.includes(g.completed_ids,
a.contribution_opportunity.id)};this.remove=function(a){g.assignments=_.reject(g.assignments,{id:a.id});g.load()};this.$onInit=function(){g.assignments=[];g.user=d.current_user;g.completed_ids=[];g.load();b.subscribe(d.current_user.pusher_channel,"contribution_opportunity_completion",function(a){_.find(g.assignments,function(b){return b.contribution_opportunity.id===a})&&(g.completed_ids.push(a),g.load(),c(function(){g.assignments=_.reject(g.assignments,function(b){return b.contribution_opportunity.id===
a})},1E3))});b.subscribe(d.current_user.pusher_channel,"contribution_opportunities_refreshed",g.load)};this.$onChanges=function(a){if(a.opened){var b=a.opened.previousValue;!a.opened.currentValue||b&&!a.opened.isFirstChange()||l.track("Inbox Open",{inbox_name:"iq_inbox"})}}}]});
angular.module("genius").component("iqNotificationList",{templateUrl:"iq_notification_list.html",controller:["LocalStorage","PageVisibility","Session","Pusher","$timeout",function(d,a,b,c,l){this.user=b.current_user;this.notifications=[];this.line_item_count=0;var g=function(a){_.isEmpty(this.notifications)&&this.notifications.unshift(this.user);this.line_item_count++;l(function(){this.notifications.unshift(a);this.user.iq+=a.iq_gained;l(function(){_.pull(this.notifications,a);this.line_item_count--;
0===this.line_item_count&&this.notifications.pop()}.bind(this),5E3)}.bind(this),200)}.bind(this);c.subscribe(b.current_user.pusher_channel,"iq_increment",function(b){a.when_visible(function(){if(d.is_available()){var a=d.getItem("newest_event_id")||0,c=_.max(b.event_ids);c>a&&(g(b),d.setItem("newest_event_id",c))}else g(b)})}.bind(this))}]});
angular.module("genius").component("lyricsSyncEditor",{bindings:{id:"<modelId",instructions_url:"@instructionsUrl",go_to_home:"&goToHome"},templateUrl:"lyrics_sync_editor.html",controller:["$scope","$q","$immediate","BeforeUnloadCheck","LyricsSynchronization","SpotifyPlayback","WebAudioPlayback","Session",function(d,a,b,c,l,g,k,e){this.position=0;this.current_line_index=-1;this.text_editing_enabled=!1;this.$onInit=function(){l.get(this.id).then(function(a){this.lyrics_synchronization=a;this.auto_advance=
!this.can("edit")}.bind(this))};var f=_.noop;d.$watch("$ctrl.lyrics_synchronization.audio_track.id",function(a){f();a&&(this.lyrics_synchronization.audio_track.cached_audio_url?this.media_player=new k(this.lyrics_synchronization.audio_track):"spotify"===this.lyrics_synchronization.audio_track.provider&&(this.media_player=new g(this.lyrics_synchronization.audio_track)),f=this.media_player.$on("state",m))}.bind(this));this.start_or_advance=function(){if(!this.media_player.state.is_playing)return this.media_player.api.play();
if(!(this.current_line_index>=this.lyrics_synchronization.lines.length-1)){var a=this.current_line_index;this.current_line_index=this.lyrics_synchronization.next_visible_line_index_after_index(this.current_line_index);if(this.can("edit"))try{this.lyrics_synchronization.apply_timestamp_to_line_at_index(this.position,this.current_line_index)}catch(b){this.error=b,this.current_line_index=a}}};this.seek_to_index=function(a){var b=this.lyrics_synchronization.timestamp_for_line_at_index(a);null!==b&&this.media_player.api.seek_to_position(b);
this.auto_advance||(this.current_line_index=a)};this.seek_to_index_and_play=function(a){this.seek_to_index(a);this.media_player.api.play()};this.can=function(a){return this.lyrics_synchronization&&e.has_permission(a,this.lyrics_synchronization)};this.in_order_validator_for_index=function(a){return function(b){return b||0===b?b>this.lyrics_synchronization.max_timestamp_before_index(a)&&b<this.lyrics_synchronization.min_timestamp_after_index(a+1):!0}.bind(this)};this.move_to_index_for_position=function(a){this.current_line_index=
this.lyrics_synchronization.line_index_for_position(a)};this.current_line=function(){return this.lyrics_synchronization.lines[this.current_line_index]};this.after_edit_line_timestamp_at_index=function(a){this.lyrics_synchronization.lines[a]._editing_time=!1;this.lyrics_synchronization.mark_dirty();this.seek_to_index_and_play(a)};var m=function(a,b){this.position=b.position;this.auto_advance&&this.move_to_index_for_position(this.position)}.bind(this);this.last_action=a.when();var h=function(c,d){d=
d||{};return function(){this.saving=!0;var e=arguments;return this.last_action=this.last_action.finally(function(){return c.apply(this,e).then(function(a){d.retain_error||delete this.error;delete this.lyrics_synchronization._dirty;_.extend(this.lyrics_synchronization,_.omit(a,"lines"));a.lines&&this.lyrics_synchronization.lines?a.lines.forEach(function(a,b){_.extend(this.lyrics_synchronization.lines[b],a)},this):this.lyrics_synchronization.lines=a.lines}.bind(this)).catch(function(c){this.error=c;
b(this.load.bind(this));return a.reject(c)}.bind(this)).finally(function(){this.saving=!1}.bind(this))}.bind(this))}.bind(this)}.bind(this);this.load=h(function(){return l.get(this.id)},{retain_error:!0});this.submit=h(function(a,b){return l.submit(a,this.lyrics_synchronization,b)});this.submit_sync=h(function(){return l.submit_sync(this.lyrics_synchronization)});this.update_state=h(function(a){return l.update_state(a,this.lyrics_synchronization)});this.save=h(function(){return l.save(this.lyrics_synchronization)});
this.autosave=_.debounce(this.save.bind(this),1E3);this.revert_action=h(function(a){return l.revert_action(a,this.lyrics_synchronization)});this.skip=h(function(a){return l.skip(a,this.lyrics_synchronization)});this.change_song=h(function(a){return l.change_song({song_id:a.id,lyrics_synchronization_id:this.id}).then(function(a){delete this.reassociating;return a}.bind(this))});this.preview_with_song=function(a){return l.preview({song_id:a.id,external_track_id:this.lyrics_synchronization.audio_track.id}).then(function(a){delete this.error;
this.lyrics_synchronization=a}.bind(this)).catch(function(a){return this.error=a}.bind(this))};this.cancel_reassociation=function(){this.reassociating=!1;this.load()};var n=function(){return this.lyrics_synchronization._dirty}.bind(this);c.add(n);d.$on("$destroy",function(){c.remove(n)});l.$on("edit",function(){delete this.error;this.can("edit")&&(this.can("approve")||this.can("staff_approve"))&&this.autosave()}.bind(this))}]});
angular.module("genius").component("lyricsSyncHome",{bindings:{instructions_url:"@instructionsUrl"},templateUrl:"lyrics_sync_home.html",controller:["$rootScope","$location","$window","LyricsSynchronization",function(d,a,b,c){d.$on("$locationChangeStart",function(){delete this.id;delete this.tasks;delete this.checked_out;this.navigating=!0}.bind(this));d.$on("$locationChangeSuccess",function(){if("/lyrics_synchronizations/home"===a.path())this.load();else{this.id=parseInt(a.path().replace(/^\/lyrics_synchronizations\//,
""));if(!this.id)return a.path("/lyrics_synchronizations/home");delete this.navigating}}.bind(this));this.load=function(){c.home().then(function(a){_.extend(this,a);delete this.navigating}.bind(this))};this.start=function(a){c.start(a).then(l)};this.check_out=function(a){c.submit("check_out",a).then(l)};this.check_in=function(a){c.submit("check_in",a).then(this.load.bind(this))};this.navigate_to=function(b){a.path("/lyrics_synchronizations/"+b)};var l=function(c){"pristine"===c.state&&b.open("/songs/"+
c.song_id);a.path("/lyrics_synchronization/"+c.id)}}]});
angular.module("genius").component("manageRoles",{templateUrl:"manage_roles.html",bindings:{user:"<"},controller:["Session","UserService","Reversible","AppConfig",function(d,a,b,c){this.user_authority_roles=c.user_authority_roles;this.can_toggle=function(a){return d.has_permission("toggle_"+a+"_status",this.user)};this.has_role=function(a){return _.contains(this.user.roles_for_display,a)};this.role_grant=function(a){return _.find(this.user.role_grants,function(b){return b.role===a})};this.errors=
{};this.grant=function(c,d){this.errors={};var k,e;d?(k=this.user.roles_for_display.concat(c),e=a.add_role(this.user.id,c)):(k=_.without(this.user.roles_for_display,c),e=a.remove_role(this.user.id,c));var f=b.modify(this.user,{roles_for_display:k});e.then(function(a){_.extend(this.user,a.user)}.bind(this)).catch(function(a){f();this.errors[c]=a.errors}.bind(this))}}]});
angular.module("genius").component("mergeArtistForm",{templateUrl:"merge_artist_form.html",bindings:{artist:"<"},controller:["Session","ArtistService",function(d,a){this.artist_name_to_merge_with="";this.can=function(a,c){return d.has_permission(a,c)};this.merge_artist=function(){this.show_warning?(delete this.errors,delete this.artist_merge_complete,this.saving||(this.saving=!0,a.merge(this.artist.id,this.artist_name_to_merge_with).then(function(){this.artist_merge_complete=!0}.bind(this)).catch(function(a){this.errors=
a.data.response.errors}.bind(this)).finally(function(){delete this.saving}.bind(this)))):this.show_warning=!0}.bind(this)}]});
angular.module("genius").component("messagesInbox",{bindings:{opened:"<",decrement_unread_count:"&decrementUnreadCount"},templateUrl:"messages_inbox.html",controller:["Attempt","InboxService","Tracking",function(d,a,b){var c=this;this.attempt_close=function(a){d.close_form(a,function(){c.composing=!1})};var l=function(){c.refresh_at=Date.now()};this.$onInit=function(){a.on_update("messages_inbox",l)};this.$onChanges=function(a){if(a.opened){var c=a.opened.previousValue;!a.opened.currentValue||c&&
!a.opened.isFirstChange()||b.track("Inbox Open",{inbox_name:"messages_inbox"})}}}]});angular.module("genius").component("miniAlbumCard",{bindings:{album:"<object",variants:"<"},templateUrl:"mini_album_card.html"});angular.module("genius").component("miniAnnotatableCard",{bindings:{object:"<",variants:"<"},templateUrl:"mini_annotatable_card.html"});angular.module("genius").component("miniArtistCard",{bindings:{artist:"<object",variants:"<"},templateUrl:"mini_artist_card.html"});
angular.module("genius").component("miniSongCard",{bindings:{song:"<object",search_highlights:"<searchHighlights",artist:"<",variants:"<"},templateUrl:"mini_song_card.html",controller:["string_to_symbol_array",function(d){this.non_primary_artist_present=this.artist&&this.artist.id!==this.song.primary_artist.id;var a=function(a){var b=a.value,g=[],k=0;a.ranges.forEach(function(a){var c;c=k;var m=a.start;c=d(b).slice(c,m).join("");var m=a.start,h=a.end,m="<span>"+d(b).slice(m,h).join("")+"</span>";
g.push(c);g.push(m);k=a.end});a=b.split("").slice(k).join("");g.push(a);return g.join("")},b=_.indexBy(this.search_highlights,"property").lyrics;b&&(this.excerpt_with_markup=a(b))}]});angular.module("genius").component("miniUserCard",{bindings:{user:"<object",variants:"<"},templateUrl:"mini_user_card.html"});
angular.module("genius").component("otherUsersWithIp",{templateUrl:"other_users_with_ip.html",bindings:{user:"<"},controller:["PagedScrollableDataFactory","UserService",function(d,a){this.infinite_scroll_data=new d(_.partial(a.other_users_with_ip,this.user.id),"other_users_with_ip")}]});
angular.module("genius").component("paginatedAccomplishments",{bindings:{user:"<",managing:"<",on_empty:"&onEmpty"},templateUrl:"paginated_accomplishments.html",controller:["PagedScrollableDataFactory","AccomplishmentService","UserService","Reversible","$scope",function(d,a,b,c,l){l.$watch("$ctrl.managing",function(a){this.scrollable_data=new d(_.partial(b.accomplishments,this.user.id),"accomplishments",{include_hidden:a,per_page:10})}.bind(this));this.toggle=function(b){var d=c.modify(b,{hidden:!b.hidden});
a.update(b.id,{accomplishment:{hidden:b.hidden}}).then(function(a){_.extend(b,a.accomplishment)}).catch(function(){d()})}}]});angular.module("genius").component("paginatedLeaderboard",{bindings:{source:"<",per_page:"<perPage",on_empty:"&onEmpty"},templateUrl:"paginated_leaderboard.html",controller:["PagedScrollableDataFactory",function(d){this.scrollable_data=new d(this.source,"leaderboard",{per_page:this.per_page})}]});
angular.module("genius").component("profileAdminPane",{bindings:{user:"<"},templateUrl:"profile_admin_pane.html",controller:["Session",function(d){this.can=function(a){return d.has_permission(a,this.user)};this.can_moderate=this.can("toggle_penalty_status")||this.can("mark_spam")||this.can("mark_ham")||this.can("mass_delete_unreviewed_activity")||this.can("mass_delete_votes");this.managing_accomplishments=!1}]});
angular.module("genius").component("profileAllActivity",{templateUrl:"profile_all_activity.html",bindings:{user:"<",artist:"<"},controller:["UserService","ArtistService","PagedScrollableDataFactory","Session",function(d,a,b,c){this.activity_types=[];c.has_permission("view_activity_stream",this.user)&&this.activity_types.push({activity_type:"user",label:this.user.name+"'s Activity",profile_activity_scrollable_data:new b(_.partial(d.activity_line_items,this.user.id),"line_items",{text_format:"html"})});
c.has_permission("view_activity_stream",this.artist)&&this.activity_types.push({activity_type:"artist",label:"Activity on "+this.artist.name+"'s songs",profile_activity_scrollable_data:new b(_.partial(a.activity_line_items,this.artist.id),"line_items",{text_format:"html"})});this.activity_type=this.activity_types[0]}]});
angular.module("genius").component("profileAnnotation",{bindings:{annotation:"<",referent:"<",variants:"<"},templateUrl:"profile_annotation.html",controller:["$scope",function(d){d.$watchGroup(["$ctrl.annotation.community","$ctrl.annotation.cosigned_by"],function(){this.referent_display_mode=this.annotation.community&&0===this.annotation.cosigned_by.length?"default":"green"}.bind(this));d.$on("annotation_deleted",function(a,b,c){b===this.annotation&&c.then(function(){this.deleted=!0}.bind(this))}.bind(this))}]});
angular.module("genius").component("profileArtistDescriptionPreview",{templateUrl:"profile_artist_description_preview.html",bindings:{artist:"<",top_scholar:"<topScholar"}});
angular.module("genius").component("profileArtistPane",{bindings:{artist:"<"},templateUrl:"profile_artist_pane.html",controller:["Session","ArtistService",function(d,a){this.twitter_url="https://twitter.com/"+this.artist.twitter_name;this.facebook_url="http://www.facebook.com/"+this.artist.facebook_name;this.instagram_url="http://instagram.com/"+this.artist.instagram_name;this.user_signed_in=d.user_signed_in;this.get_leaderboard_page=_.partial(a.load_leaderboard,this.artist.id)}]});
angular.module("genius").component("profileContributionsAnnotations",{templateUrl:"profile_contributions_annotations.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){this.limit=1;this.annotations=this.contributions_group.contributions}});angular.module("genius").component("profileContributionsAnswers",{templateUrl:"profile_contributions_answers.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){this.answers=this.contributions_group.contributions}});
angular.module("genius").component("profileContributionsArticles",{templateUrl:"profile_contributions_articles.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){this.article=this.contributions_group.contributions[0]}});
angular.module("genius").component("profileContributionsComments",{templateUrl:"profile_contributions_comments.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){this.limit=1;this.comments=this.contributions_group.contributions;this.commentable=this.comments[0].commentable}});angular.module("genius").component("profileContributionsGroup",{templateUrl:"profile_contributions_group.html",bindings:{user:"<",contributions_group:"<contributionsGroup"}});
angular.module("genius").component("profileContributionsPyongs",{templateUrl:"profile_contributions_pyongs.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){this.pyong=this.contributions_group.contributions[0]}});angular.module("genius").component("profileContributionsQuestions",{templateUrl:"profile_contributions_questions.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){this.questions=this.contributions_group.contributions}});
angular.module("genius").component("profileContributionsTranscriptions",{templateUrl:"profile_contributions_transcriptions.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){this.song=this.contributions_group.contributions[0]}});
angular.module("genius").component("profileFollowers",{bindings:{artist:"<",user:"<",follows:"<"},templateUrl:"profile_followers.html",controller:["PagedScrollableDataFactory","UserService",function(d,a){this.scrollable_data=this.user?this.follows?new d(_.partial(a.load_followed_users,this.user.id),"followed_users"):new d(_.partial(a.load_followers_by_user,this.user.id),"followers"):new d(_.partial(a.load_followers_by_artist,this.artist.id),"followers")}]});
angular.module("genius").component("profileIdentity",{templateUrl:"profile_identity.html",bindings:{artist:"<",user:"<"},controller:function(){this.alternate_name_limit=2;this.user_has_more_than_one_role=function(){return this.user&&1<this.user.roles_for_display.length};this.more_alternate_names_to_show=function(){return this.artist.alternate_names.length>this.alternate_name_limit};this.show_all_alternate_names=function(){this.alternate_name_limit=Infinity}}});
var USER_ACTIVITY_FILTER_OPTIONS=[{i18n_key:"contribution_type.all_activity.name",filter:null,sort:[]},{i18n_key:"contribution_type.annotations.name",filter:"annotations",sort:[{i18n_key:"contribution_type.annotations.sort.popularity",value:"popularity"},{i18n_key:"contribution_type.annotations.sort.chronologically",value:"chronologically"}]},{i18n_key:"contribution_type.pyongs.name",filter:"pyongs",sort:[]},{i18n_key:"contribution_type.transcriptions.name",filter:"transcriptions",sort:[{i18n_key:"contribution_type.transcriptions.sort.popularity",
value:"popularity"},{i18n_key:"contribution_type.transcriptions.sort.chronologically",value:"chronologically"}]},{i18n_key:"contribution_type.comments.name",filter:"comments",sort:[]},{i18n_key:"contribution_type.questions_and_answers.name",filter:"questions_and_answers",sort:[]},{i18n_key:"contribution_type.articles.name",filter:"articles",sort:[{i18n_key:"contribution_type.articles.sort.popularity",value:"popularity"},{i18n_key:"contribution_type.articles.sort.chronologically",value:"chronologically"}]},
{i18n_key:"contribution_type.unreviewed_annotations.name",filter:"unreviewed_annotations",sort:[{i18n_key:"contribution_type.unreviewed_annotations.sort.popularity",value:"popularity"},{i18n_key:"contribution_type.unreviewed_annotations.sort.chronologically",value:"chronologically"}]}];
angular.module("genius").component("profilePage",{templateUrl:"profile_page.html",bindings:{artist:"<",user:"<",artist_songs:"<artistSongs",artist_albums:"<artistAlbums",top_scholar:"<topScholar",top_accomplishment:"<topAccomplishment",pinned_annotations:"<pinnedAnnotations",artist_has_more_songs:"<artistHasMoreSongs",show_artist_pane:"<showArtistPane",preloaded_user_activity:"<preloadedUserActivity",initial_next_user_activity_timestamp:"<initialNextUserActivityTimestamp",$router:"<",current_user_metadata:"<currentUserMetadata"},
controller:["CursoredScrollableDataFactory","UserService","ArtistService","$rootRouter","Session","ScrollPoint","Tracking",function(d,a,b,c,l,g,k){var e=this;k.track("Profile Page Load");this.scroll_to=g.scroll_to;this.user_activity_sort_options_by_filter=_.clone(USER_ACTIVITY_FILTER_OPTIONS);this.logged_in=l.user_signed_in;this.can=function(a,b){return l.has_permission(a,b)};this.community_artist=this.artist&&this.user&&!this.user.is_verified;this.can_message_user=this.can("send_message",this.user);
this.can_view_activities_in_real_time=this.logged_in&&this.user;this.can_edit_artist_profile=this.can("edit_anything",this.artist);this.can_edit_user_profile=this.can("edit",this.user);this.can_edit_profile=this.can_edit_artist_profile||this.can_edit_user_profile;this.can_view_admin_info=this.can("view_admin_info",this.user);this.can_view_roles=this.can("view_roles",this.user);this.can_verify=this.can("toggle_verification_status",this.user);this.can_moderate_user=this.can("toggle_penalty_status",
this.user)||this.can("mark_spam",this.user)||this.can("mark_ham",this.user)||this.can("mass_delete_unreviewed_activity",this.user)||this.can("mass_delete_votes",this.user);this.can_view_airbrake_errors=this.can("view_airbrake_errors",this.user);this.filter_activity_by=function(b,c){e.filter_by_contribution_type=b;b.filter?(e.filter_by_contribution_type_sort=c||b.sort[0],e.user_contributions_scrollable_data=new d(_.partial(a.load_contributions,e.user.id,b.filter),"contribution_groups",{text_format:"html,markdown",
sort:e.filter_by_contribution_type_sort&&e.filter_by_contribution_type_sort.value,per_page:8})):e.user_contributions_scrollable_data=new d(_.partial(a.load_contributions,e.user.id,!1),"contribution_groups",{text_format:"html,markdown",per_page:8},e.initial_next_user_activity_timestamp)};this.filter_activity_by_type=function(a){e.filter_activity_by(_.find(e.user_activity_sort_options_by_filter,{filter:a}));e.scroll_to("user_activity")};this.user&&this.filter_activity_by(this.user_activity_sort_options_by_filter[0]);
this.display_as_artist=function(){return!(!e.artist||e.user&&!e.user.is_verified)};this.display_as_user=function(){return!e.display_as_artist()};this.header_url=function(){return e.display_as_artist()?e.artist.header_image_url:e.user.header_image_url};this.avatar_url=function(){return e.display_as_artist()?e.artist.image_url:e.user.avatar.medium.url};var f=function(d){e.display_as_artist()?c.navigate(["ArtistPage",{},d?"ProfileBioPage":"ProfilePage",{slug:b.get_slug(e.artist)}]):c.navigate([d?"UserBioPage":
"UserPage",{slug:a.get_slug(e.user)}])};this.open_description=function(){f(!0)};this.close_description=function(){f(!1)}}]});angular.module("genius").component("profileUserDescriptionPreview",{templateUrl:"profile_user_description_preview.html",bindings:{user:"<",top_accomplishment:"<topAccomplishment"}});
angular.module("genius").component("profileUserPane",{bindings:{user:"<",on_statistics_select:"&onStatisticsSelect"},templateUrl:"profile_user_pane.html",controller:["Session",function(d){this.can=function(a){return d.has_permission(a,this.user)}}]});
angular.module("genius").component("question",{bindings:{question:"<",variants:"<",move_question:"&?moveQuestion",featured:"<",on_pending_event:"&onPendingEvent",yields_iq:"&yieldsIq",yields_api:"&yieldsApi"},templateUrl:"question.html",controller:["Reversible","QuestionService","Session",function(d,a,b){var c=this;this.can=function(a,c){return b.has_permission(a,c)};this.is_pinned=function(){return"pinned"===c.question.state};this.is_verified=function(){return c.question.answer&&c.question.answer.answer_source};
this.archive=function(){c.question._deleted=!0;var a=c.change_state("archive");c.on_pending_event({event:"UserArchiveQuestion",result:a});return a.catch(function(){Reflect.deleteProperty(c.question,"_deleted")})};this.pin=function(){var a=d.modify(c.question,{state:"pinned"});return c.change_state("pin").catch(a)};this.unpin=function(){var a=d.modify(c.question,{state:"pending"});return c.change_state("unpin").catch(a)};this.change_state=function(b){return a.create_if_not_exists(c.question).then(function(){return a.change_state(c.question,
b)})};this.start_editing=function(){c.question._editing=_.defaults(c.question._editing||{},{_form_visible:!0,body:c.question.body})};this.move=function(a){this.move_question({direction:a,question:this.question})};this.cancel_editing=function(){Reflect.deleteProperty(c.question,"_editing")};this.finish_editing=function(){if(!c.disable_saving_with){c.disable_saving_with="Saving";var b=d.modify(c.question,{"_editing._form_visible":!1});a.update(c.question,{question:c.question._editing}).then(c.cancel_editing.bind(c)).catch(b).finally(function(){c.disable_saving_with=
!1})}};var l=this;this.yields_api({api:{answer:function(){l.answerApi.start_editing()},archive:l.archive}})}]});
angular.module("genius").component("questionForm",{bindings:{song:"<",on_new_question:"&onNewQuestion"},templateUrl:"question_form.html",controller:["Session","$scope","QuestionService",function(d,a,b){this.user_signed_in=d.user_signed_in;var c=function(a){this.question={_new:!0,author:d.current_user,author_name:a&&a.author_name,author_email:a&&a.author_email,body:""}}.bind(this);this.save=function(){if(!this.saving){this.saving=!0;d.user_signed_in||(this.question.anonymous_user={name:this.question.name});
var l=this.question;c();a.question_form.$setPristine();b.create(this.song.id,l).then(function(){this.saving=!1;a.question_form.$setPristine();this.thank_you=!0;this.on_new_question({question:l});c(l);this.error={}}.bind(this)).catch(function(a){this.error=a;this.question=l;this.saving=!1}.bind(this))}}.bind(this)}]});
angular.module("genius").component("questionList",{bindings:{pinned_questions:"<pinnedQuestions",default_questions:"<defaultQuestions",featured_question:"<featuredQuestion",pending_question_count:"<pendingQuestionCount",variants:"<",song:"<"},templateUrl:"question_list.html",controller:["SongService","QuestionService","PagedScrollableDataFactory",function(d,a,b){this.questions=_([]).concat(this.default_questions,this.pinned_questions).compact().value();this.featured_question&&"pinned"!==this.featured_question.state&&
this.questions.push(this.featured_question);this.move_question=function(b,c){var d;"up"===b?d=_(this.questions).filter(function(a){return a.pin_order&&a.pin_order<c.pin_order}).sortBy("pin_order").reverse().take(2).thru(function(a){return[a[1],a[0]]}):"down"===b&&(d=_(this.questions).filter(function(a){return a.pin_order&&a.pin_order>c.pin_order}).sortBy("pin_order").take(2).thru(function(a){return[a[0],a[1]]}));d=this.move_question_between(c,d.get(0),d.get(1));a.move(c,b).catch(d)};this.move_question_between=
function(a,b,c){var d;b&&c?d=(b.pin_order+c.pin_order)/2:c?d=c.pin_order/2:b&&(d=b.pin_order+1);var m=a.pin_order;a.pin_order=d;return function(){a.pin_order=m}};this.sorting_predicates=[function(a){return["default","pinned","pending","archived"].indexOf(a.state)},"pin_order"];var c={state:"pending"};this.variants&&this.variants.answered&&(c.answered=this.variants.answered);var l=new b(_.partial(d.load_questions,this.song.id),"questions",c);this.has_next=this.pending_question_count?l.has_next:function(){return!1};
this.load_more=function(){this._loading=!0;l.next().then(function(a){a=_.reject(a,this.is_featured_question,this);this.pending_question_count-=a.length;Array.prototype.push.apply(this.questions,a)}.bind(this)).finally(function(){this._loading=!1}.bind(this))}.bind(this);this.is_featured_question=function(a){return this.featured_question&&this.featured_question.id===a.id}}]});
angular.module("genius").component("reasonsToggle",{bindings:{reasonChanged:"&"},templateUrl:"reasons_toggle.html",controller:["AppConfig",function(d){this.comment_reasons=d.comment_reasons;this.selectedReason="";this.change_reason=function(a){this.selectedReason===a?delete this.selectedReason:this.selectedReason=a;this.reasonChanged({reason:this.selectedReason})}}]});
angular.module("genius").component("recentSignupsPage",{templateUrl:"recent_signups_page.html",controller:["UserService","Attempt","TimestampedScrollableDataFactory","I18n",function(d,a,b,c){var l=function(a,b){b.marking_spam_state=!0;d.update_spam_state(b.user.id,{state:a}).then(function(){b.marked_spam_state=!0}.bind(this)).finally(function(){delete b.marking_spam_state})}.bind(this);this.mark=function(b,d){a.admin_action(function(){l(b,d)},c.t("mark_"+b+".confirm"))};this.filter_by_spam_state=
function(a){this.filtering_spam_state!==a&&(this.filtering_spam_state=a,this.recent_signups_scrollable_data=new b(_.partial(d.load_recent_signups,"unclassified_spam_state"===a?"":a),"user_spam_evaluations"))};this.filter_by_spam_state("unclassified_spam_state")}]});angular.module("genius").component("recirculatedContent",{templateUrl:"recirculated_content.html",bindings:{stories:"<"}});
angular.module("genius").component("relevantVideos",{bindings:{song:"<",on_click:"&onClick"},templateUrl:"relevant_videos.html",controller:["$scope","SongService","Tracking",function(d,a,b){var c=this;this.clicked=function(a){c.on_click({video:a,relevance_level:"p_relevant"})};this.firstplay=function(a){b.track("Play Related Video",{properties:{video_id:a.id,placement:"p_relevant"}})};d.$watch("$ctrl.song.id",function(b){c.videos=[];b&&a.videos(b,{per_page:1,filter:"p_relevant"}).then(function(a){c.videos=
a})})}]});angular.module("genius").component("renderOnLoad",{template:'<ng-transclude ng-if="$ctrl.render"></ng-transclude>',transclude:!0,controller:["windowOnLoad",function(d){d.then(function(){this.render=!0}.bind(this))}]});
(function(d){var a="artist user artist_songs artist_albums top_scholar top_accomplishment pinned_annotations artist_has_more_songs preloaded_user_activity initial_next_user_activity_timestamp current_user_metadata".split(" ");d.module("genius").component("routablePage",{template:"<ng-outlet></ng-outlet>",$routeConfig:[{regex:/^($|#|\?)/,serializer:function(){return{urlPath:""}},name:"HomePage",component:"homePage",data:{type:"home"}},{path:"/search",name:"SearchResultsPage",component:"searchResultsPage"},
{path:"/flareon",name:"HomePage",component:"homePage",data:{type:"home"}},{path:"/artists/...",name:"ArtistPage",component:"routableProfilePage"},{regex:/^(.*-(?:annotated|lyrics))\??(.*)/,serializer:function(a){return{urlPath:a.slug}},name:"SongPage",component:"songPage",data:{clientRoutable:!0,type:"song"}},{regex:/^(\d+)$/,serializer:function(a){return{urlPath:a.referent_id}},name:"SongReferentFocus",component:"songPage",data:{type:"referent"}},{path:"/:slug",name:"UserPage",component:"routedPage",
data:{includeFromCache:a,component:"profilePage",include:{show_artist_pane:!1}}},{path:"/:slug/bio",name:"UserBioPage",component:"routedPage",data:{includeFromCache:a,component:"profilePage",include:{show_artist_pane:!0}}},{path:"/users/...",name:"UserRouter",component:"routableUserPage"}]})})(window.angular);
(function(d){var a="artist user artist_songs artist_albums top_scholar top_accomplishment pinned_annotations artist_has_more_songs preloaded_user_activity initial_next_user_activity_timestamp current_user_metadata".split(" ");d.module("genius").component("routableProfilePage",{template:"<ng-outlet></ng-outlet>",$routeConfig:[{path:"/:slug",name:"ProfilePage",component:"routedPage",data:{component:"profilePage",includeFromCache:a,include:{show_artist_pane:!1}}},{path:"/:slug/bio",name:"ProfileBioPage",
component:"routedPage",data:{component:"profilePage",includeFromCache:a,include:{show_artist_pane:!0}}}]})})(angular);(function(d){d.module("genius").component("routableUserPage",{template:"<ng-outlet></ng-outlet>",$routeConfig:[{path:"/recent_signups",name:"RecentSignupsPage",component:"routedPage",data:{component:"recentSignupsPage"}}]})})(angular);
angular.module("genius").component("routedPage",{template:["$rootRouter",function(d){for(var a=function(a){return a.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase().replace(/_/g,"-")},b=d.currentInstruction;null!=b.child;)b=b.child;var b=b.component.routeData.data,c=a(b.component),l=d.currentInstruction.component.params;return"<"+c+" "+_(b.includeFromCache).map(function(b){return a(b)+'="$ctrl.preloadedData.'+b+'"'}).join(" ")+" "+_(b.includeFromUrlParams).map(function(b){return a(b)+'="'+l[b]+
'"'}).join(" ")+" "+_(b.include||{}).map(function(b,c){return a(c)+'="'+b+'"'}).join(" ")+' $router="$ctrl.$router"></'+c+">"}],bindings:{$router:"<"},controller:["PreloadCache",function(d){this.preloadedData=d;this.$routerCanReuse=function(){return!1}}]});angular.module("genius").component("searchResultItems",{bindings:{results:"<",limit_to:"<limitTo"},templateUrl:"search_result_items.html"});
angular.module("genius").component("searchResultSection",{bindings:{section:"<",on_show_more:"&onShowMore",variants:"<"},templateUrl:"search_result_section.html"});
angular.module("genius").component("searchResults",{bindings:{sections:"<",search_text:"<searchText",variants:"<"},templateUrl:"search_results.html",controller:["PagedScrollableDataFactory","SearchService","$scope","Tracking","$window",function(d,a,b,c,l){var g=this;b.$watch("$ctrl.filter",function(){g.infinite_scroll_data=new d(_.partial(a.section,g.filter,g.search_text),"sections")});this.show_all_results=function(){c.track_with_timeout("Search More Results Page View Button On Autocomplete",function(){l.location.href=
"/search?q="+g.search_text})}}]});angular.module("genius").component("searchResultsPage",{bindings:{$router:"<"},templateUrl:"search_results_page.html",controller:["SearchService",function(d){var a=this;this.$routerOnActivate=function(b){a.q=b.params.q;return d.multi(a.q).then(function(b){a.sections=b.sections})}}]});
angular.module("genius").component("selectDropdown",{templateUrl:"select_dropdown.html",require:{ngModel:"?ngModel"},bindings:{options:"<",on_select:"&onSelect",variants:"<",selection:"<"},controller:["$scope",function(d){d.$watch("$ctrl.options",function(){this.selected=this.options[0]}.bind(this));d.$watch("$ctrl.selected",function(a){this.ngModel&&this.ngModel.$setViewValue(a)}.bind(this));d.$watch("$ctrl.selection",function(a){a&&(this.selected=a)}.bind(this));this.is_clickable=function(){return 1<
this.options.length}}]});angular.module("genius").component("songAlbums",{bindings:{song:"<",primary_album_tracks:"<primaryAlbumTracks"},templateUrl:"song_albums.html",controller:function(){var d=!1;this.primary_album=function(){return this.song.album};this.other_albums=function(){return this.primary_album()?_.reject(this.song.albums,{id:this.primary_album().id}):this.song.albums};this.hidden_album_count=function(){return d?0:Math.max(0,this.other_albums().length-2)};this.show_all=function(){d=!0}}});
angular.module("genius").component("songMetadataSongRelationshipsInput",{templateUrl:"song_metadata_song_relationships_input.html",bindings:{song_relationships:"<songRelationships",isDisabled:"<"},controller:[function(){this.visible_relationships=_.filter(this.song_relationships,function(d){return d.songs.length});this.available_relationships=function(){return _.difference(this.song_relationships,this.visible_relationships)};this.change_relationship_to=function(d,a){a.songs=d.songs;d.songs=[];this.visible_relationships[this.visible_relationships.indexOf(d)]=
a};this.remove_song_relationship=function(d){d.songs=[];this.visible_relationships=_.without(this.visible_relationships,d)};this.add_new_song_relationship=function(){var d=this.available_relationships();d.length&&this.visible_relationships.push(d[0])}}]});
angular.module("genius").component("songMissingMetadata",{templateUrl:"song_missing_metadata.html",bindings:{song:"<",save:"&onSave"},controller:["$scope","Tracking",function(d,a){d.$watch("$ctrl.song.updated_by_human_at",function(a){a&&(this.editable_song=angular.copy(this.song))}.bind(this));var b=["writer_artists","producer_artists","albums","release_date_components"];this.has_missing_info=function(){return _.any(b,this.missing_info)};this.missing_info=function(a){return _.isEmpty(this.song[a])}.bind(this);
this.submit=function(b){delete this.error;b=_.pick(this.editable_song,b);this.save({changes:b}).then(function(){a.track("Metadata Edit",{Source:"Missing"})}.bind(this)).catch(function(a){this.error=a}.bind(this))}.bind(this)}]});
angular.module("genius").component("songMissingMetadataForm",{templateUrl:"song_missing_metadata_form.html",bindings:{submit:"&onSubmit",cancel:"&onCancel",type:"@",errors:"<",item_count:"<itemCount"},transclude:!0,controller:["Iq",function(d){var a=this;this.iq_change=function(){return(_.max([a.item_count,1])-1)*d.for("song_metadata_update_or_addition")}}]});
angular.module("genius").component("songPage",{templateUrl:"song_page.html",controller:["$window","$scope","$rootRouter","$immediate","PageData","Tracking","SessionConfig","querystring",function(d,a,b,c,l,g,k,e){var f=this;this.$routerCanReuse=function(){return!0};this.$onInit=function(){f.lyrics_inread_ad=k.dfp_enabled};this.$routerOnActivate=this.$routerOnReuse=function(h){if("song"===h.routeData.data.type){var k=h.routeData.data.type,q=h.params[1],r=e.parse(h.params[2]||"");q!==m()&&(g.reset_counters(),
l.load(k,"/"+q,!h.reuse).then(function(e){f.page_data=e;_.extend(a,f.page_data);if(r.referent_id){var m=parseInt(r.referent_id);g.set_annotation_opened_from_permalink(m);c(function(){return b.navigateByUrl("/"+m)})}else h.reuse&&d.scrollTo(0,0)}))}else if("referent"===h.routeData.data.type){var t=parseInt(h.params[1]);f.song_ctrl.scroll_to_referent(t).then(function(){return f.song_ctrl.display_referent(t)})}};var m=function(){var a=_.get(f,"page_data.song.url");if(a)return _.last(a.split("/"))}}]});
angular.module("genius").component("songTopVerifiedArtist",{bindings:{contributors:"<verifiedContributors",on_clicked_verified_annotator:"&onClickedVerifiedAnnotator",on_clicked_verified_answer:"&onClickedVerifiedAnswer"},templateUrl:"song_top_verified_artist.html",controller:function(){var d=_.sortBy(this.contributors,function(a){return a.contributions.length});this.contributor=_.last(d);this.on_clicked=function(a){_.includes(this.contributor.contributions,"annotations")?(this.on_clicked_verified_annotator({user:this.contributor.user}),
a.preventDefault()):_.includes(this.contributor.contributions,"answers")&&(this.on_clicked_verified_answer({artist:this.contributor.artist}),a.preventDefault())}.bind(this)}});
angular.module("genius").component("songVerifiedArtists",{bindings:{verified_contributors:"<verifiedContributors"},templateUrl:"song_verified_artists.html",controller:["$scope",function(d){d.$watch("$ctrl.verified_contributors",function(a){1===a.length&&(this.featured=!0);this.commentary_and_lyrics_by=_.filter(a,function(a){return _.includes(a.contributions,"lyrics")&&(_.includes(a.contributions,"annotations")||_.includes(a.contributions,"answers"))});this.commentary_by=_.filter(a,function(a){return!_.includes(a.contributions,
"lyrics")&&(_.includes(a.contributions,"annotations")||_.includes(a.contributions,"answers"))});this.lyrics_by=_.filter(a,function(a){return _.includes(a.contributions,"lyrics")&&!(_.includes(a.contributions,"annotations")||_.includes(a.contributions,"answers"))});this.lyrics_only=this.lyrics_by.length&&!(this.commentary_and_lyrics_by.length||this.commentary_by.length)}.bind(this))}]});
angular.module("genius").component("songVerifiedArtistsSection",{bindings:{contributors:"<",featured:"<",label:"@",lyrics_only:"<lyricsOnly"},templateUrl:"song_verified_artists_section.html"});
angular.module("genius").component("songVerifiedArtistsSectionSingle",{bindings:{contributor:"<",featured:"<",label:"@",variants:"<"},templateUrl:"song_verified_artists_section_single.html",controller:function(){this.url=this.contributor.artist.url;this.image_url=this.contributor.artist.image_url;this.is_meme_verified=this.contributor.artist.is_meme_verified;this.name=this.contributor.artist.name}});
angular.module("genius").component("spamStatus",{templateUrl:"spam_status.html",bindings:{user:"<"},controller:["UserService",function(d){d.spam_status(this.user.id).then(function(a){this.user_spam_evaluation=a.user_spam_evaluation}.bind(this))}]});
angular.module("genius").component("squareItemAndIq",{bindings:{event_type:"@eventType",iq_params:"<iqParams",show_pill_initial:"<showPill",iq_change:"<iqChange",variants:"<"},templateUrl:"square_item_and_iq.html",transclude:!0,controller:["Iq","Session",function(d,a){var b=this;this.show_pill=function(){return a.user_signed_in?_.isUndefined(b.show_pill_initial)?!0:b.show_pill_initial:!1};this.iq=function(){var a=b.iq_params?_.sum(_.map(_.filter(b.iq_params,"applicable"),"value")):d.for(b.event_type);
return b.iq_change?a+b.iq_change:a}}]});angular.module("genius").component("statisticsPanel",{bindings:{user:"<",on_select:"&onSelect"},templateUrl:"statistics_panel.html"});angular.module("genius").component("statisticsPanelItem",{bindings:{label:"@",value:"<",icon:"@"},templateUrl:"statistics_panel_item.html"});
angular.module("genius").component("twitterShareButton",{templateUrl:"twitter_share_button.html",bindings:{url:"<",message:"<",variants:"<"},controller:["Twitter","Tracking",function(d,a){this.share_on_twitter=function(){a.track("Bagon Twitter Share");d.share({url:this.url,message:this.message})}}]});angular.module("genius").component("userAttribution",{bindings:{object:"<",rank:"<"},templateUrl:"user_attribution.html"});
angular.module("genius").component("userIdentities",{templateUrl:"user_identities.html",bindings:{user:"<",editable:"<"},controller:["IdentityService","Session",function(d,a){this.can=function(b){return a.has_permission(b,this.user)};this.can_edit=function(){return this.editable&&this.can("manage_identities")};this.saving_identity={};this.unlink_identity=function(a){this.saving_identity[a.provider]||(this.saving_identity[a.provider]=!0,delete this.errors,d.destroy(a.id).then(function(a){_.extend(this.user,
a.user);delete this.errors}.bind(this)).catch(function(a){this.errors=a.errors}.bind(this)).finally(function(){delete this.saving_identity[a.provider]}.bind(this)))};this.identity_auth_path=function(a){return"/auth/"+a}}]});
angular.module("genius").component("userInfoWithActions",{bindings:{user:"<object",variants:"<"},templateUrl:"user_info_with_actions.html",controller:["$scope","Session","UserService",function(d,a,b){this.user_signed_in=a.user_signed_in;this.current_user=a.current_user;d.$watch("$ctrl.user",function(a){if(!a.current_user_metadata){var d=this.user;b.load(d.id).then(function(a){_.extend(d,a)})}}.bind(this))}]});
angular.module("genius").component("userModeration",{templateUrl:"user_moderation.html",bindings:{user:"<"},controller:["Session","UserService","Attempt","AppConfig",function(d,a,b,c){this.can=function(a){return d.has_permission(a,this.user)};this.clear=function(){delete this.errors;delete this.messages};this.toggle_penalty_status=function(){this.updating||(this.clear(),this.updating=!0,(this.user.penalty_box_until?a.unpenalty_box(this.user.id):a.penalty_box(this.user.id)).then(function(a){_.extend(this.user,
a.user)}.bind(this)).catch(function(a){this.errors=a.errors}.bind(this)).finally(function(){delete this.updating}.bind(this)))};this.update_spam_state=function(c){this.updating||b.admin_action(function(){this.clear();this.updating=!0;a.update_spam_state(this.user.id,{state:c}).then(function(a){_.extend(this.user,a.user);this.messages=["Done! (But it'll take a few minutes to finish)"]}.bind(this)).catch(function(a){this.errors=a.errors}.bind(this)).finally(function(){delete this.updating}.bind(this))}.bind(this),
I18n.t("mark_"+c+".confirm"))};this.mass_delete_unreviewed_activity=function(){this.updating||b.admin_action(function(){this.clear();this.updating=!0;a.mass_delete_unreviewed_activity(this.user.id).then(function(a){_.extend(this.user,a.user);this.messages=["Done! (But it'll take a few minutes to finish)"]}.bind(this)).catch(function(a){this.errors=a.errors}.bind(this)).finally(function(){delete this.updating}.bind(this))}.bind(this),I18n.t("mass_delete_unreviewed_activity.confirm"))};this.vote_types=
c.user_vote_types_for_delete;this.mass_delete_votes=function(c){this.updating||b.admin_action(function(){this.clear();this.updating=!0;a.delete_votes(this.user.id,c).then(function(a){_.extend(this.user,a.user);this.messages=["Done! (But it'll take a few minutes to finish)"]}.bind(this)).catch(function(a){this.errors=a.errors}.bind(this)).finally(function(){delete this.updating}.bind(this))}.bind(this),I18n.t("mass_delete_votes."+c+".confirm"))}}]});
angular.module("genius").component("verticalAlbumCard",{bindings:{album:"<object"},templateUrl:"vertical_album_card.html"});angular.module("genius").component("verticalSearchResultItems",{bindings:{results:"<"},templateUrl:"vertical_search_result_items.html"});
angular.module("genius").component("videosModal",{bindings:{song:"<",open_with_video:"<openWithVideo"},templateUrl:"videos_modal.html",controller:["$scope","$immediate","Tracking","ScrollFocus","VideoService","PagedScrollableDataFactory",function(d,a,b,c,l,g){var k=this;this.$onInit=function(){d.$watch("$ctrl.open_with_video.video",function(a){k.preloaded_videos=[a]});k.active_video=k.open_with_video.video;k.players={};var b=(new c($(".videos_modal-video"),{container:$(".videos_modal").get(0),scroll_frame:$(".modal_window").get(0),
topmost_offset:.35,bottommost_offset:.35})).on("update",function(a){if((a=_.find(k.videos(),{provider_id:$(a).find(".video-js").attr("data-video-id")}))&&a!==k.active_video){var b=k.players[k.active_video.id];b&&b.pause();k.active_video=a}d.$digest()});d.$watch("$ctrl.song.id",function(c){k.loaded_videos=[];k.infinite_scroll_data=new g(l.for_context,"videos",{per_page:5,song_id:c},1,function(c){a(function(){b.replace($(".videos_modal-video"))});k.loaded_videos=k.loaded_videos.concat(c)})})};this.videos=
function(){return k.preloaded_videos.concat(k.loaded_videos)};this.firstplay=function(a){b.track("Play Related Video",{properties:{video_id:a.id,placement:a.id===k.open_with_video.video.id?k.open_with_video.relevance_level:"modal"}})};this.add_video_api=function(a,b){this.players[a]=b}}]});
angular.module("genius").component("webAnnotatorManagerErrors",{bindings:{yields_on_error:"&yieldsOnError"},templateUrl:"web_annotator_manager_errors.html",controller:["$timeout",function(d){var a=this;this.$onInit=function(){a.errors=[];a.yields_on_error({on_error:a.on_error})};this.on_error=function(b){a.errors.unshift(b);d(function(){return _.remove(a.errors,b)},5E3)}}]});
angular.module("genius").component("webAnnotatorManager",{bindings:{web_page_id:"@webPageId"},templateUrl:"web_annotator_manager.html",controller:["WebAnnotator",function(d){var a=this;this.$onInit=function(){a.errors=[];d.load_web_page(a.web_page_id).then(function(b){return a.web_page=b})};this.protect=function(b){d[(b?"protect":"unprotect")+"_web_page"](a.web_page_id).then(function(b){return a.web_page=b}).catch(a.on_error)};this.publish_drafts=function(){d.publish_web_page_drafts(a.web_page_id).then(function(b){return a.web_page=
b}).catch(a.on_error)}}]});
angular.module("genius").component("webAnnotatorRolesTable",{templateUrl:"web_annotator_roles_table.html",bindings:{header:"@",web_location_id:"<webLocationId",web_location_type:"@webLocationType"},controller:["WebAnnotator",function(d){var a=this;this.$onInit=function(){a.errors=[];a.load()};this.load=function(){return d.load_user_roles(a.web_location_type+"s",a.web_location_id).then(function(b){return a.user_roles=b})};this.create=function(b){return d.create_user_role(a.web_location_type+"s",a.web_location_id,
b).then(a.load)}}]});angular.module("genius").constant("AdConfig",window.AD_CONFIG);angular.module("genius").constant("mobile_device",window.MOBILE_DEVICE);angular.module("genius").controller("ArticleCtrl",["$scope","Tracking",function(d,a){a.track("Article Page Load");d.play_video=function(){d.article_ctrl.player_api.play()};d.$evalAsync(function(){d.video=_(d.article.media).find(function(a){return"video"===a.type||"video"===a._type})})}]);angular.module("genius").controller("ArticleFormCtrl",function(){});
angular.module("genius").controller("CustomAppNotificationCtrl",["$scope","CustomAppNotificationService",function(d,a){d.send_preview_notification=function(){a.send_preview_notification(d.notification).then(function(){alert("sent a preview notification to your devices, take a look")})}}]);
angular.module("genius").controller("DevCtrl",["$window","$scope","$http","AppConfig",function(d,a,b,c){a.search={query:""};a.saving=!1;a.build_scenario=function(){if(!a.saving){a.saving=!0;var g=a.current_scenario.traits.filter(function(a){return a.enabled}).map(function(a){return a.name});b.post(c.api_root_url+"/scenarios?id="+a.current_scenario.id,{scenario:{traits:g}}).then(function(b){d.location.href=b.data.url;a.saving=!1})}};a.configure_scenario=function(b){a.current_scenario=b};a.clear_scenario=
function(){a.current_scenario=void 0};var l=_.once(function(){b.get(c.api_root_url+"/scenarios").then(function(b){a.results=b.data.scenarios})});a.open_search=function(){l();a.open=!0};a.close_search=function(){a.open=!1}}]);
angular.module("genius").controller("FactTrackAnnotationEditCtrl",["$scope",function(d){d.set_timestamp_to_now=function(){d.annotation.timestamp_in_ms=d.ctrl.time};d.annotation_duration=function(){var a=d.annotations.indexOf(d.annotation),a=d.annotations[a+1];return(a?a.timestamp_in_ms:d.duration)-d.annotation.timestamp_in_ms}}]);
angular.module("genius").controller("FactTrackSongEditCtrl",["$scope","$debounce","SpotifyAnnotationService","orderByFilter","SpotifyBridge","ScrollPoint",function(d,a,b,c,l,g){d.scroll_to=g.scroll_to;d.song_id=$("[data-song-id]").attr("data-song-id");l.$on("ready",function(){d.is_ready=!0});this.toggle_fullscreen=function(){this.alt_mode=!1;this.fullscreen=!this.fullscreen};this.toggle_alt_mode=function(){this.alt_mode=!this.alt_mode};d.remove_annotation=function(a){a=d.annotations.indexOf(a);d.annotations.splice(a,
1)};d.add_annotation=function(){d.annotations.push({content_type:"iq",timestamp_in_ms:this.time})}.bind(this);b.load_song(d.song_id).success(function(a){d.spotify_song=a.spotify_song;d.annotations=a.spotify_annotations;d.spotify_song.track_url&&(d.is_ready=!0);_.any(d.annotations,{content_type:"credits"})||d.annotations.push({content_type:"credits",content:"Check out the full lyrics and annotations on Genius for contributors, sources, and even more knowledge.",timestamp_in_ms:d.spotify_song.metadata.duration_ms-
3E3});f()});var k=!1,e=function(){d.saving_disabled?k=!0:(d.saving_disabled=!0,b.save_song(d.song_id,d.spotify_song,d.annotations).success(function(a){d.spotify_song.lock_version=a.spotify_song.lock_version;d.save_error=void 0}).error(function(a){d.save_error=a.message||"Failed to save";d.conflicted="conflict"===a.error;$.facebox("<div><img src='https://images.genius.com/5f38d92d0b29722104abd09aa01b1585.200x200x4.gif'></div><br><h1>Something went wrong!</h1><h2>Consider copy/pasting your work somewhere else before reloading the page</h2>")}).finally(function(){d.saving_disabled=
!1;k&&(k=!1,e())}))},f=function(){d.$watch("annotations",function(){d.annotations=c(d.annotations,["timestamp_in_ms","id"])},!0);var b=a(e,1E3);d.$watchGroup(["annotations","spotify_song.note","spotify_song.finalized"],function(){b()},!0)}}]);
angular.module("genius").controller("HeaderCtrl",["$scope","TargetElementService",function(d,a){this.$onInit=function(){this.cloudflare_error=Boolean(a.get_element("cloudflare_unavailable_alert").length)};d.toggle_mobile_subnav_menu=function(){d.mobile_subnav_menu_open=!d.mobile_subnav_menu_open};d.close_mobile_subnav_menu=function(){d.mobile_subnav_menu_open=!1}}]);
angular.module("genius").controller("HomepageCtrl",["$scope","$interval","Tracking",function(d,a,b){var c=0;b.track("Home Page View");a(function(){d.total_iq+=c;c=0},1E3);d.increment_iq=function(a){c+=a};var l=$("[data-timed-gif-image]").each(function(){var a=$(this),b=new Image;b.src=a.attr("src");var c=new Image;c.src=a.attr("data-timed-gif-image");a.on("swap_blurb_image",function(a,d){$(this).attr("src","png"===d?b.src:c.src)})});d.details_expanded=!1;d.expand_details=function(){d.details_expanded=
!0;var b=0;a(function(){l.eq(b%l.length).trigger("swap_blurb_image","gif").siblings().trigger("swap_blurb_image","png");b+=1},3E3)}}]);
angular.module("genius").controller("SongCtrl",["$scope","$window","$q","$location","$immediate","ReferentRegistry","ReferentService","SongService","Tracking","Session","currentFlashMessages","Reversible","Attempt","Pusher","I18n","ScrollPoint","only_changes",function(d,a,b,c,l,g,k,e,f,m,h,n,q,r,t,u,x){var w=this;d.$ctrl&&(d.$ctrl.song_ctrl=this);d.attempt_close=q.close_form;d.$watch("song.id",function(a){a&&f.track("Song Page Load")});var v=c.search().from_question_email;v&&f.track("Question email question clicked",
{question_id:v});d.user_signed_in=m.user_signed_in;d.reference_elements={};var C=null;d.$watch("lyrics_ctrl.focused_referent_anchor",function(a){C=a});d.$watch(function(){return C},function(){var a;a=Number($(C).data("id"));a=_.find(d.annotation_previews,{referent_id:a});d.annotation_preview=a});this.is_active_element=function(a){return $(C).data("fragment_element_id")===a};this.dismiss_annotation_preview=function(){d.annotation_preview_dismissed=!0;f.track("Dismiss Annotation Teaser")};this.reactivate_annotation_preview=
function(){d.annotation_preview_dismissed=!1;f.track("Reactivate Annotation Teaser")};this.referent_has_preview=function(a){return!!_.find(d.annotation_previews,{referent_id:a})};this.highlight_preview_referent=function(a){return w.is_active_element(a)&&!d.annotation_preview_dismissed};this.show_preview_referent_indicator=function(a){return w.is_active_element(a)&&d.annotation_preview_dismissed};g.register(d.song.description_annotation);d.preloaded_referents&&_.each(d.preloaded_referents,function(a){g.register(_.assign({fragments:[]},
a))});l(function(){e.count_view(d.song.id);g.preload_from_start(5)},!1);var E=function(a){for(var b=function(a){var b=_(d.song.media).detect(function(b){return b.provider===a});if(b)return{value:b}},c=0;c<a.length;c++){var e=b(a[c]);if("object"===typeof e)return e.value}return!1},y=function(){return _(d.song.media).detect(function(a){return"youtube"===a.provider&&a.cinema})};d.video_media=function(){return y()||d.song.featured_video&&E(["youtube"])};d.audio_media=function(){return E(d.song.featured_video?
["soundcloud"]:["soundcloud","youtube"])};d.sidebar={signing_up:!1};d.initial_sidebar_content_showing=function(){return!d.current_referent&&!_.get(d,"lyrics_ctrl.selection_range")&&!d.sidebar.signing_up};d.open_song_description_pane=function(){f.track("Open Song Description Pane");d.current_referent=d.song.description_annotation};d.delete_song=function(){e.delete(d.song.id).then(function(){h.push({type:"notice",message:"Successfully deleted Song"});a.location.href="/"})};d.media_player_audio={};d.media_player_video=
{};if(y()){d.cinema_player={};var B=d.$watch("cinema_player.state.is_ready",function(a){a&&(d.cinema_player.api.load_media(),B())})}this.media_is_stuck=!1;d.working_audio_present=function(){var a=_.get(_.find(d.song.media,{type:"audio",provider:"soundcloud"}),"url");return d.media_player_audio.state?a&&!d.media_player_audio.state.has_errored:a};d.open_docked_media_player=function(){f.track("Open Media Player");d.docked_media_player_open=!0;d.media_player_audio.api&&d.media_player_audio.api.load_media()};
d.dismiss_docked_media_player=function(){f.track("Dismiss Media Player");d.docked_media_player_open=!1;d.media_player_audio.api&&d.media_player_audio.api.pause()};d.open_docked_featured_video_player=function(){f.track("Play featured video",{properties:{"Video provider":d.video_media().provider}});d.song_ctrl.featured_video_player_api.load_media();d.song_ctrl.docked_featured_video_expanded=!0;d.media_player_audio.api&&d.media_player_audio.api.pause()};d.dismiss_docked_featured_video_player=function(){f.track("Dismiss featured video");
d.song_ctrl.featured_video_player_api.pause();d.song_ctrl.docked_featured_video_expanded=!1};d.$watch("media_player_audio.state.is_playing",function(a){a&&(d.open_docked_media_player(),d.has_initiated_player=!0)});d.next_track=function(){var a=!1;return _.detect(d.primary_album_tracks,function(b){if(a)return!0;a=b.song.id===d.song.id})};d.open_first_verified_annotation=function(a){f.track("Tap Verified Callout");var b=g.first(function(b){return"verified"===b.classification&&_.include(b.verified_annotator_ids,
a.id)});w.open_referent_by_id(b.id)};d.open_next_referent=function(a){f.track("Tap Next Verified");w.open_referent_by_id(a)};d.$watch("next_up_clicked",function(a){a&&f.track("Next Song Tap")});this.update_url_for_open_referent=function(a){c.url()!=="/"+a&&c.url("/"+a)};this.display_referent=function(a){f.track("Open Annotation",{annotation_id:a});d.highlighted_fragment_id=a;d.current_referent=g.get(a);g.preload_around(a,10);w.update_url_for_open_referent(a)};var D=!1;d.clear_current_referent=function(){d.highlighted_fragment_id=
null;d.current_referent=null;c.url(d.song.path);c.replace()};this.scroll_to_reference_element=function(c){if(!c)return b.when();var d=b.defer();c=c.offset().top+c.height()/2-$(window).height()/2;$(a).scrollTop(c).promise().then(d.resolve);return d.promise};this.scroll_to_referent=function(a){return w.scroll_to_reference_element(d.reference_elements[a])};d.open_referent=function(a){d.current_referent&&a===d.current_referent.id?d.clear_current_referent():(d.highlighted_fragment_id=a,l(function(){w.update_url_for_open_referent(a);
D?c.replace():D=!0}))};var F=function(a,b){return e.perform_action(d.song.id,a,b).then(function(a){d.song=a})};d.can_perform=function(a){return m.has_permission(a,d.song)};var L={hide:function(){w.hiding_prompt_visible=!0},destroy:function(){d.delete_song()},view_annotation_engagement_data:function(){d.toggle_engagement_data()},edit_spotify_annotations_for:function(){a.open("/songs/"+d.song.id+"/edit-fact-track")},view_lyrics_synchronization:function(){a.open("/songs/"+d.song.id+"/lyrics_sync")}},
K={view_annotation_engagement_data:!0,edit_spotify_annotations_for:!0,view_lyrics_synchronization:!0};d.attempt_admin_action=function(a,b){if(K[a])return d.perform_admin_action(a,b);q.admin_action(_.partial(d.perform_admin_action,a,b),t.lookup("song.action_confirmations."+a)||t.t("song.action_confirmations.admin_default"))};d.perform_admin_action=function(a,b){if(L[a])return L[a]();F(a,b)};d.$on("editorial_action_count_changed",function(a,b){if(b.commentable.referent_id){var c=g.get(b.commentable.referent_id);
if(c){var d=_.chain(c.annotations).filter(function(a){return!a.verified}).sum(function(a){return a.comment_count+a.proposed_edit_count});c.pending_editorial_actions_count=d}}});d.$on("annotation_deleted",function(a,b,c){d.lyrics_ctrl.edit_blocked=!0;var e=g.get(b.referent_id);e._deleted=_(e.annotations).all(function(a){return a._deleted||a.new});c.then(function(){e._deleted?d.lyrics_ctrl.remove_referent(b.referent_id):(Reflect.deleteProperty(e,"_deleted"),k.refresh(e))}).catch(function(){Reflect.deleteProperty(e,
"_deleted")}).finally(function(){Reflect.deleteProperty(d.lyrics_ctrl,"edit_blocked")})});d.$watch("current_referent._deleted",function(a){a&&d.clear_current_referent()});d.$on("clear_current_referent",d.clear_current_referent);var J=_.once(function(){e.load_annotation_open_data(d.song.id).then(function(a){d.open_data=a})});d.toggle_engagement_data=function(){d.showing_annotation_engagement_data=!d.showing_annotation_engagement_data;J()};d.set_current_hover_and_digest=function(a){d.hover_referent_id=
a;d.$digest()};d.$on("annotation_created",function(a,b){w.display_referent(b.referent_id)});d.$on("referent_created",function(a,b){g.register(b);_.extend(d.song,b.annotatable.client_timestamps);w.update_url_for_open_referent(b.id)});this.save=function(a){w.saving=!0;var c=x(a,d.song),f=n.modify(d.song,a);return e.update(d.song.id,c).then(function(a){return angular.extend(d.song,a)}).catch(function(a){f();return b.reject(a)}).finally(function(){w.saving=!1})};this.show_metadata_form=function(a,b){w.show_metadata_form_sections=
(c={},c[a]=!0,c);f.track("Song Page Open Edit Form",{section:a,keyboard_shortcut:!!b});var c};this.has_track_info=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];var c=d.song;return _(a).filter(function(a){return _.isNumber(c[a])||_.some(c[a])}).some()};this.has_song_relationships=function(){return _(d.song.song_relationships).map(function(a){return a.songs}).flatten().some()};this.close=function(){w.show_metadata_form_sections=!1};this.open_referent_by_id=function(a){c.path("/"+
a)};this.featured_annotation_in_view=_.once(function(a){a&&f.track("Featured Annotation In View")});this.reload_song=function(){w.edit_blocked=!0;return e.load_song(d.song.id).then(function(a){w.edit_blocked=!1;_.extend(d.song,_.omit(a,"description","description_annotation"))})};m.user_signed_in&&r.subscribe(d.song.pusher_channel,"song-updated",function(a){d.song.updated_by_human_at<a.updated_by_human_at&&w.reload_song();d.song.lyrics_updated_at<a.lyrics_updated_at&&d.lyrics_ctrl.refresh_lyrics()});
d.open_first_verified_answer=function(a){var b=_.find(d.pinned_questions,function(b){return _.get(b,"answer.answer_source.artist.id")===a.id});b?u.scroll_to("question_"+b.id):u.scroll_to("questions")};this.open_video_modal=function(a,b){w.videos_modal_video={video:a,relevance_level:b}};this.close_video_modal=function(){f.track("Close Video Modal");w.videos_modal_video=null}}]);
angular.module("genius").controller("VideoCtrl",["VideoService","PagedScrollableDataFactory",function(d,a){this.infinite_scroll_data=new a(d.index,"videos",{},2)}]);
angular.module("genius").directive("addAnnotation",[function(){return{restrict:"E",templateUrl:"add_annotation.html",scope:{start_new_community_referent:"&startNewCommunityReferent",start_new_referent:"&startNewReferent",creating_referent:"<creatingReferent",can_add_community_annotation:"<canAddCommunityAnnotation",can_add_pinned_annotation:"<canAddPinnedAnnotation",annotation:"<",song:"<",enable_waiting_class:"<enableWaitingClass"},controllerAs:"ctrl",controller:["Session",function(d){this.user_signed_in=
d.user_signed_in}]}}]);
angular.module("genius").directive("annotatableImage",["$document",function(d){return{templateUrl:"annotatable_image.html",restrict:"E",scope:{src:"@",song:"<",on_image_referent_creation_started:"&onImageReferentCreationStarted",on_image_referent_created:"&onImageReferentCreated",on_image_referent_creation_failed:"&onImageReferentCreationFailed",can_perform:"<canPerform",lyrics_anchorer:"<lyricsAnchorer"},controller:["$scope",function(a){this.create_image_referent=function(b){var c=this.getImage(),
l=d[0].createRange();l.selectNodeContents(c);l.precomputed_client_rect=l.getBoundingClientRect();a.creating_image_referent=!0;a.on_image_referent_creation_started({selection_range:l});delete a.image_referent_creation_failed;a.lyrics_anchorer.create_image_referent(c,l,b).then(function(b){delete a.creating_image_referent;a.on_image_referent_created({referent:b,selection_range:l});a.image_referent_created=!0},function(b){delete a.creating_image_referent;a.on_image_referent_creation_failed({error:b});
a.image_referent_creation_failed=!0}.bind(this))};this.set_current_hover_and_digest=function(b){a.hovering_over_image=b;a.$digest()}}],controllerAs:"ctrl",link:{pre:function(a,b,c,d){d.getImage=function(){return b.find("img")[0]}}}}}]);
angular.module("genius").directive("annotation",["Session","Reversible","AnnotationService","ReferentRegistry","ReferentService","BrandService","$immediate","$q","Bowser","I18n",function(d,a,b,c,l,g,k,e,f,m){return{restrict:"E",templateUrl:"annotation.html",scope:{annotation:"=object",referent:"<referent",variants:"<",annotatable_title:"<annotatableTitle",on_seek_to_next_card:"&onSeekToNextCard"},controllerAs:"ctrl",controller:["$scope","$filter",function(e,k){var q=this;this.hiding_comments=e.variants&&
e.variants.hideComments;this.user_signed_in=d.user_signed_in;this.is_android=f.android;this.truncation_length=600;this.content_is_truncated=_.get(e,"variants.truncate_content")&&e.annotation.body.html.length>this.truncation_length;this.integrate_comment=function(a){e.start_editing({integration_body:a.body})};this.update_editorial_action_count=function(){e.annotation.proposed_edit_count=q.edits_to_show_count();e.$emit("editorial_action_count_changed",{commentable:e.annotation})};e.$watch("annotation.comment_count",
this.update_editorial_action_count);this.comment_removed=function(){return a.modify(e.annotation,{comment_count:e.annotation.comment_count-1})};this.edits_to_show_count=function(){return e.annotation.edits?e.annotation.edits.filter(function(a){return!a._deleted&&!a._merged}).length:e.annotation.proposed_edit_count};e.next_referent=function(a){c.first(function(b){return"verified"===b.classification&&_.include(b.verified_annotator_ids,a.id)},{after_referent_id:e.annotation.referent_id})};this.seek_to_next_card=
function(a){e.on_seek_to_next_card({referent_id:e.next_referent(a).id})};this.has_more_by_user=function(a){return!!e.next_referent(a)};e.finish_editing=function(){if(!e.disable_saving_with){e.disable_saving_with="Saving";var c;c=_.get(e,"annotation._editing.proposed_edit")?b.propose_edit(e.annotation).then(function(a){e.annotation.edits=e.annotation.edits||[];e.annotation.edits.unshift(a);q.showing_edits=!0}):b.save(e.annotation,{referent:e.referent}).then(function(){l.refresh(e.referent)});var d=
a.modify(e.annotation,{"_editing._form_visible":!e.annotation.referent_id});c.then(e.dismiss_editing).catch(d).finally(function(){e.disable_saving_with=null})}};e.cancel_editing=function(){e.dismiss_editing();Reflect.deleteProperty(e.referent,"temporary_classification");e.annotation.new&&_.remove(e.referent.annotations,e.annotation);if(!e.referent.annotations.length){var a=b.safe_delete(e.annotation);e.$emit("annotation_deleted",e.annotation,a)}};e.dismiss_editing=function(){Reflect.deleteProperty(e.annotation,
"_editing");e.$emit("annotation_loaded")};this.initialize_annotation_custom_preview=function(){e.annotation._editing._creating_custom_preview=!0};this.clear_annotation_custom_preview=function(){e.annotation._editing.custom_preview=null;e.annotation._editing._creating_custom_preview=!1};this.show_annotation_custom_preview_form=function(){return e.annotation._editing.custom_preview||e.annotation._editing._creating_custom_preview};this.report_as_abusive=function(){q.reported_abuse=!0;return b.report_as_abusive(e.annotation.id).catch(function(){q.reported_abuse=
!1})};this.should_show_comments=function(){return!e.rejecting&&!q.hiding_comments&&!e.annotation.new&&(e.annotation.body.html||e.annotation.needs_exegesis)};this.annotation_is_unwritten=function(){return e.annotation.new||e.annotation.needs_exegesis||!_.get(e,"annotation.body.html")};this.show_annotation_label=function(){var a=_.get(e,"annotation._editing._form_visible");return d.user_signed_in||"needs_exegesis"!==e.referent.classification?e.annotation.community&&!a&&!q.annotation_is_being_created_by_someone_else():
!1};this.annotation_is_being_created_by_someone_else=function(){return e.annotation.being_created&&(!d.user_signed_in||d.current_user.id!==e.annotation.created_by.id)};this.annotation_title=function(){var a=e.variants&&e.variants.isDescription,b="pending"===e.annotation.state?"Unreviewed ":"",c="accepted"!==e.annotation.state||a?"":"Genius ",d=m.t(a?"sle.prependable_to_name":"annotation.singular_noun_capitalized",{type_name:k("modelHumanName")(e.referent.annotatable._type)}),f=k("truncateToBoundary")(e.annotatable_title,
100);return b+c+d+(a?" \u201c"+f+"\u201d":"")};this.brands=null;this.load_brands=function(){g.index().then(function(a){q.brands=a})};this.set_brand=function(a){return b.set_brand(e.annotation,a).then(function(a){_.extend(e.annotation,a)})};this.clear_brand=function(){return b.clear_brand(e.annotation).then(function(a){_.extend(e.annotation,a)})}}],link:function(c){c.annotation_directive=c;c.can=function(a){return d.has_permission(a,c.annotation)};var f=function(){c.annotation.cosigned_by.push(d.current_user)},
g=function(){_.remove(c.annotation.cosigned_by,function(a){return a.id===d.current_user.id})};c.toggle_cosign=function(a){a?f():g();c.saving_cosign=!0;b.toggle_cosign(c.annotation.id,a).then(function(a){_.extend(c.annotation,a.annotation);_.extend(c.referent,a.referent)}).catch(a?g:f).finally(function(){c.saving_cosign=!1})};c.showing_contributors=d.has_permission("accept",c.annotation);c.clear_votes=function(){c.showing_voters=!1;var d=a.modify(c,{"annotation.votes_total":0,"annotation.current_user_metadata.interactions.vote":void 0});
b.clear_votes(c.annotation.id).catch(d)};c.toggle_voters=function(){c.showing_voters=!c.showing_voters};c.$on("images_loaded",function(){c.loaded=!0;c.$emit("annotation_loaded")});c.toggle_contributors=function(){c.showing_contributors=!c.showing_contributors};c.toggle_ellipsis_menu=function(){c.showing_ellipsis_menu=!c.showing_ellipsis_menu};c.start_editing=function(a){a=a||{};c.annotation._editing=_.defaults(c.annotation._editing||{},{_form_visible:!0,_has_source:!!c.annotation.source,source:angular.copy(c.annotation.source||
{}),proposed_edit:a.proposed_edit,html:c.annotation.body.html,markdown:c.annotation.body.markdown,_creating_custom_preview:!1,custom_preview:c.annotation.custom_preview});a.integration_body&&(c.annotation._editing.html=_.compact([c.annotation._editing.html,"PROPOSED SUGGESTION: "+a.integration_body.html]).join("<br>"),c.annotation._editing.markdown=_.compact([c.annotation._editing.markdown,"PROPOSED SUGGESTION: "+a.integration_body.markdown]).join("\n\n"));c.annotation.verified&&(c.referent.temporary_classification=
"verified")};c.accept=function(){b.accept(c.annotation,{referent:c.referent}).then(function(){c.context_updated_at=Date.now()})};c.focus_comment_textarea=function(){c.$broadcast("focus_comment_textarea",c.annotation)};c.begin_rejection=function(){c.rejecting=!0;k(c.focus_comment_textarea)};c.reject_with_comment=function(a){c.rejecting=!1;a=b.safe_reject(c.annotation,{comment:a,referent:c.referent}).then(function(){c.context_updated_at=Date.now()}).catch(function(){c.rejecting=!0;return e.reject()});
c.$emit("annotation_deleted",c.annotation,a);return a};c.delete=function(){var a=b.safe_delete(c.annotation);c.$emit("annotation_deleted",c.annotation,a)};c.toggle_pin_status=function(){if(!c.toggling_pin_status){c.toggling_pin_status=!0;var a=c.can("pin_to_profile")?"pin_to_profile":"unpin_from_profile";b[a](c.annotation.id).then(function(a){_.extend(c.annotation,a.annotation)}).finally(function(){c.toggling_pin_status=!1})}};c.$on("vote_submitted",function(a,b,d){"down"===d&&"annotation"===b&&c.focus_comment_textarea()});
c.$on("vote_saved",function(a){c.$broadcast("update_voters")})}}}]);
angular.module("genius").directive("annotationAdSlot",["AnnotationAdService",function(d){return{restrict:"E",scope:{annotation:"<",is_description:"<isDescription"},link:function(a,b){var c=Rx.Observable.$watch(a,"annotation.id").concatMap(function(){return Rx.Observable.from([!1,!0])}),l=Rx.Observable.combineLatest(c,Rx.Observable.$watch(a,"annotation.community"),Rx.Observable.$watch(a,"is_description"),function(a,b,c){return a&&b&&!c}).concat(Rx.Observable.of(!1)).distinctUntilChanged().publishBehavior(!1).refCount();
l.filter(function(a){return!0===a}).subscribe(function(){var a=l.filter(function(a){return!1===a}).toPromise();d.lease(function(c){c.appendTo(b);d.annotation_ad_slot().refresh();return a.then(function(){b.contents().detach()})})})}}}]);angular.module("genius").directive("annotationAdStagingArea",["AnnotationAdService",function(d){return{restrict:"E",scope:{},transclude:!0,link:function(a,b,c,l,g){g(function(a){d.register_dom(a)})}}}]);
angular.module("genius").directive("annotationEdit",["Session","AnnotationService",function(d,a){return{restrict:"E",templateUrl:"annotation_edit.html",scope:{edit:"<object",before_html:"<beforeHtml",on_merge:"&onMerge",on_resolution:"&onResolution"},controllerAs:"ctrl",controller:["$scope",function(b){this.can_moderate=d.has_permission("moderate",b.edit);this.merge=function(){this.working=!0;b.edit._merged=!0;a.merge_edit(b.edit.id).then(function(a){_.extend(b.edit,a);b.on_merge({edit:b.edit});b.on_resolution()}).catch(function(){delete b.edit._merged}).finally(function(){this.working=
!1}.bind(this))};this.reject=function(){this.working=!0;b.edit._deleted=!0;a.reject_edit(b.edit.id).then(b.on_resolution).catch(function(){delete b.edit._deleted}).finally(function(){this.working=!1}.bind(this))}}]}}]);
angular.module("genius").directive("annotationEdits",["AnnotationService","ReferentService","ReferentRegistry",function(d,a,b){return{scope:{annotation:"<object",context_updated_at:"<contextUpdatedAt",on_resolution:"&onResolution"},restrict:"E",templateUrl:"annotation_edits.html",controllerAs:"ctrl",controller:["$scope",function(c){this.on_merge=function(a){_.extend(c.annotation,a.annotation_after);l()};var l=function(){this.loading_edits||(this.loading_edits=!0,d.proposed_edits(c.annotation.id).then(function(a){c.annotation.edits=
a}.bind(this)).finally(function(){delete this.loading_edits}.bind(this)))}.bind(this);c.$watch("annotation.edits.length",function(d,k){if(d||k){var e=b.peek(c.annotation.referent_id);a.refresh(e)}});c.$watch("context_updated_at",function(a){a&&l()});l()}]}}]);
angular.module("genius").directive("annotationFragment",["ReferentHelper","ReferentRegistry","$compile","$templateCache",function(d,a,b,c){return{restrict:"A",scope:!0,link:function(l,g,k){l.fragment_id=l.$eval(k.annotationFragment);l.fragment_element_id=l.$id;l.image=l.$eval(k.image);g.data("fragment_element_id",l.fragment_element_id);var e=function(){l.referent.display_mode=d.display_mode_by_classification(l.referent.temporary_classification||l.referent.classification)};l.$watch("referent.classification",
e);l.$watch("referent.temporary_classification",e);l.referent=a.register({id:l.fragment_id,classification:l.classification,stub:!0,fragments:[],is_image:l.image,pending_editorial_actions_count:Number(k.pendingEditorialActionsCount),possibly_branded:"true"===k.possiblyBranded});l.reference_elements[l.referent.id]=l.reference_elements[l.referent.id]||g;k.verifiedAnnotatorIds&&(l.referent.verified_annotator_ids=_.map(k.verifiedAnnotatorIds.split(" "),Number));l.referent.classification=k.classification;
l.referent.fragments.push(g.text());l.referent.fragment=_.uniq(l.referent.fragments).join("\n");l.referent.fragment_from_lyrics=l.referent.fragment;l.open=function(){l.reference_elements[l.fragment_id]=g;l.open_referent(l.fragment_id)};l.$watch("referent.id",function(a){l.fragment_id=a||l.fragment_id});var f;l.$watch("referent._deleted",function(a){a&&!f?(f=(a=g.find("img")[0])?$("<annotatable-image>").attr({src:a.src,song:"song","on-image-referent-created":"lyrics_ctrl.on_image_referent_created(selection_range, referent);",
"on-image-referent-creation-failed":"lyrics_ctrl.on_image_referent_creation_failed(error)","on-image-referent-creation-started":"lyrics_ctrl.on_image_referent_creation_started(selection_range)","can-perform":"can_perform",lyrics_anchorer:"lyrics_anchorer"}):$("<span>").html(g.html()),g.before(f).detach(),b(f.parent())(l)):!a&&f&&(f.replaceWith(g),f=void 0)});l.$watch("referent.display_mode",function(a,b){g.removeClass("referent--"+b||"default");g.addClass("referent--"+a||"default")});l.$watchGroup(["highlighted_fragment_id",
"hover_referent_id"],function(){g.toggleClass("referent--highlighted",l.highlighted_fragment_id===l.fragment_id||l.hover_referent_id===l.fragment_id)});l.$watchGroup(["showing_annotation_engagement_data","open_data"],function(){l.showing_annotation_engagement_data&&l.open_data?g.attr("data-annotation-views",l.open_data[l.fragment_id]?l.open_data[l.fragment_id]:"N/A"):g.removeAttr("data-annotation-views")});l.can_perform("see_editorial_indicators")&&b(c.get("referent_editorial_indicator.html"))(l).insertBefore(g)}}}]);
angular.module("genius").directive("annotationHistory",function(){return{restrict:"E",templateUrl:"annotation_history.html",scope:{annotation:"<",onRevert:"&"},controllerAs:"ctrl",controller:["$scope","AnnotationService","Session",function(d,a,b){this.can_revert=b.has_permission("edit",d.annotation);a.load_versions(d.annotation.id).then(function(a){d.versions=a});this.revert_to=function(b){d.reverting_to=b;a.revert_to_version(d.annotation.id,b).then(function(a){_.extend(d.annotation,a);d.onRevert()}).finally(function(){delete d.reverting_to})}}]}});
angular.module("genius").directive("annotationPlaceholder",function(){return{restrict:"E",templateUrl:"annotation_placeholder.html",scope:{showCondition:"<",onDarkBackground:"<",noLabel:"<",placeholder_title:"<placeholderTitle"}}});
angular.module("genius").directive("annotationSidebar",["$immediate",function(d){var a={verified:"add_pinned_annotation_to",community:"add_community_annotation_to"};return{templateUrl:"annotation_sidebar.html",controllerAs:"ctrl",scope:!0,link:function(a,c,l,g){var k=function(){if(a.referent){var c=a.referent.precomputed_client_rect||a.reference_elements[a.referent.id][0].getBoundingClientRect();a.positioning_rect=c}};a.$watch(l.referent,function(c){(a.referent=c)?(a.lyrics_ctrl.selection_range=null,
d(k)):a.positioning_rect=null});a.$watch("lyrics_ctrl.selection_range",function(c){c&&!a.referent&&(g.referent_creation_failed=!1,d(function(){var d=c.getBoundingClientRect();a.positioning_rect=d}))});a.$on("annotation_loaded",k)},controller:["$scope","Session","ReferentHelper",function(b,c,d){var g=this;this.user_signed_in=c.user_signed_in;this.can_create_referent_from_selection=function(){return b.lyrics_ctrl.can_create_anchor_from_selection()};this.media_exists=function(){return b.can_perform&&
b.can_perform("watch_fact_track")||b.video_media&&b.video_media()&&(!b.media_player_video.state||!b.media_player_video.state.has_errored)||b.audio_media&&b.audio_media()&&(!b.media_player_audio.state||!b.media_player_audio.state.has_errored)};this.start_new_referent_annotation=function(a){var c=this;this.creating_referent=!0;b.lyrics_ctrl.edit_blocked=!0;b.lyrics_ctrl.lyrics_anchorer.create_referent(b.lyrics_ctrl.selection_range,a).then(function(a){b.lyrics_ctrl.selection_range=null;b.lyrics_ctrl.edit_blocked=
!1;b.$emit("referent_created",a);b.referent=a},function(){c.referent_creation_failed=!0}).finally(function(){c.creating_referent=!1})};this.add_pinned_annotation=function(){var a=d.create_verified_annotation_placeholder(b.referent);b.referent.annotations.unshift(a)};this.add_community_annotation=function(){var a=d.create_community_annotation_placeholder(b.referent);b.referent.annotations.push(a)};this.can_create_annotation_type_on_referent=function(d){return!b.referent||_.any(b.referent.annotations,
"new")?!1:c.has_permission(a[d],b.referent)};this.can_create_community_annotation_on_referent=function(){return this.can_create_annotation_type_on_referent("community")&&!_.any(b.referent.annotations,"needs_exegesis")};b.$watch("referent.id",function(a,b){a&&b&&a.id===b.id||(g.referent_creation_failed=!1)})}]}}]);
angular.module("genius").directive("applyAnnotationArrowClass",["$immediate","MutationObserver",function(d,a){return{restrict:"A",link:function(b,c){var l=new a(function(a){d(function(){for(var b=0;b<a.length;b++){var d=a[b];"style"===d.attributeName&&(d=d.target.getBoundingClientRect(),d=!!$(document.elementFromPoint(d.right+1,d.top-1)).closest(".annotation_sidebar_unit--verified").length,c.toggleClass("annotation_sidebar_arrow--verified",d))}},!0)});l.observe(c[0],{attributes:!0});b.$on("destroy",
l.disconnect.bind(l))}}}]);angular.module("genius").directive("articleActions",[function(){return{restrict:"E",templateUrl:"article_actions.html",scope:{article:"<",showVoting:"<"},controllerAs:"ctrl",controller:["$scope",function(d){var a=this;this.toggle_voters=function(){a.showing_voters=!a.showing_voters};d.$on("vote_saved",function(a){d.$broadcast("update_voters")})}]}}]);
angular.module("genius").directive("authenticationForm",["$window","Authentication",function(d,a){return{scope:{variants:"<?",on_cancel:"&onCancel",user_session:"=?userSession",include_sign_in:"<?signIn",include_social:"<?social",show_email_fields:"=?showEmail",header_text:"<headerText",preamble_text:"<preambleText",init_signing_in:"<signingIn"},templateUrl:"authentication_form.html",controllerAs:"ctrl",controller:["$scope",function(b){var c=this;this.show_email_fields=b.show_email_fields;this.signing_in=
b.init_signing_in;b.user_session=b.user_session||{};this.submit=function(){if(!c.saving){c.saving=!0;c.error=null;var l=c.signing_in?"sign_in":"sign_up";a[l](b.user_session).then(function(a){"sign_up"===l&&"/"===d.location.pathname?d.location=a.user.url:d.location.reload()}).catch(function(a){c.error=a.message}).finally(function(){c.saving=!1})}};this.toggle_signup_signin=function(){c.show_email_fields=!0;c.signing_in=!c.signing_in;c.error=null}}]}}]);
angular.module("genius").directive("autoResizeIframe",function(){return{restrict:"A",link:function(d,a,b){var c;b.autoResizeIframe&&(c=d.$eval(b.autoResizeIframe));a.iFrameResize(c)}}});
angular.module("genius").directive("autocompleteTagsInput",["AlbumService","ArtistService","TagService","SongService",function(d,a,b,c){var l={album:{autocomplete:d.autocomplete,persistence_property:"name",display_property:"name_with_artist"},artist:{autocomplete:a.autocomplete,display_property:"name"},tag:{autocomplete:b.autocomplete,display_property:"name"},song:{autocomplete:c.autocomplete,persistence_property:"id",display_property:"full_title"}};return{restrict:"E",scope:{bindTo:"=",disabled:"<ngDisabled",
name:"@",inputClasses:"@",autocompleteModel:"@",autocompleteOptions:"<?",requireExisting:"<",excludeIf:"&"},templateUrl:"autocomplete_tags_input.html",link:{pre:function(a){var b=l[a.autocompleteModel];a.max_results=10;a.display_property=b.display_property;a.autocomplete=function(c){return b.autocomplete(c,a.autocompleteOptions).then(function(d){d=_.reject(d,function(b){return a.excludeIf({result:b})});if(a.requireExisting||_.some(d,function(b){return b[a.display_property].toLowerCase()===c.toLowerCase()}))return d;
var m={_new:!0};m[b.display_property]=c;b.persistence_property&&(m[b.persistence_property]=c);return d=_.take(d,a.max_results-1).concat(m)})}},post:function(a,b,c){a.placeholder=function(){return a.bindTo&&0===a.bindTo.length?c.placeholder:""}}}}}]);
angular.module("genius").directive("autocompleteWith",["ArtistService","UserService","CustomPerformanceRoleService","SongService",function(d,a,b,c){var l={delay:250,scroll:!1,matchSubset:!1,max:20,minChars:4,dataType:"json",selectFirst:!1,resultsClass:"autocomplete-results"},g={user:a,customPerformanceRole:b,artist:d,song:c};return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var h=c.displayField;a=g[c.autocompleteWith];var n={};h&&(d.$formatters.push(function(a){return a?_.get(a[0],h,""):
""}),d.$parsers.push(function(a){n[a]=n[a]||_.set({},h,a);return n[a]}));c=_.extend({},l,a.autocomplete_options);var q=c.parse;c.parse=function(a){a=q(a);_.each(a,function(a){n[a.data[0]]=a.value});return a};b.autocomplete(a.autocomplete_api_endpoint,c).result(function(a,b){d.$setViewValue(b[0]);d.$render()})}}}]);
angular.module("genius").directive("textarea",["Autosize","$immediate",function(d,a){return{restrict:"E",link:function(b,c,l){if(!("autosizeOff"in l)){var g=function(){d.update(c)},k=function(){d(c)};if("autosizeInitOnFocus"in l)c.on("focus",k);else a(k,!1);c.on("change",g);b.$watch(l.ngModel,function(b){b!==c.val()&&a(g,!1)});l.ngShow&&b.$watch(l.ngShow,function(b){b&&a(g,!1)})}}}}]);
angular.module("genius").directive("brightcove",["$window","Bindings","Brightcove",function(d,a,b){var c=a.resolver({video:"<object",on_ready:"&onReady",on_firstplay:"&onFirstplay",yields_api:"&yieldsApi",on_complete:"&onComplete",player_name:"@playerName"});return{restrict:"A",link:function(a,g,k){if(g[0].constructor!==d.HTMLVideoElement)throw Error("The 'brightcove' directive can only be used as an attribute on a <video> element");var e=c(a,k);k=b[e.player_name+"_player_id"];if(!k)throw Error("The 'brightcove' slot is not configured!");
g.attr({"data-video-id":e.video.provider_id,"data-account":b.account_id,"data-player":k,"data-embed":"default",controls:!0});a.player=b.load_api(k).then(function(a){var b=g[0];return/(?:^|\s)vjs-tech(?:\s|$)/.test(b.className)?a.videojs(b):a.bc(b)}).then(function(b){b.ready(function(){a.$apply(e.on_ready);e.yields_api({api:b})});b.one("playing",function(){a.$apply(e.on_firstplay)});b.on("ended",function(){a.$apply(e.on_complete)});return b})}}}]);
angular.module("genius").directive("chat",["$interval","AppConfig",function(d,a){return{restrict:"E",templateUrl:"chat.html",controllerAs:"ctrl",controller:["$scope","SessionConfig",function(b,c){this.enabled=c.chat_enabled;var l=[];this.open=function(){b.loaded&&(this.chat_open=!0,l=[],delete b.message)};b.canonical_domain=a.canonical_domain;var g=0,k=d(function(){b.message=l[g%l.length];b.$digest();g+=1},3E3,0,!1);b.$on("$destroy",function(){d.cancel(k)});var e=function(a){switch(a.data.type){case "summary":b.loaded=
!0;b.visitors_count=a.data.visitors_count;b.$digest();break;case "closing":this.chat_open=!1;b.$digest();break;case "new_message":case "notification":case "invitation":this.chat_open||l.push({text:a.data.message,type:a.data.type})}}.bind(this);window.addEventListener("message",function(a){a.origin.replace(/https?:\/\//i,"")===window.location.host&&e(a)})}]}}]);
angular.module("genius").directive("classForDuration",["$timeout",function(d){return{restrict:"A",link:function(a,b,c){_.forIn(a.$eval(c.classForDuration),function(a,c){a&&(b.addClass(c),d(function(){b.removeClass(c)},a))})}}}]);
angular.module("genius").directive("clickOutside",["$document",function(d){return{restrict:"A",link:function(a,b,c){var l=c.hasOwnProperty("suppressClickOutsideIfHandled"),g=function(d){l&&d.originalEvent.defaultPrevented||document.body.contains(d.target)&&(b[0].contains(d.target)||a.$apply(function(){a.$eval(c.clickOutside,{$event:d})}))},k=b.closest("[click-outside-target]").length?b.closest("[click-outside-target]"):d;k.on("click",g);a.$on("$destroy",function(){k.off("click",g)})}}}]);
angular.module("genius").directive("clickToLoad",function(){return{scope:{message:"@"},restrict:"E",transclude:!0,templateUrl:"click_to_load.html",link:function(d){d.load=function(){d.loading=!0}}}});angular.module("genius").directive("clippedBackgroundImage",function(){return{link:function(d,a,b){d.$watch(b.clippedBackgroundImage,function(b){b&&a.addClass("clipped_background_image").css("background-image",'url("'+b+'")')})}}});
angular.module("genius").directive("comment",["Session","CommentService",function(d,a){return{restrict:"E",templateUrl:"comment.html",scope:{comment:"<object",variants:"<"},require:"?^^annotation",controllerAs:"ctrl",controller:function(){},link:function(b,c,l,g){var k=function(a){var c=g?g.comment_removed():void 0;b.comment._deleted=!0;a.catch(function(){c&&c();delete b.comment._deleted})};b.destroy=function(){k(a.destroy(b.comment.id))};b.integrate=function(){g.integrate_comment(b.comment);b.perform_action("integrate")};
b.perform_action=function(c){k(a.change_state(b.comment.id,c))};b.can_perform=function(a){return d.has_permission(a,b.comment)};b.toggle_voters=function(){b.showing_voters=!b.showing_voters};b.$on("vote_saved",function(a){b.$broadcast("update_voters")})}}}]);
angular.module("genius").directive("commentForm",function(){return{restrict:"E",templateUrl:"comment_form.html",scope:{commentable:"<",onSave:"&",allowReasons:"<",saveText:"@",savingText:"@",textareaPlaceholder:"@",showFullFormByDefault:"@"},controllerAs:"ctrl",controller:["Session","$scope","Reversible",function(d,a,b){this.user_signed_in=d.user_signed_in;this.showing_full_form=(this.show_full_form_by_default=a.showFullFormByDefault)||!1;this.current_user=d.current_user;this.show_full_form=function(){this.showing_full_form=
!0};var c=function(){a.comment={_new:!0,author:d.current_user,body:{}}};c();this.body_is_required=function(){return!a.comment.reason||a.comment.reason.requires_body};this.save=function(){if(!this.saving){d.user_signed_in||(a.comment.anonymous_user={name:a.comment.name});var l=a.comment,g=b.modify(this,{showing_full_form:!1,saving:!1});c();a.form.$setPristine();a.onSave({comment:l}).catch(function(){a.comment=l;g()})}}}],link:function(d,a){d.$on("focus_comment_textarea",function(b,c){c===d.commentable&&
a.find('textarea[ng-model="comment.body.markdown"]').focus()})}}});
angular.module("genius").directive("comments",["CommentService","Session",function(d,a){return{scope:{type:"@",commentable:"<",onDarkBackground:"<",allowReasons:"<",prevent_compose:"<preventCompose",areSuggestions:"<",context_updated_at:"<contextUpdatedAt",show_all_comments:"<showAllComments",auto:"<",intersperse_ads:"@intersperseAds"},restrict:"E",templateUrl:"comments.html",link:function(b){var c,l=!1,g=function(){c=0;b.comments=b.commentable.top_comment?[b.commentable.top_comment]:[];b.has_more_pages=
b.commentable.comment_count>b.comments.length};g();b.can_create_comment=function(){return a.has_permission("create_comment",b.commentable)&&!b.prevent_compose};b.showing_all_comments=function(){return l||b.show_all_comments};b.is_loading=!1;b.load_next_page=function(){!b.is_loading&&b.commentable.comment_count&&b.has_more_pages&&(l=!0,b.is_loading=!0,d.load(b.type,b.commentable.id,{text_format:"html,markdown",page:c+1,per_page:10}).then(function(a){b.comments=_.uniq(b.comments.concat(a.comments),
"id");b.is_loading=!1;b.has_more_pages=b.comments.length<a.total_count;c+=1}))};b.$watch("commentable.top_comment._deleted",function(a){a&&(b.commentable.top_comment=_.find(b.comments,_.negate(_.property("_deleted"))))});b.visible_comments=function(){return _.reject(b.comments,"_deleted")};b.$watch("context_updated_at",function(a){a&&(g(),b.showing_all_comments()&&b.load_next_page())});b.save_comment=function(a){b.comments.unshift(a);return d.create(b.type,b.commentable.id,a).then(function(){b.commentable.comment_count+=
1;b.$emit("comment_count_changed",{commentable:b.commentable})})}}}}]);angular.module("genius").directive("commentsPlaceholder",function(){return{restrict:"E",templateUrl:"comments_placeholder.html",scope:{}}});
angular.module("genius").directive("componentDateInput",function(){return{scope:{ngModel:"=",disabled:"<"},restrict:"E",templateUrl:"component_date_input.html",controllerAs:"ctrl",controller:[function(){_.extend(this,{years:_.range(1,(new Date).getFullYear()+2).reverse(),months:"January February March April May June July August September October November December".split(" ").map(function(d,a){return{name:d,number:a+1}}),days:_.range(1,32)})}]}});
angular.module("genius").directive("composeMessage",function(){return{restrict:"E",scope:{recipient:"<",on_sent:"&onSent",yields_is_dirty:"&yieldsIsDirty"},templateUrl:"compose_message.html",controller:["$scope","MessageService","Session",function(d,a,b){var c;d.recipient&&(c=d.recipient.id);var l=function(){d.message={recipient_id:c,body:""};d.ctrl.form&&d.ctrl.form.$setPristine()};l();this.new_message=!d.message.recipient_id;this.current_user=b.current_user;this.markdown_preview_initialized=this.showing_markdown_preview=
!1;this.show_markdown_preview=function(){this.markdown_preview_initialized=this.showing_markdown_preview=!0};this.hide_markdown_preview=function(){this.showing_markdown_preview=!1};this.send=function(){d.sending=!0;a.create(d.message).then(function(a){l();d.sending=!1;d.on_sent({message:a})})}}],controllerAs:"ctrl"}});
angular.module("genius").directive("confirm",["$window",function(d){return{priority:-1,restrict:"A",scope:{message:"@confirm"},link:function(a,b){b.on("click",function(b){a.message&&!d.confirm(a.message)&&(b.stopImmediatePropagation(),b.preventDefault())})}}}]);
angular.module("genius").directive("conversationMessages",function(){return{templateUrl:"conversation_messages.html",scope:{conversation:"<",yields_is_dirty:"&yieldsIsDirty"},controller:["$scope","MessageService","ConversationService",function(d,a,b){var c=1,l;d.finished_paginating=!1;d.messages=[];this.message_sent=function(a){d.messages.push(a);d.conversation.latest_message=a;d.conversation.latest_message_preview=a.body_preview};this.should_paginate=function(){return!l&&!d.finished_paginating};
this.load_next_page=function(){l||(l=a.for_conversation(d.conversation.id,{page:c}).then(function(a){d.messages.unshift.apply(d.messages,a.reverse());l=null;1===c&&b.mark_read(d.conversation.id);++c;d.finished_paginating=0===a.length}))};this.load_next_page()}],controllerAs:"ctrl"}});
angular.module("genius").directive("conversationWithUser",["ConversationService",function(d){return{restrict:"E",scope:{user:"<"},template:'<conversation-messages conversation="conversation" ng-if="conversation"></conversation-messages>',controller:["$scope",function(a){d.with_user(a.user.id).then(function(b){a.conversation=b})}]}}]);
angular.module("genius").directive("conversations",["ConversationService","Attempt",function(d,a){return{restrict:"E",scope:{visible:"<",refresh_at:"<refreshAt",on_conversation_read:"&onConversationRead"},templateUrl:"conversations.html",controller:["$scope",function(b){b.attempt_close=a.close_form;var c,l,g,k=function(){c=Date.now();b.conversations=[];this.all_pages_loaded=!1;l=1}.bind(this);k();this.should_paginate=function(){return!!b.visible&&!this.all_pages_loaded&&!g};this.load_page=function(){g||
(g=d.latest({page:l}).then(function(a){b.conversations.push.apply(b.conversations,a);this.all_pages_loaded=!a.length;++l;g=null}.bind(this)))};b.$watchGroup(["visible","refresh_at"],function(){!b.visible&&b.refresh_at&&b.refresh_at>c&&k()});this.open=function(a){b.open_conversation_id=a;a=_.find(b.conversations,{id:a});var c=a.unread,d=a.unread_messages_count;a.unread=!1;a.unread_messages_count=0;if(c)b.on_conversation_read({conversation:a,unread_messages_count:d})};this.close=function(){delete b.open_conversation_id}}],
controllerAs:"ctrl"}}]);angular.module("genius").directive("copyToClipboard",["ZeroClipboard","$timeout",function(d,a){var b=function(b,d){var g=b.text();b.text(d);a(function(){b.text(g)},750)};return{restrict:"A",link:function(a,l,g){var k=new d(l[0]);k.on("ready",function(){k.on("copy",function(b){b.clipboardData.setData("text/plain",a.$eval(g.copyToClipboard))});k.on("aftercopy",function(){g.textToShowAfterCopy&&b(l,g.textToShowAfterCopy)})});k.on("error",function(){l.remove();k.destroy()})}}}]);
angular.module("genius").directive("copyValueToScope",[function(){return{restrict:"A",link:{pre:function(d,a,b){a=d.$eval(b.copyValueToScope);d[a.key]=a.value}}}}]);angular.module("genius").directive("cosigns",function(){return{restrict:"E",templateUrl:"cosigns.html"}});angular.module("genius").directive("delayedHref",["$window","$immediate",function(d,a){return{restrict:"A",link:function(b,c,l){var g=l.delayedHref;c.on("click",function(b){b.preventDefault();a(function(){d.location.href=g},!1)})}}}]);
angular.module("genius").directive("delimitedKeys",function(){return{scope:{key:"@delimitedKeys"},restrict:"A",require:"ngModel",link:function(d,a,b,c){var l={};d.$watch(b.ngModel,function(a){a&&a.forEach(function(a){l[a[d.key]]=a})});c.$formatters.push(function(a){return _.pluck(a,d.key).join(", ")});c.$parsers.push(function(a){return a.split(/\s?,\s/).map(function(a){return l[a]||_.set({},d.key,a)})})}}});
angular.module("genius").directive("descriptionReferent",function(){return{scope:{referent:"<object",variants:"<"},templateUrl:"description_annotation.html"}});angular.module("genius").directive("detectImageDiffs",["$immediate",function(d){return{link:function(a,b,c){d(function(){b.find("img").each(function(){var b=-1!==a.$eval(c.left).indexOf(this.src),d=-1!==a.$eval(c.right).indexOf(this.src);b&&!d&&this.classList.add("del");!b&&d&&this.classList.add("ins")})},!1)}}}]);
angular.module("genius").directive("dirtyable",["BeforeUnloadCheck",function(d){return{restrict:"A",require:"form",link:function(a,b,c,l){var g=function(){a.$apply(function(){l.$commitViewValue()});return l.$dirty};a.$eval(c.yieldsIsDirty,{is_dirty:function(){l.$commitViewValue();return l.$dirty}});d.add(g);a.$on("$destroy",function(){d.remove(g)})}}}]);
angular.module("genius").directive("displayUnlessCookie",["Cookies","DateTools",function(d,a){var b=function(b,l){d.put(b,1,{expires:a.days_to_ms(l),path:"/"})};return{transclude:!0,scope:{name:"@",expiresInDays:"<",setCookieOnDisplay:"<"},template:'<ng-transclude ng-if="!hidden"></ng-transclude>',link:function(a){a.hidden=d.get(a.name);a.setCookieOnDisplay&&!d.get(a.name)&&b(a.name,a.expiresInDays)},controller:["$scope",function(a){this.set_cookie_and_close=function(){b(a.name,a.expiresInDays);a.hidden=
!0}}]}}]);angular.module("genius").directive("dockedMediaPlayer",function(){return{templateUrl:"docked_media_player.html"}});
angular.module("genius").directive("editableMarkdown",["$immediate","Filepicker","Autosize",function(d,a,b){return{restrict:"E",replace:!0,templateUrl:"editable_markdown.html",scope:{html:"=",markdown:"=",is_required:"<?isRequired",placeholder:"@"},controller:function(){var b=new a;this.pick_image=function(){b.pick_and_store().then(function(a){this.insert_at_markdown_cursor(a)}.bind(this))}},controllerAs:"ctrl",link:function(a,l){a.editable=a;a.resize_textarea=function(){a.$evalAsync(function(){var a=
l.find("textarea");b(a);d(a.focus.bind(a),!1)})}}}}]);
angular.module("genius").directive("embedly",["getScript","querystring","$compile",function(d,a,b){var c=/^https?:\/\//i,l=function(a){return a.find("a").filter(function(){return c.test($.trim($(this).text()))})},g=_.template('\n    <blockquote class="twitter-tweet">\n      <a href="<%- tweet_url %>"></a>\n    </blockquote>\n  '),k=_.template('\n    <blockquote\n      class="rg_standalone_container"\n      data-src="//'+CANONICAL_DOMAIN+'/annotations/<%- annotation_id %>/standalone_embed"\n    ></blockquote>\n  '),e=
_.template('\n    <embedly-embed\n      embed=":: <%- JSON.stringify(embed) %>"\n      class="embedly_preview u-vertical_margins embedly_preview--<%- embed.provider_name %>"\n    ></embedly-embed>\n  '),f=_.template('\n    <embedly-youtube\n      video-id="<%- video_id %>"\n      start="<%- start %>"\n      class="embedly_preview embedly_preview--YouTube"\n    ></embedly-youtube>\n  '),m=function(c,m){var r=$(c||".embedly:visible");l(r).each(function(){var c=$(this);if(app.youtubeURLre.test(this.href)){var h=
new URL(this.href),n=a.parse(h.search.slice(1)),l=a.parse(h.hash.slice(1)),l=n.t||l.t||0;/\d+m|\d+s|\d+m\d+s/.test(l)&&(l=_(l.match(/^(\d+m)?(\d+s)?$/)).slice(1,3).values().map(function(a){return a?parseInt(a):0}).thru(function(a){return 60*a[0]+a[1]}).value());h=n.v||h.pathname.slice(1);c.replaceWith(b(f({video_id:h,start:l}))(m))}else if(app.twitterURLre.test(this.href))c.replaceWith(g({tweet_url:this.href})),d("//platform.twitter.com/widgets.js",{cache:!0});else if(app.rgURLre.test(this.href)&&
this.href===c.text()&&!c.closest(".cont-annotations.act-standalone_embed").length)h=app.rgURLre.exec(this.href).pop(),c.replaceWith(k({annotation_id:h})),d("//"+CANONICAL_DOMAIN+"/annotations/load_standalone_embeds.js",{cache:!0});else if(this.href.match(/https?:\/\/embed\.vidyard\.com\/(landingpage|share)\/(.*)/i))c.embedly({addImageStyles:!1,className:"embedly_preview embedly_preview--vidyard_embed_bug_workaround",secure:!0,query:{secure:"true"}});else if(app.embedlyURLre.test(this.href))c.embedly({addImageStyles:!1,
className:"embedly_preview",secure:!0,query:{luxe:!MOBILE_DEVICE,secure:"true"},display:function(a){var d=a.html;/soundcloud\.com/.test(d)?(a.html=d.replace("visual%3Dtrue","visual%3Dfalse").replace(/height="\d+"/,'height="165"'),a.height=165):("video"===a.type||"photo"!==a.type&&"rich"!==a.type)&&c.replaceWith(b(e({embed:a}))(m));a.display()}});else return;c.text("Loading embed...")});h(c,m)},h=function(a,c){var d=$(a||".embedly_pro:visible");l(d).each(function(){if(app.embedlyURLre.test(this.href))return!0;
var a=$(this);a.embedly({secure:!0,query:{secure:"true"},display:function(d){d.description&&_.trim(a.parent().text())===_.trim(a.text())?a.replaceWith(b(e({embed:d}))(c)):a.text(d.title)}});a.text("Loading embed...")})};return{restrict:"A",link:function(a,b,c){a.$watch(c.embedly||c.ngBindHtml,function(c){c&&m(b,a)})}}}]);
!function(d,a){function b(a){return function(){var b={method:a},d=Array.prototype.slice.call(arguments);/^get/.test(a)?(c.assert(0<d.length,"Get methods require a callback."),d.unshift(b)):(/^set/.test(a)&&(c.assert(0!==d.length,"Set methods require a value."),b.value=d[0]),d=[b]);this.send.apply(this,d)}}var c={DEBUG:!1,VERSION:"0.0.10",CONTEXT:"player.js"};c.POST_MESSAGE=!!d.postMessage;c.ENABLE_CONTEXT=!1;c.origin=function(a){return"//"===a.substr(0,2)&&(a=d.location.protocol+a),a.split("/").slice(0,
3).join("/")};c.addEvent=function(a,b,c){a&&(a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c)};c.log=function(){c.log.history=c.log.history||[];c.log.history.push(arguments);d.console&&c.DEBUG&&d.console.log(Array.prototype.slice.call(arguments))};c.isString=function(a){return"[object String]"===Object.prototype.toString.call(a)};c.isObject=function(a){return"[object Object]"===Object.prototype.toString.call(a)};c.isArray=function(a){return"[object Array]"===
Object.prototype.toString.call(a)};c.isNone=function(a){return null===a||void 0===a};c.has=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};c.indexOf=function(a,b){if(null==a)return-1;var c=0,d=a.length;if(Array.prototype.IndexOf&&a.indexOf===Array.prototype.IndexOf)return a.indexOf(b);for(;d>c;c++)if(a[c]===b)return c;return-1};c.assert=function(a,b){if(!a)throw b||"Player.js Assert Failed";};c.Keeper=function(){this.init()};c.Keeper.prototype.init=function(){this.data={}};c.Keeper.prototype.getUUID=
function(){return"listener-xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"===a?b:3&b|8).toString(16)})};c.Keeper.prototype.has=function(a,b){if(!this.data.hasOwnProperty(a))return!1;if(c.isNone(b))return!0;for(var d=this.data[a],h=0;h<d.length;h++)if(d[h].id===b)return!0;return!1};c.Keeper.prototype.add=function(a,b,c,d,g){a={id:a,event:b,cb:c,ctx:d,one:g};this.has(b)?this.data[b].push(a):this.data[b]=[a]};c.Keeper.prototype.execute=function(a,b,d,
h){if(!this.has(a,b))return!1;for(var g=[],k=[],l=0;l<this.data[a].length;l++){var t=this.data[a][l];c.isNone(b)||!c.isNone(b)&&t.id===b?(k.push({cb:t.cb,ctx:t.ctx?t.ctx:h,data:d}),!1===t.one&&g.push(t)):g.push(t)}0===g.length?delete this.data[a]:this.data[a]=g;for(a=0;a<k.length;a++)b=k[a],b.cb.call(b.ctx,b.data)};c.Keeper.prototype.on=function(a,b,c,d){this.add(a,b,c,d,!1)};c.Keeper.prototype.one=function(a,b,c,d){this.add(a,b,c,d,!0)};c.Keeper.prototype.off=function(a,b){var d=[];if(!this.data.hasOwnProperty(a))return d;
for(var h=[],g=0;g<this.data[a].length;g++){var k=this.data[a][g];c.isNone(b)||k.cb===b?c.isNone(k.id)||d.push(k.id):h.push(k)}return 0===h.length?delete this.data[a]:this.data[a]=h,d};c.Player=function(a,b){return this instanceof c.Player?void this.init(a,b):new c.Player(a,b)};c.EVENTS={READY:"ready",PLAY:"play",PAUSE:"pause",ENDED:"ended",TIMEUPDATE:"timeupdate",PROGRESS:"progress",ERROR:"error"};c.EVENTS.all=function(){var a=[],b;for(b in c.EVENTS)c.has(c.EVENTS,b)&&c.isString(c.EVENTS[b])&&a.push(c.EVENTS[b]);
return a};c.METHODS={PLAY:"play",PAUSE:"pause",GETPAUSED:"getPaused",MUTE:"mute",UNMUTE:"unmute",GETMUTED:"getMuted",SETVOLUME:"setVolume",GETVOLUME:"getVolume",GETDURATION:"getDuration",SETCURRENTTIME:"setCurrentTime",GETCURRENTTIME:"getCurrentTime",SETLOOP:"setLoop",GETLOOP:"getLoop",REMOVEEVENTLISTENER:"removeEventListener",ADDEVENTLISTENER:"addEventListener"};c.METHODS.all=function(){var a=[],b;for(b in c.METHODS)c.has(c.METHODS,b)&&c.isString(c.METHODS[b])&&a.push(c.METHODS[b]);return a};c.READIED=
[];c.Player.prototype.init=function(b){var f=this;c.isString(b)&&(b=a.getElementById(b));this.elem=b;this.origin=c.origin(b.src);this.keeper=new c.Keeper;this.isReady=!1;this.queue=[];this.events=c.EVENTS.all();this.methods=c.METHODS.all();c.POST_MESSAGE?c.addEvent(d,"message",function(a){f.receive(a)}):c.log("Post Message is not Available.");-1<c.indexOf(c.READIED,b.src)?f.loaded=!0:this.elem.onload=function(){f.loaded=!0}};c.Player.prototype.send=function(a,b,d){if(a.context=c.CONTEXT,a.version=
c.VERSION,b){var h=this.keeper.getUUID();a.listener=h;this.keeper.one(h,a.method,b,d)}return this.isReady||"ready"===a.value?(c.log("Player.send",a,this.origin),!0===this.loaded&&this.elem.contentWindow.postMessage(JSON.stringify(a),this.origin),!0):(c.log("Player.queue",a),this.queue.push(a),!1)};c.Player.prototype.receive=function(a){if(c.log("Player.receive",a),a.origin!==this.origin)return!1;var b;try{b=JSON.parse(a.data)}catch(d){return!1}return c.ENABLE_CONTEXT&&b.context!==c.CONTEXT?!1:("ready"===
b.event&&b.value&&b.value.src===this.elem.src&&this.ready(b),void(this.keeper.has(b.event,b.listener)&&this.keeper.execute(b.event,b.listener,b.value,this)))};c.Player.prototype.ready=function(a){if(!0===this.isReady)return!1;a.value.events&&(this.events=a.value.events);a.value.methods&&(this.methods=a.value.methods);this.loaded=this.isReady=!0;for(var b=0;b<this.queue.length;b++){var d=this.queue[b];c.log("Player.dequeue",d);"ready"===a.event&&this.keeper.execute(d.event,d.listener,!0,this);this.send(d)}this.queue=
[]};c.Player.prototype.on=function(a,b,c){var d=this.keeper.getUUID();return"ready"===a?this.keeper.one(d,a,b,c):this.keeper.on(d,a,b,c),this.send({method:"addEventListener",value:a,listener:d}),!0};c.Player.prototype.off=function(a,b){var d=this.keeper.off(a,b);if(c.log("Player.off",d),0<d.length)for(var h in d)return this.send({method:"removeEventListener",value:a,listener:d[h]}),!0;return!1};c.Player.prototype.supports=function(a,b){c.assert(-1<c.indexOf(["method","event"],a),'evtOrMethod needs to be either "event" or "method" got '+
a);b=c.isArray(b)?b:[b];for(var d="event"===a?this.events:this.methods,h=0;h<b.length;h++)if(-1===c.indexOf(d,b[h]))return!1;return!0};for(var l=0,g=c.METHODS.all().length;g>l;l++){var k=c.METHODS.all()[l];c.Player.prototype.hasOwnProperty(k)||(c.Player.prototype[k]=b(k))}d.playerjs=c;c.addEvent(d,"message",function(a){var b;try{b=JSON.parse(a.data)}catch(d){return!1}return c.ENABLE_CONTEXT&&b.context!==c.CONTEXT?!1:void("ready"===b.event&&b.value&&b.value.src&&c.READIED.push(b.value.src))});c.Receiver=
function(a,b){this.init(a,b)};c.Receiver.prototype.init=function(b,f){var g=this;this.isReady=!1;this.origin=c.origin(a.referrer);this.methods={};this.supported={events:b?b:c.EVENTS.all(),methods:f?f:c.METHODS.all()};this.eventListeners={};(this.reject=!(d.self!==d.top&&c.POST_MESSAGE))||c.addEvent(d,"message",function(a){g.receive(a)})};c.Receiver.prototype.receive=function(a){if(a.origin!==this.origin)return!1;var b={};if(c.isObject(a.data))b=a.data;else try{b=d.JSON.parse(a.data)}catch(g){c.log("JSON Parse Error",
g)}if((c.log("Receiver.receive",a,b),!b.method)||c.ENABLE_CONTEXT&&b.context!==c.CONTEXT)return!1;if(-1===c.indexOf(c.METHODS.all(),b.method))return this.emit("error",{code:2,msg:'Invalid Method "'+b.method+'"'}),!1;a=c.isNone(b.listener)?null:b.listener;"addEventListener"===b.method?(this.eventListeners.hasOwnProperty(b.value)?-1===c.indexOf(this.eventListeners[b.value],a)&&this.eventListeners[b.value].push(a):this.eventListeners[b.value]=[a],"ready"===b.value&&this.isReady&&this.ready()):"removeEventListener"===
b.method?this.eventListeners.hasOwnProperty(b.value)&&(a=c.indexOf(this.eventListeners[b.value],a),-1<a&&this.eventListeners[b.value].splice(a,1),0===this.eventListeners[b.value].length&&delete this.eventListeners[b.value]):this.get(b.method,b.value,a)};c.Receiver.prototype.get=function(a,b,c){var d=this;if(!this.methods.hasOwnProperty(a))return this.emit("error",{code:3,msg:'Method Not Supported"'+a+'"'}),!1;var g=this.methods[a];"get"===a.substr(0,3)?g.call(this,function(b){d.send(a,b,c)}):g.call(this,
b)};c.Receiver.prototype.on=function(a,b){this.methods[a]=b};c.Receiver.prototype.send=function(a,b,g){if(c.log("Receiver.send",a,b,g),this.reject)return c.log("Receiver.send.reject",a,b,g),!1;a={context:c.CONTEXT,version:c.VERSION,event:a};c.isNone(b)||(a.value=b);c.isNone(g)||(a.listener=g);b=JSON.stringify(a);d.parent.postMessage(b,""===this.origin?"*":this.origin)};c.Receiver.prototype.emit=function(a,b){if(!this.eventListeners.hasOwnProperty(a))return!1;c.log("Instance.emit",a,b,this.eventListeners[a]);
for(var d=0;d<this.eventListeners[a].length;d++)this.send(a,b,this.eventListeners[a][d]);return!0};c.Receiver.prototype.ready=function(){c.log("Receiver.ready");this.isReady=!0;var a={src:d.location.toString(),events:this.supported.events,methods:this.supported.methods};this.emit("ready",a)||this.send("ready",a)};c.HTML5Adapter=function(a){return this instanceof c.HTML5Adapter?void this.init(a):new c.HTML5Adapter(a)};c.HTML5Adapter.prototype.init=function(a){c.assert(a,"playerjs.VideoJSReceiver requires a video element");
var b=this.receiver=new c.Receiver;a.addEventListener("playing",function(){b.emit("play")});a.addEventListener("pause",function(){b.emit("pause")});a.addEventListener("ended",function(){b.emit("ended")});a.addEventListener("timeupdate",function(){b.emit("timeupdate",{seconds:a.currentTime,duration:a.duration})});a.addEventListener("progress",function(){b.emit("buffered",{percent:a.buffered.length})});b.on("play",function(){a.play()});b.on("pause",function(){a.pause()});b.on("getPaused",function(b){b(a.paused)});
b.on("getCurrentTime",function(b){b(a.currentTime)});b.on("setCurrentTime",function(b){a.currentTime=b});b.on("getDuration",function(b){b(a.duration)});b.on("getVolume",function(b){b(100*a.volume)});b.on("setVolume",function(b){a.volume=b/100});b.on("mute",function(){a.muted=!0});b.on("unmute",function(){a.muted=!1});b.on("getMuted",function(b){b(a.muted)});b.on("getLoop",function(b){b(a.loop)});b.on("setLoop",function(b){a.loop=b})};c.HTML5Adapter.prototype.ready=function(){this.receiver.ready()};
c.JWPlayerAdapter=function(a){return this instanceof c.JWPlayerAdapter?void this.init(a):new c.JWPlayerAdapter(a)};c.JWPlayerAdapter.prototype.init=function(a){c.assert(a,"playerjs.JWPlayerAdapter requires a player object");var b=this.receiver=new c.Receiver;this.looped=!1;a.onPause(function(){b.emit("pause")});a.onPlay(function(){b.emit("play")});a.onTime(function(a){var c=a.position;a=a.duration;if(!c||!a)return!1;b.emit("timeupdate",{seconds:c,duration:a})});var d=this;a.onComplete(function(){!0===
d.looped?a.seek(0):b.emit("ended")});a.onError(function(){b.emit("error")});b.on("play",function(){a.play(!0)});b.on("pause",function(){a.pause(!0)});b.on("getPaused",function(b){b("PLAYING"!==a.getState())});b.on("getCurrentTime",function(b){b(a.getPosition())});b.on("setCurrentTime",function(b){a.seek(b)});b.on("getDuration",function(b){b(a.getDuration())});b.on("getVolume",function(b){b(a.getVolume())});b.on("setVolume",function(b){a.setVolume(b)});b.on("mute",function(){a.setMute(!0)});b.on("unmute",
function(){a.setMute(!1)});b.on("getMuted",function(b){b(!0===a.getMute())});b.on("getLoop",function(a){a(this.looped)},this);b.on("setLoop",function(a){this.looped=a},this)};c.JWPlayerAdapter.prototype.ready=function(){this.receiver.ready()};c.MockAdapter=function(){return this instanceof c.MockAdapter?void this.init():new c.MockAdapter};c.MockAdapter.prototype.init=function(){var a={duration:20,currentTime:0,interval:null,timeupdate:function(){},volume:100,mute:!1,playing:!1,loop:!1,play:function(){a.interval=
setInterval(function(){a.currentTime+=.25;a.timeupdate({seconds:a.currentTime,duration:a.duration})},250);a.playing=!0},pause:function(){clearInterval(a.interval);a.playing=!1}},b=this.receiver=new c.Receiver;b.on("play",function(){var b=this;a.play();this.emit("play");a.timeupdate=function(a){b.emit("timeupdate",a)}});b.on("pause",function(){a.pause();this.emit("pause")});b.on("getPaused",function(b){b(!a.playing)});b.on("getCurrentTime",function(b){b(a.currentTime)});b.on("setCurrentTime",function(b){a.currentTime=
b});b.on("getDuration",function(b){b(a.duration)});b.on("getVolume",function(b){b(a.volume)});b.on("setVolume",function(b){a.volume=b});b.on("mute",function(){a.mute=!0});b.on("unmute",function(){a.mute=!1});b.on("getMuted",function(b){b(a.mute)});b.on("getLoop",function(b){b(a.loop)});b.on("setLoop",function(b){a.loop=b})};c.MockAdapter.prototype.ready=function(){this.receiver.ready()};c.SublimeAdapter=function(a){return this instanceof c.SublimeAdapter?void this.init(a):new c.SublimeAdapter(a)};
c.SublimeAdapter.prototype.events=[c.EVENTS.READY,c.EVENTS.PLAY,c.EVENTS.PAUSE,c.EVENTS.ENDED,c.EVENTS.TIMEUPDATE,c.EVENTS.ERROR];c.SublimeAdapter.prototype.methods=[c.METHODS.PLAY,c.METHODS.PAUSE,c.METHODS.GETDURATION,c.METHODS.SETCURRENTTIME,c.METHODS.GETCURRENTTIME,c.METHODS.REMOVEEVENTLISTENER,c.METHODS.ADDEVENTLISTENER];c.SublimeAdapter.prototype.init=function(a){c.assert(a,"playerjs.SublimeAdapter requires a player object");var b=this.receiver=new c.Receiver(this.events,this.methods);a.on("pause",
function(){b.emit("pause")});a.on("play",function(){b.emit("play")});a.on("timeUpdate",function(a,c){var d=a.duration();if(!c||!d)return!1;b.emit("timeupdate",{seconds:c,duration:d})});a.on("end",function(){b.emit("ended")});b.on("play",function(){a.play()});b.on("pause",function(){a.pause()});b.on("getCurrentTime",function(b){b(a.playbackTime())});b.on("setCurrentTime",function(b){a.seekTo(b)});b.on("getDuration",function(b){b(a.duration())})};c.SublimeAdapter.prototype.ready=function(){this.receiver.ready()};
c.VideoJSAdapter=function(a){return this instanceof c.VideoJSAdapter?void this.init(a):new c.VideoJSAdapter(a)};c.VideoJSAdapter.prototype.init=function(a){c.assert(a,"playerjs.VideoJSReceiver requires a player object");var b=this.receiver=new c.Receiver;a.on("pause",function(){b.emit("pause")});a.on("play",function(){b.emit("play")});a.on("timeupdate",function(){var c=a.currentTime(),d=a.duration();if(!c||!d)return!1;b.emit("timeupdate",{seconds:c,duration:d})});a.on("ended",function(){b.emit("ended")});
a.on("error",function(){b.emit("error")});b.on("play",function(){a.play()});b.on("pause",function(){a.pause()});b.on("getPaused",function(b){b(a.paused())});b.on("getCurrentTime",function(b){b(a.currentTime())});b.on("setCurrentTime",function(b){a.currentTime(b)});b.on("getDuration",function(b){b(a.duration())});b.on("getVolume",function(b){b(100*a.volume())});b.on("setVolume",function(b){a.volume(b/100)});b.on("mute",function(){a.volume(0)});b.on("unmute",function(){a.volume(1)});b.on("getMuted",
function(b){b(0===a.volume())});b.on("getLoop",function(b){b(a.loop())});b.on("setLoop",function(b){a.loop(b)})};c.VideoJSAdapter.prototype.ready=function(){this.receiver.ready()}}(window,document);
angular.module("genius").directive("embedlyPlayer",["$sce","$immediate","$q","Tracking","PlayerJS",function(d,a,b,c,l){return{restrict:"E",templateUrl:"embedly_player.html",transclude:!0,scope:{yieldsApi:"&",yieldsState:"&",media:"<",controls:"<?",playerClass:"@",preload:"<"},link:function(g,k){var e=function(){h.has_errored=!0},f,m,h,n=function(){var a=l.Player(k.find("iframe")[0]);a.on("ready",function(){a.setVolume(100);f.resolve(a);g.$apply(function(){h.is_loaded=!0;h.is_loading=!1})});a.on("play",
function(){c.track("play_song_media",{playing:!0,first_interaction:!1});g.$apply(function(){h.is_playing=!0})});a.on("pause",function(){g.$apply(function(){h.is_playing=!1})});a.on("ended",function(){g.$apply(function(){h.is_playing=!1})});a.on("timeupdate",_.throttle(function(a){g.$apply(function(){h.percentage=a.seconds/a.duration;h.time_remaining=1E3*(a.duration-a.seconds)})},1E3));a.on("error",function(){g.$apply(e)})};g.load_media=function(){h.is_loading||h.is_loaded||(c.track("play_song_media",
{playing:!1,first_interaction:!0}),h.is_loading=!0,g.is_initialized=!0,a(n,!1))};g.yieldsApi({api:{load_media:g.load_media,playpause:function(){h.is_playing?this.pause():this.play()},play:function(){m.then(function(a){a.play()})},pause:function(){m.then(function(a){a.pause()})},seek_to:function(a){m.then(function(b){b.getDuration(function(c){b.setCurrentTime(c*a)})})}}});var q={youtube:{youtube_controls:g.controls?2:0,youtube_modestbranding:1,youtube_showinfo:0,youtube_rel:0,youtube_iv_load_policy:3,
youtube_start:g.media?g.media.start:void 0,youtube_fs:0}}[g.media?g.media.provider:void 0],r=function(a){var c=_.extend({},q,a);return b.resolve($.embedly.oembed(g.media.url,{query:c})).then(function(a){a=a[0];return"youtube"===g.media.provider&&!a.author_name||a.invalid||"error"===a.type||"link"===a.type?c.force?b.reject(Error("No embed found")):r({force:!0}):a})};g.$watch("state.is_playing",function(a){a&&(g.state.has_played=!0)});g.$watch("media.url",function(a){g.is_initialized=!1;f=b.defer();
m=f.promise;h=g.state={};g.yieldsState({state:h});a?(g.media_html=null,r().then(function(a){h.placeholder=a.thumbnail_url;h.is_square=a.thumbnail_width===a.thumbnail_height;h.is_ready=!0;g.media_html=d.trustAsHtml(a.html);g.preload&&g.load_media()}).catch(e)):h.is_ready=!0});g.$on("$destroy",function(){g.yieldsState({state:void 0})})}}}]);
angular.module("genius").directive("emptyCopyContent",["$immediate","$window","$document",function(d,a,b){return{link:function(c,l,g){l.on("copy",function(){var k=c.$eval(g.emptyCopyContent),e=a.getSelection();if(!e.toString()){var f=$("<div>").html(k).css({position:"absolute",height:0,width:0}).appendTo(b.prop("body"));e.removeAllRanges();k=b[0].createRange();k.selectNodeContents(f[0]);e.addRange(k);d(function(){f.remove()},!1)}})}}}]);
angular.module("genius").directive("expandableAccordionSection",function(){return{restrict:"E",scope:{label:"@",expanded:"=",shortcut:"@"},templateUrl:"expandable_accordion_section.html",replace:!0,transclude:!0,link:function(d){d.expand_content=function(){d.expanded=!d.expanded}}}});
angular.module("genius").directive("expandableList",function(){return{restrict:"E",scope:{collection:"<",template:"<",limit:"<",label:"@"},templateUrl:function(d,a){return a.template+".html"},controllerAs:"ctrl",controller:["$scope",function(d){this.more_to_show=function(){return d.collection.length>d.limit};this.show_more=function(){delete d.limit}}]}});
angular.module("genius").directive("exportsFormApi",["$immediate",function(d){return{restrct:"A",require:"form",link:function(a,b,c,l){a.$eval(c.exportsFormApi,{api:_.extend(l,{submit:function(){d(function(){l.$commitViewValue();b.triggerHandler("submit")},!1)}})})}}}]);
angular.module("genius").directive("factTrackPrompt",["SpotifyAnnotationService","SpotifyRemote","Tracking",function(d,a,b){return{restrict:"E",templateUrl:"fact_track_prompt.html",controllerAs:"ctrl",controller:["$scope","$timeout","AppConfig",function(c,l,g){c.track_uuid=c.song.spotify_uuid;c.fact_track_launch_article_url=g.fact_track_launch_article_url;var k=!1,e=_.once(function(){d.load_song(c.song.id).then(function(a){a=a.data;c.spotify_song=a.spotify_song;c.annotations=a.spotify_annotations});
a.$on("ready",function(){k=!0;c.errored=!1});a.$on("error",function(){b.track("Errored Web Fact Track");c.error="Your Spotify app is beaming us messages of distress"})});this.is_ready_for_playing=function(){return k&&!c.errored&&c.spotify_song};this.close_fact_track=function(){this.player_api&&this.player_api.pause();this.opened=!1};this.open_fact_track=function(){b.track("Played Web Fact Track");e();this.opened=!0;l(function(){c.error=c.error||"We seem to be having some trouble"},5E3)}}]}}]);
angular.module("genius").directive("factTrackSimulator",[function(){return{restrict:"E",templateUrl:"fact_track_simulator.html",scope:{annotations:"<",track_uuid:"<trackUuid",time:"=?",spotify_song:"<song",yields_api:"&yieldsApi",variants:"<",current_annotation_index:"=?currentAnnotationIndex",annotation_clicked:"&annotationClicked",autoplay:"<",default_playback_type:"@defaultPlaybackType"},controllerAs:"ctrl",controller:["$scope","SpotifyPlayback","WebAudioPlayback",function(d,a,b){var c=this;this.initialize_playback=
function(g){var k=d.time,e=d.playing;g=g||{};e&&c.playback.api.pause();c.playback="web_audio"===g.type?new b({cached_audio_url:d.spotify_song.track_url}):new a({provider_id:d.track_uuid,duration:d.spotify_song.metadata.duration_ms});c.clear_playback_listener&&c.clear_playback_listener();c.clear_playback_listener=c.playback.$on("state",function(a,b){d.time=b.position;d.playing=b.is_playing});c.playback.api.seek_to_position(k)};this.annotation_percentage=function(){if(!d.current_annotation)return 0;
var a=d.annotations[d.current_annotation_index+1],a=a?a.timestamp_in_ms:d.duration;return(a-d.time)/(a-d.current_annotation.timestamp_in_ms)};this.seek_to=function(a){c.playback.api.seek_to_position(a)};this.seek_to_percentage=function(a){c.playback.api.seek_to(a)};this.toggle_play_pause=function(){c.playback.api.playpause()};this.card_clicked=function(){d.annotation_clicked({current_annotation:d.current_annotation})};d.time=0;d.duration=d.spotify_song.metadata.duration_ms;d.album=d.spotify_song.metadata.album;
d.yields_api({api:{playback_type:function(){return c.playback.type},set_playback_options:function(a){c.initialize_playback(a)},other_track_playing:function(){},use_current_track:function(){},pause:function(){d.is_playing&&d.ctrl.toggle_play_pause()},seek_to:function(a,b){b=b||{};d.ctrl.seek_to(a);b.play&&c.playback.api.play()}}});this.initialize_playback({type:d.default_playback_type||(d.spotify_song.track_url?"web_audio":"spotify")});d.autoplay&&(this.playback.api.seek_to_position(0),this.playback.api.play());
var l={content_type:"intro",timestamp_in_ms:0};d.$watch("time",function(){var a=d.annotations.filter(function(a){return a.timestamp_in_ms<=d.time});d.current_annotation_index=a.length-1;d.current_annotation=d.annotations[d.current_annotation_index]||l})}]}}]);
angular.module("genius").directive("filepickerInput",["Filepicker",function(d){return{link:function(a,b,c){var l=new d({services:"COMPUTER"});b.on("click",function(){a.$eval(c.onFilepickerError,{error:null});l.pick().then(function(d){b.attr("value","");b.attr("placeholder","Saving image...");a.$eval(c.onFilepickerProgress,{uploading:!0});696<d.dimensions.width?l.store(d.blob).then(function(d){b.attr("value",d);a.$eval(c.onFilepickerProgress,{uploading:null})}):(b.attr("value",""),b.attr("placeholder",
"Please upload an image at least 696px wide"),a.$eval(c.onFilepickerError,{error:"must be wider than 696px"}))});return!1})}}}]);angular.module("genius").directive("fixedPositionScroll",function(){return{link:function(d,a){var b=a.closest("[fixed-position-scroll-container]");b.on("mouseover",function(){return $("body").addClass("u-noscroll")});b.on("mouseout",function(){return $("body").removeClass("u-noscroll")})}}});
angular.module("genius").directive("flashMessages",function(){return{restrict:"E",replace:!0,scope:{},templateUrl:"flash_messages.html",controllerAs:"ctrl",controller:["$scope","$sce","Cookies","currentFlashMessages",function(d,a,b,c){var l=b.getObject("flash")||{};_.each(l,function(b,d){c.push({message:a.trustAsHtml(b),type:d})});b.remove("flash",{path:"/"});d.flash_messages=c;this.close_message=function(a){_.pull(d.flash_messages,a)}}]}});
angular.module("genius").directive("focusOnChange",function(){return{restrict:"A",link:function(d,a,b){var c=!0;d.$watch(b.focusOnChange,function(){c?c=!1:a.focus()})}}});
angular.module("genius").directive("followButton",["FollowService","Session","Tracking","Reversible",function(d,a,b,c){return{restrict:"E",scope:{onUnauthorized:"&",object:"<",type:"@",variants:"<",disabled:"<"},templateUrl:"follow_button.html",link:function(l){var g;l.user_signed_in=a.user_signed_in;l.$watch("object.current_user_metadata.interactions.following",function(a){l.following=!!a});l.label=function(){return l.hoverLabel||(l.following?"Following":"Follow")};l.toggle_following=function(){if(!a.user_signed_in)return l.onUnauthorized();
if(!g){g=!0;var k={};k["object.current_user_metadata.interactions.following"]=!l.following;k=c.modify(l,k);b.track(l.following?"Follow Button":"Unfollow Button");d.set_following(l.type,l.object.id,!l.following).catch(k).finally(function(){l.hoverLabel=null;g=!1})}};l.can_follow=function(){return a.has_permission("follow",l.object)}}}}]);
angular.module("genius").directive("svg",["Bowser","ShimInnerHTMLProp","$templateCache","$immediate",function(d,a,b,c){var l=function(a,k){var e=$(b.get(k));a.html(e[0].innerHTML);_.each(e[0].attributes,function(b){a[0].setAttribute(b.name,b.value)});var f=a.get(0).getAttribute("viewBox");(d.msie||d.msedge)&&f&&c(function(){var b=f.split(" ");3<b.length&&a.width(a.height()*(parseInt(b[2])/parseInt(b[3])))},!1)};return{link:function(b,c,d){a();"src"in d&&l(c,d.src);"ngSrc"in d&&b.$watch(d.ngSrc,function(a){a&&
l(c,a)})}}}]);angular.module("genius").directive("globalErrorMessage",function(){return{scope:{},templateUrl:"global_error_message.html",controllerAs:"ctrl",controller:["GlobalErrorBus","$sce",function(d,a){d.$on("global_error",function(b,c){this.message_html=a.trustAsHtml(c)}.bind(this))}]}});
angular.module("genius").directive("globalMessage",["$compile","$templateCache","TargetElementService",function(d,a,b){var c=a.get("global_message.html"),l=b.get_element("global_message");return{scope:!0,restrict:"E",transclude:!0,link:function(a,b,e,f,m){d(c)(a,function(b){l.append(b);a.$on("$destroy",function(){b.remove()})},{parentBoundTranscludeFn:m,futureParentElement:l})}}}]);
angular.module("genius").directive("handleIntraPageLinks",["ReferentRegistry","ModelRouter","$location",function(d,a,b){return{restrict:"A",link:function(c,l){l.on("click","a",function(){var g=$(this).attr("data-api_path");if(g&&(g=a.lookup(g))&&"referent"===g.type){var k=d.peek(g.id);if(k)return c.$apply(function(){b.url("?referent_id="+k.id)}),!1}})}}}]);
angular.module("genius").directive("handleRoutableLinks",["$rootRouter","$document","LinkEvents",function(d,a,b){return{restrict:"A",link:function(c,l){l.on("click","a",function(c){var k=$(c.target).closest("a")[0];k.hostname!==a[0].location.hostname||b.should_open_in_new_tab(c,k)||(c.preventDefault(),d.recognize(k.pathname).then(function(b){_.get(b,"component.routeData.data.clientRoutable")?d.navigateByUrl(k.pathname):a[0].location.href=k.href}).catch(function(){return a[0].location.href=k.href}))})}}}]);
angular.module("genius").directive("headerMenuItem",["$anchorScroll",function(d){return{restrict:"E",transclude:!0,scope:{name:"@",url:"@",handle_scroll:"@handleScroll"},templateUrl:"header_menu_item.html",link:function(a,b){b.on("click","a",function(b){a.handle_scroll&&(b.preventDefault(),b.stopPropagation(),d(b.target.hash.slice(1)))})}}}]);
angular.module("genius").directive("hideSongForm",function(){return{restrict:"E",scope:{song:"<",on_close:"&onClose"},templateUrl:"hide_song_form.html",controllerAs:"ctrl",controller:["$scope","SongService",function(d,a){this.save=function(b){this.saving=!0;a.perform_action(d.song.id,"hide",{viewable_by_roles:b}).then(function(a){_.extend(d.song,a);d.error=null;d.on_close()}).catch(function(a){d.error=a.message}).finally(function(){this.saving=!1}.bind(this))}}]}});
angular.module("genius").directive("httpMethod",function(){return{restrict:"A",link:function(d,a,b){var c=!1,l=b.action||b.href,g=b.httpMethod.toUpperCase();a.click(function(){if(!c)return c=!0,$("<form>",{action:l,method:g}).append($("<input>",{type:"hidden",name:"authenticity_token",value:$.cookie("_csrf_token")})).appendTo($("body")).submit(),!1})}}});
angular.module("genius").directive("inboxLineItem",["Tracking",function(d){var a="user_upvoted_annotation user_downvoted_annotation user_accepted_annotation user_rejected_annotation user_deleted_annotation user_created_annotation user_pyonged_annotation user_pyonged_song user_upvoted_forum_post user_downvoted_forum_post user_followed_user user_de_modded_user user_made_an_editor_out_of_user user_made_a_moderator_out_of_user user_mediatored_user user_created_question user_archived_question user_edited_question user_pinned_question user_unpinned_question user_created_answer user_deleted_answer user_upvoted_question user_downvoted_question user_upvoted_answer user_downvoted_answer user_hit_pageview_threshold_song".split(" "),b=
{"user.Pyong.song":"inbox_line_items/pyong.html","user.Pyong.annotation":"inbox_line_items/pyong.html","user.Pyong.article":"inbox_line_items/pyong.html"};return{scope:{inbox_name:"<inboxName",line_item:"<object",eager_load_details:"<eagerLoadDetails",variants:"<"},templateUrl:"inbox_line_item.html",controller:["$scope","querystring","InboxService",function(c,l,g){this.state={load_details:!1,show_details:!1};c.details_url="/activity_stream/show_details?"+l.stringify({id:c.line_item.event_ids});this.has_template=
_.contains(a,c.line_item.strategy);c.$watch("ctrl.state.load_details",function(a,b){this.has_template&&a&&!b&&g.get_line_item(c.inbox_name,c.line_item.event_ids.join(",")).then(function(a){this.line_item_detail=a}.bind(this))}.bind(this));c.$watch("eager_load_details",function(a){this.state.load_details=!(!this.state.load_details&&!a)}.bind(this));this.message_components=c.line_item.message_components;this.message_template=b[this.message_components.key]||"inbox_line_items/generic.html";var k=_.once(function(){d.track("Line Item Open",
{action_name:c.line_item.action_name,inbox_name:c.inbox_name,strategy_name:c.line_item.strategy,bagon:!0,iframe:!this.has_template})}.bind(this));this.toggle_visible=function(){this.state.load_details=!0;this.state.show_details=!this.state.show_details;this.state.show_details&&k();this.state.show_details&&c.line_item.unread&&(c.line_item.unread=!1,g.mark_read(c.inbox_name,[c.line_item.event_ids]))}}],controllerAs:"ctrl"}}]);
angular.module("genius").directive("inboxLineItemActionIcon",function(){return{scope:{action_name:"<actionName"},templateUrl:"inbox_line_item_action_icon.html"}});
(function(d){"function"===typeof define&&define.amd?define(["jquery"],d):"object"===typeof exports?module.exports=d:d(jQuery)})(function(d){function a(a){var c=a||window.event,f=g.call(arguments,1),l=0,t=0,u=0,x=0,w=0,v=0;a=d.event.fix(c);a.type="mousewheel";"detail"in c&&(u=-1*c.detail);"wheelDelta"in c&&(u=c.wheelDelta);"wheelDeltaY"in c&&(u=c.wheelDeltaY);"wheelDeltaX"in c&&(t=-1*c.wheelDeltaX);"axis"in c&&c.axis===c.HORIZONTAL_AXIS&&(t=-1*u,u=0);l=0===u?t:u;"deltaY"in c&&(l=u=-1*c.deltaY);"deltaX"in
c&&(t=c.deltaX,0===u&&(l=-1*t));if(0!==u||0!==t){1===c.deltaMode?(x=d.data(this,"mousewheel-line-height"),l*=x,u*=x,t*=x):2===c.deltaMode&&(x=d.data(this,"mousewheel-page-height"),l*=x,u*=x,t*=x);x=Math.max(Math.abs(u),Math.abs(t));if(!e||x<e)e=x,m.settings.adjustOldDeltas&&"mousewheel"===c.type&&0===x%120&&(e/=40);m.settings.adjustOldDeltas&&"mousewheel"===c.type&&0===x%120&&(l/=40,t/=40,u/=40);l=Math[1<=l?"floor":"ceil"](l/e);t=Math[1<=t?"floor":"ceil"](t/e);u=Math[1<=u?"floor":"ceil"](u/e);m.settings.normalizeOffset&&
this.getBoundingClientRect&&(c=this.getBoundingClientRect(),w=a.clientX-c.left,v=a.clientY-c.top);a.deltaX=t;a.deltaY=u;a.deltaFactor=e;a.offsetX=w;a.offsetY=v;a.deltaMode=0;f.unshift(a,l,t,u);k&&clearTimeout(k);k=setTimeout(b,200);return(d.event.dispatch||d.event.handle).apply(this,f)}}function b(){e=null}var c=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],l="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],g=Array.prototype.slice,
k,e;if(d.event.fixHooks)for(var f=c.length;f;)d.event.fixHooks[c[--f]]=d.event.mouseHooks;var m=d.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var b=l.length;b;)this.addEventListener(l[--b],a,!1);else this.onmousewheel=a;d.data(this,"mousewheel-line-height",m.getLineHeight(this));d.data(this,"mousewheel-page-height",m.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var b=l.length;b;)this.removeEventListener(l[--b],a,!1);else this.onmousewheel=
null;d.removeData(this,"mousewheel-line-height");d.removeData(this,"mousewheel-page-height")},getLineHeight:function(a){a=d(a);var b=a["offsetParent"in d.fn?"offsetParent":"parent"]();b.length||(b=d("body"));return parseInt(b.css("fontSize"),10)||parseInt(a.css("fontSize"),10)||16},getPageHeight:function(a){return d(a).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};d.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",
a)}})});
angular.module("genius").directive("infiniteScroll",["$window","$document","$immediate",function(d,a,b){return{link:function(c,l,g){var k=!1,e=$(d);"infiniteScrollDisabled"in g&&c.$watch(g.infiniteScrollDisabled,function(a){(k=a)||b(m,!1)});var f=function(){c.$apply(function(){c.$eval(g.infiniteScroll)})},m=function(b){if(!k){var c=a[0].documentElement.clientHeight;b&&(b=b.target,b.getBoundingClientRect&&(c=b.getBoundingClientRect().top+b.offsetHeight));b=l[0].getBoundingClientRect().top+l[0].offsetHeight;
c>=b&&f()}},h,n,q=!0,r=l.closest("[infinite-scroll-container]"),t=function(a){q&&(h=r.height(),n=l.get(0).scrollHeight);q=!1;r.scrollTop()>=n-h&&0>a.deltaY&&(f(),l.get(0).scrollHeight!==n&&(q=!0))},u=function(){$("body").addClass("u-noscroll")},x=function(){$("body").removeClass("u-noscroll")};"fixedPositionInfiniteScroll"in g?(l.bind("mousewheel",t),r.on("mouseover",u),r.on("mouseout",x)):(e.on("scroll",m),l.parents().on("scroll",m));c.$on("$destroy",function(){l.parents().off("scroll",m);return e.off("scroll",
m)})}}}]);
angular.module("genius").directive("insertableAtCursor",function(){return{restrict:"A",link:function(d,a,b){d.$eval(b.insertableAtCursor,{insertFn:function(b){a.each(function(){if(this.selectionStart||0===this.selectionStart){var a=this.selectionStart,d=this.selectionEnd,k=this.scrollTop;this.value=this.value.substring(0,a)+b+this.value.substring(d,this.value.length);this.focus();this.selectionStart=a+b.length;this.selectionEnd=a+b.length;this.scrollTop=k}else this.value+=b,this.focus();$(this).trigger("input")})}})}}});
angular.module("genius").directive("kb",["$window",function(d){return{restrict:"E",link:function(a,b,c){var l=$(d),g=function(b){a.$apply(function(){a.$eval(c.action,{$event:b})});return!1};l.bind("keydown",c.shortcut,g);a.$on("$destroy",function(){l.unbind("keydown",g)})}}}]);
angular.module("genius").directive("keepInView",["$document","$window",function(d,a){return{link:function(b,c,l){var g=0;b.$watch(l.keepInView,function(b){if(b){var e=c[0].getBoundingClientRect();b=a.innerHeight;if(e.bottom>.95*b||e.top<.05*b)e=200>g-Date.now()?100:300,g=Date.now(),$(d.prop("body")).animate({scrollTop:$(c).offset().top-.05*b},e)}})}}}]);angular.module("genius").directive("leaderboard",function(){return{restrict:"E",templateUrl:"leaderboard.html",scope:{leaderboard_rows:"<collection"}}});
angular.module("genius").directive("localReferentRouting",function(){return{controller:["$scope","$location","Tracking",function(d,a,b){d.$on("$locationChangeSuccess",function(){var c=Number(a.search().referent_id);if(!c){var l=a.hash().match(/^note-(\d+)$/);l&&(c=l[1])}l=a.path();c?(b.set_annotation_opened_from_permalink(c),d.song_ctrl.scroll_to_reference_element(d.reference_elements[c]).then(function(){d.song_ctrl.update_url_for_open_referent(c);a.replace()})):l===d.song.path?d.current_referent=
null:(l=Number(l.slice(1)),d.song_ctrl.display_referent(l))})}]}});angular.module("genius").directive("lockScrollPositionOnIos",["$window","Bowser",function(d,a){return{link:function(b){if(a.ios){var c=$("body"),l=$(d).scrollTop();c.css("top",-l);b.$on("$destroy",function(){c.css("top","");$(d).scrollTop(l)})}}}}]);
angular.module("genius").directive("lyricSyncTimestampInput",["timestamp_for_displayFilter","parse_time_string","Mousetrap","$immediate",function(d,a,b,c){return{require:"ngModel",link:function(l,g,k,e){var f=new b(g[0],{stop_propagation:!0,prevent_default:!0});f.$bind("up",function(){h(a(e.$viewValue)+50)});f.$bind("down",function(){h(a(e.$viewValue)-50)});f.$bind("esc",function(){h(a(m));g.blur()});var m;c(function(){m=e.$viewValue});var h=function(a){var b=e.$viewValue;a=d(Math.round(a),{always_millis:!0});
e.$setViewValue(a);e.$valid?e.$render():e.$setViewValue(b)};g.bind("keyup",function(){e.$commitViewValue();l.$apply()});e.$parsers.push(a);e.$formatters.push(function(a){if(a||0===a)return d(a,{always_millis:!0})});l.$watch(k.ngModel,function(a,b){_.isUndefined(a)&&!_.isUndefined(b)&&(""!==e.$viewValue?e.$setViewValue(d(b,{always_millis:!0})):e.$setViewValue(null),e.$commitViewValue())});"validators"in k&&_.extend(e.$validators,l.$eval(k.validators))}}}]);
angular.module("genius").directive("lyrics",["$compile","SongService","LyricsEditingService","LyricsAnchorer","Lyrics","ReferentHelper","TextSelection","Tracking","Bindings","ScrollFocus",function(d,a,b,c,l,g,k,e,f,m){var h=f.resolver({yields_anchorer:"&yieldsAnchorer",canonical_lyrics_html:"<canonicalLyricsHtml",has_hyper_relevant_video:"<hasHyperRelevantVideo",inread_ad:"<inreadAd"});return{restrict:"E",templateUrl:"lyrics.html",transclude:!0,controller:["$scope",function(c){var d=this;this.set_editable=
function(a){c.editable=a;d.editable_lyrics_stale=!1};this.start_editing=function(){d.set_editable(b.prepare_lyrics_for_editing(c.canonical_lyrics_html));d.editing=!0};this.cancel_editing=function(){d.editing=!1;d.lyrics_errors=null;c.lyrics_ctrl.lyrics_form.$rollbackViewValue();c.lyrics_ctrl.lyrics_form.$setPristine()};this.finish_editing=function(){if(!d.saving){d.saving=!0;var e=c.lyrics_section_html();d.editing=!1;d.edit_blocked=!0;c.lyrics_section_html(b.backfill_angular_link_properties(b.lyrics_pseudo_markdown_to_html__deprecated(c.editable.markdown,
c.editable.attr_hash)));d.lyrics_errors=null;return a.save_lyrics(c.song,b.clean_up_lyrics__deprecated(b.lyrics_pseudo_markdown_to_html__deprecated(c.editable.markdown,c.editable.attr_hash))).then(function(a){f(a);d.editing=!1;d.edit_blocked=!1;c.lyrics_ctrl.lyrics_form.$setPristine()}).catch(function(a){c.lyrics_section_html(e);409===a.meta.status?(d.refresh_lyrics(),d.editing=!0):(d.lyrics_errors=a.response.errors,d.lyrics_errors&&d.lyrics_errors.length||(d.lyrics_errors=[a.meta.message||"Unexpected error"]),
d.editing=!0,d.edit_blocked=!1)}).finally(function(){d.saving=!1})}};this.refresh_lyrics=function(){d.edit_blocked=!0;return a.load_lyrics(c.song.id).then(function(a){d.edit_blocked=!1;f(a)})};this.remove_referent=function(a){c.canonical_lyrics_html=b.lyrics_html_without_referent(c.canonical_lyrics_html,a)};this.on_image_referent_created=function(a,b){d.edit_blocked=!1;b.precomputed_client_rect=a.precomputed_client_rect;c.current_referent=b;c.$emit("referent_created",b)};this.on_image_referent_creation_failed=
function(){d.edit_blocked=!1};this.on_image_referent_creation_started=function(){d.edit_blocked=!0};this.submit_correction=function(a){d.correction.replacement.markdown=a;d.edit_blocked=!0;return d.lyrics_anchorer.submit_correction(d.correction).then(function(){d.correction=null;e.track("Corrected Line")}).catch(function(){d.edit_blocked=!1})};this.can_create_anchor_from_selection=function(){var a,b=!1,c=!1;return function(){a!==d.selection_range&&(b=(a=d.selection_range)&&!g.range_or_contents_intersects_links(a),
c=a&&0===$(a.startContainer).find("img").length);return b&&c}}();var f=function(a){_.extend(c.song,a.client_timestamps);d.update_lyrics_selection_safe(a.body.html);h(c.canonical_lyrics_html)!==h(a.body.html)&&(c.canonical_lyrics_html=a.body.html,d.editable_lyrics_stale=!0);return a},h=function(a){return $("<div>").append($(a)).html()};c.$watch("lyrics_ctrl.correction",function(a,b){a&&e.track("Started Line Correction");b&&b.anchor.hasClass("line-correction")&&b.anchor.replaceWith(b.original.html)});
c.$watch("current_referent",function(a){a&&(d.correction=null)});c.$watch("lyrics_data",function(a){a&&f(a)})}],controllerAs:"lyrics_ctrl",link:function(a,b,e,f,g){var x=h(a,e),w=b.find("section");f.lyrics_anchorer=new c({container:w,get_state:function(){return{range:f.selection_range,referent:a.current_referent,reference_element:a.current_referent?a.reference_elements[a.current_referent.id]:null}},scope:a,song:a.song});a.$watchGroup(["current_referent","lyrics_ctrl.correction","lyrics_ctrl.selection_range"],
function(b){var c=b[0],d=b[1];b=b[2];f.anchor_rect=c&&!c.is_description?a.reference_elements[c.id][0].getBoundingClientRect():d?d.anchor[0].getBoundingClientRect():b?b.getBoundingClientRect():null});x.yields_anchorer({anchorer:f.lyrics_anchorer});f.update_lyrics_selection_safe=function(b){k.restore_selection_if_clobbered(w[0],function(){a.lyrics_section_html(b)})};f.focused_referent_anchor=null;var v=(new m([],{container:w.get(0)})).on("update",function(b){f.focused_referent_anchor=b;a.$digest()}),
C=function(b){w.empty();w.append(b);b=w.find("a[annotation-fragment]").toArray();b=_.chain(b).uniq(function(a){return $(a).data("id")}).filter(function(b){b=Number($(b).data("id"));return a.song_ctrl.referent_has_preview(b)}).value();v.replace(b);a.$emit("content_change")};a.lyrics_section_html=function(b){if(b)a.reference_elements={},C(d(l.prepare_for_display(b,{inread_ad:x.inread_ad,hyper_relevant_video:x.has_hyper_relevant_video}))(a));else return w.html()};g(C);a.lyrics_section_html(w.html());
a.canonical_lyrics_html=x.canonical_lyrics_html}}}]);
angular.module("genius").directive("lyricsSyncKeyboard",["Mousetrap",function(d){return{scope:{showing:"<"},restrict:"E",require:"^lyricsSyncEditor",templateUrl:"lyrics_sync_keyboard.html",link:function(a,b,c,l){a.definitions=[{key:"?",label:"?",description:"Show/Hide Keyboard Shortcuts",action:function(){l.showing_keyboard_shortcuts=!l.showing_keyboard_shortcuts}},{key:"space",label:"Space",description:"Advance Line Selection and Set to Current Time",action:function(){l.can("edit")&&l.can("sync")&&
l.start_or_advance()}},{key:"enter",label:"&#x23ce;",description:"Seek to Current Line",action:function(){l.seek_to_index(l.current_line_index)}},{key:"up",label:"&darr;, &uarr;",description:"Move Line Selection, Adjust Time While Editing",action:function(){if(0!==l.current_line_index){do--l.current_line_index;while(l.current_line()&&l.current_line().hidden)}}},{key:"down",action:function(){if(l.current_line_index!==l.lyrics_synchronization.lines.length-1){do++l.current_line_index;while(l.current_line()&&
l.current_line().hidden)}}},{key:"left",label:"&larr;, &rarr;",description:"Seek Forwards and Backwards",action:function(){l.media_player.api.seek_to_position(l.position-200)}},{key:"right",action:function(){l.media_player.api.seek_to_position(l.position+150)}},{key:"e",label:"e",description:"Pause And Edit Timestamp",action:function(){l.can("edit")&&(l.media_player.api.pause(),l.current_line()._editing_time=!0)}}];_.each(a.definitions,function(a){d.$bind(a.key,a.action,{prevent_default:!0,stop_propagation:!0})});
a.$on("$destroy",function(){_.each(a.definitions,function(a){d.unbind(a.key)})})}}}]);angular.module("genius").directive("markdownPreview",function(){return{restrict:"E",scope:{markdown_content:"<markdownContent"},templateUrl:"markdown_preview.html",controller:["$scope","MarkdownPreviewService",function(d,a){d.$watch("markdown_content",_.throttle(function(){a.create_preview(d.markdown_content).then(function(a){d.html_content=a})},500,{leading:!0,trailing:!0}))}]}});
angular.module("genius").directive("mediaControls",function(){return{restrict:"E",scope:{media:"<mediaPlayer",hide_playpause:"<?hidePlaypause",variants:"<?"},templateUrl:"media_controls.html"}});angular.module("genius").directive("mentionable",["MentionService",function(d){return{restrict:"A",link:function(a,b){b.atwho({at:"@",displayTpl:"<li>${name}</li>",insertTpl:"@${value}",searchKey:"name",callbacks:{remoteFilter:function(a,b){d.autocomplete(a).then(function(a){b(a)})},sorter:function(a,b){return b}}})}}}]);
angular.module("genius").directive("modalWindow",["$compile","$document","$templateCache","Bowser",function(d,a,b,c){var l=b.get("modal_window.html");return{scope:{on_close:"&onClose",variants:"<",hidden:"<"},transclude:!0,link:function(b,k,e,f,m){k=d(l);var h=a.prop("body");b.is_ios=c.ios;k(b,function(a){$(h).append(a);b.close=function(a){b.on_close({reason:a})};b.$on("$destroy",function(){a.remove()})},{parentBoundTranscludeFn:m,futureParentElement:h})}}}]);
angular.module("genius").directive("mousetrapInput",function(){return{restrict:"A",link:function(d,a){a.addClass("mousetrap")}}});angular.module("genius").directive("mutuallyExclusiveSwitches",function(){return{restrict:"E",scope:!0,link:function(d,a,b){var c=b.property;d[c]={};d.$watch(c,function(a,b){1>=_(a).values().compact().size()||_.forEach(a,function(a,e){var f=b[e];a&&!f&&(d[c]=_.pick(d[c],e))})},!0)}}});
angular.module("genius").directive("navigateOnClick",["$window",function(d){return{restrict:"A",link:function(a,b,c){b.on("click",function(){d.location.href=c.navigateOnClick})}}}]);angular.module("genius").directive("newConversation",function(){return{scope:{on_sent:"&onSent",yields_is_dirty:"&yieldsIsDirty"},templateUrl:"new_conversation.html",controller:["$scope","ConversationService",function(d,a){this.did_send=function(b){a.get(b.conversation_id).then(function(a){d.conversation=a})}}],controllerAs:"ctrl"}});
angular.module("genius").directive("ngAutofocus",["$immediate",function(d){return{restrict:"A",link:function(a,b,c){c.ngAutofocus?a.$watch(c.ngAutofocus,function(a){a&&d(b.focus.bind(b),!1)}):d(b.focus.bind(b),!1)}}}]);angular.module("genius").directive("ngBodyClass",function(){var d=$("body");return{restrict:"A",link:function(a,b,c){a.$watch(c.ngBodyClass,function(a){for(var b in a)d.toggleClass(b,!!a[b])},!0);a.$on("$destroy",function(){for(var b in a.$eval(c.ngBodyClass))d.removeClass(b)})}}});
angular.module("genius").directive("ngClickDisabled",function(){return{priority:-2,restrict:"A",link:function(d,a,b){a.on("click",function(a){if(d.$eval(b.ngClickDisabled))return a.stopImmediatePropagation(),!1})}}});
angular.module("genius").directive("notificationInbox",["Pusher","Tracking","Session","Bowser","$window",function(d,a,b,c,l){var g=function(a,b){b.qtip({content:{prerender:!0,url:"/"+a.inbox_name,data:{event_id_to_expand:$.deparam(document.location.search.slice(1)).event_id_to_expand},text:$("<div>",{"class":"qtip-loading-bar",text:"Loading..."})},position:{target:$(".header-actions"),corner:{target:"bottomRight",tooltip:"topRight"}},hide:{effect:{length:0},when:{event:"unfocus"}},show:{effect:{length:0},
delay:0,when:{event:"click"}},style:{name:"light",tip:{corner:"topRight",size:{x:20,y:20}},width:{min:580,max:580},border:{width:0,color:"transparent"},classes:{tooltip:"activity_stream_tooltip mecha--deprecated",content:a.inbox_name+"_tooltip_content",tip:"activity_stream_tip"}},api:{onContentUpdate:a.mark_visible_as_read,onShow:a.$apply.bind(a,a.record_inbox_shown),onHide:a.$apply.bind(a,a.record_inbox_hidden)}})};return{scope:{inbox_name:"@inboxName",abbreviate_after:"@abbreviateAfter",sync_count_to_title:"<syncCountToTitle"},
restrict:"E",templateUrl:"notification_inbox.html",controller:["$scope",function(b){angular.extend(b,{reload_inbox_tooltip:function(){b.qtip_element.reloadTooltip()},record_inbox_shown:function(){a.track("Inbox Open",{inbox_name:b.inbox_name});b.inbox_tooltip_open=!0;b.mark_visible_as_read()},record_inbox_hidden:function(){b.inbox_tooltip_open=!1;b.new_events_available&&(b.reload_inbox_tooltip(),b.new_events_available=!1)},mark_visible_as_read:function(){var a=$("form#mark_"+b.inbox_name+"_read");
a.length&&b.inbox_tooltip_open&&($.post(a.attr("action"),a.serialize()),a.remove())},notify_new_events:function(){b.inbox_tooltip_open?b.new_events_available=!0:b.reload_inbox_tooltip()},go_to_full_page_if_mobile:function(){c.mobile&&(l.location="/inboxes/"+b.inbox_name)}})}],link:function(a,e){a.inbox_tooltip_open=!1;a.new_events_available=!1;a.qtip_element=e.find(".notification_inbox");c.mobile||g(a,a.qtip_element);d.subscribe(b.current_user.pusher_channel,"new-"+a.inbox_name.replace(/_/g,"-")+
"-event",function(){a.notify_new_events()});d.subscribe(b.current_user.pusher_channel,"inbox-marked-read",function(b){b.inbox===a.inbox_name&&a.notify_new_events()});$("."+a.inbox_name+"_tooltip_content").live("ajax:complete",a.mark_visible_as_read)}}}]);angular.module("genius").directive("odometer",["Odometer",function(d){return{restrict:"E",scope:{value:"<",options:"<"},link:function(a,b){var c=new d(_.merge({el:b[0],value:a.value},a.options));a.$watch("value",function(a){c.update(a)})}}}]);
angular.module("genius").directive("onHoverWithNoDigest",function(){return{restrict:"A",link:function(d,a,b){a.hover(function(){d.$eval(b.onHoverWithNoDigest,{hover:!0})},function(){d.$eval(b.onHoverWithNoDigest,{hover:!1})})}}});angular.module("genius").directive("onInnerHeightChange",[function(){return{restrict:"A",link:function(d,a,b){d.$watch(function(){return a.innerHeight()},function(a){d.$eval(b.onInnerHeightChange,{height:a})})}}}]);
angular.module("genius").directive("onLoad",function(){return{restrict:"A",link:function(d,a,b){a.on("load",function(){d.$apply(function(){d.$eval(b.onLoad)})})}}});
angular.module("genius").directive("openInApp",["$window","Tracking","Bowser","AppConfig",function(d,a,b,c){return{restrict:"E",templateUrl:"open_in_app.html",scope:{iosDeepLink:"<",placement:"@"},link:function(l,g){l.is_ios=b.ios;g.on("click",function(){l.hasTriedToOpenApp||(l.hasTriedToOpenApp=!0,a.track("Clicked Open in App"),d.location=l.iosDeepLink,l.appStoreUrl=c.app_store_url)})}}}]);
angular.module("genius").directive("openLinksInNewWindow",function(){return{restrict:"A",link:function(d,a){a.on("click","a:not([target])",function(){this.target="_blank"})}}});angular.module("genius").directive("placeholderSpinner",function(){return{restrict:"E",scope:{placeholderClasses:"@",variants:"<variants"},templateUrl:"placeholder_spinner.html"}});angular.module("genius").directive("placeholderText",function(){return{restrict:"E",templateUrl:"placeholder_text.html"}});
angular.module("genius").directive("placeholderUserBadge",function(){return{restrict:"E",scope:{size:"@"},templateUrl:"user_badge.html",link:function(d){d.user={name:"username",iq:"1738",avatar:{thumb:{url:""}}}}}});angular.module("genius").directive("playPauseButton",function(){return{restrict:"E",templateUrl:"play_pause_button.html",scope:{playing:"<",loading:"<"}}});
angular.module("genius").directive("positionBeside",["$window",function(d){var a=function(b,c,d){var g=b[0].getBoundingClientRect().left+b.width()/2,g=$(document.elementFromPoint(g,c));if(!g.length||b.is(g)||b.find(g).length)return c;c=g[0].getBoundingClientRect();return a(b,d?c.top-1:c.bottom+1,d)};return{restrict:"A",link:function(b,c,l){b.$watch(l.positionBeside,function(g){var k;var e=!!b.$eval(l.positionForMaximumVisibility);if(g){var f=c.offsetParent(),m=f[0].getBoundingClientRect(),h=c.height();
k=m.top;m=m.bottom;e&&(k=a(f,Math.max(k,0)),m=a(f,Math.min(m,d.innerHeight-1),!0));g=g.top+(g.height-h)/2;h=g+h-m;0<h&&(g-=h);k-=g;0<k&&(g+=k);k=g}else k=0;c.offset({top:k+$(d).scrollTop()})})}}}]);angular.module("genius").directive("preload",["PreloadCache",function(d){return{restrict:"E",priority:1E4,link:function(a,b){var c=JSON.parse(b.find("preload-content").attr("data-preload_data"));angular.forEach(c,function(b,c){d[c]=a[c]=b});b.remove()}}}]);
angular.module("genius").directive("preventDefaultClick",function(){return{priority:-1,restrict:"A",link:function(d,a){a.on("click",function(a){a.preventDefault();a.stopPropagation()})}}});angular.module("genius").directive("preventDefaultKeydown",function(){return{restrict:"A",link:function(d,a,b){var c=_.map(b.preventDefaultKeydown.split(" "),Number);a.on("keydown",function(a){_.includes(c,a.which)&&a.preventDefault()})}}});
angular.module("genius").directive("proxiedImage",function(){return{restrict:"A",require:"ngModel",link:function(d,a,b,c){c.$formatters.push(function(a){if(!a)return"";var b={};try{var c=new URL(a);c.hostname.match(/\.embed\.ly$/)&&_.each(c.search.substr(1).split("&"),function(a){a=a.split("=");b[decodeURIComponent(a[0])]=decodeURIComponent(a[1])});return b.url||a}catch(d){return a}})}}});
angular.module("genius").directive("pusher",["Pusher",function(d){return{scope:{channel:"@pusherChannel",event_name:"@pusherEventName",updateCallback:"&pusherUpdate",enabled:"="},link:function(a){var b=function(){d.subscribe(a.channel,a.event_name,function(b){a.updateCallback({value:b.value})})};void 0===a.enabled&&(a.enabled=!0);a.enabled&&b();a.$watch("enabled",function(a,d){a&&!d&&b()})}}}]);
angular.module("genius").directive("pyongButton",function(){return{restrict:"E",scope:{pyongable:"<object",type:"@",onUnauthorized:"&",variants:"<",icon_template:"@iconTemplate"},templateUrl:"pyong_button.html",controllerAs:"ctrl",controller:["$scope","PyongService","Session",function(d,a,b){var c=d.pyongable;this.pyonged=function(){return b.user_signed_in?c.current_user_metadata.interactions.pyong:!1};this.pyong=function(){if(!b.user_signed_in)return d.onUnauthorized();this.pyonged()||(this.show_pyong_form=
!0,c.pyonged=this.clicked_pyong=!0,c.pyongs_count+=1,a.pyong(d.type,c.id).then(function(a){c.current_user_metadata.interactions.pyong=a.current_user_metadata.interactions.pyong;c.pyongs_count=a.pyongs_count}).catch(function(){--c.pyongs_count;c.pyonged=!1}))}}]}});
angular.module("genius").directive("pyongForm",["PyongService",function(d){return{restrict:"E",scope:{id:"<",type:"<",onComplete:"&"},templateUrl:"pyong_form.html",link:function(a){a.submit=function(b){a.disabled=!0;d.finalizePyong(a.type,a.id,b).then(function(){a.onComplete()}).finally(function(){a.disabled=!1})}}}}]);$.browser={};
angular.module("genius").directive("quickSearch",["Tracking",function(d){return{restrict:"A",link:function(a,b){b.autocomplete("/search/quick.js",{delay:250,scrollHeight:500,matchSubset:!1,max:20,minChars:4,selectFirst:!1,resultsClass:"ac_results quick_search-results",formatResult:function(a){return a[1]?"Loading...":" "}}).result(function(a,b){b&&b[1]&&($("form.global_search :submit").attr("disabled","disabled"),d.track_with_timeout("Search Result Tap",function(){window.location.href=b[1]}))})}}}]);
angular.module("genius").directive("radioEdit",["Session","AppConfig","$document","$rootScope","$immediate",function(d,a,b,c,l){var g=["*"],k=new RegExp("\\b("+a.bad_words.map(_.escapeRegExp).join("|")+")\\b","ig"),e=function(a){return a[0]+_.chunk(a.slice(1).split(""),g.length).map(function(a){return _.shuffle(g).slice(0,a.length).join("")}).join("")},f=function(a){for(var c=b[0].createTreeWalker(a,NodeFilter.SHOW_TEXT,null,!1);a=c.nextNode();)a.nodeValue=a.nodeValue.replace(k,function(a){return e(a)})};
return{restrict:"A",link:function(){d.user_signed_in||(c.$on("content_change",function(){f(b[0])}),l(function(){f(b[0])}))}}}]);angular.module("genius").directive("referentFragmentContainer",["ReferentHelper",function(d){return{templateUrl:"referent_fragment_container.html",restrict:"E",transclude:{referentHeader:"?referentHeader",referentFragment:"referentFragment"},scope:{referent:"<object"},link:function(a){a.$watch("referent.classification",function(b){a.referent.display_mode=d.display_mode_by_classification(b)})}}}]);
angular.module("genius").directive("releaseDate",function(){return{templateUrl:"release_date.html",restrict:"E",scope:{date_components:"<dateComponents"}}});angular.module("genius").directive("removeClassOnAngularLoad",function(){return{restrict:"A",link:function(d,a,b){a.removeClass(b.removeClassOnAngularLoad)}}});angular.module("genius").directive("roleIcon",function(){return{scope:{role:"<",hasChecky:"<"},templateUrl:"role_icon.html"}});
angular.module("genius").directive("roleSelectionDialog",["AppConfig",function(d){return{restrict:"E",templateUrl:"role_selection_dialog.html",scope:{prompt:"@",save:"&",saving:"<",error:"<"},link:function(a){a.available_roles=d.available_roles;a.backing={};a.submit=function(){var b=_(a.backing).map(function(a,b){if(a)return b}).compact().value();a.save({selected_roles:b})}}}}]);
angular.module("genius").directive("scrollFromBottom",function(){return{restrict:"A",link:function(d,a){var b=new MutationObserver(function(){var b=a.prop("scrollHeight");a.scrollTop(a.scrollTop()+b-c);c=b}),c=a.prop("scrollHeight");b.observe(a[0],{childList:!0,subtree:!0});d.$on("$destroy",function(){b.disconnect()})}}});
angular.module("genius").directive("scrollPoint",["ScrollPoint",function(d){return{restrict:"A",link:function(a,b,c){var l=c.scrollPoint;d.register(l,b);a.$on("$destroy",function(){d.unregister(l,b)})}}}]);angular.module("genius").directive("scrollToBottomWhen",["$immediate",function(d){return{restrict:"A",link:function(a,b,c){a.$watch(c.scrollToBottomWhen,function(a,c){a&&!c&&d(function(){b.scrollTop(b.prop("scrollHeight"))},!1)})}}}]);
angular.module("genius").directive("scrollToTopOnChange",function(){return{restrict:"A",scope:{scrollToTopOnChange:"<"},link:function(d,a){d.$watch("scrollToTopOnChange",function(){a.scrollTop(0)})}}});
angular.module("genius").directive("scrollableData",[function(){return{restrict:"E",templateUrl:"scrollable_data.html",transclude:{empty:"?empty",show_more:"?showMore"},scope:!0,link:{pre:function(d,a,b,c){c.get_preloaded_data=function(){return d.$eval(b.preload)||[]};c.empty_message=b.emptyMessage;c.scroll_mechanism=b.scrollMechanism;c.repeat_with=b.repeatWith;c.on_show_more=b.onShowMore;c.on_scroll_complete=b.onScrollComplete;c.button_classes=b.buttonClasses?b.buttonClasses:"square_button";c.start_collapsed=
d.$eval(b.startCollapsed);c.eval_on_empty=b.onEmpty;c.unique_by=b.uniqueBy;var l=d.$eval(b.autoReset);d.$watch(b.src,function(a){c.src=a;l&&c.src.reset();c.reset()})}},controller:["$scope",function(d){var a=this;this.reset=function(){var b=a.get_preloaded_data();a.models=_.clone(b);a.has_next=a.src.has_next;a.loading=!1;!a.has_next()||b.length||a.start_collapsed||a.load_next()};this.load_next=function(){if(!a.loading){a.loading=!0;d.$eval(a.on_show_more);var b=a.models;a.src.next().then(function(a){b.push.apply(b,
a);d.$root.$$phase||d.$digest()}).then(function(){a.unique_by&&(a.models=_.uniq(a.models,a.unique_by));a.loading=!1;0!==a.models.length||a.has_next()||d.$eval(a.eval_on_empty)})}};d.$watch("$scrollable_data_ctrl.src.has_next()",function(b){b||d.$eval(a.on_scroll_complete)})}],controllerAs:"$scrollable_data_ctrl"}}]);
angular.module("genius").directive("scrubber",["$document","$timeout",function(d,a){var b="ontouchstart"in window||0<navigator.MaxTouchPoints||0<navigator.msMaxTouchPoints;return{scope:{scrubPercentage:"=",scrubbed:"&",scale:"@"},link:function(c,l){var g=parseFloat(c.scale||"1"),k=function(a){var b=l.width()*g;a=Math.max(0,Math.min(b,a-l.offset().left));c.scrubbed({percentage:a/b})};l.on("click",function(a){k(a.pageX);return!1});var e=b?{start:"touchstart",end:"touchend",move:"touchmove"}:{start:"mousedown",
end:"mouseup",move:"mousemove"},f=function(a){if(a.pageX)return a.pageX;a=a.originalEvent;return"touchend"===a.type?a.changedTouches[0].pageX:a.touches[0].pageX};l.on(e.start,function(){var b=l.width()*g,h=function(a){var d=Math.max(0,Math.min(b,f(a)-l.offset().left));c.$apply(function(){c.scrubPercentage=d/b})};d.on(e.move,h);d.one(e.end,function(b){b.originalEvent.defaultPrevented||(k(f(b)),d.off(e.move,h),a(function(){delete c.scrubPercentage},500,!1))})})}}}]);
angular.module("genius").directive("searchForm",["Tracking","$location","SearchService","$immediate",function(d,a,b,c){return{restrict:"E",templateUrl:"search_form.html",scope:{style:"@searchStyle"},link:function(l,g){var k=g.find("input.quick_search");l.unfocus=function(){l.focused&&(d.track("Search Cancel"),l.focused=!1)};l.focus=function(){l.focused||(d.track("Search Page View"),l.focused=!0,k.focus())};Rx.Observable.$watch(l,"search_text").throttleTime(500).switchMap(function(a){return a?Rx.Observable.fromPromise(b.multi(a)).pluck("sections"):
Rx.Observable.of(null)}).subscribe(function(a){c(function(){l.sections=a})});l.submit_form=function(){l.focused&&(l.submitting=!0,l.search_text="Loading...",d.track_with_timeout("Search More Results Page View",function(){g.find("form").submit()}))};"/gastly"===a.path()&&(l.search_text=a.search().q)}}}]);angular.module("genius").directive("selectAllOnClick",function(){return{restrict:"A",link:function(d,a){a.on("click",function(){this.select()})}}});
angular.module("genius").directive("setClassBeforeNavigate",["$immediate","Bowser","$window",function(d,a,b){return{restrict:"A",link:function(c,l,g){l.on("click",function(c){!g.href||c.metaKey||a.windows&&c.ctrlKey||(l.addClass(g.setClassBeforeNavigate),c.preventDefault(),d(function(){b.location=g.href}))})}}}]);
angular.module("genius").directive("setCookieAndCloseOnClick",["Tracking",function(d){return{require:"^displayUnlessCookie",link:function(a,b,c,l){b.on("click",function(){d.track(a.$parent.name);l.set_cookie_and_close();a.$apply();return!1})}}}]);angular.module("genius").directive("setDesiredLocation",["$window","Cookies",function(d,a){return{restrict:"A",link:function(b,c,l){c.click(function(){a.put("desired_location",d.location.href,{path:"/"})})}}}]);
angular.module("genius").directive("shareButtons",function(){return{scope:{song:"<"},templateUrl:"share_buttons.html",controllerAs:"ctrl",controller:function(){}}});angular.module("genius").directive("showArrowAtOffset",function(){return{restrict:"A",link:function(d,a){d.show_arrow_at_offset=function(b){return b>a.position().top}}}});angular.module("genius").directive("showIfBrowser",["Bowser",function(d){return{restrict:"A",link:function(a,b,c){d[c.showIfBrowser]||b.hide()}}}]);
angular.module("genius").directive("simpleDatetimeInput",["$filter",function(d){return{restrict:"E",scope:{},require:"ngModel",templateUrl:"simple_datetime_input.html",controller:["$scope",function(a){a.datetime={};var b=(new Date).getFullYear();_.extend(a,{years:_.range(1900,b+100).reverse(),months:"January February March April May June July August September October November December".split(" ").map(function(a,b){return{name:a,number:b+1}}),days:_.range(1,32),hours:_.range(0,24),minutes:_.range(0,
60)})}],link:function(a,b,c,l){var g=d("cast_to_date");l.$render=function(){var b=g(l.$modelValue)||new Date;a.datetime={year:b.getFullYear(),month:b.getMonth()+1,day:b.getDate(),hour:b.getHours(),minute:b.getMinutes()}};l.$render();a.$watch(function(){if(a.datetime&&!_.any(a.datetime,function(a){return void 0===a}))return a.datetime.year+"/"+a.datetime.month+"/"+a.datetime.day+" "+a.datetime.hour+":"+a.datetime.minute},function(a){a&&l.$setViewValue(a)})}}}]);
angular.module("genius").directive("skin",["Bindings",function(d){var a=d.resolver({skin:"<",skin_template:"<skinTemplate"});return{restrict:"A",link:function(b,c,d){var g=a(b,d);b.$watch(function(){return _.chain(g.skin_template).mapValues(function(a){return _.get(g.skin,a)}).omitBy(function(a){return null==a}).value()},function(a,b){b&&b!==a&&_.each(b,function(a,b){c.css(b,"")});a&&c.css(a)},!0)}}}]);
angular.module("genius").directive("slideDown",["$immediate",function(d){return{restrict:"A",link:function(a,b,c){b.hide();d(function(){b.slideDown(200,function(){"slideDownCallback"in c&&a.$apply(function(){a.$eval(c.slideDownCallback)})})},!1)}}}]);
angular.module("genius").directive("slideOverPane",function(){return{restrict:"E",templateUrl:"slide_over_pane.html",transclude:!0,scope:{condition:"<",closeOn:"&",darkBackground:"<",scrollToTopTrigger:"<"},controller:["$scope","Bowser",function(d,a){a.ios&&(d.is_ios=!0)}]}});angular.module("genius").directive("slideUpOn",["$immediate",function(d){return{restrict:"A",link:function(a,b,c){a.$watch(c.slideUpOn,function(a){a&&d(function(){b.slideUp(200)},!1)})}}}]);
angular.module("genius").directive("songActivity",["SongService",function(d){return{templateUrl:"song_activity.html",restrict:"E",scope:{song:"<"},controllerAs:"ctrl",controller:["$scope",function(a){var b=0,c=0;this.loading_iq_earners=this.loading_contributors=!0;this.load_contributors=function(){d.load_contributor_data(a.song.id).then(function(d){c+=d.iq_earners.length;a.contributors=d;a.has_more_iq_earners=c<d.iq_earners_total;b+=1}).finally(function(){a.ctrl.loading_contributors=!1;a.ctrl.loading_iq_earners=
!1})};this.load_more_iq_earners=function(){a.loading_contributors||(this.loading_iq_earners=!0,d.load_iq_earners(a.song.id,{page:b}).then(function(d){c+=d.iq_earners.length;a.contributors.iq_earners=_.uniq(a.contributors.iq_earners.concat(d.iq_earners),"user.id");a.has_more_iq_earners=c<d.iq_earners_total;b+=1}).finally(function(){a.ctrl.loading_iq_earners=!1}))};this.load_contributors();var l,g,k=function(){a.line_items=[];a.done_loading=!1;l=1;this.load_next_page()}.bind(this);this.load_next_page=
function(){g||(g=d.line_items(a.song.id,l).then(function(b){var c=b.line_items;a.line_items.push.apply(a.line_items,c);g=void 0;c.length?(l=b.next_page,l||(a.done_loading=!0)):a.done_loading=!0}))};this.should_paginate=function(){return!g&&!a.done_loading};k()}]}}]);
angular.module("genius").directive("songAdminMenu",function(){return{restrict:"E",templateUrl:"song_admin_menu.html",controller:["$scope",function(d){d.actions="publish unpublish hide unhide award_transcription_iq remove_transcription_iq reindex pin_to_homepage_hot_songs unpin_from_homepage_hot_songs pin_to_hot_songs unpin_from_hot_songs allow_in_hot_songs exclude_from_hot_songs view_annotation_engagement_data edit_spotify_annotations_for view_lyrics_synchronization destroy verify_lyrics disable_media enable_media".split(" ")}],link:function(d){d.$watch("song.current_user_metadata",
function(){d.has_admin_items=_(d.actions).some(function(a){return d.can_perform(a)})})}}});angular.module("genius").directive("songAlbum",function(){return{scope:{album:"<",tracks:"<",current_song:"<currentSong"},restrict:"E",templateUrl:"song_album.html"}});
angular.module("genius").directive("songMedia",[function(){return{restrict:"E",scope:!0,templateUrl:"song_media.html",controllerAs:"song_media_ctrl",controller:["$scope","Tracking",function(d,a){var b=this;this.audio_exists=function(){return d.audio_media()&&(!d.media_player_audio.state||!d.media_player_audio.state.has_errored)};this.video_exists=function(){return d.video_media()&&(!d.media_player_video.state||!d.media_player_video.state.has_errored)};this.fact_track_exists=function(){return d.can_perform("watch_fact_track")};
this.no_media_exists=function(){return!this.fact_track_exists()&&!this.video_exists()&&!this.audio_exists()};this.only_one_playable_media_exists=function(){return 1===_.compact([this.fact_track_exists(),this.video_exists(),this.audio_exists()]).length};this.only_fact_track_exists=function(){return this.fact_track_exists()&&!this.video_exists()&&!this.audio_exists()};this.set_default_media=function(){this.video_exists()?this.active_media="video":this.audio_exists()&&(this.active_media="audio")};this.set_default_media();
d.$watchGroup(["media_player_audio.state.has_errored","media_player_video.state.has_errored","video_media()","audio_media()"],this.set_default_media.bind(this));this.is_audio_active=function(){return"audio"===b.active_media};this.is_video_active=function(){return"video"===b.active_media};this.has_initiated_audio_play=this.has_initiated_video_play=!1;this.play_video=function(){d.media_player_video.api.load_media();d.media_player_video.api.playpause();this.has_initiated_video_play||(a.track("Play featured video",
{properties:{"Video provider":d.video_media().provider}}),this.has_initiated_video_play=!0)};this.play_audio=function(){d.media_player_audio.api.load_media();d.media_player_audio.api.playpause();this.has_initiated_audio_play||(a.track("Play audio",{properties:{"Audio provider":d.audio_media().provider}}),this.has_initiated_audio_play=!0)};this.activate_video=function(){a.track("Switch media to video");this.active_media="video";this.play_video();d.media_player_audio.api&&d.media_player_audio.api.pause()};
this.activate_audio=function(){a.track("Switch media to audio");this.active_media="audio";this.play_audio();d.media_player_video.api&&d.media_player_video.api.pause()}}],link:function(d){d.play_video_fullscreen=function(){var a=$(".song_art_and_video-video-iframe").find("iframe")[0],b=a.requestFullScreen||a.mozRequestFullScreen||a.webkitRequestFullScreen;b&&b.bind(a)()}}}}]);angular.module("genius").directive("songMediaControlsSelector",function(){return{restrict:"E",templateUrl:"song_media_controls_selector.html"}});
angular.module("genius").directive("songMetadata",function(){return{templateUrl:"song_metadata.html",restrict:"E",scope:{song:"<"},controllerAs:"ctrl"}});
angular.module("genius").directive("songMetadataCustomPerformanceRoleInput",function(){return{restrict:"E",templateUrl:"song_metadata_custom_performance_role_input.html",scope:{customPerformanceRoles:"<",isDisabled:"<"},controllerAs:"ctrl",controller:["$scope",function(d){this.remove_custom_performance=function(a){_.pull(d.customPerformanceRoles,a)};this.add_new_custom_performance=function(){d.customPerformanceRoles.push({label:"",artists:[]})}}]}});
angular.module("genius").directive("songMetadataForm",["$window","Session","TagService","I18n",function(d,a,b,c){return{scope:{save:"&onSave",song_was:"<object",expanded_sections:"=expandedSections",yields_is_dirty:"&yieldsIsDirty"},restrict:"E",templateUrl:"song_metadata_form.html",controllerAs:"ctrl",controller:["Tracking","$scope",function(l,g){this.close=function(){!g.expanded_sections||this.song_form.$dirty&&!d.confirm(c.t("song.action_confirmations.dismiss_dirty"))||delete g.expanded_sections};
this.has_permission=function(b){return a.has_permission(b,g.song)};this.submit=function(){g.save({song:g.song}).then(function(){l.track("Metadata Edit",{Source:"Edit"});delete g.expanded_sections}).catch(function(a){this.error=a}.bind(this))};g.song=angular.copy(g.song_was);g.$watch("song_was.updated_by_human_at",function(a,b){a>b&&(this.editable_metadata_stale=!0)}.bind(this));g.available_primary_tags=[];b.primary().then(function(a){g.available_primary_tags=a.map(function(a){return a.id===g.song.primary_tag.id?
g.song.primary_tag:a})})}]}}]);angular.module("genius").directive("songMetadataInputAndLabel",function(){return{restrict:"E",templateUrl:"song_metadata_input_and_label.html",replace:!0,transclude:!0,scope:{label:"@",errors:"<",full:"<",is_disabled:"<isDisabled"}}});angular.module("genius").directive("songPrimaryAlbum",function(){return{restrict:"E",templateUrl:"song_primary_album.html",scope:{album:"<"}}});
angular.module("genius").directive("soundcloud",["$q","Tracking","getScript","Soundcloud",function(d,a,b,c){return{restrict:"E",templateUrl:"soundcloud.html",replace:!0,scope:{yieldsApi:"&",yieldsState:"&",soundcloud_src:"<soundcloudSrc"},link:function(l,g){var k=d.defer(),e=k.promise,f=function(a,b){a.attr("src",b)};d.all([c.player_url_for_src(l.soundcloud_src),b("https://w.soundcloud.com/player/api.js",{cache:!0})]).then(function(a){f(g,a[0].$$unwrapTrustedValue());var b=SC.Widget(g[0]);b.bind(SC.Widget.Events.READY,
function(){b.getDuration(function(a){a?(k.resolve(b),l.duration=a):m.has_errored=!0;l.$apply()})});l.$watch("soundcloud_src",function(a){a&&e.then(function(b){c.oembed_url_for_src(a).then(b.load.bind(b))})})});var m={};l.yieldsState({state:m});var h=function(a,b,c){a.bind(b,function(){l.$apply(c)})},n=_.once(function(){a.track("Soundcloud play")});e.then(function(a){m.is_loaded=!0;h(a,SC.Widget.Events.ERROR,function(){m.has_errored=!0});h(a,SC.Widget.Events.PAUSE,function(){m.is_loaded=!0;m.is_playing=
!1});h(a,SC.Widget.Events.PLAY,function(){n();m.is_loaded=!1;m.is_playing=!0});a.bind(SC.Widget.Events.PLAY_PROGRESS,_.throttle(function(a){l.$apply(function(){m.is_loaded=!0;m.percentage=a.relativePosition;m.time_remaining=l.duration-a.currentPosition})},100))});l.yieldsApi({api:{load_media:function(){},playpause:function(){e.then(function(a){m.is_playing?a.pause():a.play()})},pause:function(){e.then(function(a){a.pause()})},seek_to:function(a){m.percentage=a;e.then(function(b){b.seekTo(l.duration*
a)})}}})}}}]);angular.module("genius").directive("spotifyOnboarding",["Cookies","AppConfig",function(d,a){return{link:function(b,c){d.put("has_hidden_open_in_app_button",1,{path:"/"});b.app_store_url=a.app_store_url;b.jump_below_onboarding=function(){var a=c.position().top+c.outerHeight();$("html, body").animate({scrollTop:a},150)}}}}]);
angular.module("genius").directive("standaloneReferent",function(){return{templateUrl:"standalone_referent.html",restrict:"E",scope:{referent:"<object",variants:"<"},controller:["$scope",function(d){this.disables_user_tooltips=d.variants.disableTooltips}]}});
angular.module("genius").directive("standardRichContent",function(){return{restrict:"E",scope:{html:"<",variants:"<"},templateUrl:"standard_rich_content.html",controller:["$scope","$sce",function(d,a){d.$watch("html",function(b){b?d.trusted_html=a.trustAsHtml(b):delete d.trusted_html})}]}});
angular.module("genius").directive("sticky",["Waypoint","$immediate","Bindings",function(d,a,b){var c=b.resolver({yields_stuck:"&yieldsStuck",sticky:"<"});return{restrict:"A",link:function(b,g,k){var e=c(b,k),f=k.stickyClass,m;m="stickyUseParentAsWrapper"in k?!1:'<div class="'+(k.stickyWrapperClass||"sticky_wrapper")+'">';b.$watch(k.refreshStickyPoints,function(){a(d.refreshAll,!1)});var h=!1,n=function(){h=!h;b.$apply(function(){e.yields_stuck({stuck:h})})};a(function(){var a="undefined"!==typeof e.sticky,
c=new d.Sticky({element:g,wrapper:m,stuckClass:f,offset:k.stickyOffset||"0",handler:n,enabled:!a});a&&b.$watch(function(){return e.sticky},function(){e.sticky?c.waypoint.enable():c.waypoint.disable()})},!1)}}}]);angular.module("genius").directive("stopPropagation",function(){return{restrict:"A",link:function(d,a,b){a.on(b.stopPropagation,function(a){a.stopPropagation()})}}});
angular.module("genius").directive("submitOnCmdEnter",function(){return{restrict:"A",require:"form",link:function(d,a,b,c){a.on("keydown",function(b){13===b.keyCode&&(b.metaKey||b.shiftKey)&&(d.$apply(function(){c.$commitViewValue()}),a.triggerHandler("submit"),b.preventDefault())})}}});
angular.module("genius").directive("tetherDrop",["$immediate","TetherDrop",function(d,a){return{restrict:"E",scope:{containerClasses:"@",position:"@",showOn:"@",visible:"<?",onClose:"&",yieldsApi:"&?"},transclude:"true",link:function(b,c,l,g,k){var e,f=new a({content:e||"",target:c.closest("[tether-drop-target]")[0],position:b.position||"right middle",openOn:b.showOn,remove:!0,loadContentOnDemand:!0,hoverOpenDelay:250,tetherOptions:{constraints:[{to:"window",attachment:"together element",pin:!0}],
classes:{element:b.containerClasses}}});f.once("open",function(){k(function(a){var b=$(f.content);b.hide();e=$("<div>").append(a)[0];b.append(e);d(function(){b.show();f.position()})})});f.on("close",function(){b.onClose()});"visible"in l&&b.$watch("!!visible",function(a){a?f.open():f.close()});b.$watch(function(){f.position()});b.$on("$destroy",function(){f.destroy()});c={hide:function(){f.close()},show:function(){f.open()}};"yieldsApi"in l&&b.yieldsApi({tetherApi:c})}}}]);
angular.module("genius").component("textCorrector",{bindings:{text:"<",cancel:"&",submit:"&",yields_text_corrector:"&yieldsTextCorrector"},templateUrl:"text_corrector.html",controller:["$q","$window","I18n",function(d,a,b){this.submit_form=function(){this.saving=!0;return d.when(this.submit({corrected:this.text})).finally(function(){delete this.saving;this.correction_form.$setPristine()}.bind(this))};this.cancel_correction=function(){if(!this.is_dirty()||a.confirm(b.t("editing.dirty_unload_confirm_box")))this.correction_form.$rollbackViewValue(),
this.correction_form.$setPristine(),this.cancel()};this.yields_text_corrector({text_corrector:{cancel:this.cancel_correction.bind(this)}})}]});
angular.module("genius").directive("textSelectionChanged",["TextSelection",function(d){var a=function(a){for(a=a.commonAncestorContainer;a.nodeType!==Node.ELEMENT_NODE;)a=a.parentNode;return a};return{restrict:"A",scope:{textSelectionChanged:"&"},link:function(b,c){d.$on("selection",function(d,g){var k=g.ranges.filter(function(b){return c[0].contains(a(b))});b.textSelectionChanged({ranges:k})})}}}]);
angular.module("genius").directive("timeAgo",function(){return{restrict:"E",templateUrl:"time_ago.html",scope:{time:"<"}}});
angular.module("genius").directive("timestampInput",["timestamp_for_displayFilter",function(d){return{scope:{timestamp:"=ngModel",ngDisabled:"<"},template:'<input ng-model="string" ng-disabled="ngDisabled" type="text"/>',link:function(a,b){a.$watch("timestamp",function(b){a.string=d(b)});b.find("input").on("blur",function(){var b;(b=a.string)?(b=b.split(":"),b=Math.floor(1E3*(60*parseInt(b[0]||"0",10)+parseFloat(b[1]||"0")))):b=null;a.timestamp=b;a.$apply()})}}}]);
angular.module("genius").directive("tracking",["Tracking","Waypoint",function(d,a){return{restrict:"A",link:function(b,c,l){var g=function(){d.track(l.trackingEvent,b.$eval(l.trackingOptions))};switch(l.tracking){case "scroll_into_view":new a({element:c,handler:function(){g();this.destroy()}});break;default:c.bind(l.tracking,g)}}}}]);
angular.module("genius").directive("tracksLinkWithClass",["$document",function(d){return{restrict:"A",link:function(a,b,c){void 0!==window.mixpanel&&(b.addClass(c.tracksLinkWithClass),mixpanel.track_links("."+c.tracksLinkWithClass,c.withEventName||"clicked_"+c.tracksLinkWithClass,{"from url":d[0].location.href}))}}}]);
angular.module("genius").directive("transcludeInjectingLocalScope",function(){return{restrict:"E",link:function(d,a,b,c,l){if(!l)throw{message:"Illegal use of transcludeInjectingLocalScope directive in the template! No parent directive that requires a transclusion found.",element:a};var g=d.$new();l(g,function(b){a.empty();a.append(b);a.on("$destroy",function(){g.$destroy()})})}}});
angular.module("genius").directive("upwardsInfiniteScroll",["$throttle",function(d){return{restrict:"A",link:function(a,b,c){var l=c.upwardsInfiniteScroll,g=!1;c.infiniteScrollDisabled&&a.$watch(c.infiniteScrollDisabled,function(a){g=a;k()});var k=function(){g||b.scrollTop()<.1*b.height()&&a.$eval(l)};k();b.on("scroll",d(k,250,{leading:!1}))}}}]);
angular.module("genius").directive("userBadge",function(){return{restrict:"E",templateUrl:"user_badge.html",scope:{user:"<object",size:"@",pinned_role:"<pinnedRole",anonymous_user:"<anonymousUser",sponsor:"<",variants:"<"},require:"^?standaloneAnnotation",link:function(d,a,b,c){d.disables_user_tooltips=c&&c.disables_user_tooltips;a=!_.contains(["small","x_small"],d.size);d.is_two_lines=a;d.user&&(d.avatar_url=a?d.user.avatar.small.url:d.user.avatar.thumb.url)}}});
angular.module("genius").directive("userBadgeAndTimestamp",function(){return{restrict:"E",templateUrl:"user_badge_and_timestamp.html",scope:{size:"@",user:"<",pinned_role:"<pinnedRole",anonymous_user:"<anonymousUser",time:"<",sponsor:"<",variants:"<"}}});angular.module("genius").directive("userTooltip",function(){return{restrict:"E",templateUrl:"user_tooltip.html",scope:{user:"<"}}});
angular.module("genius").directive("voters",["VoteService",function(d){return{restrict:"E",templateUrl:"voters.html",scope:{type:"@",object:"<"},link:function(a){a.load=function(){d.load_voters(a.type,a.object.id).then(function(b){a.loaded_voters=!0;a.voters=b;a.object.votes_total=b.votes_total})};a.$on("update_voters",function(b){a.loaded_voters=!1;a.load()});a.load()}}}]);
angular.module("genius").directive("voting",function(){var d={down:-1,up:1};return{restrict:"E",templateUrl:"voting.html",scope:{voteTotalClicked:"&",voteable:"<object",type:"@",onUnauthorized:"&",variants:"<"},controllerAs:"ctrl",controller:["$scope","Session","Tracking","VoteService","Reversible",function(a,b,c,l,g){var k=function(b,c){var m={votes_total:a.voteable.votes_total+((d[b]||0)-(d[c]||0))};a.voteable.has_voters||(m.has_voters=!0);var h=g.modify(a.voteable,m);l.submit_vote(a.type,a.voteable.id,
b).then(function(){a.$emit("vote_saved")}).catch(function(){h();a.voteable.current_user_metadata.interactions.vote=c})};this.submit_vote=function(d){var f=a.voteable.current_user_metadata.interactions.vote;d===f&&(d=void 0);if(!b.user_signed_in)return c.track("Logged out vote attempt"),a.onUnauthorized({vote:d});b.has_permission("vote",a.voteable)&&(a.voteable.current_user_metadata.interactions.vote=d,k(d,f),a.$emit("vote_submitted",a.type,d))}}]}});
angular.module("genius").directive("watchImagesLoaded",["$immediate",function(d){return{restrict:"A",link:function(a,b,c){a.$watch(c.watchImagesLoaded||"ngBindHtml",function(c){c?d(function(){b.waitForImages(function(){a.$apply(function(){a.$emit("images_loaded")})})},!1):a.$emit("images_loaded")})}}}]);
angular.module("genius").directive("webAnnotatorRoleRow",[function(){return{templateUrl:"web_annotator_role_row.html",scope:{on_create:"&onCreate",on_error:"&onError",user_role:"<userRole"},bindToController:!0,controllerAs:"$ctrl",controller:["WebAnnotator","$q",function(d,a){var b=this,c=function(){return _.pick(b.user_role,["user_login","role","page_moderator","auto_feature"])};this.$onInit=function(){this.editing=!this.user_role.id};this.create=function(){b.saving=!0;a.when(b.on_create({params:c()})).then(function(){b.user_role=
{auto_feature:!0}}).catch(function(a){b.on_error({error:a})}).finally(function(){b.saving=!1})};this.save=function(){b.saving=!0;d.update_user_role(b.user_role.id,c()).then(function(a){b.user_role=a;b.editing=!1}).catch(function(a){b.on_error({error:a})}).finally(function(){b.saving=!1})};this.destroy=function(){b.user_role._deleted=!0;d.destroy_user_role(b.user_role.id).catch(function(a){b.on_error({error:a});b.user_role._deleted=!1})}}]}}]);
angular.module("genius").directive("yieldsBoundingBoxHeight",["$immediate",function(d){return{restrict:"A",scope:{yieldsBoundingBoxHeight:"&"},link:function(a,b){d(function(){var c=b[0].getBoundingClientRect().height;a.yieldsBoundingBoxHeight({height:c})})}}}]);
angular.module("genius").directive("youtubePlayer",["$document","YouTube",function(d,a){var b=/http:\/\/www\.youtube\.com\/watch\?v=(.*)/i;return{restrict:"E",scope:{src:"<?",start:"<?",controls:"<?",yields_api:"&yieldsApi",yields_state:"&yieldsState",eager_load:"<?eagerLoad",autoplay:"<?"},link:function(c,l){c.state={};var g=d[0].createElement("div");l[0].appendChild(g);var k=new a(g,{controls:c.controls});c.$watch("src",function(a){a=a.match(b)[1];k.cue_video_by_id(a,c.start||0);c.eager_load&&(k.api.load_media(),
c.autoplay&&(k.api.mute(),k.api.playpause()))});c.yields_api({api:k.api});c.yields_state({state:k.state})}}}]);angular.module("genius").factory("Airbrake",["$window","AppConfig",function(d,a){var b=d.Airbrake;b.setProject(a.airbrake_project_id,a.airbrake_key);b.setEnvironmentName(a.env);a.airbrake_development_mode&&b.addFilter(function(){return null});return b}]);angular.module("genius").constant("AppConfig",window.APP_CONFIG);
angular.module("genius").factory("Bindings",[function(){var d=function(a,b){var c=a[0],d=a.slice(1)||b,c={"@":function(){return this.attrs[d]},"<":function(){return this.scope.$eval.call(this.scope,this.attrs[d])},"&":function(){return this.scope.$eval.bind(this.scope,this.attrs[d])}}[c];if(!c)throw Error("invalid attribute specification passed to Bindings service: '"+d+"'");return c};return{resolver:function(a){var b=function(a,b){this.scope=a;this.attrs=b};_.each(a,function(a,l){Object.defineProperty(b.prototype,
l,{get:d(a,l)})});return function(a,d){return new b(a,d)}}}}]);angular.module("genius").factory("Cookies",function(){return{get:function(d){return $.cookie(d)},getObject:function(d){if(d=$.cookie(d))return JSON.parse(d)},getAll:function(){return $.cookie()},put:function(d,a,b){return $.cookie(d,a,b)},putObject:function(d,a,b){return $.cookie(d,JSON.stringify(a),b)},remove:function(d,a){return $.removeCookie(d,a)}}});
angular.module("genius").factory("CursoredScrollableDataFactory",[function(){return function(){return function(d,a,b,c,l){var g=this;void 0===b&&(b={});void 0===c&&(c=void 0);void 0===l&&(l="cursor");this.cursor_name=l;this.next_cursor=c;this.params=_.clone(b);this.next=function(){var b={};b[g.cursor_name]=g.next_cursor;return d(_.extend(b,g.params)).then(function(b){g.next_cursor=b[g.cursor_name];return b[a]})};this.has_next=function(){return g.next_cursor||"undefined"===typeof g.next_cursor};this.reset=
function(){g.next_cursor=c}}}()}]);angular.module("genius").factory("$debounce",["$timeout",function(d){return function(a,b){var c;return function(){d.cancel(c);c=d(a,b)}}}]);
angular.module("genius").factory("Filepicker",["$window","AppConfig","$q",function(d,a,b){var c=d.filepicker;c.setKey(a.filepicker_api_key);var l=["image/jpeg","image/png","image/gif"],g={policy:a.filepicker_policy,signature:a.filepicker_signature},k=["IMAGE_SEARCH","COMPUTER","URL"];return function(){function d(a){void 0===a&&(a={});this.allowed_mime_types=a.allowed_mime_types||l;this.services=a.services||k;this.open_to=a.open_to||"IMAGE_SEARCH"}d.prototype.allows_mime_type=function(a){return this.allowed_mime_types.includes((a||
"").toLowerCase())};d.prototype._store=function(a,d){var e=this,k=angular.extend(angular.copy(g),d);k.container=a.container;var l=b.defer();c.store(a,k,function(a){return l.resolve(e._construct_s3_url(a.key))},function(a){return l.reject(a)},function(a){return l.notify(a)});return l.promise};d.prototype._read_blob=function(a){var c=b.defer(),d=new FileReader;d.onloadend=function(){return c.resolve(d.result)};d.readAsBinaryString(a);return c.promise};d.prototype._construct_s3_url=function(b){return"https://s3.amazonaws.com/"+
a.filepicker_s3_image_bucket+"/"+encodeURIComponent(b)};d.prototype.store=function(a,b){var c=this;return a instanceof Blob?this._read_blob(a).then(function(a){return c._store(btoa(a),angular.extend(b,{base64decode:!0}))}):this._store(a,b)};d.prototype.pick=function(a){var d=b.defer();a=angular.extend(angular.copy(g),{mimetypes:this.allowed_mime_types,services:this.services,openTo:this.open_to},a);c.pick(a,function(a){c.stat(a.url,angular.extend(angular.copy(g),{width:!0,height:!0}),function(b){return d.resolve({blob:a,
dimensions:b})})});return d.promise};d.prototype.pick_and_store=function(a){var d=this,e=b.defer();a=angular.extend(g,{mimetypes:this.allowed_mime_types,services:this.services,openTo:this.open_to},a);c.pickAndStore(a,{},function(a){e.resolve(d._construct_s3_url(a[0].key))});return e.promise};return d}()}]);angular.module("genius").factory("GlobalErrorBus",["$rootScope",function(d){return d.$new("isolate")}]);
angular.module("genius").factory("GlobalErrorInterceptor",["GlobalErrorBus","$q",function(d,a){return{responseError:function(b){if(429===b.status){var c=_.get(b,"data.response.message.html")||"<h1>You hit a rate limit!</h1>";d.$emit("global_error",c)}return a.reject(b)}}}]);angular.module("genius").factory("$immediate",["$timeout",function(d){return function(a,b){return d(a,0,b)}}]);
angular.module("genius").factory("MixedScrollableDataFactory",["$q",function(d){return function(){return function(a){var b=this;this.scrollable_data_objects=a;this.reset=function(){_.each(b.scrollable_data_objects,function(a){a.src.reset()})};this.next=function(){return d.all(_.map(b.scrollable_data_objects,function(a){return a.src.next().then(function(b){return{type:a.type,models:b}})}))};this.has_next=function(){return _.some(b.scrollable_data_objects,function(a){return a.src.has_next()})}}}()}]);
angular.module("genius").factory("OnsiteInterceptor",function(){return{request:function(d){var a;a=d.url;var b=document.createElement("a");b.href=a;a=b.hostname;a&&a!==window.location.hostname||(d.headers["X-Requested-With"]="XMLHttpRequest","GET"!==d.method&&(d.headers["X-CSRF-Token"]=$.cookie("_csrf_token")));return d}}});
angular.module("genius").factory("PagedScrollableDataFactory",[function(){return function(){return function(d,a,b,c,l){var g=this;void 0===b&&(b={});void 0===c&&(c=1);void 0===l&&(l=_.noop);this.next_page=c;this.params=_.clone(b);this.next=function(){return d(_.extend({page:g.next_page},g.params)).then(function(b){g.next_page=b.next_page;g.total_entries=b.total_entries;l(b[a]);return b[a]})};this.has_next=function(){return g.next_page};this.reset=function(){g.next_page=1}}}()}]);
angular.module("genius").factory("parse_time_string",function(){return function(d){if(!d)return null;d=d.split(/\D/);var a=d[2]?parseInt((d[2]+"000").slice(0,3)):0;return 6E4*parseInt(d[0])+1E3*parseInt(d[1])+a}});
angular.module("genius").factory("Preloader",["$q",function(d){var a=function(a){this.bulk_load_function=a};a.prototype={cache:{},insert:function(a,c){this.cache[a]=d.when(c)},load:function(a){this.bulk_load([a]);return this.cache[a]},filter_unloaded:function(a){var c=this.cache;return a.filter(function(a){return!c[a]})},bulk_load:function(a){var c=this.cache;a=this.filter_unloaded(a);var d=a.length?this.bulk_load_function(a):void 0;a.forEach(function(a){c[a]=d.then(function(b){return b[a]})})}};
return a}]);
angular.module("genius").factory("ReferentLocator",["$document","AppConfig","string_to_symbol_array",function(d,a,b){var c=a.annotator_context_length,l=function(a){var b=d[0].createRange();b.selectNodeContents(a);return b};return{calculate_referent_location:function(a,d){var e;e=l(d);e.setEnd(a.startContainer,a.startOffset);e=e.cloneContents();$(e).find("[avoid-selection]").remove();e=l(e).toString().replace(/\s+/g,"");e=b(e);var f=e.slice(-c),m;m=l(d);m.setStart(a.endContainer,a.endOffset);m=m.toString().replace(/\s+/g,
"");m=b(m).slice(0,c);return{previous_context:f.join(""),text:a.toString(),next_context:m.join(""),total_offset:e.length}},calculate_image_location:function(a,b){return{image_url:b.src,occurrence:$(a).find('img[src="'+b.src+'"]').index(b)+1}}}}]);angular.module("genius").factory("RetryFailureInterceptor",["$injector","$q",function(d,a){return{responseError:function(b){var c=b.config;return c.retries&&0<c.retries?(--c.retries,d.get("$http")(c)):a.reject(b)}}}]);
angular.module("genius").factory("SessionConfig",["$window",function(d){return d.SESSION_CONFIG}]);
angular.module("genius").factory("TextSelection",["$window","$document","$rootScope","$immediate","XpathRange",function(d,a,b,c,l){var g=b.$new(),k=function(a,b){return a&&b&&a.length===b.length?_.all(_.zip(a,b),function(a){var b=a[0];a=a[1];return b.startOffset===a.startOffset&&b.endOffset===a.endOffset&&b.startContainer.isEqualNode(a.startContainer)&&b.endContainer.isEqualNode(a.endContainer)}):!1},e=function(){var b;b=(d.getSelection||a[0].getSelection||$.noop)();b=void 0===b||!b.rangeCount||b.isCollapsed?
void 0:b;if(!b)return[];for(var c=[],e=0;e<b.rangeCount;e++){var f=b.getRangeAt(e);.1<f.getBoundingClientRect().width&&c.push(f)}return c},f=[],m=function(){var a=e();k(a,f)||(f=a,g.$emit("selection",{ranges:a}))};g.restore_selection_if_clobbered=function(a,b){var c=e(),d;c.length&&(d=l.fromRange(c[0],a));c=b();if(d&&!e().length){d=l.toRange(d.start,d.startOffset,d.end,d.endOffset,a);var f=getSelection();f.removeAllRanges();f.addRange(d);m()}return c};a.on("mouseup keyup",function(a){(!a.keyCode||
37<=a.keyCode&&40>=a.keyCode)&&c(m)});return g}]);angular.module("genius").factory("$throttle",["$rootScope",function(d){return function(a,b,c){return _.throttle(function(){var b=arguments;d.$apply(function(){a.apply(null,b)})},b,c)}}]);
angular.module("genius").factory("TimestampedScrollableDataFactory",[function(){return function(){return function(d,a,b,c){var l=this;void 0===b&&(b={});void 0===c&&(c=Math.floor((new Date).getTime()/1E3));this.reset=function(){l.timestamp_for_next_page=c};this.reset();this.params=_.clone(b);this.next=function(){return d(_.extend({timestamp_for_next_page:l.timestamp_for_next_page},l.params)).then(function(b){l.timestamp_for_next_page=b.timestamp_for_next_page;return b[a]})};this.has_next=function(){return l.timestamp_for_next_page}}}()}]);
angular.module("genius").factory("YouTube",["$rootScope","$q","$timeout","$window","getScript","wait_for_global",function(d,a,b,c,l,g){var k={controls:0,enablejsapi:1,fs:0,iv_load_policy:3,modestbranding:1,rel:0,showinfo:0},e=a.defer(),f=e.promise.then(function(){return l("https://www.youtube.com/player_api",{cache:!0})}).then(function(){return g("YT.Player")});return function(){function g(b,c){var m=this;this.state={};this.deferred_load=a.defer();this.player=this.deferred_load.promise.then(function(){e.resolve();
return f}).then(function(e){return a(function(a){var f=new e(b,{height:"100%",width:"100%",playerVars:_.defaults({controls:c.controls?2:0},k),events:{onReady:function(){a(f)},onStateChange:function(){d.$apply(m.update_state.bind(m))},onError:function(){d.$apply(function(){m.state.has_errored=!0})}}})})})}g.prototype.load=function(){this.deferred_load.resolve();return this.player};g.prototype.cue_video_by_id=function(a,b){var c=this;this.player.then(function(d){d.cueVideoById(a,b);c.state.placeholder=
"https://i.ytimg.com/vi/"+a+"/sddefault.jpg"})};g.prototype.update_state=function(){var a=this;this.player.then(function(d){var e=d.getDuration(),f=d.getCurrentTime(),g=0<e?e-f:e;_.extend(a.state,{is_playing:d.getPlayerState()===c.YT.PlayerState.PLAYING,percentage:f/e,time_elapsed:1E3*f,time_remaining:1E3*g});a.state.is_playing&&(a.state.is_loaded=!0,a.state.is_loading=!1,b(a.update_state.bind(a),500))})};Object.defineProperty(g.prototype,"api",{get:function(){var a=this;return this._api?this._api:
this._api={load_media:function(){a.state.is_loading=!0;return a.load().then(function(){a.state.is_loading=!1;a.state.is_loaded=!0})},seek_to:function(b){return a.player.then(function(a){a.seekTo(b*a.getDuration())})},pause:function(){return a.player.then(function(a){a.pauseVideo()})},playpause:function(){return a.player.then(function(b){b.getPlayerState()!==c.YT.PlayerState.PLAYING?(a.state.has_played=!0,b.playVideo()):b.pauseVideo()})},mute:function(){return a.player.then(function(a){a.mute()})}}},
enumerable:!0,configurable:!0});return g}()}]);angular.module("genius").filter("abbreviateBigNumber",function(){return function(d){return 1E6<d?Math.round(d/1E5)/10+"M":1E3<d?Math.round(d/100)/10+"K":d}});angular.module("genius").filter("andMore",function(){return function(d){return"(and "+d+" more)"}});angular.module("genius").filter("boundedCount",function(){return function(d,a){if(d)return a?Number(d)>=Number(a)?a+"+":d.toString():d.toString()}});angular.module("genius").filter("capitalize",function(){return _.capitalize});
angular.module("genius").filter("cast_to_date",function(){return function(d){return _.isNumber(d)?new Date(1E3*d):_.isString(d)?new Date(d):_.isDate(d)?d:null}});angular.module("genius").filter("drop",function(){return function(d,a){if(d)return 0<=a?_.drop(d,a):_.dropRight(d,-a)}});
angular.module("genius").filter("genericLineItemMessage",["i18nFilter",function(d){return function(a,b){var c=_.extend({scope:"activemodel.activity_stream_line_item_message.message",defaultKey:"default"},b);return d(a,c)}}]);angular.module("genius").filter("highlight_braced",["$sce","$sanitize",function(d,a){var b=/\[(.+?)\]/g;return function(c,l){l=l||{};var g=l.class_name,k=a(c);return d.trustAsHtml(k.replace(b,'<span class="'+g+'">$1</span>'))}}]);
angular.module("genius").filter("human_readable_datetime",["$filter",function(d){return function(a,b){var c=d("cast_to_date")(a);b=b||{weekday:"long",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",timeZoneName:"short"};return c.toLocaleTimeString("en-US",b)}}]);
angular.module("genius").filter("i18n",["I18n","AppConfig","Airbrake",function(d,a,b){return function(c,l){l&&l.defaultKey&&(l=_.extend(l,{defaultValue:d.t(l.defaultKey,l)}));"object"===typeof c&&(c=_.findKey(c));c=c||"__not_found";if(!d.lookup(c,l)){var g="Missing translation for "+c+"!!!";b.push(Error(g));if("development"===a.env)throw alert(g),Error(g);return""}return d.t(c,l)}}]);
angular.module("genius").filter("imprecise_date",["$filter",function(d){var a=["yyyy","MMMM yyyy","MMMM d, yyyy"];return function(b){if(b){b=_(b).at("year","month","day").takeWhile().value();var c=new Date(b[0],(b[1]||1)-1,b[2]||1);return d("date")(c,a[b.length-1])}}}]);angular.module("genius").filter("millisecondsToSeconds",function(){return function(d){return 1E3*d}});angular.module("genius").filter("min",function(){return function(d){return Math.min.apply(Math,d)}});
angular.module("genius").filter("minBy",["$parse",function(d){return function(a,b){var c=d(b);return _.min(a,function(a){return c(a)})}}]);angular.module("genius").filter("minimum_readable_time",["$window",function(d){var a=245;(d=d.location.search.match(/wpm=(\d+)/))&&(a=Number(d[1]));var b=6E4/a;return function(a){return(a?a.split(/\s+/).length:0)*b}}]);angular.module("genius").filter("minusModulo",function(){return function(d,a){return d-d%a}});
angular.module("genius").filter("modelHumanName",["I18n",function(d){return function(a){return d.t("activerecord.models."+a.toLowerCase())}}]);angular.module("genius").filter("richContentPreview",["truncateToBoundaryFilter",function(d){return function(a){if(a)return(a=a.replace(/<[^>]+>/gm,"").trim())?d(a,75,{with_ellipsis:!0}):"[\u2026]"}}]);angular.module("genius").filter("roleHumanName",["I18n",function(d){return function(a){return d.t("role.types."+a+".one")}}]);
angular.module("genius").filter("signed_number",function(){return function(d){return _.isUndefined(d)?0:d&&0<d?"+"+d.toString():d.toString()}});angular.module("genius").filter("snakeCase",function(){return function(d){return _.snakeCase(d)}});angular.module("genius").filter("spotify_artist_metadata",["SpotifyService",function(d){var a={};return function(b){if(!b)return{};var c=a[b];if(c)return c;a[b]={};d.load_artist_metadata(b).then(function(c){a[b]=c})}}]);
angular.module("genius").filter("svg",function(){return function(d){return d+".svg"}});angular.module("genius").filter("timestamp_for_display",function(){var d=function(a,b){return"0000".substring(0,b-a.toString().length)+a};return function(a,b){if(!a&&0!==a)return"";var c=b&&b.skip_millis,l=b&&b.always_millis,g=a/1E3,g=Math.floor(g/60)+":"+d(Math.floor(g%60),2),k=Math.floor(a%1E3);if(l||k&&!c)g+="."+d(k,3);return g}});angular.module("genius").filter("to_utc",["$filter",function(d){return function(a){return d("cast_to_date")(a).toISOString()}}]);
angular.module("genius").filter("truncateToBoundary",function(){return function(d,a,b){if(d){a=b&&b.with_ellipsis?a-1:a;var c=d.substr(0,a);d[a]&&" "!==d[a]&&(a=c.lastIndexOf(" "),-1!==a&&(c=c.substr(0,a)));b&&b.with_ellipsis&&c.length<d.length&&(c+="\u2026");return c}}});angular.module("genius").filter("withIndefiniteArticle",function(){var d=/^[aeiou]/i;return function(a){return(d.test(a)?"an":"a")+" "+a}});
angular.module("genius").provider("windowOnLoad",function(){return{$get:["$window","$q",function(d,a){return new a(function(a){$(d).one("load",a)})}]}});angular.module("genius").service("AccomplishmentService",["Api",function(d){return{update:function(a,b){return d.put("/accomplishments/:accomplishment_id",_.merge({accomplishment_id:a},b))}}}]);
angular.module("genius").service("Ads",["$window","$q","AdConfig",function(d,a,b){var c=a.defer(),l=new Map;d.googletag.cmd.push(function(){return c.resolve(d.googletag)});return{display:function(a){return c.promise.then(function(b){return b.display(a)})},register_or_identify:function(d,k,e){void 0===e&&(e={});var f=d+"-"+k;if(d=l.get(f))return a.when(d);var m=b.dfp[k],h=_.uniqueId("div-gpt-ad-");return c.promise.then(function(a){a.helpers.define({id:h,kv:_.merge({},e,m.kv),path:"/"+b.dfp_network_id+
"/"+k,sizes:m.sizes});l.set(f,h);return h})}}}]);angular.module("genius").service("AdwordsAdGroupService",["AppConfig","$http",function(d,a){return{all:function(b){return a.get(d.api_root_url+"/adwords_ad_groups?adwords_campaign_id="+b).then(function(a){return a.data.response.ad_groups})},create:function(b,c){return a.post(d.api_root_url+"/adwords_ad_groups",{ad_group:c,adwords_campaign_id:b}).then(function(a){return a.data.response.ad_group})}}}]);
angular.module("genius").service("AdwordsAdService",["AppConfig","$http",function(d,a){return{all:function(b){return a.get(d.api_root_url+"/adwords_ads?adwords_ad_group_id="+b).then(function(a){return a.data.response.ads})},create:function(b,c){return a.post(d.api_root_url+"/adwords_ads",{ad:c,adwords_ad_group_id:b}).then(function(a){return a.data.response.ad})},update:function(b,c){return a.put(d.api_root_url+"/adwords_ads/"+b,{ad:c}).then(function(a){return a.data.response.ad})}}}]);
angular.module("genius").service("AdwordsCampaignService",["AppConfig","$http",function(d,a){return{all:function(){return a.get(d.api_root_url+"/adwords_campaigns").then(function(a){return a.data.response.campaigns})},create:function(b){return a.post(d.api_root_url+"/adwords_campaigns",{campaign:b}).then(function(a){return a.data.response.campaign})}}}]);angular.module("genius").service("AdwordsNetworkService",["$http","AppConfig",function(d,a){return{all:function(){return d.get(a.api_root_url+"/adwords_networks").then(function(a){return a.data.response.networks})}}}]);
angular.module("genius").service("AlbumService",["Api",function(d){return{autocomplete:function(a,b){void 0===b&&(b={});return d.returning("albums").get("/albums/autocomplete",Object.assign({q:a},b))}}}]);angular.module("genius").service("AnnotationAdService",["$q",function(d){var a=d.defer(),b=a.promise;return{register_dom:function(b){a.resolve(b)},lease:function(a){b=b.then(function(b){return a(b).then(function(){return b})})},annotation_ad_slot:function(){return googletag.helpers.annotation_ad_slot()}}}]);
angular.module("genius").service("AnnotationService",["$q","$http","AppConfig","Api","Session","Reversible","Markdown",function(d,a,b,c,l,g,k){var e=function(a){return a.extend({params:{text_format:l.user_signed_in?"html,markdown":"html"}}).returning("annotation")},f=function(a,b){a._deleted=!0;return b.catch(function(){Reflect.deleteProperty(a,"_deleted")})},m=function(c,d){return a.post(b.api_root_url+"/annotation_edits/"+d+"/"+c,{text_format:l.user_signed_in?"html,markdown":"html"}).then(function(a){return a.data.response.annotation_edit})},
h=function(c,d){return a.put(b.api_root_url+"/annotations/"+c,d,{params:{text_format:l.user_signed_in?"html,markdown":"html"}}).then(function(a){return a.data.response})},n=function(c,d){return a.post(b.api_root_url+"/referents/"+c+"/annotations",d,{params:{text_format:l.user_signed_in?"html,markdown":"html"}}).then(function(a){return a.data.response})};return{save:function(a,b){var c={body:{markdown:a._editing.markdown},edit_note:a._editing.edit_note};a._editing._has_source&&(c.source=a._editing.source);
a._editing.custom_preview!==a.custom_preview&&(c.custom_preview=a._editing.custom_preview);var e;e=a.id?h(a.id,{annotation:c}):n(b.referent.id,{annotation:c});var f=g.modify(a,{"body.html":k.to_html(a._editing.markdown),new:!1,source:c.source});return e.then(function(c){_.extend(b.referent,c.referent);return _.extend(a,c.annotation)}).catch(function(){f();return d.reject()})},safe_delete:function(a){return f(a,this.delete(a.id))},delete:function(c){return a.delete(b.api_root_url+"/annotations/"+c)},
accept:function(c,e){var f=e.referent,h=g.modify(f,{classification:"unreviewed"===f.classification?"accepted":f.classification}),m=g.modify(c,{state:"accepted",accepted_by:l.current_user,"current_user_metadata.permissions":["edit"]});return a.post(b.api_root_url+"/annotations/"+c.id+"/accept",{text_format:l.user_signed_in?"html,markdown":"html"}).then(function(a){return _.extend(c,a.data.response.annotation)}).catch(function(){h();m();return d.reject()})},safe_reject:function(a,b){var c=_.noop,e=
b.comment,e=_.extend({},e,{body:e.body.markdown,reason:e.reason?e.reason.raw_name:void 0});0===a.comment_count&&(c=g.modify(a,{_deleted:!0}));return this.reject(a.id,{comment:e,text_format:l.user_signed_in?"html,markdown":"html"}).then(function(c){c=c.data.response||{};_.extend(a,c.annotation||{_deleted:!0});_.extend(b.referent,c.referent||{_deleted:!0})}).catch(function(){c();return d.reject()})},reject:function(c,d){return a.post(b.api_root_url+"/annotations/"+c+"/reject",d)},pin_to_profile:function(c){return a.put(b.api_root_url+
"/annotations/"+c+"/pin_to_profile?text_format=html,markdown").then(function(a){return a.data.response})},unpin_from_profile:function(c){return a.put(b.api_root_url+"/annotations/"+c+"/unpin_from_profile?text_format=html,markdown").then(function(a){return a.data.response})},toggle_cosign:function(c,d){return a.put(b.api_root_url+"/annotations/"+c+"/"+(d?"":"un")+"cosign?text_format="+(l.user_signed_in?"html,markdown":"html")).then(function(a){return a.data.response})},clear_votes:function(c){return a.delete(b.api_root_url+
"/votes",{params:{annotation_id:c}})},report_as_abusive:function(c){return a.post(b.api_root_url+"/annotations/"+c+"/report_as_abusive")},load_versions:function(c){return a.get(b.api_root_url+"/annotations/"+c+"/versions?text_format=html").then(function(a){return a.data.response.versions})},revert_to_version:function(c,d){return a.put(b.api_root_url+"/annotations/"+c+"/version",{version_id:d,text_format:l.user_signed_in?"html,markdown":"html"}).then(function(a){return a.data.response.annotation})},
propose_edit:function(c){return a.post(b.api_root_url+"/annotations/"+c.id+"/edits",{annotation:{body:{markdown:c._editing.markdown},edit_note:c._editing.edit_note},text_format:l.user_signed_in?"html,markdown":"html"}).then(function(a){return a.data.response.annotation_edit})},proposed_edits:function(c){return a.get(b.api_root_url+"/annotations/"+c+"/edits",{params:{text_format:"html"}}).then(function(a){return a.data.response.annotation_edits})},merge_edit:function(a){return m("merge",a)},reject_edit:function(a){return m("reject",
a)},load_by_user:function(c,d){return a.get(b.api_root_url+"/users/"+c+"/annotations",{params:d}).then(function(a){return a.data.response})},set_brand:function(a,b){return c.use(e).put("/annotations/:id/brand",{id:a.id,brand_id:b.id})},clear_brand:function(a){return c.use(e).delete("/annotations/:id/brand",{id:a.id})}}}]);
angular.module("genius").service("AnswerService",["$http","$q","AppConfig","Session","Reversible","Markdown",function(d,a,b,c,l,g){var k=function(b){var c=Error(b.data.meta.message);_.extend(c,_.pick(b,"status","statusText"));return a.reject(_.extend(c,b.data.response))},e=function(a,e){return d.put(b.api_root_url+"/answers/"+a,e,{params:{text_format:c.user_signed_in?"html,markdown":"html"}}).then(function(a){return a.data.response}).catch(function(a){return k(a)})},f=function(a,e){var f={text_format:c.user_signed_in?
"html,markdown":"html"};return d.post(b.api_root_url+"/answers",_.extend(e,{question:_.pick(a,["body","song_id","default_key","state"])}),{params:f}).then(function(a){return a.data.response}).catch(function(a){return k(a)})},m=function(a,e){return d.post(b.api_root_url+"/questions/"+a+"/answers",e,{params:{text_format:c.user_signed_in?"html,markdown":"html"}}).then(function(a){return a.data.response}).catch(function(a){return k(a)})};return{save:function(b,d){var k={body:{markdown:b._editing.markdown},
pin_question:b._editing.pin_question};c.has_permission("update_answer_source",d.question)&&(k.answer_source=b.answer_source);var r;r=b.id?e(b.id,{answer:k}):d.question.id?m(d.question.id,{answer:k}):f(d.question,{answer:k});var t=l.modify(b,{"body.html":g.to_html(b._editing.markdown),new:!1}),u={};k.pin_question&&(u.state="pinned");var x=l.modify(d.question,u);return r.then(function(a){_.extend(d.question,_.omit(a.question,"answer"));return _.extend(b,a.answer)}).catch(function(b){t();x();return a.reject(b)})},
destroy:function(c,e){var f=c.id;if(!f)return a.reject(Error("Answer hasn't been saved yet."));var g=l.modify(e.question.current_user_metadata,{permissions:e.question.current_user_metadata.permissions.concat("add_answer")});return d.delete(b.api_root_url+"/answers/"+f).then(function(a){_.extend(e.question,_.omit(a.question,"answer"));return a.data.response}).catch(function(a){g();return k(a)})}}}]);
var __extends=this&&this.__extends||function(d,a){function b(){this.constructor=d}for(var c in a)a.hasOwnProperty(c)&&(d[c]=a[c]);d.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b)};
angular.module("genius").service("Api",["$http","AppConfig",function(d,a){var b=function(a){var b=_.isObject(a)&&_.isObject(a.data)&&_.has(a.data,"meta")&&_.has(a.data,"response");a=_.isObject(a)&&204===a.status&&""===a.data;return b||a},c=function(){return function(a){_.extend(this,a.data.response)}}(),l=function(a){function b(c,d){a.call(this,c);this.status=d.status;this.response=d.data;this.stack=Error().stack}__extends(b,a);Object.defineProperty(b.prototype,"name",{get:function(){return"ApiError"},
enumerable:!0,configurable:!0});return b}(Error),g=function(a,b){return a.split("/").map(function(c){return c.replace(/^:(\w+)$/,function(c,d){if(_.has(b,d)&&null!=b[d]){var g=b[d];Reflect.deleteProperty(b,d);return g}throw Error("Missing param '"+d+"' for API path '"+a+"'");})}).join("/")},k=function(b){return function(c,d){void 0===d&&(d={});if(!_.startsWith(c,"/"))throw Error("Path must start with /");d=_.clone(d);c=g(a.api_root_url+c,d);var h="get"===b?{params:d}:{data:d};return this.extend({method:b,
url:c}).merge(h).send()}};return function(){function a(b,c){this._config=b;this._transform=c}a.empty=function(){return new a({},_.identity)};a.prototype._update=function(b){b=_.extend({config:this._config,transform:this._transform},b);return new a(b.config,b.transform)};a.prototype.extend=function(a){return this._update({config:_.extend({},this._config,a)})};a.prototype.merge=function(a){return this._update({config:_.merge({},this._config,a)})};a.prototype.use=function(b){return _.tap(b(this),function(b){if(!(b instanceof
a))throw TypeError("Result of ApiRequest#use() must be an ApiRequest");})};a.prototype.transform=function(a){return this._update({transform:_.compose(a,this._transform)})};a.prototype.returning=function(a){return this.transform(_.property(a))};a.prototype.send=function(){return d(this._config).catch(function(a){if(_.isObject(a.data))if(b(a)){var c=new l(a.data.meta.message||a.statusText,a);a=_.extend(c,{response:a.data.response})}else a=new l(a.statusText,a);else a=new l(a.statusText,a);return Promise.reject(a)}).then(function(a){return b(a)?
Promise.resolve(new c(a)):Promise.reject(new l("Invalid response",a))}).then(this._transform)};a.prototype.then=function(a,b){this._response=this._response||this.send();return this._response.then(a,b)};Object.defineProperty(a.prototype,"get",{get:function(){return k("get")},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"post",{get:function(){return k("post")},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"put",{get:function(){return k("put")},enumerable:!0,
configurable:!0});Object.defineProperty(a.prototype,"delete",{get:function(){return k("delete")},enumerable:!0,configurable:!0});return a}().empty()}]);angular.module("genius").service("ArticleService",["$http","AppConfig",function(d,a){return{index:function(b){return d.get(a.api_root_url+"/articles",{params:b}).then(function(a){return a.data.response})}}}]);
angular.module("genius").service("ArtistService",["$http","AppConfig",function(d,a){var b={autocomplete_api_endpoint:a.api_root_url+"/artists/autocomplete",autocomplete:function(a){return d.get(b.autocomplete_api_endpoint,{params:{q:a}}).then(function(a){return a.data.response.artists})},autocomplete_options:{minChars:2,parse:function(a){return _.map(a.response.artists,function(a){return{data:[a.name,a],value:a,result:a}})}},load:function(b){return d.get(a.api_root_url+"/artists/"+b).then(function(a){return a.data.response.artist})},
update:function(b,l){return d.put(a.api_root_url+"/artists/"+b,{artist:_.pick(l,"name alternate_names image_url header_image_url instagram_name twitter_name facebook_name".split(" "))}).then(function(a){return a.data.response.artist})},load_albums:function(b,l){return d.get(a.api_root_url+"/artists/"+b+"/albums",{params:l}).then(function(a){return a.data.response})},load_leaderboard:function(b,l){return d.get(a.api_root_url+"/artists/"+b+"/leaderboard",{params:l}).then(function(a){return a.data.response})},
merge:function(b,l){return d.put(a.api_root_url+"/artists/"+b+"/merge",{target:{name:l}}).then(function(a){return a.data.response})},get_slug:function(a){return _(this.get_path(a).split("/")).last()},get_path:function(a){return(new URL(a.url)).pathname},activity_line_items:function(b,l){return d.get(a.api_root_url+"/artists/"+b+"/activity_stream/line_items",{params:l}).then(function(a){return a.data.response})}};return b}]);
angular.module("genius").service("AssetService",["$http",function(d){return{remove:function(a){return d.post("/assets/remove",{asset_url:a})}}}]);angular.module("genius").service("Attempt",["$window","I18n",function(d,a){return{close_form:function(b,c){b?c():d.confirm(a.t("editing.dirty_unload_confirm_box"))&&c()},admin_action:function(a,c){d.confirm(c)&&a()}}}]);
angular.module("genius").service("Authentication",["Api","signed_out_created_content",function(d,a){return{sign_in:function(a){return d.post("/sessions",{user:a})},sign_up:function(b){return d.post("/users",{user:b,signed_out_created_content:a.get()}).then(function(b){a.clear();return b})}}}]);
(function(d,a){if("function"===typeof define&&define.amd)define(["exports","module"],a);else if("undefined"!==typeof exports&&"undefined"!==typeof module)a(exports,module);else{var b={exports:{}};a(b.exports,b);d.autosize=b.exports}})(this,function(d,a){function b(a,b){function c(){var b=window.getComputedStyle(a,null);v=b.overflowY;"vertical"===b.resize?a.style.resize="none":"both"===b.resize&&(a.style.resize="horizontal");w="content-box"===b.boxSizing?-(parseFloat(b.paddingTop)+parseFloat(b.paddingBottom)):
parseFloat(b.borderTopWidth)+parseFloat(b.borderBottomWidth);isNaN(w)&&(w=0);l()}function d(b){var c=a.style.width;a.style.width="0px";a.offsetWidth;a.style.width=c;v=b;x&&(a.style.overflowY=b);e()}function e(){var b=window.pageYOffset,c=document.body.scrollTop,d=a.style.height;a.style.height="auto";var h=a.scrollHeight+w;0===a.scrollHeight?a.style.height=d:(a.style.height=h+"px",C=a.clientWidth,document.documentElement.scrollTop=b,document.body.scrollTop=c)}function l(){var b=a.style.height;e();
window.getComputedStyle(a,null).height!==a.style.height?"visible"!==v&&d("visible"):"hidden"!==v&&d("hidden");b!==a.style.height&&(b=k("autosize:resized"),a.dispatchEvent(b))}var t=void 0===b?{}:b,u=t.setOverflowX,u=void 0===u?!0:u,t=t.setOverflowY,x=void 0===t?!0:t;if(a&&a.nodeName&&"TEXTAREA"===a.nodeName&&!g.has(a)){var w=null,v=null,C=a.clientWidth,E=function(){a.clientWidth!==C&&l()},y=function(b){window.removeEventListener("resize",E,!1);a.removeEventListener("input",l,!1);a.removeEventListener("keyup",
l,!1);a.removeEventListener("autosize:destroy",y,!1);a.removeEventListener("autosize:update",l,!1);g["delete"](a);Object.keys(b).forEach(function(c){a.style[c]=b[c]})}.bind(a,{height:a.style.height,resize:a.style.resize,overflowY:a.style.overflowY,overflowX:a.style.overflowX,wordWrap:a.style.wordWrap});a.addEventListener("autosize:destroy",y,!1);"onpropertychange"in a&&"oninput"in a&&a.addEventListener("keyup",l,!1);window.addEventListener("resize",E,!1);a.addEventListener("input",l,!1);a.addEventListener("autosize:update",
l,!1);g.add(a);u&&(a.style.overflowX="hidden",a.style.wordWrap="break-word");c()}}function c(a){if(a&&a.nodeName&&"TEXTAREA"===a.nodeName){var b=k("autosize:destroy");a.dispatchEvent(b)}}function l(a){if(a&&a.nodeName&&"TEXTAREA"===a.nodeName){var b=k("autosize:update");a.dispatchEvent(b)}}var g="function"===typeof Set?new Set:function(){var a=[];return{has:function(b){return Boolean(-1<a.indexOf(b))},add:function(b){a.push(b)},"delete":function(b){a.splice(a.indexOf(b),1)}}}(),k=function(a){return new Event(a)};
try{new Event("test")}catch(f){k=function(a){var b=document.createEvent("Event");b.initEvent(a,!0,!1);return b}}var e=null;"undefined"===typeof window||"function"!==typeof window.getComputedStyle?(e=function(a){return a},e.destroy=function(a){return a},e.update=function(a){return a}):(e=function(a,c){a&&Array.prototype.forEach.call(a.length?a:[a],function(a){return b(a,c)});return a},e.destroy=function(a){a&&Array.prototype.forEach.call(a.length?a:[a],c);return a},e.update=function(a){a&&Array.prototype.forEach.call(a.length?
a:[a],l);return a});a.exports=e});angular.module("genius").service("Autosize",["$window",function(d){return d.autosize}]);angular.module("genius").service("BeforeUnloadCheck",["$window","I18n",function(d,a){var b=[];d.onbeforeunload=function(){if(_.any(b,function(a){return a()}))return a.t("editing.dirty_unload")};return{add:function(a){b.push(a)},remove:function(a){_.remove(b,function(b){return b===a})}}}]);angular.module("genius").service("Bowser",["$window",function(d){return d.bowser}]);
angular.module("genius").service("BrandService",["Api",function(d){return{index:function(){return d.returning("brands").get("/brands")}}}]);var PLAYER_ID_CONFIG_REGEX=/brightcove_(.*)_web_player_id/;
angular.module("genius").service("Brightcove",["$q","AppConfig","getScript","wait_for_global",function(d,a,b,c){var l=d.defer(),g=function(e){return l.promise.then(function(){return b("//players.brightcove.net/"+a.brightcove_account_id+"/"+e+"_default/index.min.js",{cache:!0})}).then(function(){return d.all({videojs:c("videojs"),bc:c("bc")})})},k={account_id:a.brightcove_account_id,load_api:function(a){l.resolve();return g(a)}};_(a).keys().map(function(a){return a.match(PLAYER_ID_CONFIG_REGEX)}).filter().each(function(b){k[b[1]+
"_player_id"]=a[b[0]]}).value();return k}]);
angular.module("genius").service("CommentService",["$http","$q","AppConfig","Markdown","signed_out_created_content",function(d,a,b,c,l){return{load:function(a,c,e){return d.get(b.api_root_url+"/"+a+"/"+c+"/comments",{params:e}).then(function(a){return a.data.response})},destroy:function(a){return d.delete(b.api_root_url+"/comments/"+a)},create:function(g,k,e){delete e._deleted;var f=_.extend({},e,{body:e.body.markdown,reason:e.reason?e.reason.raw_name:void 0});e.body.html=c.to_html(f.body);return d.post(b.api_root_url+
"/"+g+"/"+k+"/comments?text_format=html",{comment:f}).then(function(a){_.extend(e,a.data.response.comment);l.add("comments",e.id);e.anonymous_author&&(e.anonymous_author.email=e.email);return e}).catch(function(){e._deleted=!0;return a.reject()})},change_state:function(a,c){return d.put(b.api_root_url+"/comments/"+a+"/change_state",{state_event:c})}}}]);
angular.module("genius").service("ContributionOpportunityAssignmentService",["Api",function(d){return{update:function(a,b){return d.put("/contribution_opportunity_assignments/:id",{id:a,contribution_opportunity_assignment:b})}}}]);
angular.module("genius").service("ConversationService",["$http","AppConfig","querystring",function(d,a,b){return{latest:function(c){c=c||{};c=b.stringify({text_format:"html",page:c.page||1});return d.get(a.api_root_url+"/conversations?"+c).then(function(a){return a.data.response.conversations})},get:function(b){return d.get(a.api_root_url+"/conversations/"+b,{params:{text_format:"html"}}).then(function(a){return a.data.response.conversation})},mark_read:function(b){return d.post(a.api_root_url+"/conversations/"+
b+"/mark_read").then(function(a){return a.data.response.conversation})},with_user:function(b){return d.put(a.api_root_url+"/conversations/with_user",{text_format:"html",user_id:b}).then(function(a){return a.data.response.conversation})}}}]);angular.module("genius").service("CustomAppNotificationService",["$http",function(d){return{send_preview_notification:function(a){return d.post("/custom_app_notifications",{custom_app_notification:_.extend(a,{preview:!0})})}}}]);
angular.module("genius").service("CustomPerformanceRoleService",["$http","AppConfig",function(d,a){return{autocomplete_api_endpoint:a.api_root_url+"/custom_performance_roles/autocomplete",autocomplete:function(a){return d.get(this.autocomplete_api_endpoint,{params:{q:a}}).then(function(a){return a.data.response})},autocomplete_options:{minChars:2,parse:function(a){return _.map(a.response.custom_performance_roles,function(a){a=a.label;return{data:[a],value:a,result:a}})}}}}]);
angular.module("genius").service("DateTools",function(){return{days_to_ms:function(d){var a=new Date;a.setTime(a.getTime()+864E5*d);return a}}});
angular.module("genius").factory("EagerLoader",function(){var d=function(){this.data={};this.listeners={}};d.prototype={loaded:function(a,b){this.listeners[a]?this.listeners[a].forEach(function(a){a(b)}):this.data[a]=b},listen_for:function(a,b){this.listeners[a]=this.listeners[a]||[];this.listeners[a].push(b);this.data[a]&&(b(this.data[a]),delete this.data[a])}};return d});
angular.module("genius").service("EventEmitter",["$rootScope",function(d){return function(){this.proxy_emitter=d.$new();this.emit=function(a,b){this.proxy_emitter.$emit(a,b)};this.on=function(a,b){this.proxy_emitter.$on(a,function(a,d){a.stopPropagation();a.preventDefault();b(d)});return this}}}]);
angular.module("genius").service("Facebook",["AppConfig","$window","$q","getScript",function(d,a,b,c){var l=_.once(function(){var g=b.defer();a.fbAsyncInit=function(){a.FB.init({appId:d.facebook_app_id,version:"v"+d.facebook_opengraph_api_version});g.resolve(a.FB)};c("//connect.facebook.net/en_US/sdk.js",{cache:!0});return g.promise});$(l);return{share:function(a){l().then(function(b){b.ui({method:"share",href:a})})}}}]);
angular.module("genius").service("FeedbackService",["Api",function(d){return{post_feedback:function(a){return d.post("/feedback",{feedback:{body:a}})}}}]);angular.module("genius").service("FollowService",["AppConfig","$http",function(d,a){return{set_following:function(b,c,l){return a.post(d.api_root_url+"/"+b+"s/"+c+"/"+(l?"follow":"unfollow")).then(function(a){return a.data.response})}}}]);
angular.module("genius").service("getScript",["$q",function(d){return function(a,b){return d.when($.ajax(_.extend({url:a,type:"GET",dataType:"script"},b)))}}]);
angular.module("genius").factory("HtmlService",["$window",function(d){d={top_level_block_containers:d.TOP_LEVEL_BLOCK_CONTAINERS,top_level_stand_alone_blocks:d.TOP_LEVEL_STANDALONE_BLOCKS};d.top_level_block_containers_regexp=new RegExp("</("+d.top_level_block_containers.join("|")+")>\\s*","gi");d.top_level_stand_alone_blocks_regexp=new RegExp("</("+d.top_level_stand_alone_blocks.join("|")+")>\\s*","gi");return d}]);angular.module("genius").service("I18n",["$window",function(d){return d.I18n}]);
angular.module("genius").service("IdentityService",["$http","AppConfig","$q",function(d,a,b){return{destroy:function(c){return d.delete(a.api_root_url+"/identities/"+c,{},{params:{text_format:"html,markdown"}}).then(function(a){return a.data.response}).catch(function(a){var c=Error(a.data.meta.message);_.extend(c,_.pick(a,"status","statusText"));return b.reject(_.extend(c,a.data.response))})}}}]);
angular.module("genius").service("InboxService",["Session","Pusher","Api",function(d,a,b){return{get_line_item:function(a,l){return b.get(a?"/inboxes/"+a+"/line_items/"+l:"/line_items/"+l,{text_format:d.user_signed_in?"html,markdown":"html"}).then(function(a){return a.line_item})},line_items:function(a,d){return b.get("/inboxes/:inbox_name/line_items",{text_format:"html",timestamp_for_next_page:d,inbox_name:a}).then(function(a){a.line_items.timestamp_for_next_page=a.timestamp_for_next_page;return a.line_items})},
mark_read:function(a,d){var g;if(d){g={};for(var k=0;k<d.length;k++)g[k+1]=d[k]}return b.post("/inboxes/:inbox_name/line_items/mark_read",{event_ids:g,inbox_name:a})},on_update:function(b,l){a.subscribe(d.current_user.pusher_channel,"new-"+b.replace(/_/g,"-")+"-event",l);a.subscribe(d.current_user.pusher_channel,"inbox-marked-read",function(a){a.inbox===b&&l()})}}}]);
angular.module("genius").service("Iq",["PreloadCache","Session",function(d,a){var b=d.iq_by_event_type;return{for:function(c){var d=a.current_user.virtual_iq_event_type_map;d&&_.has(d,c)&&(c=d[c]);if(_.has(b,c))return b[c];throw Error("Invalid iq event type: "+c);}}}]);angular.module("genius").service("Leaderboard",["Api",function(d){return{global:function(a){return d.get("/leaderboard",a)},for_tag:function(a,b){return d.get("/tags/:tag_id/leaderboard",_.assign({tag_id:a.id},b))}}}]);
angular.module("genius").service("LinkEvents",function(){return{should_open_in_new_tab:function(d,a){a=a||$(d.target).closest("a")[0];return 2===d.which||d.metaKey||d.ctrlKey||"_blank"===a.target}}});
angular.module("genius").service("LocalStorage",["$window",function(d){return{is_available:function(){try{return d.localStorage.setItem("__storage_test__","__storage_test__"),d.localStorage.removeItem("__storage_test__"),!0}catch(a){return!1}},setItem:d.localStorage.setItem.bind(d.localStorage),getItem:d.localStorage.getItem.bind(d.localStorage),removeItem:d.localStorage.removeItem.bind(d.localStorage)}}]);
angular.module("genius").service("LookupService",["$http","AppConfig",function(d,a){return{lookup:function(b){return d.get(a.api_root_url+"/lookup",{params:{url:b}}).then(function(a){return _(a.data.response).values().first()})}}}]);
angular.module("genius").service("Lyrics",["mobile_device",function(d){var a='\n    <dfp-ad\n      instance-id="in_read_ad"\n      name="'+(d?"mobile_song_medium1":"desktop_song_inread")+'"\n      class="u-display_block"\n      ad-classes="'+(d?"dfp_unit--in_read u-half_bottom_margin":"")+'"\n    ></dfp-ad>\n  ',b=function(a,b,d){void 0===d&&(d={});a=$("<div>").html(a.replace(/\s*\n/g,""));var k=a.find("table").length,e=_.select(a.find("br"),function(a){var b="br"===_.get(a,"previousSibling.nodeName",
"").toLowerCase();a=k&&$(a).closest("table").length;return b&&!a});(d.after_verse<=e.length?$(e[d.after_verse-1]):a.children().first()).after($('<span avoid-selection class="u-noselect">').html(b));return a.html()};return{prepare_for_display:function(c,d){void 0===d&&(d={});d.hyper_relevant_video?c=b(c,'\n    <hyper-relevant-video\n      video="hyper_relevant_video"\n      ng-if="!cinema_player"\n      on-click="song_ctrl.open_video_modal(video, relevance_level)"\n    ></hyper-relevant-video>\n  ',
{after_verse:2}):d.inread_ad&&(c=b(c,a,{after_verse:2}));return c.replace(/}}/g,"}\x3c!-- literal brace --\x3e}")}}}]);
angular.module("genius").factory("LyricsAnchorer",["$compile","ReferentLocator","ReferentRegistry","ReferentService","LyricsEditingService","SongService",function(d,a,b,c,l,g){return function(){function k(a){this.container=a.container;this.get_state=a.get_state;this.scope=a.scope;this.song=a.song}k.prototype.construct_referent=function(a,f,g){var h=this;void 0===f&&(f={});return c.create_referent({song:_.pick(this.song,["id","updated_by_human_at"]),referent:g,community:!!f.community}).then(function(c){_.extend(c.annotations[0],
{new:!0,_editing:{_form_visible:!0}});b.preload_insert(c);var f;f=c.id;f=$("<a>").attr("href","#").attr("class","referent").attr("ng-click","open()").attr("prevent-default-click","").attr("data-id","new").attr("on-hover-with-no-digest","set_current_hover_and_digest(hover ? fragment_id : undefined)").attr("annotation-fragment","'"+f+"'").attr("classification","new");f.html(a.extractContents());a.insertNode(f[0]);d(f)(h.scope);b.register(c);return c})};k.prototype.create_referent=function(a,b){return this.construct_referent(a,
b,this.calculate_referent_location(a))};k.prototype.create_image_referent=function(a,b,c){var d=a.src;return this.construct_referent(b,c,{image_url:d,occurrence:this.get_occurrence_in_container_among('img[src="'+d+'"]',a)})};k.prototype.build_correction=function(){var a,b,c=this.get_state();c.referent?(b=this.get_occurrence_in_container_among("[annotation-fragment="+c.referent.id+"]",c.reference_element),a=c.reference_element,b={id:c.referent.id,occurrence:b}):(a=$("<span>").attr("class","line-correction"),
b=this.calculate_referent_location(c.range),a.html(c.range.extractContents()),c.range.insertNode(a[0]));var c=a.html(),d=l.prepare_lyrics_for_editing(c);return{anchor:a,payload:{referent:b},replacement:d,original:{html:c}}};k.prototype.submit_correction=function(a){a.payload.replacement={html:l.lyrics_pseudo_markdown_to_html__deprecated(a.replacement.markdown,{})};a.anchor.html(a.payload.replacement.html);return g.correct_lyrics(this.song,a.payload).catch(function(){a.anchor.html(a.original.html)})};
k.prototype.calculate_referent_location=function(b){return a.calculate_referent_location(b,this.container[0])};k.prototype.get_occurrence_in_container_among=function(a,b){return this.container.find(a).index(b)+1};return k}()}]);
(function(d){function a(a){var b=g.call(arguments,1);return function(){return a.apply(this,b.concat(g.call(arguments)))}}function b(a,b){return this.filter(":"+a+(b?"("+b+")":""))}function c(a,b,c,d){return(c=d[3]||m()[(b.nodeName||"").toLowerCase()]||"")?!!a(b.getAttribute(c)):!1}"$:nomunge";var l=window.location,g=Array.prototype.slice,k=l.href.match(/^((https?:\/\/.*?\/)?[^#]*)#?.*$/),e=k[1]+"#",f=k[2],m,h,n,q,r,t={};d.isUrlInternal=n=function(a){return!a||q(a)?void 0:r.test(a)?!0:/^(?:https?:)?\/\//i.test(a)?
!1:/^[a-z\d.-]+:/i.test(a)?void 0:!0};d.isUrlExternal=k=function(a){a=n(a);return"boolean"===typeof a?!a:a};d.isUrlFragment=q=function(a){var b=(a||"").match(/^([^#]?)([^#]*#).*$/);return!!b&&("#"===b[2]||0===a.indexOf(e)||("/"===b[1]?f+b[2]===e:!/^https?:\/\//i.test(a)&&0===d('<a href="'+a+'"/>')[0].href.indexOf(e)))};d.fn.urlInternal=a(b,"urlInternal");d.fn.urlExternal=a(b,"urlExternal");d.fn.urlFragment=a(b,"urlFragment");d.expr[":"].urlInternal=a(c,n);d.expr[":"].urlExternal=a(c,k);d.expr[":"].urlFragment=
a(c,q);d.elemUrlAttr||(d.elemUrlAttr=function(a){return d.extend(t,a)})({a:"href",base:"href",iframe:"src",img:"src",input:"src",form:"action",link:"href",script:"src"});m=d.elemUrlAttr;d.urlInternalHost=k=function(a){a=a?"(?:(?:"+Array.prototype.join.call(arguments,"|")+")\\.)?":"";var b=l.hostname.split(".");b.length>CANONICAL_DOMAIN_PARTS_LENGTH&&b.shift();var b=b.join("."),c=new RegExp("^"+a+"(.*)","i"),b="^(?:https?:)?//(?:(?:"+VALID_SUBDOMAINS.join("|")+").)?"+b.replace(c,a+"$1").replace(/\\?\./g,
"\\.")+(l.port?":"+l.port:"")+"/";return h(b)};d.urlInternalRegExp=h=function(a){a&&(r="string"===typeof a?new RegExp(a,"i"):a);return r};k("www")})(jQuery);
angular.module("genius").service("LyricsEditingService",["AppConfig","HtmlService","MarkdownHelpersService","ReferentRegistry",function(d,a,b,c){return{lyrics_html_without_referent:function(a,b){var c=$("<div>").append($(a));c.find("[data-id='"+b+"']").each(function(a,b){var c=$(b),d=c.find("img")[0]||c.text();c.replaceWith(d)});return c.html()},prepare_lyrics_for_editing:function(a){return this.lyrics_html_to_pseudo_markdown__deprecated(this.clean_up_lyrics__deprecated(a))},clean_up_lyrics__deprecated:function(b){return $.trim($("<div>").append(b).find("a").each(function(){var a=
$(this);if(!a.attr("data-id")&&!a.data("real-link")&&!a.hasClass("referent"))throw a=Error("Error processing lyrics for editing: detected non-referent link ("+a[0].outerHTML+")"),a.human_readable_message="Your browser's copy of the lyrics is out of sync. Try reloading the page",a;a.html().match(/<br[\s\/]?>$/i)&&(a.find("br:last").remove(),a.after("<br>"))}).end().find("#annotation_prompt").remove().end().html().replace(/<p( [^>]*)?>/gi,"").replace(/<\/p>\s*/gi,"\n\n").replace(a.top_level_block_containers_regexp,
"$&\n\n").replace(a.top_level_stand_alone_blocks_regexp,"$&\n\n").replace(/\s*<br[\s\/]?>([ \t]*)\s*/gi,"\n$1"))},lyrics_html_to_pseudo_markdown__deprecated:function(a){var b={attr_hash:{}};a=$("<div>").append(a).find("a").each(function(){var a=$(this);a.find(".referent-vote_total").remove();var c=a.attr("data-id");_.isUndefined(c)?a.data("real-link")?a.replaceWith("["+a.html()+"]("+a.attr("href")+")"):a.replaceWith(a.html()):(_.set(b.attr_hash,c,{"class":a.attr("class"),"data-editorial-state":a.attr("data-editorial-state")}),
a.replaceWith("["+a.html()+"]("+c+")"))}).end();b.markdown=a.find("annotatable-image").each(function(){var a=$(this),b=a.attr("src");a.replaceWith($("<img>").attr("src",b))}).end().html();return b},lyrics_pseudo_markdown_to_html__deprecated:function(a,c){c||(c={});a=a.replace(/\n/gi,"<br>");var k=$("<div>").append(b.convert_markdown_anchors(a)).find("a").each(function(){var a=$(this);a.attr("href",$.trim(a.attr("href")));if(a.attr("href").match(/^\d+$/))a.attr("data-id",a.attr("href")).attr("href",
"/"+a.attr("data-id")).attr(_.get(c,a.attr("data-id"),{}));else{var b=a.attr("href");void 0===b&&(b="");b=b.trim();"/"===b[0]||0===b.indexOf("http")||b.includes(d.canonical_domain)?a.attr("target",$.isUrlInternal(a.attr("href"))?"_self":"_blank").attr("data-real-link",!0):a.replaceWith("["+a.html()+"]("+a.attr("href")+")")}}).end().html();return b.unescape_special_characters_escaped_by_markdown_anchor_converter(k)},backfill_angular_link_properties:function(a){a=$("<div>").append(a).find("a[data-id]").each(function(){var a=
$(this),b=Number(a.attr("data-id")),d=c.peek(b);d&&(a.attr("annotation-fragment",b),a.attr("on-hover-with-no-digest","set_current_hover_and_digest(hover ? fragment_id : undefined)"),a.attr("ng-click","open()"),a.attr("prevent-default-click",""),a.attr("classification",d.classification),a.attr("image",d.is_image),a.attr("pending-editorial-actions-count",d.pending_editorial_actions_count))}).end();return $("<div>").append(a).html()}}}]);
angular.module("genius").service("LyricsSynchronization",["$rootScope","$q","$http","AppConfig",function(d,a,b,c){var l=d.$new(),g=function(a){return _.isNumber(a)&&(a||0===a)},k=function(a,b){return _.compact([c.api_root_url,"lyrics_synchronizations",a,b]).join("/")},e=function(a){return new h(a.data.response.lyrics_synchronization)},f=function(b){var c=Error(b.data.meta.message);_.extend(c,_.pick(b,"status","statusText"));return a.reject(_.extend(c,b.data.response))},m=function(a){return function(){for(var b=
[],c=0;c<arguments.length;c++)b[c-0]=arguments[c];this._dirty=!0;return _.tap(Reflect.apply(a,this,b),function(){l.$emit("edit")})}},h=function(){function b(a){_.extend(this,a)}Object.defineProperty(b.prototype,"mark_dirty",{get:function(){return m(_.noop)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"apply_timestamp_to_line_at_index",{get:function(){return m(function(b,c){if(b<this.max_timestamp_before_index(c))throw Error("Can't set time to earlier than a previous line");this.lines[c].timestamp=
b;this.lines.slice(c).forEach(function(a){a.timestamp<b&&(a.timestamp=null)});return a.when(this.lines[c])})},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"set_line_at_index_hidden",{get:function(){return m(function(a,b){_.extend(this.lines[a],{hidden:b,timestamp:null})})},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"set_line_at_index_marked",{get:function(){return m(function(a,b){this.lines[a].fixed=!1;this.lines[a].marked=b})},enumerable:!0,configurable:!0});
Object.defineProperty(b.prototype,"set_line_at_index_fixed",{get:function(){return m(function(a){this.lines[a].marked=!1;this.lines[a].fixed=!0})},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"add_line_at_index",{get:function(){return m(function(a,b){this.lines.splice(a,0,_.defaults(b||{},{added:!0,lyrics:"[Instrumental Break]",timestamp:null}))})},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"remove_line_at_index",{get:function(){return m(function(a){this.lines.splice(a,
1)})},enumerable:!0,configurable:!0});b.prototype.max_timestamp_before_index=function(a){return _(this.lines.slice(0,a)).map("timestamp").max()};b.prototype.min_timestamp_after_index=function(a){return _(this.lines.slice(a)).map("timestamp").compact().min()};b.prototype.timestamp_for_line_at_index=function(a){return-1===a?0:this.lines[a].timestamp};b.prototype.line_index_for_position=function(a){return _.findLastIndex(this.lines,function(b){return g(b.timestamp)&&b.timestamp<a})};b.prototype.next_visible_line_index_after_index=
function(a){return _.findIndex(this.lines,function(b,c){return c>a&&!b.hidden})};Object.defineProperty(b.prototype,"all_lines_timestamped",{get:function(){return _.all(this.lines,function(a){return a.hidden||g(a.timestamp)})},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"all_timestamps_in_order",{get:function(){return _(this.lines).map("timestamp").compact().all(function(a,b,c){return 0===b||a>c[b-1]})},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"preview",
{get:function(){return"preview"===this.state},enumerable:!0,configurable:!0});return b}();return{$on:l.$on.bind(l),get:function(a){return b.get(k(a)).then(e)},preview:function(a){return b.get(k("preview"),{params:a}).then(e).catch(f)},home:function(){return b.get(k("home")).then(function(a){a=a.data.response.lyrics_synchronization_home;a.checked_out=a.checked_out.map(function(a){return new h(a)});return a})},submit:function(c,d,h){return(d._dirty?this.save(d):a.when(d)).then(function(a){return b.post(k(a.id,
c),_.extend(h||{},_.pick(a,"lock_version"))).then(e,f)})},submit_sync:function(b){return _.any(b.lines,"marked")?a.reject(Error("Can't submit lyrcis with lines still marked as incorrect")):this.submit("sync",b)},update_state:function(a,c){return b.put(k(c.id,"state"),{state:a}).then(e,f)},save:function(c){if(!c.all_timestamps_in_order)return a.reject(Error("Can't save lyrics with timestamps out of order"));var d={lyrics_synchronization:c};return b.put(k(c.id),d).then(e,f)},revert_action:function(a,
c){return b.post(k(c.id,"revert_action"),{action_id:a.id}).then(e,f)},skip:function(a,c){return b.post(k(c.id,"skip"),a).then(e,f)},change_song:function(a){return b.put(k(a.lyrics_synchronization_id,"song"),{song_id:a.song_id}).then(e,f)},start:function(a){return b.post(k("start"),{verb:a}).then(e,f)},set_finalized:function(a,c){return b[c?"put":"delete"](k(a)+"/finalized").then(e,f)}}}]);
angular.module("genius").service("Markdown",["$window",function(d){var a=angular.element;return{to_html:function(b){if(!b)return b;var c=new d.Attacklab.showdown.converter;b=b.replace(/(?:^|\s+)https?:\/\/(?:[a-z0-9\-]+\.)+[a-z]{2,6}(?:\/[^\/#?]+)+\.(?:jpe?g|gif|png)(?=$|\s+)/igm,function(b){return"\n\n![]("+a.trim(b)+")"});b=c.makeHtml(b);return a("<div>").append(b).find("a").each(function(){var b=a(this);b.attr("href").match(/^\d+$/)&&b.attr("href","/"+b.attr("href"))}).end().html()}}}]);
angular.module("genius").factory("MarkdownHelpersService",function(){var d=function(a,b,c,d,g,k,e,f){void 0===f&&(f="");a=d.toLowerCase();if(""===g)if(""===a&&c.toLowerCase().replace(/ ?\n/g," "),-1<b.search(/\(\s*\)$/m))g="";else return b;b='<a href="'+g+'"';""!==f&&(f=f.replace(/"/g,"&quot;"),b+=' title="'+f+'"');return b+(">"+c+"</a>")};return{unescape_special_characters_escaped_by_markdown_anchor_converter:function(a){return a.replace(/~E(\d+)E/,function(a,c){return String.fromCharCode(c)})},
convert_markdown_anchors:function(a){return a.replace(/(\[((?:\[[^\]]*\]|\[\[[^\]]*\]\]|[^\[\]])*)\]\([ \t]*()<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,d)}}});angular.module("genius").service("MarkdownPreviewService",["$http","AppConfig",function(d,a){return{create_preview:function(b){return d.post(a.api_root_url+"/markdown_preview",{markdown:b}).then(function(a){return a.data.response.html})}}}]);
angular.module("genius").service("MentionService",["$http","AppConfig",function(d,a){return{autocomplete:function(b){return d.get(a.api_root_url+"/mentions",{params:{q:b}}).then(function(a){return a.data.response.mentions})}}}]);
angular.module("genius").service("MessageService",["$http","AppConfig",function(d,a){return{for_conversation:function(b,c){c=c||{};return d.get(a.api_root_url+"/conversations/"+b+"/messages",{params:{text_format:"html",page:c.page||1}}).then(function(a){return a.data.response.messages})},create:function(b){return d.post(a.api_root_url+"/messages",{message:b},{params:{text_format:"html"}}).then(function(a){return a.data.response.message})}}}]);
angular.module("genius").service("ModelRouter",function(){return{lookup:function(d){if(!_.isString(d))throw Error("URL must be a string");if(d=d.match(/^\/referents\/(\d+)$/))return{type:"referent",id:Number(d[1])}}}});
(function(d,a,b){function c(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}function l(a){if("keypress"==a.type){var b=String.fromCharCode(a.which);a.shiftKey||(b=b.toLowerCase());return b}return h[a.which]?h[a.which]:n[a.which]?n[a.which]:String.fromCharCode(a.which).toLowerCase()}function g(a){var b=[];a.shiftKey&&b.push("shift");a.altKey&&b.push("alt");a.ctrlKey&&b.push("ctrl");a.metaKey&&b.push("meta");return b}function k(a){return"shift"==a||"ctrl"==a||"alt"==a||
"meta"==a}function e(a,b){var c,d,e,f=[];c=a;"+"===c?c=["+"]:(c=c.replace(/\+{2}/g,"+plus"),c=c.split("+"));for(e=0;e<c.length;++e)d=c[e],r[d]&&(d=r[d]),b&&"keypress"!=b&&q[d]&&(d=q[d],f.push("shift")),k(d)&&f.push(d);c=d;e=b;if(!e){if(!t){t={};for(var g in h)95<g&&112>g||h.hasOwnProperty(g)&&(t[h[g]]=g)}e=t[c]?"keydown":"keypress"}"keypress"==e&&f.length&&(e="keydown");return{key:d,modifiers:f,action:e}}function f(b,c){return null===b||b===a?!1:b===c?!0:f(b.parentNode,c)}function m(b){function d(a){a=
a||{};var b=!1,c;for(c in D)a[c]?b=!0:D[c]=0;b||(J=!1)}function f(a,b,c,d,e,h){var g,m,n=[],l=c.type;if(!t._callbacks[a])return[];"keyup"==l&&k(a)&&(b=[a]);for(g=0;g<t._callbacks[a].length;++g)if(m=t._callbacks[a][g],(d||!m.seq||D[m.seq]==m.level)&&l==m.action){var q;(q="keypress"==l&&!c.metaKey&&!c.ctrlKey)||(q=m.modifiers,q=b.sort().join(",")===q.sort().join(","));q&&(q=d&&m.seq==d&&m.level==h,(!d&&m.combo==e||q)&&t._callbacks[a].splice(g,1),n.push(m))}return n}function h(a,b,c,d){t.stopCallback(b,
b.target||b.srcElement,c,d)||!1!==a(b,c)||(b.preventDefault?b.preventDefault():b.returnValue=!1,b.stopPropagation?b.stopPropagation():b.cancelBubble=!0)}function n(a){"number"!==typeof a.which&&(a.which=a.keyCode);var b=l(a);b&&("keyup"==a.type&&L===b?L=!1:t.handleKey(b,g(a),a))}function q(a,b,c,f){function g(b){return function(){J=b;++D[a];clearTimeout(F);F=setTimeout(d,1E3)}}function m(b){h(c,b,a);"keyup"!==f&&(L=l(b));setTimeout(d,10)}for(var k=D[a]=0;k<b.length;++k){var n=k+1===b.length?m:g(f||
e(b[k+1]).action);r(b[k],n,f,a,k)}}function r(a,b,c,d,h){t._directMap[a+":"+c]=b;a=a.replace(/\s+/g," ");var g=a.split(" ");1<g.length?q(a,g,b,c):(c=e(a,c),t._callbacks[c.key]=t._callbacks[c.key]||[],f(c.key,c.modifiers,{type:c.action},d,a,h),t._callbacks[c.key][d?"unshift":"push"]({callback:b,modifiers:c.modifiers,action:c.action,seq:d,level:h,combo:a}))}var t=this;b=b||a;if(!(t instanceof m))return new m(b);t.target=b;t._callbacks={};t._directMap={};var D={},F,L=!1,K=!1,J=!1;t._handleKey=function(a,
b,c){var e=f(a,b,c),g;b={};var m=0,n=!1;for(g=0;g<e.length;++g)e[g].seq&&(m=Math.max(m,e[g].level));for(g=0;g<e.length;++g)e[g].seq?e[g].level==m&&(n=!0,b[e[g].seq]=1,h(e[g].callback,c,e[g].combo,e[g].seq)):n||h(e[g].callback,c,e[g].combo);e="keypress"==c.type&&K;c.type!=J||k(a)||e||d(b);K=n&&"keydown"==c.type};t._bindMultiple=function(a,b,c){for(var d=0;d<a.length;++d)r(a[d],b,c)};c(b,"keypress",n);c(b,"keydown",n);c(b,"keyup",n)}var h={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",
20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},n={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},q={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},r={option:"alt",command:"meta","return":"enter",
escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},t;for(b=1;20>b;++b)h[111+b]="f"+b;for(b=0;9>=b;++b)h[b+96]=b;m.prototype.bind=function(a,b,c){a=a instanceof Array?a:[a];this._bindMultiple.call(this,a,b,c);return this};m.prototype.unbind=function(a,b){return this.bind.call(this,a,function(){},b)};m.prototype.trigger=function(a,b){if(this._directMap[a+":"+b])this._directMap[a+":"+b]({},a);return this};m.prototype.reset=function(){this._callbacks={};this._directMap=
{};return this};m.prototype.stopCallback=function(a,b){return-1<(" "+b.className+" ").indexOf(" mousetrap ")||f(b,this.target)?!1:"INPUT"==b.tagName||"SELECT"==b.tagName||"TEXTAREA"==b.tagName||b.isContentEditable};m.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)};m.init=function(){var b=m(a),c;for(c in b)"_"!==c.charAt(0)&&(m[c]=function(a){return function(){return b[a].apply(b,arguments)}}(c))};m.init();d.Mousetrap=m;"undefined"!==typeof module&&module.exports&&(module.exports=
m);"function"===typeof define&&define.amd&&define(function(){return m})})(window,document);
angular.module("genius").service("Mousetrap",["$window","$rootScope",function(d,a){var b=function(b,c){c=c||{};return function(d){c.prevent_default&&d.preventDefault();c.stop_propagation&&d.stopPropagation();a.$apply(function(){b.call(this,d)}.bind(this))}},c=function(a,b){this.default_options=b||{};this.mousetrap=new d.Mousetrap(a)};c.prototype.bind=function(a,b){this.mousetrap.bind(a,b)};c.prototype.$bind=function(a,c,d){d=_.extend({},this.default_options,d);this.bind(a,b(c,d))};return _.extend(c,
{$bind:function(a,c,d){this.bind(a,b(c,d))},bind:d.Mousetrap.bind.bind(d.Mousetrap),unbind:d.Mousetrap.unbind.bind(d.Mousetrap),trigger:d.Mousetrap.trigger.bind(d.Mousetrap)})}]);angular.module("genius").service("MutationObserver",["$window",function(d){return d.MutationObserver}]);
angular.module("genius").service("NewRelic",["$window","$rootScope","Session",function(d,a,b){var c=d.newrelic,l=function(b){var d=0,e=a.$watch(function(){d+=1;d===b&&(c.finished(),c.addPageAction("secondApply"),e())})};return{init:function(a){c&&(c.setCustomAttribute("signedIn",b.user_signed_in),a&&c.setPageViewName(a,"resource.path"),l(2))}}}]);
(function(){var d,a,b,c,l,g,k,e,f,m,h,n,q,r,t,u,x,w,v,C=[].slice;d=/^\(?([^)]*)\)?(?:(.)(d+))?$/;a=1E3/30;q=document.createElement("div").style;l=null!=q.transition||null!=q.webkitTransition||null!=q.mozTransition||null!=q.oTransition;h=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;b=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;k=function(a){var b;b=document.createElement("div");
b.innerHTML=a;return b.children[0]};m=function(a,b){return a.className=a.className.replace(new RegExp("(^| )"+b.split(" ").join("|")+"( |$)","gi")," ")};g=function(a,b){m(a,b);return a.className+=" "+b};r=function(a,b){var c;if(null!=document.createEvent)return c=document.createEvent("HTMLEvents"),c.initEvent(b,!0,!0),a.dispatchEvent(c)};f=function(){var a,b;return null!=(a=null!=(b=window.performance)?"function"===typeof b.now?b.now():void 0:void 0)?a:+new Date};n=function(a,b){null==b&&(b=0);if(!b)return Math.round(a);
a*=Math.pow(10,b);a=Math.floor(a+.5);return a/Math.pow(10,b)};t=function(a){return 0>a?Math.ceil(a):Math.floor(a)};e=function(a){return a-n(a)};u=!1;(q=function(){var a,b,c,d,e;if(!u&&null!=window.jQuery){u=!0;d=["html","text"];e=[];b=0;for(c=d.length;b<c;b++)a=d[b],e.push(function(a){var b;b=window.jQuery.fn[a];return window.jQuery.fn[a]=function(a){var c;return null==a||null==(null!=(c=this[0])?c.odometer:void 0)?b.apply(this,arguments):this[0].odometer.update(a)}}(a));return e}})();setTimeout(q,
0);c=function(){function c(b){var d,e,f,h,g,m,k,n=this;this.options=b;this.el=this.options.el;if(null!=this.el.odometer)return this.el.odometer;this.el.odometer=this;g=c.options;for(d in g)b=g[d],null==this.options[d]&&(this.options[d]=b);null==(d=this.options).duration&&(d.duration=2E3);this.MAX_VALUES=this.options.duration/a/2|0;this.resetFormat();this.value=this.cleanValue(null!=(m=this.options.value)?m:"");this.renderInside();this.render();try{for(k=["innerHTML","innerText","textContent"],f=0,
h=k.length;f<h;f++)e=k[f],null!=this.el[e]&&function(a){return Object.defineProperty(n.el,a,{get:function(){var b;return"innerHTML"===a?n.inside.outerHTML:null!=(b=n.inside.innerText)?b:n.inside.textContent},set:function(a){return n.update(a)}})}(e)}catch(l){this.watchForMutations()}this}c.prototype.renderInside=function(){this.inside=document.createElement("div");this.inside.className="odometer-inside";this.el.innerHTML="";return this.el.appendChild(this.inside)};c.prototype.watchForMutations=function(){var a=
this;if(null!=b)try{return null==this.observer&&(this.observer=new b(function(b){b=a.el.innerText;a.renderInside();a.render(a.value);return a.update(b)})),this.watchMutations=!0,this.startWatchingMutations()}catch(c){}};c.prototype.startWatchingMutations=function(){if(this.watchMutations)return this.observer.observe(this.el,{childList:!0})};c.prototype.stopWatchingMutations=function(){var a;return null!=(a=this.observer)?a.disconnect():void 0};c.prototype.cleanValue=function(a){var b;"string"===typeof a&&
(a=a.replace(null!=(b=this.format.radix)?b:".","<radix>"),a=a.replace(/[.,]/g,""),a=a.replace("<radix>","."),a=parseFloat(a,10)||0);return n(a,this.format.precision)};c.prototype.bindTransitionEnd=function(){var a,b,c,d,e,f,h=this;if(!this.transitionEndBound){this.transitionEndBound=!0;b=!1;e=["transitionend","webkitTransitionEnd","oTransitionEnd","otransitionend","MSTransitionEnd"];f=[];c=0;for(d=e.length;c<d;c++)a=e[c],f.push(this.el.addEventListener(a,function(){if(b)return!0;b=!0;setTimeout(function(){h.render();
b=!1;return r(h.el,"odometerdone")},0);return!0},!1));return f}};c.prototype.resetFormat=function(){var a,b,c;(a=null!=(c=this.options.format)?c:"(,ddd).dd")||(a="d");a=d.exec(a);if(!a)throw Error("Odometer: Unparsable digit format");b=a.slice(1,4);c=b[0];a=b[1];b=b[2];return this.format={repeating:c,radix:a,precision:(null!=b?b.length:void 0)||0}};c.prototype.render=function(a){var b,c,d,e,f,h,g;null==a&&(a=this.value);this.stopWatchingMutations();this.resetFormat();this.inside.innerHTML="";f=this.options.theme;
b=this.el.className.split(" ");e=[];h=0;for(g=b.length;h<g;h++)c=b[h],c.length&&((d=/^odometer-theme-(.+)$/.exec(c))?f=d[1]:/^odometer(-|$)/.test(c)||e.push(c));e.push("odometer");l||e.push("odometer-no-transitions");f?e.push("odometer-theme-"+f):e.push("odometer-auto-theme");this.el.className=e.join(" ");this.ribbons={};this.formatDigits(a);return this.startWatchingMutations()};c.prototype.formatDigits=function(a){var b,c,d,f;this.digits=[];if(this.options.formatFunction)for(a=this.options.formatFunction(a),
f=a.split("").reverse(),c=0,d=f.length;c<d;c++)b=f[c],b.match(/0-9/)?(a=this.renderDigit(),a.querySelector(".odometer-value").innerHTML=b,this.digits.push(a),this.insertDigit(a)):this.addSpacer(b);else for(b=!this.format.precision||!e(a)||!1,f=a.toString().split("").reverse(),c=0,d=f.length;c<d;c++)a=f[c],"."===a&&(b=!0),this.addDigit(a,b)};c.prototype.update=function(a){var b,c=this;a=this.cleanValue(a);if(b=a-this.value)return m(this.el,"odometer-animating-up odometer-animating-down odometer-animating"),
0<b?g(this.el,"odometer-animating-up"):g(this.el,"odometer-animating-down"),this.stopWatchingMutations(),this.animate(a),this.startWatchingMutations(),setTimeout(function(){c.el.offsetHeight;return g(c.el,"odometer-animating")},0),this.value=a};c.prototype.renderDigit=function(){return k('<span class="odometer-digit"><span class="odometer-digit-spacer">8</span><span class="odometer-digit-inner"><span class="odometer-ribbon"><span class="odometer-ribbon-inner"><span class="odometer-value"></span></span></span></span></span>')};
c.prototype.insertDigit=function(a,b){return null!=b?this.inside.insertBefore(a,b):this.inside.children.length?this.inside.insertBefore(a,this.inside.children[0]):this.inside.appendChild(a)};c.prototype.addSpacer=function(a,b,c){var d;d=k('<span class="odometer-formatting-mark"></span>');d.innerHTML=a;c&&g(d,c);return this.insertDigit(d,b)};c.prototype.addDigit=function(a,b){var c,d;null==b&&(b=!0);if("-"===a)return this.addSpacer(a,null,"odometer-negation-mark");if("."===a)return this.addSpacer(null!=
(c=this.format.radix)?c:".",null,"odometer-radix-mark");if(b)for(d=!1;;){if(!this.format.repeating.length){if(d)throw Error("Bad odometer format without digits");this.resetFormat();d=!0}c=this.format.repeating[this.format.repeating.length-1];this.format.repeating=this.format.repeating.substring(0,this.format.repeating.length-1);if("d"===c)break;this.addSpacer(c)}c=this.renderDigit();c.querySelector(".odometer-value").innerHTML=a;this.digits.push(c);return this.insertDigit(c)};c.prototype.animate=
function(a){return l&&"count"!==this.options.animation?this.animateSlide(a):this.animateCount(a)};c.prototype.animateCount=function(a){var b,c,d,e,g,m=this;if(c=+a-this.value)return e=d=f(),b=this.value,(g=function(){var k;if(f()-e>m.options.duration)m.value=a,m.render(),r(m.el,"odometerdone");else return k=f()-d,50<k&&(d=f(),k/=m.options.duration,k*=c,b+=k,m.render(Math.round(b))),null!=h?h(g):setTimeout(g,50)})()};c.prototype.getDigitCount=function(){var a,b,c,d,e;c=1<=arguments.length?C.call(arguments,
0):[];a=d=0;for(e=c.length;d<e;a=++d)b=c[a],c[a]=Math.abs(b);a=Math.max.apply(Math,c);return Math.ceil(Math.log(a+1)/Math.log(10))};c.prototype.getFractionalDigitCount=function(){var a,b,c,d,e,f;d=1<=arguments.length?C.call(arguments,0):[];b=/^\-?\d*\.(\d*?)0*$/;a=e=0;for(f=d.length;e<f;a=++e)c=d[a],d[a]=c.toString(),c=b.exec(d[a]),d[a]=null==c?0:c[1].length;return Math.max.apply(Math,d)};c.prototype.resetDigits=function(){this.digits=[];this.ribbons=[];this.inside.innerHTML="";return this.resetFormat()};
c.prototype.animateSlide=function(a){var b,c,d,e,f,h,m,k,n,l,q,r,u,x,w,v;q=this.value;if(k=this.getFractionalDigitCount(q,a))a*=Math.pow(10,k),q*=Math.pow(10,k);if(d=a-q){this.bindTransitionEnd();e=this.getDigitCount(q,a);f=[];for(h=x=b=0;0<=e?x<e:x>e;h=0<=e?++x:--x){r=t(q/Math.pow(10,e-h-1));m=t(a/Math.pow(10,e-h-1));h=m-r;if(Math.abs(h)>this.MAX_VALUES){n=[];l=h/(this.MAX_VALUES+this.MAX_VALUES*b*.5);for(c=r;0<h&&c<m||0>h&&c>m;)n.push(Math.round(c)),c+=l;n[n.length-1]!==m&&n.push(m);b++}else n=
function(){v=[];for(var a=r;r<=m?a<=m:a>=m;r<=m?a++:a--)v.push(a);return v}.apply(this);h=l=0;for(w=n.length;l<w;h=++l)c=n[h],n[h]=Math.abs(c%10);f.push(n)}this.resetDigits();l=f.reverse();h=e=0;for(f=l.length;e<f;h=++e)for(n=l[h],this.digits[h]||this.addDigit(" ",h>=k),null==(u=this.ribbons)[h]&&(u[h]=this.digits[h].querySelector(".odometer-ribbon-inner")),this.ribbons[h].innerHTML="",0>d&&(n=n.reverse()),a=x=0,q=n.length;x<q;a=++x)c=n[a],b=document.createElement("div"),b.className="odometer-value",
b.innerHTML=c,this.ribbons[h].appendChild(b),a===n.length-1&&g(b,"odometer-last-value"),0===a&&g(b,"odometer-first-value");0>r&&this.addDigit("-");d=this.inside.querySelector(".odometer-radix-mark");null!=d&&d.parent.removeChild(d);if(k)return this.addSpacer(this.format.radix,this.digits[k-1],"odometer-radix-mark")}};return c}();c.options=null!=(w=window.odometerOptions)?w:{};setTimeout(function(){var a,b,d,e,f;if(window.odometerOptions){e=window.odometerOptions;f=[];for(a in e)b=e[a],f.push(null!=
(d=c.options)[a]?(d=c.options)[a]:d[a]=b);return f}},0);c.init=function(){var a,b,d,e,f,h;if(null!=document.querySelectorAll){b=document.querySelectorAll(c.options.selector||".odometer");h=[];d=0;for(e=b.length;d<e;d++)a=b[d],h.push(a.odometer=new c({el:a,value:null!=(f=a.innerText)?f:a.textContent}));return h}};null!=(null!=(v=document.documentElement)?v.doScroll:void 0)&&null!=document.createEventObject?(x=document.onreadystatechange,document.onreadystatechange=function(){"complete"===document.readyState&&
!1!==c.options.auto&&c.init();return null!=x?x.apply(this,arguments):void 0}):document.addEventListener("DOMContentLoaded",function(){if(!1!==c.options.auto)return c.init()},!1);"function"===typeof define&&define.amd?define(["jquery"],function(){return c}):"undefined"!==typeof exports&&null!==exports?module.exports=c:window.Odometer=c}).call(this);angular.module("genius").service("Odometer",["$window",function(d){return d.Odometer}]);
angular.module("genius").service("only_changes",[function(){return function(d,a){return _.omitBy(d,function(b,c){return a[c]===b})}}]);
angular.module("genius").service("PageData",["$document","Api","$q",function(d,a,b){var c=_.memoize(function(){var a=d[0].head.querySelector("[itemprop=page_data]");if(a)return JSON.parse(a.content)});return{load:function(d,g,k){k&&(k=_.get(c(),[d,"url"]),k=_.last(k.match(/https?:\/\/[^\/]*(.*)/)),k=g===k);return k?b.when(c()):a.returning("page_data").get("/page_data/:type",{type:d,url:g})},preloaded_page_data:c}}]);
angular.module("genius").service("PageVisibility",["$document","$rootScope",function(d,a){var b,c;_.isUndefined(d[0].hidden)?_.isUndefined(d[0].mozHidden)?_.isUndefined(d[0].msHidden)?_.isUndefined(d[0].webkitHidden)||(b="webkitHidden",c="webkitvisibilitychange"):(b="msHidden",c="msvisibilitychange"):(b="mozHidden",c="mozvisibilitychange"):(b="hidden",c="visibilitychange");var l=!_.isUndefined(b);if(l){var g=[];d[0].addEventListener(c,function(){if(!_.isEmpty(g)){for(;_.any(g);)g.shift()();a.$apply()}})}return{is_visible:function(){return!d[0][b]},
is_hidden:function(){return d[0][b]},when_visible:function(a,c){a=c?a.bind(c):a;l&&d[0][b]?g.push(a):a()}}}]);angular.module("genius").service("PlayerJS",["$window",function(d){return d.playerjs}]);
angular.module("genius").service("Pusher",["$window","$rootScope","AppConfig",function(d,a,b){var c={},l,g=function(){l||(l=new d.Pusher(b.pusher_app_key));return l};return{pusher:g,subscribe:function(b,d,f){c[b]||(c[b]={},g().subscribe(b).bind_all(function(d,e){var f=c[b][d];f&&a.$applyAsync(function(){f.forEach(function(a){a(e)})})}));c[b][d]=c[b][d]||[];c[b][d].push(f)}}}]);
angular.module("genius").service("PyongService",["AppConfig","$http",function(d,a){var b=function(b,l,g,k){k=_.set(k||{},l+"_id",g);return a.post(d.api_root_url+b,k).then(function(a){return a.data.response[l]})};return{pyong:function(a,d){return b("/pyongs",a,d,{note_may_follow:!0})},finalizePyong:function(a,d,g){return b("/pyongs/finalize",a,d,{pyong_note:g})}}}]);
(function(d){if("function"===typeof require&&"object"===typeof exports&&"object"===typeof module){try{var a=require("jquery")}catch(c){}module.exports=d(a)}else if("function"===typeof define&&define.amd)define(["jquery"],function(a){return d(a)});else{var b;try{b=(0,eval)("this")}catch(c){b=window}b.deparam=d(b.jQuery)}})(function(d){var a=function(a,c){var d={},g={"true":!0,"false":!1,"null":null};a.replace(/\+/g," ").split("&").forEach(function(a){var b=a.split("=");a=decodeURIComponent(b[0]);var f=
d,m=0,h=a.split("]["),n=h.length-1;/\[/.test(h[0])&&/\]$/.test(h[n])?(h[n]=h[n].replace(/\]$/,""),h=h.shift().split("[").concat(h),n=h.length-1):n=0;if(2===b.length)if(b=decodeURIComponent(b[1]),c&&(b=b&&!isNaN(b)&&+b+""===b?+b:"undefined"===b?void 0:void 0!==g[b]?g[b]:b),n)for(;m<=n;m++)a=""===h[m]?f.length:h[m],f=f[a]=m<n?f[a]||(h[m+1]&&isNaN(h[m+1])?{}:[]):b;else"[object Array]"===Object.prototype.toString.call(d[a])?d[a].push(b):{}.hasOwnProperty.call(d,a)?d[a]=[d[a],b]:d[a]=b;else a&&(d[a]=c?
void 0:"")});return d};d&&(d.prototype.deparam=d.deparam=a);return a});angular.module("genius").service("querystring",function(){return{stringify:function(d){return $.param(d)},parse:function(d){return $.deparam(d)}}});
angular.module("genius").service("QuestionService",["$http","$q","AppConfig","Reversible",function(d,a,b,c){return{create_if_not_exists:function(b){return b.id?a.resolve(b):this.create(b.song_id,b)},create:function(c,g){var k=_.extend({},g,{body:g.body});return d.post(b.api_root_url+"/songs/"+c+"/questions?text_format=plain",{question:k}).then(function(a){_.extend(g,a.data.response.question);return g}).catch(function(b){return a.reject(_.set(b.data.response,"message",b.data.meta.message))})},update:function(l,
g){var k=c.modify(l,g.question);return d.put(b.api_root_url+"/questions/"+l.id,g,{params:{text_format:"html,markdown"}}).then(function(a){_.extend(l,a.data.response.question)}).catch(function(b){k();return a.reject(Error(b.data.meta.message))})},move:function(c,g){return d.put(b.api_root_url+"/questions/"+c.id+"/move",{direction:g},{params:{text_format:"html,markdown"}}).then(function(a){_.extend(c,a.data.response.question)}).catch(function(b){return a.reject(Error(b.data.meta.message))})},change_state:function(c,
g){return d.put(b.api_root_url+"/questions/"+c.id+"/change_state",{state_event:g},{params:{text_format:"html,markdown"}}).then(function(a){_.extend(c,a.data.response.question)}).catch(function(b){return a.reject(Error(b.data.meta.message))})}}}]);
angular.module("genius").service("ReferentService",["$http","AppConfig","Session","querystring",function(d,a,b,c){return{refresh:function(a){return this.get(a.id).then(function(b){_.extend(a,_.omit(b,"annotations"));_.each(a.annotations,function(a){_.each(b.annotations,function(b){b.id===a.id&&_.extend(a,b)})});return a})},get:function(c){return d.get(a.api_root_url+"/referents/"+c,{params:{text_format:b.user_signed_in?"html,markdown,plain":"html,plain"}}).then(function(a){return a.data.response.referent})},
bulk_load:function(l){l=c.stringify({text_format:b.user_signed_in?"html,markdown,plain":"html,plain",ids:l});return d.get(a.api_root_url+"/referents/multi?"+l).then(function(a){Object.keys(a.data.response.referents).forEach(function(b){a.data.response.referents[b]=a.data.response.referents[b]});return a.data.response.referents})},create_referent:function(b){var g=c.stringify({text_format:"html"});return d.post(a.api_root_url+"/songs/"+b.song.id+"/referents?"+g,b).then(function(a){return a.data.response.referent})}}}]);
angular.module("genius").service("ReferentHelper",["Session",function(d){var a=function(a){return{_editing:{_form_visible:!0},new:!0,referent_id:a.id,body:{markdown:"",html:""},authors:[{user:d.current_user,pinned_role:a.current_user_metadata.relationships.pinned_role}],created_at:parseInt(Date.now()/1E3),needs_exegesis:0===a.annotations.length}};return{display_mode_by_classification:function(a){return _.include(["verified","cosigned"],a)?"green":"unreviewed"===a&&d.has_permission("see_unreviewed_referents",
d.current_user)?"red":"yellow"},create_verified_annotation_placeholder:function(b){return _.extend(a(b),{verified:!0})},create_community_annotation_placeholder:function(b){return _.extend(a(b),{id:b.id})},range_or_contents_intersects_links:function(a){return!!(a.cloneContents().querySelectorAll("a").length||$(a.startContainer).closest("a").length||$(a.endContainer).closest("a").length)}}}]);
angular.module("genius").service("ReferentRegistry",["Preloader","ReferentService",function(d,a){var b=new d(function(b){return a.bulk_load(b)}),c={},l=[];return{get:function(a){var d=this.peek(a);d&&d.stub&&b.load(a).then(function(a){var b=c[a.id];delete b.stub;_.extend(b,a)});return d},peek:function(a){return c[a]},first:function(a,b){var d=l.indexOf(b&&b.after_referent_id);return c[_.find(l,function(b,m){return m>d&&a(c[b])})]},register:function(a){if(c[a.id])return c[a.id];c[a.id]=a;l.push(a.id);
return a},bulk_preload:function(a){b.bulk_load(a)},preload_insert:function(a){b.insert(a.id,a)},preload_from_start:function(a){this.preload_around(l[0],a)},preload_around:function(a,c){var d=l.indexOf(a),f=_(l).sortBy(function(a,b){return Math.abs(b-d)}).value(),f=b.filter_unloaded(f).slice(0,c);b.bulk_load(f)},update_if_present:function(a){var b=this.peek(a.id);return b?(b.stub&&_.extend(b,a),b):a}}}]);
angular.module("genius").service("Reversible",["$parse",function(d){return{modify:function(a,b){var c,l={},g={};for(c in b)l[c]=d(c),_.has(a,c)&&(g[c]=l[c](a)),l[c].assign(a,b[c]);return function(){for(c in b)_.has(g,c)?l[c].assign(a,g[c]):c.split(".").reduce(function(a,b,c,d){if(a)return c===d.length-1?delete a[b]:a[b]},a)}}}}]);
__extends=this&&this.__extends||function(d,a){function b(){this.constructor=d}for(var c in a)a.hasOwnProperty(c)&&(d[c]=a[c]);d.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b)};
angular.module("genius").service("ScrollFocus",["$window","EventEmitter",function(d,a){var b=d.JSONStore,c=function(){function a(){this.elements=[]}a.prototype.clear=function(){_.invoke(this.elements,"remove")};a.prototype.draw_area=function(a,b){this.draw({position:"absolute",backgroundColor:"rgba(255, 0, 0, 0.1)",border:"1px solid red",width:"100%",top:a,height:b-a})};a.prototype.draw_line=function(a){this.draw({position:"absolute",border:"1px solid blue",width:"100%",height:1,top:a})};a.prototype.draw=
function(a){a=$("<div>").css(a).appendTo("body");this.elements.push(a)};return a}();return function(a){function g(b,e){var f=this;a.call(this);this.elements=b;this.options=_.defaults({},e,{update_ms:10,topmost_offset:.25,bottommost_offset:.6,zone_radius:.1,container:$(d.document.body),scroll_frame:d});this.debug=new c;var g=null;this.scroll_handler=_.throttle(function(){f._draw_debug();var a=f._focused_element();a!==g&&(f.emit("update",a),g=a)},this.options.update_ms);$(this.options.scroll_frame).on("scroll",
this.scroll_handler)}__extends(g,a);g.prototype.replace=function(a){this.elements=a};g.prototype.destroy=function(){$(this.options.scroll_frame).off("scroll",this.scroll_handler)};g.prototype._focused_element=function(){for(var a=this._trigger_top(),b=this._element_zones(),c=0;c<b.length;c++){var d=b[c];if(d.top<a&&d.bottom>a)return this.elements[c]}return null};g.prototype._trigger_top=function(){var a=$(this.options.scroll_frame).height(),b=$(this.options.container),b=b.offset().top+b.height()-
a,b=Math.min(1,$(this.options.scroll_frame).scrollTop()/b);return(this.options.topmost_offset+b*(this.options.bottommost_offset-this.options.topmost_offset))*a};g.prototype._element_zones=function(){var a=$(this.options.scroll_frame).height(),b=this.options.zone_radius*a,c=this.options.container.getBoundingClientRect(),a=_.map(this.elements,function(a){a=a.getBoundingClientRect();return{top:Math.max(c.top,a.top-b),bottom:Math.min(c.bottom,a.bottom+b)}});_.eachCons(a,2,function(a,b){if(a.bottom>b.top){var c=
a.bottom-b.top;a.bottom-=c/2;b.top+=c/2}});return a};g.prototype._draw_debug=function(){var a=this;if(b.get_object("scroll_focus_debug")){var c=$(this.options.scroll_frame).scrollTop();this.debug.clear();this.debug.draw_line(c+this._trigger_top());_.each(this._element_zones(),function(b){a.debug.draw_area(c+b.top,c+b.bottom)})}};return g}(a)}]);
angular.module("genius").service("ScrollPoint",["$window",function(d){var a={},b={};a.register=function(c,d){a.has_point(c)&&b[c].push(d);b[c]=[d]};a.unregister=function(c,d){a.has_point(c)&&(b[c]=_.without(b[c],d),b[c].length||delete b[c])};a.scroll_to=function(c){d.requestAnimationFrame(function(){a.has_point(c)&&$("html, body").animate({scrollTop:b[c][0].offset().top})})};a.has_point=function(a){return!!b[a]};return a}]);
angular.module("genius").service("SearchService",["Api",function(d){return{multi:function(a,b){return d.get("/search/multi",_.extend({q:a},b))},section:function(a,b,c){return d.get("/search/:section",_.extend({q:b,section:a},c))}}}]);
angular.module("genius").factory("Session",["SessionConfig",function(d){return Object.create(Object.prototype,{has_permission:{value:function(a,b){return _.includes(_.get(b,"current_user_metadata.permissions"),a)}},has_feature:{value:function(a){return _.includes(_.get(d.current_user,"current_user_metadata.features"),a)}},user_signed_in:{get:function(){return!!this.current_user}},current_user:{get:function(){return d.current_user},set:function(a){d.current_user=a}}})}]);
(function(d){"object"===typeof exports&&"undefined"!==typeof module?module.exports=d():"function"===typeof define&&define.amd?define([],d):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).Rx=d()})(function(){return function a(b,c,l){function g(e,m){if(!c[e]){if(!b[e]){var h="function"==typeof require&&require;if(!m&&h)return h(e,!0);if(k)return k(e,!0);h=Error("Cannot find module '"+e+"'");throw h.code="MODULE_NOT_FOUND",h;}h=c[e]={exports:{}};
b[e][0].call(h.exports,function(a){var c=b[e][1][a];return g(c?c:a)},h,h.exports,a,b,c,l)}return c[e].exports}for(var k="function"==typeof require&&require,e=0;e<l.length;e++)g(l[e]);return g}({1:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("./Subject");var g=a("./Subscription");a=function(a){function b(){a.apply(this,arguments);this.value=
null;this.hasCompleted=this.hasNext=!1}l(b,a);b.prototype._subscribe=function(b){return this.hasCompleted&&this.hasNext?(b.next(this.value),b.complete(),g.Subscription.EMPTY):this.hasError?(b.error(this.thrownError),g.Subscription.EMPTY):a.prototype._subscribe.call(this,b)};b.prototype.next=function(a){this.hasCompleted||(this.value=a,this.hasNext=!0)};b.prototype.complete=function(){this.hasCompleted=!0;this.hasNext&&a.prototype.next.call(this,this.value);a.prototype.complete.call(this)};return b}(b.Subject);
c.AsyncSubject=a},{"./Subject":11,"./Subscription":14}],2:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("./Subject");var g=a("./util/ObjectUnsubscribedError");a=function(a){function b(c){a.call(this);this._value=c}l(b,a);Object.defineProperty(b.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0});
b.prototype._subscribe=function(b){var c=a.prototype._subscribe.call(this,b);c&&!c.closed&&b.next(this._value);return c};b.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new g.ObjectUnsubscribedError;return this._value};b.prototype.next=function(b){a.prototype.next.call(this,this._value=b)};return b}(b.Subject);c.BehaviorSubject=a},{"./Subject":11,"./util/ObjectUnsubscribedError":326}],3:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=
a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=function(a){function b(c,f,m){a.call(this);this.parent=c;this.outerValue=f;this.outerIndex=m;this.index=0}l(b,a);b.prototype._next=function(a){this.parent.notifyNext(this.outerValue,a,this.outerIndex,this.index++,this)};b.prototype._error=function(a){this.parent.notifyError(a,this);this.unsubscribe()};b.prototype._complete=function(){this.parent.notifyComplete(this);this.unsubscribe()};
return b}(a("./Subscriber").Subscriber);c.InnerSubscriber=a},{"./Subscriber":13}],4:[function(a,b,c){var l=a("./Observable");a=function(){function a(b,c,f){this.kind=b;this.value=c;this.exception=f;this.hasValue="N"===b}a.prototype.observe=function(a){switch(this.kind){case "N":return a.next&&a.next(this.value);case "E":return a.error&&a.error(this.exception);case "C":return a.complete&&a.complete()}};a.prototype.do=function(a,b,c){switch(this.kind){case "N":return a&&a(this.value);case "E":return b&&
b(this.exception);case "C":return c&&c()}};a.prototype.accept=function(a,b,c){return a&&"function"===typeof a.next?this.observe(a):this.do(a,b,c)};a.prototype.toObservable=function(){switch(this.kind){case "N":return l.Observable.of(this.value);case "E":return l.Observable.throw(this.exception);case "C":return l.Observable.empty()}throw Error("unexpected notification kind value");};a.createNext=function(b){return"undefined"!==typeof b?new a("N",b):this.undefinedValueNotification};a.createError=function(b){return new a("E",
void 0,b)};a.createComplete=function(){return this.completeNotification};a.completeNotification=new a("C");a.undefinedValueNotification=new a("N",void 0);return a}();c.Notification=a},{"./Observable":5}],5:[function(a,b,c){var l=a("./util/root"),g=a("./util/toSubscriber"),k=a("./symbol/observable");a=function(){function a(b){this._isScalar=!1;b&&(this._subscribe=b)}a.prototype.lift=function(b){var c=new a;c.source=this;c.operator=b;return c};a.prototype.subscribe=function(a,b,c){var e=this.operator;
a=g.toSubscriber(a,b,c);e?e.call(a,this):a.add(this._subscribe(a));if(a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a};a.prototype.forEach=function(a,b){var c=this;b||(l.root.Rx&&l.root.Rx.config&&l.root.Rx.config.Promise?b=l.root.Rx.config.Promise:l.root.Promise&&(b=l.root.Promise));if(!b)throw Error("no Promise impl found");return new b(function(b,e){var g=c.subscribe(function(b){if(g)try{a(b)}catch(c){e(c),g.unsubscribe()}else a(b)},e,b)})};a.prototype._subscribe=
function(a){return this.source.subscribe(a)};a.prototype[k.$$observable]=function(){return this};a.create=function(b){return new a(b)};return a}();c.Observable=a},{"./symbol/observable":312,"./util/root":340,"./util/toSubscriber":342}],6:[function(a,b,c){c.empty={closed:!0,next:function(a){},error:function(a){throw a;},complete:function(){}}},{}],7:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=
null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=function(a){function b(){a.apply(this,arguments)}l(b,a);b.prototype.notifyNext=function(a,b,c,h,g){this.destination.next(b)};b.prototype.notifyError=function(a,b){this.destination.error(a)};b.prototype.notifyComplete=function(a){this.destination.complete()};return b}(a("./Subscriber").Subscriber);c.OuterSubscriber=a},{"./Subscriber":13}],8:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&
(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("./Subject");var g=a("./scheduler/queue"),k=a("./operator/observeOn");a=function(a){function b(c,e,g){void 0===c&&(c=Number.POSITIVE_INFINITY);void 0===e&&(e=Number.POSITIVE_INFINITY);a.call(this);this.scheduler=g;this._events=[];this._bufferSize=1>c?1:c;this._windowTime=1>e?1:e}l(b,a);b.prototype.next=function(b){var c=this._getNow();this._events.push(new e(c,b));this._trimBufferThenGetEvents();a.prototype.next.call(this,
b)};b.prototype._subscribe=function(b){var c=this._trimBufferThenGetEvents(),e=this.scheduler;e&&b.add(b=new k.ObserveOnSubscriber(b,e));for(var e=c.length,g=0;g<e&&!b.closed;g++)b.next(c[g].value);return a.prototype._subscribe.call(this,b)};b.prototype._getNow=function(){return(this.scheduler||g.queue).now()};b.prototype._trimBufferThenGetEvents=function(){for(var a=this._getNow(),b=this._bufferSize,c=this._windowTime,e=this._events,f=e.length,g=0;g<f&&!(a-e[g].time<c);)g++;f>b&&(g=Math.max(g,f-
b));0<g&&e.splice(0,g);return e};return b}(b.Subject);c.ReplaySubject=a;var e=function(){return function(a,b){this.time=a;this.value=b}}()},{"./Subject":11,"./operator/observeOn":248,"./scheduler/queue":310}],9:[function(a,b,c){b=a("./Subject");c.Subject=b.Subject;b=a("./Observable");c.Observable=b.Observable;a("./add/observable/bindCallback");a("./add/observable/bindNodeCallback");a("./add/observable/combineLatest");a("./add/observable/concat");a("./add/observable/defer");a("./add/observable/empty");
a("./add/observable/forkJoin");a("./add/observable/from");a("./add/observable/fromEvent");a("./add/observable/fromEventPattern");a("./add/observable/fromPromise");a("./add/observable/generate");a("./add/observable/if");a("./add/observable/interval");a("./add/observable/merge");a("./add/observable/race");a("./add/observable/never");a("./add/observable/of");a("./add/observable/onErrorResumeNext");a("./add/observable/pairs");a("./add/observable/range");a("./add/observable/using");a("./add/observable/throw");
a("./add/observable/timer");a("./add/observable/zip");a("./add/observable/dom/ajax");a("./add/observable/dom/webSocket");a("./add/operator/buffer");a("./add/operator/bufferCount");a("./add/operator/bufferTime");a("./add/operator/bufferToggle");a("./add/operator/bufferWhen");a("./add/operator/cache");a("./add/operator/catch");a("./add/operator/combineAll");a("./add/operator/combineLatest");a("./add/operator/concat");a("./add/operator/concatAll");a("./add/operator/concatMap");a("./add/operator/concatMapTo");
a("./add/operator/count");a("./add/operator/dematerialize");a("./add/operator/debounce");a("./add/operator/debounceTime");a("./add/operator/defaultIfEmpty");a("./add/operator/delay");a("./add/operator/delayWhen");a("./add/operator/distinct");a("./add/operator/distinctKey");a("./add/operator/distinctUntilChanged");a("./add/operator/distinctUntilKeyChanged");a("./add/operator/do");a("./add/operator/exhaust");a("./add/operator/exhaustMap");a("./add/operator/expand");a("./add/operator/elementAt");a("./add/operator/filter");
a("./add/operator/finally");a("./add/operator/find");a("./add/operator/findIndex");a("./add/operator/first");a("./add/operator/groupBy");a("./add/operator/ignoreElements");a("./add/operator/isEmpty");a("./add/operator/audit");a("./add/operator/auditTime");a("./add/operator/last");a("./add/operator/let");a("./add/operator/every");a("./add/operator/map");a("./add/operator/mapTo");a("./add/operator/materialize");a("./add/operator/max");a("./add/operator/merge");a("./add/operator/mergeAll");a("./add/operator/mergeMap");
a("./add/operator/mergeMapTo");a("./add/operator/mergeScan");a("./add/operator/min");a("./add/operator/multicast");a("./add/operator/observeOn");a("./add/operator/onErrorResumeNext");a("./add/operator/pairwise");a("./add/operator/partition");a("./add/operator/pluck");a("./add/operator/publish");a("./add/operator/publishBehavior");a("./add/operator/publishReplay");a("./add/operator/publishLast");a("./add/operator/race");a("./add/operator/reduce");a("./add/operator/repeat");a("./add/operator/repeatWhen");
a("./add/operator/retry");a("./add/operator/retryWhen");a("./add/operator/sample");a("./add/operator/sampleTime");a("./add/operator/scan");a("./add/operator/sequenceEqual");a("./add/operator/share");a("./add/operator/single");a("./add/operator/skip");a("./add/operator/skipUntil");a("./add/operator/skipWhile");a("./add/operator/startWith");a("./add/operator/subscribeOn");a("./add/operator/switch");a("./add/operator/switchMap");a("./add/operator/switchMapTo");a("./add/operator/take");a("./add/operator/takeLast");
a("./add/operator/takeUntil");a("./add/operator/takeWhile");a("./add/operator/throttle");a("./add/operator/throttleTime");a("./add/operator/timeInterval");a("./add/operator/timeout");a("./add/operator/timeoutWith");a("./add/operator/timestamp");a("./add/operator/toArray");a("./add/operator/toPromise");a("./add/operator/window");a("./add/operator/windowCount");a("./add/operator/windowTime");a("./add/operator/windowToggle");a("./add/operator/windowWhen");a("./add/operator/withLatestFrom");a("./add/operator/zip");
a("./add/operator/zipAll");b=a("./Subscription");c.Subscription=b.Subscription;b=a("./Subscriber");c.Subscriber=b.Subscriber;b=a("./AsyncSubject");c.AsyncSubject=b.AsyncSubject;b=a("./ReplaySubject");c.ReplaySubject=b.ReplaySubject;b=a("./BehaviorSubject");c.BehaviorSubject=b.BehaviorSubject;b=a("./observable/MulticastObservable");c.MulticastObservable=b.MulticastObservable;b=a("./observable/ConnectableObservable");c.ConnectableObservable=b.ConnectableObservable;b=a("./Notification");c.Notification=
b.Notification;b=a("./util/EmptyError");c.EmptyError=b.EmptyError;b=a("./util/ArgumentOutOfRangeError");c.ArgumentOutOfRangeError=b.ArgumentOutOfRangeError;b=a("./util/ObjectUnsubscribedError");c.ObjectUnsubscribedError=b.ObjectUnsubscribedError;b=a("./util/UnsubscriptionError");c.UnsubscriptionError=b.UnsubscriptionError;b=a("./operator/timeInterval");c.TimeInterval=b.TimeInterval;b=a("./operator/timestamp");c.Timestamp=b.Timestamp;b=a("./testing/TestScheduler");c.TestScheduler=b.TestScheduler;b=
a("./scheduler/VirtualTimeScheduler");c.VirtualTimeScheduler=b.VirtualTimeScheduler;b=a("./observable/dom/AjaxObservable");c.AjaxResponse=b.AjaxResponse;c.AjaxError=b.AjaxError;c.AjaxTimeoutError=b.AjaxTimeoutError;b=a("./scheduler/asap");var l=a("./scheduler/async"),g=a("./scheduler/queue"),k=a("./scheduler/animationFrame"),e=a("./symbol/rxSubscriber"),f=a("./symbol/iterator");a=a("./symbol/observable");c.Scheduler={asap:b.asap,queue:g.queue,animationFrame:k.animationFrame,async:l.async};c.Symbol=
{rxSubscriber:e.$$rxSubscriber,observable:a.$$observable,iterator:f.$$iterator}},{"./AsyncSubject":1,"./BehaviorSubject":2,"./Notification":4,"./Observable":5,"./ReplaySubject":8,"./Subject":11,"./Subscriber":13,"./Subscription":14,"./add/observable/bindCallback":15,"./add/observable/bindNodeCallback":16,"./add/observable/combineLatest":17,"./add/observable/concat":18,"./add/observable/defer":19,"./add/observable/dom/ajax":20,"./add/observable/dom/webSocket":21,"./add/observable/empty":22,"./add/observable/forkJoin":23,
"./add/observable/from":24,"./add/observable/fromEvent":25,"./add/observable/fromEventPattern":26,"./add/observable/fromPromise":27,"./add/observable/generate":28,"./add/observable/if":29,"./add/observable/interval":30,"./add/observable/merge":31,"./add/observable/never":32,"./add/observable/of":33,"./add/observable/onErrorResumeNext":34,"./add/observable/pairs":35,"./add/observable/race":36,"./add/observable/range":37,"./add/observable/throw":38,"./add/observable/timer":39,"./add/observable/using":40,
"./add/observable/zip":41,"./add/operator/audit":42,"./add/operator/auditTime":43,"./add/operator/buffer":44,"./add/operator/bufferCount":45,"./add/operator/bufferTime":46,"./add/operator/bufferToggle":47,"./add/operator/bufferWhen":48,"./add/operator/cache":49,"./add/operator/catch":50,"./add/operator/combineAll":51,"./add/operator/combineLatest":52,"./add/operator/concat":53,"./add/operator/concatAll":54,"./add/operator/concatMap":55,"./add/operator/concatMapTo":56,"./add/operator/count":57,"./add/operator/debounce":58,
"./add/operator/debounceTime":59,"./add/operator/defaultIfEmpty":60,"./add/operator/delay":61,"./add/operator/delayWhen":62,"./add/operator/dematerialize":63,"./add/operator/distinct":64,"./add/operator/distinctKey":65,"./add/operator/distinctUntilChanged":66,"./add/operator/distinctUntilKeyChanged":67,"./add/operator/do":68,"./add/operator/elementAt":69,"./add/operator/every":70,"./add/operator/exhaust":71,"./add/operator/exhaustMap":72,"./add/operator/expand":73,"./add/operator/filter":74,"./add/operator/finally":75,
"./add/operator/find":76,"./add/operator/findIndex":77,"./add/operator/first":78,"./add/operator/groupBy":79,"./add/operator/ignoreElements":80,"./add/operator/isEmpty":81,"./add/operator/last":82,"./add/operator/let":83,"./add/operator/map":84,"./add/operator/mapTo":85,"./add/operator/materialize":86,"./add/operator/max":87,"./add/operator/merge":88,"./add/operator/mergeAll":89,"./add/operator/mergeMap":90,"./add/operator/mergeMapTo":91,"./add/operator/mergeScan":92,"./add/operator/min":93,"./add/operator/multicast":94,
"./add/operator/observeOn":95,"./add/operator/onErrorResumeNext":96,"./add/operator/pairwise":97,"./add/operator/partition":98,"./add/operator/pluck":99,"./add/operator/publish":100,"./add/operator/publishBehavior":101,"./add/operator/publishLast":102,"./add/operator/publishReplay":103,"./add/operator/race":104,"./add/operator/reduce":105,"./add/operator/repeat":106,"./add/operator/repeatWhen":107,"./add/operator/retry":108,"./add/operator/retryWhen":109,"./add/operator/sample":110,"./add/operator/sampleTime":111,
"./add/operator/scan":112,"./add/operator/sequenceEqual":113,"./add/operator/share":114,"./add/operator/single":115,"./add/operator/skip":116,"./add/operator/skipUntil":117,"./add/operator/skipWhile":118,"./add/operator/startWith":119,"./add/operator/subscribeOn":120,"./add/operator/switch":121,"./add/operator/switchMap":122,"./add/operator/switchMapTo":123,"./add/operator/take":124,"./add/operator/takeLast":125,"./add/operator/takeUntil":126,"./add/operator/takeWhile":127,"./add/operator/throttle":128,
"./add/operator/throttleTime":129,"./add/operator/timeInterval":130,"./add/operator/timeout":131,"./add/operator/timeoutWith":132,"./add/operator/timestamp":133,"./add/operator/toArray":134,"./add/operator/toPromise":135,"./add/operator/window":136,"./add/operator/windowCount":137,"./add/operator/windowTime":138,"./add/operator/windowToggle":139,"./add/operator/windowWhen":140,"./add/operator/withLatestFrom":141,"./add/operator/zip":142,"./add/operator/zipAll":143,"./observable/ConnectableObservable":148,
"./observable/MulticastObservable":160,"./observable/dom/AjaxObservable":174,"./operator/timeInterval":283,"./operator/timestamp":286,"./scheduler/VirtualTimeScheduler":306,"./scheduler/animationFrame":307,"./scheduler/asap":308,"./scheduler/async":309,"./scheduler/queue":310,"./symbol/iterator":311,"./symbol/observable":312,"./symbol/rxSubscriber":313,"./testing/TestScheduler":318,"./util/ArgumentOutOfRangeError":320,"./util/EmptyError":321,"./util/ObjectUnsubscribedError":326,"./util/UnsubscriptionError":327}],
10:[function(a,b,c){a=function(){function a(b,c){void 0===c&&(c=a.now);this.SchedulerAction=b;this.now=c}a.prototype.schedule=function(a,b,c){void 0===b&&(b=0);return(new this.SchedulerAction(this,a)).schedule(c,b)};a.now=Date.now?Date.now:function(){return+new Date};return a}();c.Scheduler=a},{}],11:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,
new c)},g=a("./Observable");b=a("./Subscriber");var k=a("./Subscription"),e=a("./util/ObjectUnsubscribedError"),f=a("./SubjectSubscription"),m=a("./symbol/rxSubscriber"),h=function(a){function b(c){a.call(this,c);this.destination=c}l(b,a);return b}(b.Subscriber);c.SubjectSubscriber=h;a=function(a){function b(){a.call(this);this.observers=[];this.hasError=this.isStopped=this.closed=!1;this.thrownError=null}l(b,a);b.prototype[m.$$rxSubscriber]=function(){return new h(this)};b.prototype.lift=function(a){var b=
new n(this,this);b.operator=a;return b};b.prototype.next=function(a){if(this.closed)throw new e.ObjectUnsubscribedError;if(!this.isStopped)for(var b=this.observers,c=b.length,b=b.slice(),f=0;f<c;f++)b[f].next(a)};b.prototype.error=function(a){if(this.closed)throw new e.ObjectUnsubscribedError;this.hasError=!0;this.thrownError=a;this.isStopped=!0;for(var b=this.observers,c=b.length,b=b.slice(),f=0;f<c;f++)b[f].error(a);this.observers.length=0};b.prototype.complete=function(){if(this.closed)throw new e.ObjectUnsubscribedError;
this.isStopped=!0;for(var a=this.observers,b=a.length,a=a.slice(),c=0;c<b;c++)a[c].complete();this.observers.length=0};b.prototype.unsubscribe=function(){this.closed=this.isStopped=!0;this.observers=null};b.prototype._subscribe=function(a){if(this.closed)throw new e.ObjectUnsubscribedError;if(this.hasError)return a.error(this.thrownError),k.Subscription.EMPTY;if(this.isStopped)return a.complete(),k.Subscription.EMPTY;this.observers.push(a);return new f.SubjectSubscription(this,a)};b.prototype.asObservable=
function(){var a=new g.Observable;a.source=this;return a};b.create=function(a,b){return new n(a,b)};return b}(g.Observable);c.Subject=a;var n=function(a){function b(c,e){a.call(this);this.destination=c;this.source=e}l(b,a);b.prototype.next=function(a){var b=this.destination;b&&b.next&&b.next(a)};b.prototype.error=function(a){var b=this.destination;b&&b.error&&this.destination.error(a)};b.prototype.complete=function(){var a=this.destination;a&&a.complete&&this.destination.complete()};b.prototype._subscribe=
function(a){return this.source?this.source.subscribe(a):k.Subscription.EMPTY};return b}(a);c.AnonymousSubject=n},{"./Observable":5,"./SubjectSubscription":12,"./Subscriber":13,"./Subscription":14,"./symbol/rxSubscriber":313,"./util/ObjectUnsubscribedError":326}],12:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=function(a){function b(c,
f){a.call(this);this.subject=c;this.subscriber=f;this.closed=!1}l(b,a);b.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var a=this.subject,b=a.observers;this.subject=null;!b||0===b.length||a.isStopped||a.closed||(a=b.indexOf(this.subscriber),-1!==a&&b.splice(a,1))}};return b}(a("./Subscription").Subscription);c.SubjectSubscription=a},{"./Subscription":14}],13:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&
(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=a("./util/isFunction");b=a("./Subscription");var k=a("./Observer"),e=a("./symbol/rxSubscriber");a=function(a){function b(c,e,g){a.call(this);this.syncErrorValue=null;this.isStopped=this.syncErrorThrowable=this.syncErrorThrown=!1;switch(arguments.length){case 0:this.destination=k.empty;break;case 1:if(!c){this.destination=k.empty;break}if("object"===typeof c){c instanceof b?(this.destination=c,this.destination.add(this)):
(this.syncErrorThrowable=!0,this.destination=new f(this,c));break}default:this.syncErrorThrowable=!0,this.destination=new f(this,c,e,g)}}l(b,a);b.prototype[e.$$rxSubscriber]=function(){return this};b.create=function(a,c,e){a=new b(a,c,e);a.syncErrorThrowable=!1;return a};b.prototype.next=function(a){this.isStopped||this._next(a)};b.prototype.error=function(a){this.isStopped||(this.isStopped=!0,this._error(a))};b.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())};b.prototype.unsubscribe=
function(){this.closed||(this.isStopped=!0,a.prototype.unsubscribe.call(this))};b.prototype._next=function(a){this.destination.next(a)};b.prototype._error=function(a){this.destination.error(a);this.unsubscribe()};b.prototype._complete=function(){this.destination.complete();this.unsubscribe()};return b}(b.Subscription);c.Subscriber=a;var f=function(a){function b(c,e,f,h){a.call(this);this._parent=c;var k;c=this;g.isFunction(e)?k=e:e&&(c=e,k=e.next,f=e.error,h=e.complete,g.isFunction(c.unsubscribe)&&
this.add(c.unsubscribe.bind(c)),c.unsubscribe=this.unsubscribe.bind(this));this._context=c;this._next=k;this._error=f;this._complete=h}l(b,a);b.prototype.next=function(a){if(!this.isStopped&&this._next){var b=this._parent;b.syncErrorThrowable?this.__tryOrSetError(b,this._next,a)&&this.unsubscribe():this.__tryOrUnsub(this._next,a)}};b.prototype.error=function(a){if(!this.isStopped){var b=this._parent;if(this._error)b.syncErrorThrowable?this.__tryOrSetError(b,this._error,a):this.__tryOrUnsub(this._error,
a),this.unsubscribe();else if(b.syncErrorThrowable)b.syncErrorValue=a,b.syncErrorThrown=!0,this.unsubscribe();else throw this.unsubscribe(),a;}};b.prototype.complete=function(){if(!this.isStopped){var a=this._parent;this._complete&&(a.syncErrorThrowable?this.__tryOrSetError(a,this._complete):this.__tryOrUnsub(this._complete));this.unsubscribe()}};b.prototype.__tryOrUnsub=function(a,b){try{a.call(this._context,b)}catch(c){throw this.unsubscribe(),c;}};b.prototype.__tryOrSetError=function(a,b,c){try{b.call(this._context,
c)}catch(e){return a.syncErrorValue=e,a.syncErrorThrown=!0}return!1};b.prototype._unsubscribe=function(){var a=this._parent;this._parent=this._context=null;a.unsubscribe()};return b}(a)},{"./Observer":6,"./Subscription":14,"./symbol/rxSubscriber":313,"./util/isFunction":333}],14:[function(a,b,c){var l=a("./util/isArray"),g=a("./util/isObject"),k=a("./util/isFunction"),e=a("./util/tryCatch"),f=a("./util/errorObject"),m=a("./util/UnsubscriptionError");a=function(){function a(b){this.closed=!1;b&&(this._unsubscribe=
b)}a.prototype.unsubscribe=function(){var a=!1,b;if(!this.closed){this.closed=!0;var c=this._unsubscribe,h=this._subscriptions;this._subscriptions=null;if(k.isFunction(c)){var u=e.tryCatch(c).call(this);u===f.errorObject&&(a=!0,(b=b||[]).push(f.errorObject.e))}if(l.isArray(h))for(var c=-1,x=h.length;++c<x;)u=h[c],g.isObject(u)&&(u=e.tryCatch(u.unsubscribe).call(u),u===f.errorObject&&(a=!0,b=b||[],u=f.errorObject.e,u instanceof m.UnsubscriptionError?b=b.concat(u.errors):b.push(u)));if(a)throw new m.UnsubscriptionError(b);
}};a.prototype.add=function(b){if(!b||b===a.EMPTY)return a.EMPTY;if(b===this)return this;var c=b;switch(typeof b){case "function":c=new a(b);case "object":if(c.closed||"function"!==typeof c.unsubscribe)break;else this.closed?c.unsubscribe():(this._subscriptions||(this._subscriptions=[])).push(c);break;default:throw Error("unrecognized teardown "+b+" added to Subscription.");}return c};a.prototype.remove=function(b){if(null!=b&&b!==this&&b!==a.EMPTY){var c=this._subscriptions;c&&(b=c.indexOf(b),-1!==
b&&c.splice(b,1))}};a.EMPTY=function(a){a.closed=!0;return a}(new a);return a}();c.Subscription=a},{"./util/UnsubscriptionError":327,"./util/errorObject":330,"./util/isArray":331,"./util/isFunction":333,"./util/isObject":335,"./util/tryCatch":343}],15:[function(a,b,c){b=a("../../Observable");a=a("../../observable/bindCallback");b.Observable.bindCallback=a.bindCallback},{"../../Observable":5,"../../observable/bindCallback":169}],16:[function(a,b,c){b=a("../../Observable");a=a("../../observable/bindNodeCallback");
b.Observable.bindNodeCallback=a.bindNodeCallback},{"../../Observable":5,"../../observable/bindNodeCallback":170}],17:[function(a,b,c){b=a("../../Observable");a=a("../../observable/combineLatest");b.Observable.combineLatest=a.combineLatest},{"../../Observable":5,"../../observable/combineLatest":171}],18:[function(a,b,c){b=a("../../Observable");a=a("../../observable/concat");b.Observable.concat=a.concat},{"../../Observable":5,"../../observable/concat":172}],19:[function(a,b,c){b=a("../../Observable");
a=a("../../observable/defer");b.Observable.defer=a.defer},{"../../Observable":5,"../../observable/defer":173}],20:[function(a,b,c){b=a("../../../Observable");a=a("../../../observable/dom/ajax");b.Observable.ajax=a.ajax},{"../../../Observable":5,"../../../observable/dom/ajax":176}],21:[function(a,b,c){b=a("../../../Observable");a=a("../../../observable/dom/webSocket");b.Observable.webSocket=a.webSocket},{"../../../Observable":5,"../../../observable/dom/webSocket":177}],22:[function(a,b,c){b=a("../../Observable");
a=a("../../observable/empty");b.Observable.empty=a.empty},{"../../Observable":5,"../../observable/empty":178}],23:[function(a,b,c){b=a("../../Observable");a=a("../../observable/forkJoin");b.Observable.forkJoin=a.forkJoin},{"../../Observable":5,"../../observable/forkJoin":179}],24:[function(a,b,c){b=a("../../Observable");a=a("../../observable/from");b.Observable.from=a.from},{"../../Observable":5,"../../observable/from":180}],25:[function(a,b,c){b=a("../../Observable");a=a("../../observable/fromEvent");
b.Observable.fromEvent=a.fromEvent},{"../../Observable":5,"../../observable/fromEvent":181}],26:[function(a,b,c){b=a("../../Observable");a=a("../../observable/fromEventPattern");b.Observable.fromEventPattern=a.fromEventPattern},{"../../Observable":5,"../../observable/fromEventPattern":182}],27:[function(a,b,c){b=a("../../Observable");a=a("../../observable/fromPromise");b.Observable.fromPromise=a.fromPromise},{"../../Observable":5,"../../observable/fromPromise":183}],28:[function(a,b,c){b=a("../../Observable");
a=a("../../observable/GenerateObservable");b.Observable.generate=a.GenerateObservable.create},{"../../Observable":5,"../../observable/GenerateObservable":156}],29:[function(a,b,c){b=a("../../Observable");a=a("../../observable/if");b.Observable.if=a._if},{"../../Observable":5,"../../observable/if":184}],30:[function(a,b,c){b=a("../../Observable");a=a("../../observable/interval");b.Observable.interval=a.interval},{"../../Observable":5,"../../observable/interval":185}],31:[function(a,b,c){b=a("../../Observable");
a=a("../../observable/merge");b.Observable.merge=a.merge},{"../../Observable":5,"../../observable/merge":186}],32:[function(a,b,c){b=a("../../Observable");a=a("../../observable/never");b.Observable.never=a.never},{"../../Observable":5,"../../observable/never":187}],33:[function(a,b,c){b=a("../../Observable");a=a("../../observable/of");b.Observable.of=a.of},{"../../Observable":5,"../../observable/of":188}],34:[function(a,b,c){b=a("../../Observable");a=a("../../operator/onErrorResumeNext");b.Observable.onErrorResumeNext=
a.onErrorResumeNextStatic},{"../../Observable":5,"../../operator/onErrorResumeNext":249}],35:[function(a,b,c){b=a("../../Observable");a=a("../../observable/pairs");b.Observable.pairs=a.pairs},{"../../Observable":5,"../../observable/pairs":189}],36:[function(a,b,c){b=a("../../Observable");a=a("../../operator/race");b.Observable.race=a.raceStatic},{"../../Observable":5,"../../operator/race":257}],37:[function(a,b,c){b=a("../../Observable");a=a("../../observable/range");b.Observable.range=a.range},{"../../Observable":5,
"../../observable/range":190}],38:[function(a,b,c){b=a("../../Observable");a=a("../../observable/throw");b.Observable.throw=a._throw},{"../../Observable":5,"../../observable/throw":191}],39:[function(a,b,c){b=a("../../Observable");a=a("../../observable/timer");b.Observable.timer=a.timer},{"../../Observable":5,"../../observable/timer":192}],40:[function(a,b,c){b=a("../../Observable");a=a("../../observable/using");b.Observable.using=a.using},{"../../Observable":5,"../../observable/using":193}],41:[function(a,
b,c){b=a("../../Observable");a=a("../../observable/zip");b.Observable.zip=a.zip},{"../../Observable":5,"../../observable/zip":194}],42:[function(a,b,c){b=a("../../Observable");a=a("../../operator/audit");b.Observable.prototype.audit=a.audit},{"../../Observable":5,"../../operator/audit":195}],43:[function(a,b,c){b=a("../../Observable");a=a("../../operator/auditTime");b.Observable.prototype.auditTime=a.auditTime},{"../../Observable":5,"../../operator/auditTime":196}],44:[function(a,b,c){b=a("../../Observable");
a=a("../../operator/buffer");b.Observable.prototype.buffer=a.buffer},{"../../Observable":5,"../../operator/buffer":197}],45:[function(a,b,c){b=a("../../Observable");a=a("../../operator/bufferCount");b.Observable.prototype.bufferCount=a.bufferCount},{"../../Observable":5,"../../operator/bufferCount":198}],46:[function(a,b,c){b=a("../../Observable");a=a("../../operator/bufferTime");b.Observable.prototype.bufferTime=a.bufferTime},{"../../Observable":5,"../../operator/bufferTime":199}],47:[function(a,
b,c){b=a("../../Observable");a=a("../../operator/bufferToggle");b.Observable.prototype.bufferToggle=a.bufferToggle},{"../../Observable":5,"../../operator/bufferToggle":200}],48:[function(a,b,c){b=a("../../Observable");a=a("../../operator/bufferWhen");b.Observable.prototype.bufferWhen=a.bufferWhen},{"../../Observable":5,"../../operator/bufferWhen":201}],49:[function(a,b,c){b=a("../../Observable");a=a("../../operator/cache");b.Observable.prototype.cache=a.cache},{"../../Observable":5,"../../operator/cache":202}],
50:[function(a,b,c){b=a("../../Observable");a=a("../../operator/catch");b.Observable.prototype.catch=a._catch;b.Observable.prototype._catch=a._catch},{"../../Observable":5,"../../operator/catch":203}],51:[function(a,b,c){b=a("../../Observable");a=a("../../operator/combineAll");b.Observable.prototype.combineAll=a.combineAll},{"../../Observable":5,"../../operator/combineAll":204}],52:[function(a,b,c){b=a("../../Observable");a=a("../../operator/combineLatest");b.Observable.prototype.combineLatest=a.combineLatest},
{"../../Observable":5,"../../operator/combineLatest":205}],53:[function(a,b,c){b=a("../../Observable");a=a("../../operator/concat");b.Observable.prototype.concat=a.concat},{"../../Observable":5,"../../operator/concat":206}],54:[function(a,b,c){b=a("../../Observable");a=a("../../operator/concatAll");b.Observable.prototype.concatAll=a.concatAll},{"../../Observable":5,"../../operator/concatAll":207}],55:[function(a,b,c){b=a("../../Observable");a=a("../../operator/concatMap");b.Observable.prototype.concatMap=
a.concatMap},{"../../Observable":5,"../../operator/concatMap":208}],56:[function(a,b,c){b=a("../../Observable");a=a("../../operator/concatMapTo");b.Observable.prototype.concatMapTo=a.concatMapTo},{"../../Observable":5,"../../operator/concatMapTo":209}],57:[function(a,b,c){b=a("../../Observable");a=a("../../operator/count");b.Observable.prototype.count=a.count},{"../../Observable":5,"../../operator/count":210}],58:[function(a,b,c){b=a("../../Observable");a=a("../../operator/debounce");b.Observable.prototype.debounce=
a.debounce},{"../../Observable":5,"../../operator/debounce":211}],59:[function(a,b,c){b=a("../../Observable");a=a("../../operator/debounceTime");b.Observable.prototype.debounceTime=a.debounceTime},{"../../Observable":5,"../../operator/debounceTime":212}],60:[function(a,b,c){b=a("../../Observable");a=a("../../operator/defaultIfEmpty");b.Observable.prototype.defaultIfEmpty=a.defaultIfEmpty},{"../../Observable":5,"../../operator/defaultIfEmpty":213}],61:[function(a,b,c){b=a("../../Observable");a=a("../../operator/delay");
b.Observable.prototype.delay=a.delay},{"../../Observable":5,"../../operator/delay":214}],62:[function(a,b,c){b=a("../../Observable");a=a("../../operator/delayWhen");b.Observable.prototype.delayWhen=a.delayWhen},{"../../Observable":5,"../../operator/delayWhen":215}],63:[function(a,b,c){b=a("../../Observable");a=a("../../operator/dematerialize");b.Observable.prototype.dematerialize=a.dematerialize},{"../../Observable":5,"../../operator/dematerialize":216}],64:[function(a,b,c){b=a("../../Observable");
a=a("../../operator/distinct");b.Observable.prototype.distinct=a.distinct},{"../../Observable":5,"../../operator/distinct":217}],65:[function(a,b,c){b=a("../../Observable");a=a("../../operator/distinctKey");b.Observable.prototype.distinctKey=a.distinctKey},{"../../Observable":5,"../../operator/distinctKey":218}],66:[function(a,b,c){b=a("../../Observable");a=a("../../operator/distinctUntilChanged");b.Observable.prototype.distinctUntilChanged=a.distinctUntilChanged},{"../../Observable":5,"../../operator/distinctUntilChanged":219}],
67:[function(a,b,c){b=a("../../Observable");a=a("../../operator/distinctUntilKeyChanged");b.Observable.prototype.distinctUntilKeyChanged=a.distinctUntilKeyChanged},{"../../Observable":5,"../../operator/distinctUntilKeyChanged":220}],68:[function(a,b,c){b=a("../../Observable");a=a("../../operator/do");b.Observable.prototype.do=a._do;b.Observable.prototype._do=a._do},{"../../Observable":5,"../../operator/do":221}],69:[function(a,b,c){b=a("../../Observable");a=a("../../operator/elementAt");b.Observable.prototype.elementAt=
a.elementAt},{"../../Observable":5,"../../operator/elementAt":222}],70:[function(a,b,c){b=a("../../Observable");a=a("../../operator/every");b.Observable.prototype.every=a.every},{"../../Observable":5,"../../operator/every":223}],71:[function(a,b,c){b=a("../../Observable");a=a("../../operator/exhaust");b.Observable.prototype.exhaust=a.exhaust},{"../../Observable":5,"../../operator/exhaust":224}],72:[function(a,b,c){b=a("../../Observable");a=a("../../operator/exhaustMap");b.Observable.prototype.exhaustMap=
a.exhaustMap},{"../../Observable":5,"../../operator/exhaustMap":225}],73:[function(a,b,c){b=a("../../Observable");a=a("../../operator/expand");b.Observable.prototype.expand=a.expand},{"../../Observable":5,"../../operator/expand":226}],74:[function(a,b,c){b=a("../../Observable");a=a("../../operator/filter");b.Observable.prototype.filter=a.filter},{"../../Observable":5,"../../operator/filter":227}],75:[function(a,b,c){b=a("../../Observable");a=a("../../operator/finally");b.Observable.prototype.finally=
a._finally;b.Observable.prototype._finally=a._finally},{"../../Observable":5,"../../operator/finally":228}],76:[function(a,b,c){b=a("../../Observable");a=a("../../operator/find");b.Observable.prototype.find=a.find},{"../../Observable":5,"../../operator/find":229}],77:[function(a,b,c){b=a("../../Observable");a=a("../../operator/findIndex");b.Observable.prototype.findIndex=a.findIndex},{"../../Observable":5,"../../operator/findIndex":230}],78:[function(a,b,c){b=a("../../Observable");a=a("../../operator/first");
b.Observable.prototype.first=a.first},{"../../Observable":5,"../../operator/first":231}],79:[function(a,b,c){b=a("../../Observable");a=a("../../operator/groupBy");b.Observable.prototype.groupBy=a.groupBy},{"../../Observable":5,"../../operator/groupBy":232}],80:[function(a,b,c){b=a("../../Observable");a=a("../../operator/ignoreElements");b.Observable.prototype.ignoreElements=a.ignoreElements},{"../../Observable":5,"../../operator/ignoreElements":233}],81:[function(a,b,c){b=a("../../Observable");a=
a("../../operator/isEmpty");b.Observable.prototype.isEmpty=a.isEmpty},{"../../Observable":5,"../../operator/isEmpty":234}],82:[function(a,b,c){b=a("../../Observable");a=a("../../operator/last");b.Observable.prototype.last=a.last},{"../../Observable":5,"../../operator/last":235}],83:[function(a,b,c){b=a("../../Observable");a=a("../../operator/let");b.Observable.prototype.let=a.letProto;b.Observable.prototype.letBind=a.letProto},{"../../Observable":5,"../../operator/let":236}],84:[function(a,b,c){b=
a("../../Observable");a=a("../../operator/map");b.Observable.prototype.map=a.map},{"../../Observable":5,"../../operator/map":237}],85:[function(a,b,c){b=a("../../Observable");a=a("../../operator/mapTo");b.Observable.prototype.mapTo=a.mapTo},{"../../Observable":5,"../../operator/mapTo":238}],86:[function(a,b,c){b=a("../../Observable");a=a("../../operator/materialize");b.Observable.prototype.materialize=a.materialize},{"../../Observable":5,"../../operator/materialize":239}],87:[function(a,b,c){b=a("../../Observable");
a=a("../../operator/max");b.Observable.prototype.max=a.max},{"../../Observable":5,"../../operator/max":240}],88:[function(a,b,c){b=a("../../Observable");a=a("../../operator/merge");b.Observable.prototype.merge=a.merge},{"../../Observable":5,"../../operator/merge":241}],89:[function(a,b,c){b=a("../../Observable");a=a("../../operator/mergeAll");b.Observable.prototype.mergeAll=a.mergeAll},{"../../Observable":5,"../../operator/mergeAll":242}],90:[function(a,b,c){b=a("../../Observable");a=a("../../operator/mergeMap");
b.Observable.prototype.mergeMap=a.mergeMap;b.Observable.prototype.flatMap=a.mergeMap},{"../../Observable":5,"../../operator/mergeMap":243}],91:[function(a,b,c){b=a("../../Observable");a=a("../../operator/mergeMapTo");b.Observable.prototype.flatMapTo=a.mergeMapTo;b.Observable.prototype.mergeMapTo=a.mergeMapTo},{"../../Observable":5,"../../operator/mergeMapTo":244}],92:[function(a,b,c){b=a("../../Observable");a=a("../../operator/mergeScan");b.Observable.prototype.mergeScan=a.mergeScan},{"../../Observable":5,
"../../operator/mergeScan":245}],93:[function(a,b,c){b=a("../../Observable");a=a("../../operator/min");b.Observable.prototype.min=a.min},{"../../Observable":5,"../../operator/min":246}],94:[function(a,b,c){b=a("../../Observable");a=a("../../operator/multicast");b.Observable.prototype.multicast=a.multicast},{"../../Observable":5,"../../operator/multicast":247}],95:[function(a,b,c){b=a("../../Observable");a=a("../../operator/observeOn");b.Observable.prototype.observeOn=a.observeOn},{"../../Observable":5,
"../../operator/observeOn":248}],96:[function(a,b,c){b=a("../../Observable");a=a("../../operator/onErrorResumeNext");b.Observable.prototype.onErrorResumeNext=a.onErrorResumeNext},{"../../Observable":5,"../../operator/onErrorResumeNext":249}],97:[function(a,b,c){b=a("../../Observable");a=a("../../operator/pairwise");b.Observable.prototype.pairwise=a.pairwise},{"../../Observable":5,"../../operator/pairwise":250}],98:[function(a,b,c){b=a("../../Observable");a=a("../../operator/partition");b.Observable.prototype.partition=
a.partition},{"../../Observable":5,"../../operator/partition":251}],99:[function(a,b,c){b=a("../../Observable");a=a("../../operator/pluck");b.Observable.prototype.pluck=a.pluck},{"../../Observable":5,"../../operator/pluck":252}],100:[function(a,b,c){b=a("../../Observable");a=a("../../operator/publish");b.Observable.prototype.publish=a.publish},{"../../Observable":5,"../../operator/publish":253}],101:[function(a,b,c){b=a("../../Observable");a=a("../../operator/publishBehavior");b.Observable.prototype.publishBehavior=
a.publishBehavior},{"../../Observable":5,"../../operator/publishBehavior":254}],102:[function(a,b,c){b=a("../../Observable");a=a("../../operator/publishLast");b.Observable.prototype.publishLast=a.publishLast},{"../../Observable":5,"../../operator/publishLast":255}],103:[function(a,b,c){b=a("../../Observable");a=a("../../operator/publishReplay");b.Observable.prototype.publishReplay=a.publishReplay},{"../../Observable":5,"../../operator/publishReplay":256}],104:[function(a,b,c){b=a("../../Observable");
a=a("../../operator/race");b.Observable.prototype.race=a.race},{"../../Observable":5,"../../operator/race":257}],105:[function(a,b,c){b=a("../../Observable");a=a("../../operator/reduce");b.Observable.prototype.reduce=a.reduce},{"../../Observable":5,"../../operator/reduce":258}],106:[function(a,b,c){b=a("../../Observable");a=a("../../operator/repeat");b.Observable.prototype.repeat=a.repeat},{"../../Observable":5,"../../operator/repeat":259}],107:[function(a,b,c){b=a("../../Observable");a=a("../../operator/repeatWhen");
b.Observable.prototype.repeatWhen=a.repeatWhen},{"../../Observable":5,"../../operator/repeatWhen":260}],108:[function(a,b,c){b=a("../../Observable");a=a("../../operator/retry");b.Observable.prototype.retry=a.retry},{"../../Observable":5,"../../operator/retry":261}],109:[function(a,b,c){b=a("../../Observable");a=a("../../operator/retryWhen");b.Observable.prototype.retryWhen=a.retryWhen},{"../../Observable":5,"../../operator/retryWhen":262}],110:[function(a,b,c){b=a("../../Observable");a=a("../../operator/sample");
b.Observable.prototype.sample=a.sample},{"../../Observable":5,"../../operator/sample":263}],111:[function(a,b,c){b=a("../../Observable");a=a("../../operator/sampleTime");b.Observable.prototype.sampleTime=a.sampleTime},{"../../Observable":5,"../../operator/sampleTime":264}],112:[function(a,b,c){b=a("../../Observable");a=a("../../operator/scan");b.Observable.prototype.scan=a.scan},{"../../Observable":5,"../../operator/scan":265}],113:[function(a,b,c){b=a("../../Observable");a=a("../../operator/sequenceEqual");
b.Observable.prototype.sequenceEqual=a.sequenceEqual},{"../../Observable":5,"../../operator/sequenceEqual":266}],114:[function(a,b,c){b=a("../../Observable");a=a("../../operator/share");b.Observable.prototype.share=a.share},{"../../Observable":5,"../../operator/share":267}],115:[function(a,b,c){b=a("../../Observable");a=a("../../operator/single");b.Observable.prototype.single=a.single},{"../../Observable":5,"../../operator/single":268}],116:[function(a,b,c){b=a("../../Observable");a=a("../../operator/skip");
b.Observable.prototype.skip=a.skip},{"../../Observable":5,"../../operator/skip":269}],117:[function(a,b,c){b=a("../../Observable");a=a("../../operator/skipUntil");b.Observable.prototype.skipUntil=a.skipUntil},{"../../Observable":5,"../../operator/skipUntil":270}],118:[function(a,b,c){b=a("../../Observable");a=a("../../operator/skipWhile");b.Observable.prototype.skipWhile=a.skipWhile},{"../../Observable":5,"../../operator/skipWhile":271}],119:[function(a,b,c){b=a("../../Observable");a=a("../../operator/startWith");
b.Observable.prototype.startWith=a.startWith},{"../../Observable":5,"../../operator/startWith":272}],120:[function(a,b,c){b=a("../../Observable");a=a("../../operator/subscribeOn");b.Observable.prototype.subscribeOn=a.subscribeOn},{"../../Observable":5,"../../operator/subscribeOn":273}],121:[function(a,b,c){b=a("../../Observable");a=a("../../operator/switch");b.Observable.prototype.switch=a._switch;b.Observable.prototype._switch=a._switch},{"../../Observable":5,"../../operator/switch":274}],122:[function(a,
b,c){b=a("../../Observable");a=a("../../operator/switchMap");b.Observable.prototype.switchMap=a.switchMap},{"../../Observable":5,"../../operator/switchMap":275}],123:[function(a,b,c){b=a("../../Observable");a=a("../../operator/switchMapTo");b.Observable.prototype.switchMapTo=a.switchMapTo},{"../../Observable":5,"../../operator/switchMapTo":276}],124:[function(a,b,c){b=a("../../Observable");a=a("../../operator/take");b.Observable.prototype.take=a.take},{"../../Observable":5,"../../operator/take":277}],
125:[function(a,b,c){b=a("../../Observable");a=a("../../operator/takeLast");b.Observable.prototype.takeLast=a.takeLast},{"../../Observable":5,"../../operator/takeLast":278}],126:[function(a,b,c){b=a("../../Observable");a=a("../../operator/takeUntil");b.Observable.prototype.takeUntil=a.takeUntil},{"../../Observable":5,"../../operator/takeUntil":279}],127:[function(a,b,c){b=a("../../Observable");a=a("../../operator/takeWhile");b.Observable.prototype.takeWhile=a.takeWhile},{"../../Observable":5,"../../operator/takeWhile":280}],
128:[function(a,b,c){b=a("../../Observable");a=a("../../operator/throttle");b.Observable.prototype.throttle=a.throttle},{"../../Observable":5,"../../operator/throttle":281}],129:[function(a,b,c){b=a("../../Observable");a=a("../../operator/throttleTime");b.Observable.prototype.throttleTime=a.throttleTime},{"../../Observable":5,"../../operator/throttleTime":282}],130:[function(a,b,c){b=a("../../Observable");a=a("../../operator/timeInterval");b.Observable.prototype.timeInterval=a.timeInterval},{"../../Observable":5,
"../../operator/timeInterval":283}],131:[function(a,b,c){b=a("../../Observable");a=a("../../operator/timeout");b.Observable.prototype.timeout=a.timeout},{"../../Observable":5,"../../operator/timeout":284}],132:[function(a,b,c){b=a("../../Observable");a=a("../../operator/timeoutWith");b.Observable.prototype.timeoutWith=a.timeoutWith},{"../../Observable":5,"../../operator/timeoutWith":285}],133:[function(a,b,c){b=a("../../Observable");a=a("../../operator/timestamp");b.Observable.prototype.timestamp=
a.timestamp},{"../../Observable":5,"../../operator/timestamp":286}],134:[function(a,b,c){b=a("../../Observable");a=a("../../operator/toArray");b.Observable.prototype.toArray=a.toArray},{"../../Observable":5,"../../operator/toArray":287}],135:[function(a,b,c){b=a("../../Observable");a=a("../../operator/toPromise");b.Observable.prototype.toPromise=a.toPromise},{"../../Observable":5,"../../operator/toPromise":288}],136:[function(a,b,c){b=a("../../Observable");a=a("../../operator/window");b.Observable.prototype.window=
a.window},{"../../Observable":5,"../../operator/window":289}],137:[function(a,b,c){b=a("../../Observable");a=a("../../operator/windowCount");b.Observable.prototype.windowCount=a.windowCount},{"../../Observable":5,"../../operator/windowCount":290}],138:[function(a,b,c){b=a("../../Observable");a=a("../../operator/windowTime");b.Observable.prototype.windowTime=a.windowTime},{"../../Observable":5,"../../operator/windowTime":291}],139:[function(a,b,c){b=a("../../Observable");a=a("../../operator/windowToggle");
b.Observable.prototype.windowToggle=a.windowToggle},{"../../Observable":5,"../../operator/windowToggle":292}],140:[function(a,b,c){b=a("../../Observable");a=a("../../operator/windowWhen");b.Observable.prototype.windowWhen=a.windowWhen},{"../../Observable":5,"../../operator/windowWhen":293}],141:[function(a,b,c){b=a("../../Observable");a=a("../../operator/withLatestFrom");b.Observable.prototype.withLatestFrom=a.withLatestFrom},{"../../Observable":5,"../../operator/withLatestFrom":294}],142:[function(a,
b,c){b=a("../../Observable");a=a("../../operator/zip");b.Observable.prototype.zip=a.zipProto},{"../../Observable":5,"../../operator/zip":295}],143:[function(a,b,c){b=a("../../Observable");a=a("../../operator/zipAll");b.Observable.prototype.zipAll=a.zipAll},{"../../Observable":5,"../../operator/zipAll":296}],144:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var h in b)b.hasOwnProperty(h)&&(a[h]=b[h]);a.prototype=null===b?Object.create(b):(c.prototype=
b.prototype,new c)};b=a("../Observable");var g=a("./ScalarObservable"),k=a("./EmptyObservable");a=function(a){function b(c,f){a.call(this);this.arrayLike=c;this.scheduler=f;f||1!==c.length||(this._isScalar=!0,this.value=c[0])}l(b,a);b.create=function(a,c){var e=a.length;return 0===e?new k.EmptyObservable:1===e?new g.ScalarObservable(a[0],c):new b(a,c)};b.dispatch=function(a){var b=a.arrayLike,c=a.index,e=a.length,f=a.subscriber;f.closed||(c>=e?f.complete():(f.next(b[c]),a.index=c+1,this.schedule(a)))};
b.prototype._subscribe=function(a){var c=this.arrayLike,e=this.scheduler,g=c.length;if(e)return e.schedule(b.dispatch,0,{arrayLike:c,index:0,length:g,subscriber:a});for(e=0;e<g&&!a.closed;e++)a.next(c[e]);a.complete()};return b}(b.Observable);c.ArrayLikeObservable=a},{"../Observable":5,"./EmptyObservable":150,"./ScalarObservable":165}],145:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?
Object.create(b):(c.prototype=b.prototype,new c)};b=a("../Observable");var g=a("./ScalarObservable"),k=a("./EmptyObservable"),e=a("../util/isScheduler");a=function(a){function b(c,e){a.call(this);this.array=c;this.scheduler=e;e||1!==c.length||(this._isScalar=!0,this.value=c[0])}l(b,a);b.create=function(a,c){return new b(a,c)};b.of=function(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];c=a[a.length-1];e.isScheduler(c)?a.pop():c=null;var f=a.length;return 1<f?new b(a,c):1===f?new g.ScalarObservable(a[0],
c):new k.EmptyObservable(c)};b.dispatch=function(a){var b=a.array,c=a.index,e=a.subscriber;c>=a.count?e.complete():(e.next(b[c]),e.closed||(a.index=c+1,this.schedule(a)))};b.prototype._subscribe=function(a){var c=this.array,e=c.length,f=this.scheduler;if(f)return f.schedule(b.dispatch,0,{array:c,index:0,count:e,subscriber:a});for(f=0;f<e&&!a.closed;f++)a.next(c[f]);a.complete()};return b}(b.Observable);c.ArrayObservable=a},{"../Observable":5,"../util/isScheduler":337,"./EmptyObservable":150,"./ScalarObservable":165}],
146:[function(a,b,c){function l(a){var b=a.subject;b.next(a.value);b.complete()}function g(a){a.subject.error(a.err)}var k=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../Observable");var e=a("../util/tryCatch"),f=a("../util/errorObject"),m=a("../AsyncSubject");a=function(a){function b(c,e,f,g){a.call(this);this.callbackFunc=c;this.selector=e;this.args=
f;this.scheduler=g}k(b,a);b.create=function(a,c,e){void 0===c&&(c=void 0);return function(){for(var f=[],h=0;h<arguments.length;h++)f[h-0]=arguments[h];return new b(a,c,f,e)}};b.prototype._subscribe=function(a){var c=this.callbackFunc,h=this.args,g=this.scheduler,k=this.subject;if(g)return g.schedule(b.dispatch,0,{source:this,subscriber:a});k||(k=this.subject=new m.AsyncSubject,g=function v(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];var c=v.source,b=c.selector,c=c.subject;b?(a=
e.tryCatch(b).apply(this,a),a===f.errorObject?c.error(f.errorObject.e):(c.next(a),c.complete())):(c.next(1===a.length?a[0]:a),c.complete())},g.source=this,e.tryCatch(c).apply(this,h.concat(g))===f.errorObject&&k.error(f.errorObject.e));return k.subscribe(a)};b.dispatch=function(a){var b=this,c=a.source;a=a.subscriber;var h=c.callbackFunc,k=c.args,n=c.scheduler,v=c.subject;if(!v){var v=c.subject=new m.AsyncSubject,C=function y(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];var h=y.source,
c=h.selector,h=h.subject;c?(a=e.tryCatch(c).apply(this,a),a===f.errorObject?b.add(n.schedule(g,0,{err:f.errorObject.e,subject:h})):b.add(n.schedule(l,0,{value:a,subject:h}))):b.add(n.schedule(l,0,{value:1===a.length?a[0]:a,subject:h}))};C.source=c;e.tryCatch(h).apply(this,k.concat(C))===f.errorObject&&v.error(f.errorObject.e)}b.add(v.subscribe(a))};return b}(b.Observable);c.BoundCallbackObservable=a},{"../AsyncSubject":1,"../Observable":5,"../util/errorObject":330,"../util/tryCatch":343}],147:[function(a,
b,c){function l(a){var b=this,c=a.source;a=a.subscriber;var e=c.callbackFunc,l=c.args,x=c.scheduler,w=c.subject;if(!w){var w=c.subject=new h.AsyncSubject,v=function E(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];var e=E.source,c=e.selector,e=e.subject,h=a.shift();h?e.error(h):c?(a=f.tryCatch(c).apply(this,a),a===m.errorObject?b.add(x.schedule(k,0,{err:m.errorObject.e,subject:e})):b.add(x.schedule(g,0,{value:a,subject:e}))):b.add(x.schedule(g,0,{value:1===a.length?a[0]:a,subject:e}))};
v.source=c;f.tryCatch(e).apply(this,l.concat(v))===m.errorObject&&w.error(m.errorObject.e)}b.add(w.subscribe(a))}function g(a){var b=a.subject;b.next(a.value);b.complete()}function k(a){a.subject.error(a.err)}var e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../Observable");var f=a("../util/tryCatch"),m=a("../util/errorObject"),h=a("../AsyncSubject");
a=function(a){function b(c,e,f,h){a.call(this);this.callbackFunc=c;this.selector=e;this.args=f;this.scheduler=h}e(b,a);b.create=function(a,c,e){void 0===c&&(c=void 0);return function(){for(var f=[],h=0;h<arguments.length;h++)f[h-0]=arguments[h];return new b(a,c,f,e)}};b.prototype._subscribe=function(a){var b=this.callbackFunc,c=this.args,e=this.scheduler,g=this.subject;if(e)return e.schedule(l,0,{source:this,subscriber:a});g||(g=this.subject=new h.AsyncSubject,e=function C(){for(var a=[],b=0;b<arguments.length;b++)a[b-
0]=arguments[b];var c=C.source,b=c.selector,c=c.subject,e=a.shift();e?c.error(e):b?(a=f.tryCatch(b).apply(this,a),a===m.errorObject?c.error(m.errorObject.e):(c.next(a),c.complete())):(c.next(1===a.length?a[0]:a),c.complete())},e.source=this,f.tryCatch(b).apply(this,c.concat(e))===m.errorObject&&g.error(m.errorObject.e));return g.subscribe(a)};return b}(b.Observable);c.BoundNodeCallbackObservable=a},{"../AsyncSubject":1,"../Observable":5,"../util/errorObject":330,"../util/tryCatch":343}],148:[function(a,
b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../Subject");var g=a("../Observable"),k=a("../Subscriber"),e=a("../Subscription");a=function(a){function b(c,e){a.call(this);this.source=c;this.subjectFactory=e;this._refCount=0}l(b,a);b.prototype._subscribe=function(a){return this.getSubject().subscribe(a)};b.prototype.getSubject=function(){var a=
this._subject;if(!a||a.isStopped)this._subject=this.subjectFactory();return this._subject};b.prototype.connect=function(){var a=this._connection;a||(a=this._connection=new e.Subscription,a.add(this.source.subscribe(new f(this.getSubject(),this))),a.closed?(this._connection=null,a=e.Subscription.EMPTY):this._connection=a);return a};b.prototype.refCount=function(){return this.lift(new m(this))};return b}(g.Observable);c.ConnectableObservable=a;var f=function(a){function b(c,e){a.call(this,c);this.connectable=
e}l(b,a);b.prototype._error=function(b){this._unsubscribe();a.prototype._error.call(this,b)};b.prototype._complete=function(){this._unsubscribe();a.prototype._complete.call(this)};b.prototype._unsubscribe=function(){var a=this.connectable;if(a){this.connectable=null;var b=a._connection;a._refCount=0;a._subject=null;a._connection=null;b&&b.unsubscribe()}};return b}(b.SubjectSubscriber),m=function(){function a(b){this.connectable=b}a.prototype.call=function(a,b){var c=this.connectable;c._refCount++;
var e=new h(a,c),f=b._subscribe(e);e.closed||(e.connection=c.connect());return f};return a}(),h=function(a){function b(c,e){a.call(this,c);this.connectable=e}l(b,a);b.prototype._unsubscribe=function(){var a=this.connectable;if(a){this.connectable=null;var b=a._refCount;0>=b?this.connection=null:(a._refCount=b-1,1<b?this.connection=null:(b=this.connection,a=a._connection,this.connection=null,!a||b&&a!==b||a.unsubscribe()))}else this.connection=null};return b}(k.Subscriber)},{"../Observable":5,"../Subject":11,
"../Subscriber":13,"../Subscription":14}],149:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var h in b)b.hasOwnProperty(h)&&(a[h]=b[h]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../Observable");var g=a("../util/subscribeToResult");a=a("../OuterSubscriber");b=function(a){function b(c){a.call(this);this.observableFactory=c}l(b,a);b.create=function(a){return new b(a)};b.prototype._subscribe=function(a){return new k(a,
this.observableFactory)};return b}(b.Observable);c.DeferObservable=b;var k=function(a){function b(c,f){a.call(this,c);this.factory=f;this.tryDefer()}l(b,a);b.prototype.tryDefer=function(){try{this._callFactory()}catch(a){this._error(a)}};b.prototype._callFactory=function(){var a=this.factory();a&&this.add(g.subscribeToResult(this,a))};return b}(a.OuterSubscriber)},{"../Observable":5,"../OuterSubscriber":7,"../util/subscribeToResult":341}],150:[function(a,b,c){var l=this&&this.__extends||function(a,
b){function c(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=function(a){function b(c){a.call(this);this.scheduler=c}l(b,a);b.create=function(a){return new b(a)};b.dispatch=function(a){a.subscriber.complete()};b.prototype._subscribe=function(a){var c=this.scheduler;if(c)return c.schedule(b.dispatch,0,{subscriber:a});a.complete()};return b}(a("../Observable").Observable);c.EmptyObservable=a},{"../Observable":5}],
151:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=function(a){function b(c,f){a.call(this);this.error=c;this.scheduler=f}l(b,a);b.create=function(a,c){return new b(a,c)};b.dispatch=function(a){a.subscriber.error(a.error)};b.prototype._subscribe=function(a){var c=this.error,g=this.scheduler;if(g)return g.schedule(b.dispatch,0,{error:c,
subscriber:a});a.error(c)};return b}(a("../Observable").Observable);c.ErrorObservable=a},{"../Observable":5}],152:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../Observable");var g=a("./EmptyObservable"),k=a("../util/isArray"),e=a("../util/subscribeToResult");a=a("../OuterSubscriber");b=function(a){function b(c,e){a.call(this);this.sources=
c;this.resultSelector=e}l(b,a);b.create=function(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];if(null===a||0===arguments.length)return new g.EmptyObservable;c=null;"function"===typeof a[a.length-1]&&(c=a.pop());1===a.length&&k.isArray(a[0])&&(a=a[0]);return 0===a.length?new g.EmptyObservable:new b(a,c)};b.prototype._subscribe=function(a){return new f(a,this.sources,this.resultSelector)};return b}(b.Observable);c.ForkJoinObservable=b;var f=function(a){function b(c,f,h){a.call(this,
c);this.sources=f;this.resultSelector=h;this.haveValues=this.completed=0;this.total=c=f.length;this.values=Array(c);for(h=0;h<c;h++){var g=e.subscribeToResult(this,f[h],null,h);g&&(g.outerIndex=h,this.add(g))}}l(b,a);b.prototype.notifyNext=function(a,b,c,e,f){this.values[c]=b;f._hasValue||(f._hasValue=!0,this.haveValues++)};b.prototype.notifyComplete=function(a){var b=this.destination,c=this.haveValues,e=this.resultSelector,f=this.values,h=f.length;a._hasValue?(this.completed++,this.completed===h&&
(c===h&&(a=e?e.apply(this,f):f,b.next(a)),b.complete())):b.complete()};return b}(a.OuterSubscriber)},{"../Observable":5,"../OuterSubscriber":7,"../util/isArray":331,"../util/subscribeToResult":341,"./EmptyObservable":150}],153:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../Observable");var g=a("../util/tryCatch"),k=a("../util/isFunction"),
e=a("../util/errorObject"),f=a("../Subscription");a=function(a){function b(c,e,f,h){a.call(this);this.sourceObj=c;this.eventName=e;this.selector=f;this.options=h}l(b,a);b.create=function(a,c,e,f){k.isFunction(e)&&(f=e,e=void 0);return new b(a,c,f,e)};b.setupSubscription=function(a,c,e,g,m){var k;if(a&&"[object NodeList]"===a.toString()||a&&"[object HTMLCollection]"===a.toString())for(var l=0,v=a.length;l<v;l++)b.setupSubscription(a[l],c,e,g,m);else a&&"function"===typeof a.addEventListener&&"function"===
typeof a.removeEventListener?(a.addEventListener(c,e,m),k=function(){return a.removeEventListener(c,e)}):a&&"function"===typeof a.on&&"function"===typeof a.off?(a.on(c,e),k=function(){return a.off(c,e)}):a&&"function"===typeof a.addListener&&"function"===typeof a.removeListener&&(a.addListener(c,e),k=function(){return a.removeListener(c,e)});g.add(new f.Subscription(k))};b.prototype._subscribe=function(a){var c=this.selector;b.setupSubscription(this.sourceObj,this.eventName,c?function(){for(var b=
[],f=0;f<arguments.length;f++)b[f-0]=arguments[f];b=g.tryCatch(c).apply(void 0,b);b===e.errorObject?a.error(e.errorObject.e):a.next(b)}:function(b){return a.next(b)},a,this.options)};return b}(b.Observable);c.FromEventObservable=a},{"../Observable":5,"../Subscription":14,"../util/errorObject":330,"../util/isFunction":333,"../util/tryCatch":343}],154:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=
null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../Observable");var g=a("../Subscription");a=function(a){function b(c,e,h){a.call(this);this.addHandler=c;this.removeHandler=e;this.selector=h}l(b,a);b.create=function(a,c,h){return new b(a,c,h)};b.prototype._subscribe=function(a){var b=this,c=this.removeHandler,e=this.selector?function(){for(var c=[],e=0;e<arguments.length;e++)c[e-0]=arguments[e];b._callSelector(a,c)}:function(b){a.next(b)};this._callAddHandler(e,a);a.add(new g.Subscription(function(){c(e)}))};
b.prototype._callSelector=function(a,b){try{var c=this.selector.apply(this,b);a.next(c)}catch(e){a.error(e)}};b.prototype._callAddHandler=function(a,b){try{this.addHandler(a)}catch(c){b.error(c)}};return b}(b.Observable);c.FromEventPatternObservable=a},{"../Observable":5,"../Subscription":14}],155:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,
new c)},g=a("../util/isArray"),k=a("../util/isPromise"),e=a("./PromiseObservable"),f=a("./IteratorObservable"),m=a("./ArrayObservable"),h=a("./ArrayLikeObservable"),n=a("../symbol/iterator"),q=a("../Observable"),r=a("../operator/observeOn"),t=a("../symbol/observable");a=function(a){function b(c,e){a.call(this,null);this.ish=c;this.scheduler=e}l(b,a);b.create=function(a,c){if(null!=a){if("function"===typeof a[t.$$observable])return a instanceof q.Observable&&!c?a:new b(a,c);if(g.isArray(a))return new m.ArrayObservable(a,
c);if(k.isPromise(a))return new e.PromiseObservable(a,c);if("function"===typeof a[n.$$iterator]||"string"===typeof a)return new f.IteratorObservable(a,c);if(a&&"number"===typeof a.length)return new h.ArrayLikeObservable(a,c)}throw new TypeError((null!==a&&typeof a||a)+" is not observable");};b.prototype._subscribe=function(a){var b=this.ish,c=this.scheduler;return null==c?b[t.$$observable]().subscribe(a):b[t.$$observable]().subscribe(new r.ObserveOnSubscriber(a,c,0))};return b}(q.Observable);c.FromObservable=
a},{"../Observable":5,"../operator/observeOn":248,"../symbol/iterator":311,"../symbol/observable":312,"../util/isArray":331,"../util/isPromise":336,"./ArrayLikeObservable":144,"./ArrayObservable":145,"./IteratorObservable":159,"./PromiseObservable":163}],156:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var h in b)b.hasOwnProperty(h)&&(a[h]=b[h]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../Observable");var g=a("../util/isScheduler"),
k=function(a){return a};a=function(a){function b(c,f,g,k,l){a.call(this);this.initialState=c;this.condition=f;this.iterate=g;this.resultSelector=k;this.scheduler=l}l(b,a);b.create=function(a,c,e,l,r){return 1==arguments.length?new b(a.initialState,a.condition,a.iterate,a.resultSelector||k,a.scheduler):void 0===l||g.isScheduler(l)?new b(a,c,e,k,l):new b(a,c,e,l,r)};b.prototype._subscribe=function(a){var c=this.initialState;if(this.scheduler)return this.scheduler.schedule(b.dispatch,0,{subscriber:a,
iterate:this.iterate,condition:this.condition,resultSelector:this.resultSelector,state:c});var e=this.condition,g=this.resultSelector,k=this.iterate;do{if(e){var l=void 0;try{l=e(c)}catch(u){a.error(u);break}if(!l){a.complete();break}}l=void 0;try{l=g(c)}catch(u){a.error(u);break}a.next(l);if(a.closed)break;try{c=k(c)}catch(u){a.error(u);break}}while(1)};b.dispatch=function(a){var b=a.subscriber,c=a.condition;if(!b.closed){if(a.needIterate)try{a.state=a.iterate(a.state)}catch(e){b.error(e);return}else a.needIterate=
!0;if(c){var f=void 0;try{f=c(a.state)}catch(e){b.error(e);return}if(!f){b.complete();return}if(b.closed)return}var g;try{g=a.resultSelector(a.state)}catch(e){b.error(e);return}if(!b.closed&&(b.next(g),!b.closed))return this.schedule(a)}};return b}(b.Observable);c.GenerateObservable=a},{"../Observable":5,"../util/isScheduler":337}],157:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var h in b)b.hasOwnProperty(h)&&(a[h]=b[h]);a.prototype=null===b?Object.create(b):
(c.prototype=b.prototype,new c)};b=a("../Observable");var g=a("../util/subscribeToResult");a=a("../OuterSubscriber");b=function(a){function b(c,f,g){a.call(this);this.condition=c;this.thenSource=f;this.elseSource=g}l(b,a);b.create=function(a,c,e){return new b(a,c,e)};b.prototype._subscribe=function(a){return new k(a,this.condition,this.thenSource,this.elseSource)};return b}(b.Observable);c.IfObservable=b;var k=function(a){function b(c,f,g,k){a.call(this,c);this.condition=f;this.thenSource=g;this.elseSource=
k;this.tryIf()}l(b,a);b.prototype.tryIf=function(){var a=this.condition,b=this.thenSource,c=this.elseSource,e;try{(a=(e=a())?b:c)?this.add(g.subscribeToResult(this,a)):this._complete()}catch(f){this._error(f)}};return b}(a.OuterSubscriber)},{"../Observable":5,"../OuterSubscriber":7,"../util/subscribeToResult":341}],158:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var h in b)b.hasOwnProperty(h)&&(a[h]=b[h]);a.prototype=null===b?Object.create(b):(c.prototype=
b.prototype,new c)},g=a("../util/isNumeric");b=a("../Observable");var k=a("../scheduler/async");a=function(a){function b(c,f){void 0===c&&(c=0);void 0===f&&(f=k.async);a.call(this);this.period=c;this.scheduler=f;if(!g.isNumeric(c)||0>c)this.period=0;f&&"function"===typeof f.schedule||(this.scheduler=k.async)}l(b,a);b.create=function(a,c){void 0===a&&(a=0);void 0===c&&(c=k.async);return new b(a,c)};b.dispatch=function(a){var b=a.subscriber,c=a.period;b.next(a.index);b.closed||(a.index+=1,this.schedule(a,
c))};b.prototype._subscribe=function(a){var c=this.period;a.add(this.scheduler.schedule(b.dispatch,c,{index:0,subscriber:a,period:c}))};return b}(b.Observable);c.IntervalObservable=a},{"../Observable":5,"../scheduler/async":309,"../util/isNumeric":334}],159:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=a("../util/root");b=a("../Observable");
var k=a("../symbol/iterator");a=function(a){function b(c,g){a.call(this);this.scheduler=g;if(null==c)throw Error("iterator cannot be null.");var m;if((m=c[k.$$iterator])||"string"!==typeof c)if(m||void 0===c.length){if(!m)throw new TypeError("object is not iterable");m=c[k.$$iterator]()}else m=new f(c);else m=new e(c);this.iterator=m}l(b,a);b.create=function(a,c){return new b(a,c)};b.dispatch=function(a){var b=a.index,c=a.iterator,e=a.subscriber;a.hasError?e.error(a.error):(c=c.next(),c.done?e.complete():
(e.next(c.value),a.index=b+1,e.closed||this.schedule(a)))};b.prototype._subscribe=function(a){var c=this.iterator,e=this.scheduler;if(e)return e.schedule(b.dispatch,0,{index:0,iterator:c,subscriber:a});do{e=c.next();if(e.done){a.complete();break}else a.next(e.value);if(a.closed)break}while(1)};return b}(b.Observable);c.IteratorObservable=a;var e=function(){function a(b,c,e){void 0===c&&(c=0);void 0===e&&(e=b.length);this.str=b;this.idx=c;this.len=e}a.prototype[k.$$iterator]=function(){return this};
a.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}};return a}(),f=function(){function a(b,c,e){void 0===c&&(c=0);if(void 0===e)if(e=+b.length,isNaN(e))e=0;else if(0!==e&&"number"===typeof e&&g.root.isFinite(e)){var f;f=+e;f=0===f?f:isNaN(f)?f:0>f?-1:1;e=f*Math.floor(Math.abs(e));e=0>=e?0:e>m?m:e}this.arr=b;this.idx=c;this.len=e}a.prototype[k.$$iterator]=function(){return this};a.prototype.next=function(){return this.idx<this.len?
{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}};return a}(),m=Math.pow(2,53)-1},{"../Observable":5,"../symbol/iterator":311,"../util/root":340}],160:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../Observable");var g=a("../observable/ConnectableObservable");a=function(a){function b(c,e,h){a.call(this);this.source=c;this.subjectFactory=
e;this.selector=h}l(b,a);b.prototype._subscribe=function(a){var b=this.selector,c=new g.ConnectableObservable(this.source,this.subjectFactory);a=b(c).subscribe(a);a.add(c.connect());return a};return b}(b.Observable);c.MulticastObservable=a},{"../Observable":5,"../observable/ConnectableObservable":148}],161:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,
new c)};b=a("../Observable");var g=a("../util/noop");a=function(a){function b(){a.call(this)}l(b,a);b.create=function(){return new b};b.prototype._subscribe=function(a){g.noop()};return b}(b.Observable);c.NeverObservable=a},{"../Observable":5,"../util/noop":338}],162:[function(a,b,c){function l(a){var b=a.obj,c=a.keys,g=a.index,h=a.subscriber;g===a.length?h.complete():(c=c[g],h.next([c,b[c]]),a.index=g+1,this.schedule(a))}var g=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&
(a[g]=b[g]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=function(a){function b(c,e){a.call(this);this.obj=c;this.scheduler=e;this.keys=Object.keys(c)}g(b,a);b.create=function(a,c){return new b(a,c)};b.prototype._subscribe=function(a){var b=this.keys,c=this.scheduler,e=b.length;if(c)return c.schedule(l,0,{obj:this.obj,keys:b,length:e,index:0,subscriber:a});for(c=0;c<e;c++){var g=b[c];a.next([g,this.obj[g]])}a.complete()};return b}(a("../Observable").Observable);c.PairsObservable=
a},{"../Observable":5}],163:[function(a,b,c){function l(a){var b=a.value;a=a.subscriber;a.closed||(a.next(b),a.complete())}function g(a){var b=a.err;a=a.subscriber;a.closed||a.error(b)}var k=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../util/root");a=function(a){function b(c,e){a.call(this);this.promise=c;this.scheduler=e}k(b,a);b.create=function(a,c){return new b(a,
c)};b.prototype._subscribe=function(a){var b=this,c=this.promise,f=this.scheduler;if(null==f)this._isScalar?a.closed||(a.next(this.value),a.complete()):c.then(function(c){b.value=c;b._isScalar=!0;a.closed||(a.next(c),a.complete())},function(b){a.closed||a.error(b)}).then(null,function(a){e.root.setTimeout(function(){throw a;})});else if(this._isScalar){if(!a.closed)return f.schedule(l,0,{value:this.value,subscriber:a})}else c.then(function(c){b.value=c;b._isScalar=!0;a.closed||a.add(f.schedule(l,
0,{value:c,subscriber:a}))},function(b){a.closed||a.add(f.schedule(g,0,{err:b,subscriber:a}))}).then(null,function(a){e.root.setTimeout(function(){throw a;})})};return b}(a("../Observable").Observable);c.PromiseObservable=a},{"../Observable":5,"../util/root":340}],164:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=function(a){function b(c,
f,m){a.call(this);this.start=c;this._count=f;this.scheduler=m}l(b,a);b.create=function(a,c,g){void 0===a&&(a=0);void 0===c&&(c=0);return new b(a,c,g)};b.dispatch=function(a){var b=a.start,c=a.index,h=a.subscriber;c>=a.count?h.complete():(h.next(b),h.closed||(a.index=c+1,a.start=b+1,this.schedule(a)))};b.prototype._subscribe=function(a){var c=0,g=this.start,h=this._count,l=this.scheduler;if(l)return l.schedule(b.dispatch,0,{index:c,count:h,start:g,subscriber:a});do{if(c++>=h){a.complete();break}a.next(g++);
if(a.closed)break}while(1)};return b}(a("../Observable").Observable);c.RangeObservable=a},{"../Observable":5}],165:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=function(a){function b(c,f){a.call(this);this.value=c;this.scheduler=f;this._isScalar=!0;f&&(this._isScalar=!1)}l(b,a);b.create=function(a,c){return new b(a,c)};b.dispatch=function(a){var b=
a.value,c=a.subscriber;a.done?c.complete():(c.next(b),c.closed||(a.done=!0,this.schedule(a)))};b.prototype._subscribe=function(a){var c=this.value,g=this.scheduler;if(g)return g.schedule(b.dispatch,0,{done:!1,value:c,subscriber:a});a.next(c);a.closed||a.complete()};return b}(a("../Observable").Observable);c.ScalarObservable=a},{"../Observable":5}],166:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var h in b)b.hasOwnProperty(h)&&(a[h]=b[h]);a.prototype=
null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../Observable");var g=a("../scheduler/asap"),k=a("../util/isNumeric");a=function(a){function b(c,f,l){void 0===f&&(f=0);void 0===l&&(l=g.asap);a.call(this);this.source=c;this.delayTime=f;this.scheduler=l;if(!k.isNumeric(f)||0>f)this.delayTime=0;l&&"function"===typeof l.schedule||(this.scheduler=g.asap)}l(b,a);b.create=function(a,c,e){void 0===c&&(c=0);void 0===e&&(e=g.asap);return new b(a,c,e)};b.dispatch=function(a){return a.source.subscribe(a.subscriber)};
b.prototype._subscribe=function(a){return this.scheduler.schedule(b.dispatch,this.delayTime,{source:this.source,subscriber:a})};return b}(b.Observable);c.SubscribeOnObservable=a},{"../Observable":5,"../scheduler/asap":308,"../util/isNumeric":334}],167:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=a("../util/isNumeric");b=a("../Observable");
var k=a("../scheduler/async"),e=a("../util/isScheduler"),f=a("../util/isDate");a=function(a){function b(c,h,l){void 0===c&&(c=0);a.call(this);this.period=-1;this.dueTime=0;g.isNumeric(h)?this.period=1>Number(h)&&1||Number(h):e.isScheduler(h)&&(l=h);e.isScheduler(l)||(l=k.async);this.scheduler=l;this.dueTime=f.isDate(c)?+c-this.scheduler.now():c}l(b,a);b.create=function(a,c,e){void 0===a&&(a=0);return new b(a,c,e)};b.dispatch=function(a){var b=a.index,c=a.period,e=a.subscriber;e.next(b);if(!e.closed){if(-1===
c)return e.complete();a.index=b+1;this.schedule(a,c)}};b.prototype._subscribe=function(a){return this.scheduler.schedule(b.dispatch,this.dueTime,{index:0,period:this.period,subscriber:a})};return b}(b.Observable);c.TimerObservable=a},{"../Observable":5,"../scheduler/async":309,"../util/isDate":332,"../util/isNumeric":334,"../util/isScheduler":337}],168:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var h in b)b.hasOwnProperty(h)&&(a[h]=b[h]);a.prototype=
null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../Observable");var g=a("../util/subscribeToResult");a=a("../OuterSubscriber");b=function(a){function b(c,f){a.call(this);this.resourceFactory=c;this.observableFactory=f}l(b,a);b.create=function(a,c){return new b(a,c)};b.prototype._subscribe=function(a){var b=this.resourceFactory,c=this.observableFactory,e;try{return e=b(),new k(a,e,c)}catch(f){a.error(f)}};return b}(b.Observable);c.UsingObservable=b;var k=function(a){function b(c,f,
g){a.call(this,c);this.resource=f;this.observableFactory=g;c.add(f);this.tryUse()}l(b,a);b.prototype.tryUse=function(){try{var a=this.observableFactory.call(this,this.resource);a&&this.add(g.subscribeToResult(this,a))}catch(b){this._error(b)}};return b}(a.OuterSubscriber)},{"../Observable":5,"../OuterSubscriber":7,"../util/subscribeToResult":341}],169:[function(a,b,c){a=a("./BoundCallbackObservable");c.bindCallback=a.BoundCallbackObservable.create},{"./BoundCallbackObservable":146}],170:[function(a,
b,c){a=a("./BoundNodeCallbackObservable");c.bindNodeCallback=a.BoundNodeCallbackObservable.create},{"./BoundNodeCallbackObservable":147}],171:[function(a,b,c){var l=a("../util/isScheduler"),g=a("../util/isArray"),k=a("./ArrayObservable"),e=a("../operator/combineLatest");c.combineLatest=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];var c=b=null;l.isScheduler(a[a.length-1])&&(c=a.pop());"function"===typeof a[a.length-1]&&(b=a.pop());1===a.length&&g.isArray(a[0])&&(a=a[0]);return(new k.ArrayObservable(a,
c)).lift(new e.CombineLatestOperator(b))}},{"../operator/combineLatest":205,"../util/isArray":331,"../util/isScheduler":337,"./ArrayObservable":145}],172:[function(a,b,c){a=a("../operator/concat");c.concat=a.concatStatic},{"../operator/concat":206}],173:[function(a,b,c){a=a("./DeferObservable");c.defer=a.DeferObservable.create},{"./DeferObservable":149}],174:[function(a,b,c){function l(a,b){void 0===b&&(b=null);return new u({method:"GET",url:a,headers:b})}function g(a,b,c){return new u({method:"POST",
url:a,body:b,headers:c})}function k(a,b){return new u({method:"DELETE",url:a,headers:b})}function e(a,b,c){return new u({method:"PUT",url:a,body:b,headers:c})}function f(a,b){return(new u({method:"GET",url:a,responseType:"json",headers:b})).lift(new t.MapOperator(function(a,b){return a.response},null))}var m=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},h=a("../../util/root"),
n=a("../../util/tryCatch"),q=a("../../util/errorObject");b=a("../../Observable");var r=a("../../Subscriber"),t=a("../../operator/map");c.ajaxGet=l;c.ajaxPost=g;c.ajaxDelete=k;c.ajaxPut=e;c.ajaxGetJSON=f;var u=function(a){function b(c){a.call(this);var e={async:!0,createXHR:function(){var a;if(this.crossDomain)if(h.root.XMLHttpRequest)a=new h.root.XMLHttpRequest,"withCredentials"in a&&(a.withCredentials=!!this.withCredentials);else if(h.root.XDomainRequest)a=new h.root.XDomainRequest;else throw Error("CORS is not supported by your browser");
else if(h.root.XMLHttpRequest)a=new h.root.XMLHttpRequest;else{var b=void 0;try{for(var c=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],e=0;3>e;e++)try{if(b=c[e],new h.root.ActiveXObject(b))break}catch(f){}a=new h.root.ActiveXObject(b)}catch(f){throw Error("XMLHttpRequest is not supported by your browser");}}return a},crossDomain:!1,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"===typeof c)e.url=c;else for(var f in c)c.hasOwnProperty(f)&&(e[f]=
c[f]);this.request=e}m(b,a);b.prototype._subscribe=function(a){return new x(a,this.request)};b.create=function(){var a=function(a){return new b(a)};a.get=l;a.post=g;a.delete=k;a.put=e;a.getJSON=f;return a}();return b}(b.Observable);c.AjaxObservable=u;var x=function(a){function b(c,e){a.call(this,c);this.request=e;this.done=!1;var f=e.headers=e.headers||{};e.crossDomain||f["X-Requested-With"]||(f["X-Requested-With"]="XMLHttpRequest");"Content-Type"in f||h.root.FormData&&e.body instanceof h.root.FormData||
"undefined"===typeof e.body||(f["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8");e.body=this.serializeBody(e.body,e.headers["Content-Type"]);this.send()}m(b,a);b.prototype.next=function(a){this.done=!0;var b=this.destination;a=new w(a,this.xhr,this.request);b.next(a)};b.prototype.send=function(){var a=this.request,b=this.request,c=b.user,e=b.method,f=b.url,h=b.async,g=b.password,m=b.headers,b=b.body,k=n.tryCatch(a.createXHR).call(a);if(k===q.errorObject)this.error(q.errorObject.e);
else{this.xhr=k;var l=void 0,l=c?n.tryCatch(k.open).call(k,e,f,h,c,g):n.tryCatch(k.open).call(k,e,f,h);if(l===q.errorObject)return this.error(q.errorObject.e),null;k.timeout=a.timeout;k.responseType=a.responseType;this.setHeaders(k,m);this.setupEvents(k,a);b?k.send(b):k.send()}return k};b.prototype.serializeBody=function(a,b){if(!a||"string"===typeof a||h.root.FormData&&a instanceof h.root.FormData)return a;if(b){var c=b.indexOf(";");-1!==c&&(b=b.substring(0,c))}switch(b){case "application/x-www-form-urlencoded":return Object.keys(a).map(function(b){return encodeURI(b)+
"="+encodeURI(a[b])}).join("&");case "application/json":return JSON.stringify(a);default:return a}};b.prototype.setHeaders=function(a,b){for(var c in b)b.hasOwnProperty(c)&&a.setRequestHeader(c,b[c])};b.prototype.setupEvents=function(a,b){var c=b.progressSubscriber;a.ontimeout=function K(a){var b=K.subscriber,c=K.progressSubscriber,e=K.request;c&&c.error(a);b.error(new C(this,e))};a.ontimeout.request=b;a.ontimeout.subscriber=this;a.ontimeout.progressSubscriber=c;a.upload&&"withCredentials"in a&&h.root.XDomainRequest&&
(c&&(a.onprogress=function J(a){J.progressSubscriber.next(a)},a.onprogress.progressSubscriber=c),a.onerror=function J(a){var b=J.progressSubscriber,c=J.subscriber,e=J.request;b&&b.error(a);c.error(new v("ajax error",this,e))},a.onerror.request=b,a.onerror.subscriber=this,a.onerror.progressSubscriber=c);a.onreadystatechange=function J(a){var b=J.subscriber,c=J.progressSubscriber,e=J.request;if(4===this.readyState){var f=1223===this.status?204:this.status,h="text"===this.responseType?this.response||
this.responseText:this.response;0===f&&(f=h?200:0);200<=f&&300>f?(c&&c.complete(),b.next(a),b.complete()):(c&&c.error(a),b.error(new v("ajax error "+f,this,e)))}};a.onreadystatechange.subscriber=this;a.onreadystatechange.progressSubscriber=c;a.onreadystatechange.request=b};b.prototype.unsubscribe=function(){var b=this.xhr;!this.done&&b&&4!==b.readyState&&b.abort();a.prototype.unsubscribe.call(this)};return b}(r.Subscriber);c.AjaxSubscriber=x;var w=function(){return function(a,b,c){this.originalEvent=
a;this.xhr=b;this.request=c;this.status=b.status;this.responseType=b.responseType||c.responseType;switch(this.responseType){case "json":this.response="response"in b?b.responseType?b.response:JSON.parse(b.response||b.responseText||"null"):JSON.parse(b.responseText||"null");break;case "xml":this.response=b.responseXML;break;default:this.response="response"in b?b.response:b.responseText}}}();c.AjaxResponse=w;var v=function(a){function b(c,e,f){a.call(this,c);this.message=c;this.xhr=e;this.request=f;
this.status=e.status}m(b,a);return b}(Error);c.AjaxError=v;var C=function(a){function b(c,e){a.call(this,"ajax timeout",c,e)}m(b,a);return b}(v);c.AjaxTimeoutError=C},{"../../Observable":5,"../../Subscriber":13,"../../operator/map":237,"../../util/errorObject":330,"../../util/root":340,"../../util/tryCatch":343}],175:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=
b.prototype,new c)},g=a("../../Subject"),k=a("../../Subscriber"),e=a("../../Observable"),f=a("../../Subscription"),m=a("../../util/root"),h=a("../../ReplaySubject"),n=a("../../util/tryCatch"),q=a("../../util/errorObject"),r=a("../../util/assign");a=function(a){function b(c,f){if(c instanceof e.Observable)a.call(this,f,c);else{a.call(this);this.WebSocketCtor=m.root.WebSocket;this._output=new g.Subject;"string"===typeof c?this.url=c:r.assign(this,c);if(!this.WebSocketCtor)throw Error("no WebSocket constructor can be found");
this.destination=new h.ReplaySubject}}l(b,a);b.prototype.resultSelector=function(a){return JSON.parse(a.data)};b.create=function(a){return new b(a)};b.prototype.lift=function(a){var c=new b(this,this.destination);c.operator=a;return c};b.prototype.multiplex=function(a,b,c){var f=this;return new e.Observable(function(e){var h=n.tryCatch(a)();h===q.errorObject?e.error(q.errorObject.e):f.next(h);var g=f.subscribe(function(a){var b=n.tryCatch(c)(a);b===q.errorObject?e.error(q.errorObject.e):b&&e.next(a)},
function(a){return e.error(a)},function(){return e.complete()});return function(){var a=n.tryCatch(b)();a===q.errorObject?e.error(q.errorObject.e):f.next(a);g.unsubscribe()}})};b.prototype._connectSocket=function(){var a=this,b=this.WebSocketCtor,c=this._output,e=null;try{this.socket=e=this.protocol?new b(this.url,this.protocol):new b(this.url)}catch(g){c.error(g);return}var m=new f.Subscription(function(){a.socket=null;e&&1===e.readyState&&e.close()});e.onopen=function(b){var f=a.openObserver;f&&
f.next(b);b=a.destination;a.destination=k.Subscriber.create(function(a){return 1===e.readyState&&e.send(a)},function(b){var f=a.closingObserver;f&&f.next(void 0);b&&b.code?e.close(b.code,b.reason):c.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }"));a.destination=new h.ReplaySubject;a.socket=null},function(){var b=a.closingObserver;b&&b.next(void 0);e.close();a.destination=new h.ReplaySubject;a.socket=
null});b&&b instanceof h.ReplaySubject&&m.add(b.subscribe(a.destination))};e.onerror=function(a){return c.error(a)};e.onclose=function(b){var e=a.closeObserver;e&&e.next(b);b.wasClean?c.complete():c.error(b)};e.onmessage=function(b){b=n.tryCatch(a.resultSelector)(b);b===q.errorObject?c.error(q.errorObject.e):c.next(b)}};b.prototype._subscribe=function(a){var b=this,c=this.source;if(c)return c.subscribe(a);this.socket||this._connectSocket();c=new f.Subscription;c.add(this._output.subscribe(a));c.add(function(){var a=
b.socket;0===b._output.observers.length&&a&&1===a.readyState&&(a.close(),b.socket=null)});return c};b.prototype.unsubscribe=function(){var b=this.source,c=this.socket;c&&1===c.readyState&&(c.close(),this.socket=null);a.prototype.unsubscribe.call(this);b||(this.destination=new h.ReplaySubject)};return b}(g.AnonymousSubject);c.WebSocketSubject=a},{"../../Observable":5,"../../ReplaySubject":8,"../../Subject":11,"../../Subscriber":13,"../../Subscription":14,"../../util/assign":329,"../../util/errorObject":330,
"../../util/root":340,"../../util/tryCatch":343}],176:[function(a,b,c){a=a("./AjaxObservable");c.ajax=a.AjaxObservable.create},{"./AjaxObservable":174}],177:[function(a,b,c){a=a("./WebSocketSubject");c.webSocket=a.WebSocketSubject.create},{"./WebSocketSubject":175}],178:[function(a,b,c){a=a("./EmptyObservable");c.empty=a.EmptyObservable.create},{"./EmptyObservable":150}],179:[function(a,b,c){a=a("./ForkJoinObservable");c.forkJoin=a.ForkJoinObservable.create},{"./ForkJoinObservable":152}],180:[function(a,
b,c){a=a("./FromObservable");c.from=a.FromObservable.create},{"./FromObservable":155}],181:[function(a,b,c){a=a("./FromEventObservable");c.fromEvent=a.FromEventObservable.create},{"./FromEventObservable":153}],182:[function(a,b,c){a=a("./FromEventPatternObservable");c.fromEventPattern=a.FromEventPatternObservable.create},{"./FromEventPatternObservable":154}],183:[function(a,b,c){a=a("./PromiseObservable");c.fromPromise=a.PromiseObservable.create},{"./PromiseObservable":163}],184:[function(a,b,c){a=
a("./IfObservable");c._if=a.IfObservable.create},{"./IfObservable":157}],185:[function(a,b,c){a=a("./IntervalObservable");c.interval=a.IntervalObservable.create},{"./IntervalObservable":158}],186:[function(a,b,c){a=a("../operator/merge");c.merge=a.mergeStatic},{"../operator/merge":241}],187:[function(a,b,c){a=a("./NeverObservable");c.never=a.NeverObservable.create},{"./NeverObservable":161}],188:[function(a,b,c){a=a("./ArrayObservable");c.of=a.ArrayObservable.of},{"./ArrayObservable":145}],189:[function(a,
b,c){a=a("./PairsObservable");c.pairs=a.PairsObservable.create},{"./PairsObservable":162}],190:[function(a,b,c){a=a("./RangeObservable");c.range=a.RangeObservable.create},{"./RangeObservable":164}],191:[function(a,b,c){a=a("./ErrorObservable");c._throw=a.ErrorObservable.create},{"./ErrorObservable":151}],192:[function(a,b,c){a=a("./TimerObservable");c.timer=a.TimerObservable.create},{"./TimerObservable":167}],193:[function(a,b,c){a=a("./UsingObservable");c.using=a.UsingObservable.create},{"./UsingObservable":168}],
194:[function(a,b,c){a=a("../operator/zip");c.zip=a.zipStatic},{"../operator/zip":295}],195:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=a("../util/tryCatch"),k=a("../util/errorObject");b=a("../OuterSubscriber");var e=a("../util/subscribeToResult");c.audit=function(a){return this.lift(new f(a))};var f=function(){function a(b){this.durationSelector=
b}a.prototype.call=function(a,b){return b._subscribe(new m(a,this.durationSelector))};return a}(),m=function(a){function b(c,e){a.call(this,c);this.durationSelector=e;this.hasValue=!1}l(b,a);b.prototype._next=function(a){this.value=a;this.hasValue=!0;this.throttled||(a=g.tryCatch(this.durationSelector)(a),a===k.errorObject?this.destination.error(k.errorObject.e):this.add(this.throttled=e.subscribeToResult(this,a)))};b.prototype.clearThrottle=function(){var a=this.value,b=this.hasValue,c=this.throttled;
c&&(this.remove(c),this.throttled=null,c.unsubscribe());b&&(this.value=null,this.hasValue=!1,this.destination.next(a))};b.prototype.notifyNext=function(a,b,c,e){this.clearThrottle()};b.prototype.notifyComplete=function(){this.clearThrottle()};return b}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../util/errorObject":330,"../util/subscribeToResult":341,"../util/tryCatch":343}],196:[function(a,b,c){function l(a){a.clearThrottle()}var g=this&&this.__extends||function(a,b){function c(){this.constructor=
a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},k=a("../scheduler/async");a=a("../Subscriber");c.auditTime=function(a,b){void 0===b&&(b=k.async);return this.lift(new e(a,b))};var e=function(){function a(b,c){this.duration=b;this.scheduler=c}a.prototype.call=function(a,b){return b._subscribe(new f(a,this.duration,this.scheduler))};return a}(),f=function(a){function b(c,e,f){a.call(this,c);this.duration=e;this.scheduler=f;this.hasValue=
!1}g(b,a);b.prototype._next=function(a){this.value=a;this.hasValue=!0;this.throttled||this.add(this.throttled=this.scheduler.schedule(l,this.duration,this))};b.prototype.clearThrottle=function(){var a=this.value,b=this.hasValue,c=this.throttled;c&&(this.remove(c),this.throttled=null,c.unsubscribe());b&&(this.value=null,this.hasValue=!1,this.destination.next(a))};return b}(a.Subscriber)},{"../Subscriber":13,"../scheduler/async":309}],197:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=
a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../OuterSubscriber");var g=a("../util/subscribeToResult");c.buffer=function(a){return this.lift(new k(a))};var k=function(){function a(b){this.closingNotifier=b}a.prototype.call=function(a,b){return b._subscribe(new e(a,this.closingNotifier))};return a}(),e=function(a){function b(c,e){a.call(this,c);this.buffer=[];this.add(g.subscribeToResult(this,e))}l(b,a);b.prototype._next=
function(a){this.buffer.push(a)};b.prototype.notifyNext=function(a,b,c,e,f){a=this.buffer;this.buffer=[];this.destination.next(a)};return b}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],198:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var h in b)b.hasOwnProperty(h)&&(a[h]=b[h]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=a("../Subscriber");c.bufferCount=function(a,b){void 0===b&&(b=null);
return this.lift(new g(a,b))};var g=function(){function a(b,c){this.bufferSize=b;this.startBufferEvery=c}a.prototype.call=function(a,b){return b._subscribe(new k(a,this.bufferSize,this.startBufferEvery))};return a}(),k=function(a){function b(c,f,g){a.call(this,c);this.bufferSize=f;this.startBufferEvery=g;this.buffers=[[]];this.count=0}l(b,a);b.prototype._next=function(a){var b=this.count+=1,c=this.destination,e=this.bufferSize,f=this.buffers,g=f.length,k=-1;0===b%(null==this.startBufferEvery?e:this.startBufferEvery)&&
f.push([]);for(b=0;b<g;b++){var l=f[b];l.push(a);l.length===e&&(k=b,c.next(l))}-1!==k&&f.splice(k,1)};b.prototype._complete=function(){for(var b=this.destination,c=this.buffers;0<c.length;){var f=c.shift();0<f.length&&b.next(f)}a.prototype._complete.call(this)};return b}(a.Subscriber)},{"../Subscriber":13}],199:[function(a,b,c){function l(a){var b=a.subscriber,c=a.context;c&&b.closeContext(c);b.closed||(a.context=b.openContext(),a.context.closeAction=this.schedule(a,a.bufferTimeSpan))}function g(a){var b=
a.bufferCreationInterval,c=a.bufferTimeSpan,e=a.subscriber,f=a.scheduler,h=e.openContext();e.closed||(e.add(h.closeAction=f.schedule(k,c,{subscriber:e,context:h})),this.schedule(a,b))}function k(a){a.subscriber.closeContext(a.context)}var e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},f=a("../scheduler/async");b=a("../Subscriber");var m=a("../util/isScheduler");
c.bufferTime=function(a){var b=arguments.length,c=f.async;m.isScheduler(arguments[arguments.length-1])&&(c=arguments[arguments.length-1],b--);var e=null;2<=b&&(e=arguments[1]);var g=Number.POSITIVE_INFINITY;3<=b&&(g=arguments[2]);return this.lift(new h(a,e,g,c))};var h=function(){function a(b,c,e,f){this.bufferTimeSpan=b;this.bufferCreationInterval=c;this.maxBufferSize=e;this.scheduler=f}a.prototype.call=function(a,b){return b._subscribe(new q(a,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,
this.scheduler))};return a}(),n=function(){return function(){this.buffer=[]}}(),q=function(a){function b(c,e,f,h,m){a.call(this,c);this.bufferTimeSpan=e;this.bufferCreationInterval=f;this.maxBufferSize=h;this.scheduler=m;this.contexts=[];c=this.openContext();(this.timespanOnly=null==f||0>f)?this.add(c.closeAction=m.schedule(l,e,{subscriber:this,context:c,bufferTimeSpan:e})):(h={bufferTimeSpan:e,bufferCreationInterval:f,subscriber:this,scheduler:m},this.add(c.closeAction=m.schedule(k,e,{subscriber:this,
context:c})),this.add(m.schedule(g,f,h)))}e(b,a);b.prototype._next=function(a){for(var b=this.contexts,c=b.length,e,f=0;f<c;f++){var h=b[f],g=h.buffer;g.push(a);g.length==this.maxBufferSize&&(e=h)}if(e)this.onBufferFull(e)};b.prototype._error=function(b){this.contexts.length=0;a.prototype._error.call(this,b)};b.prototype._complete=function(){for(var b=this.contexts,c=this.destination;0<b.length;){var e=b.shift();c.next(e.buffer)}a.prototype._complete.call(this)};b.prototype._unsubscribe=function(){this.contexts=
null};b.prototype.onBufferFull=function(a){this.closeContext(a);a=a.closeAction;a.unsubscribe();this.remove(a);if(this.timespanOnly){a=this.openContext();var b=this.bufferTimeSpan;this.add(a.closeAction=this.scheduler.schedule(l,b,{subscriber:this,context:a,bufferTimeSpan:b}))}};b.prototype.openContext=function(){var a=new n;this.contexts.push(a);return a};b.prototype.closeContext=function(a){this.destination.next(a.buffer);var b=this.contexts;0<=(b?b.indexOf(a):-1)&&b.splice(b.indexOf(a),1)};return b}(b.Subscriber)},
{"../Subscriber":13,"../scheduler/async":309,"../util/isScheduler":337}],200:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=a("../Subscription"),k=a("../util/subscribeToResult");a=a("../OuterSubscriber");c.bufferToggle=function(a,b){return this.lift(new e(a,b))};var e=function(){function a(b,c){this.openings=b;this.closingSelector=c}a.prototype.call=
function(a,b){return b._subscribe(new f(a,this.openings,this.closingSelector))};return a}(),f=function(a){function b(c,e,f){a.call(this,c);this.openings=e;this.closingSelector=f;this.contexts=[];this.add(k.subscribeToResult(this,e))}l(b,a);b.prototype._next=function(a){for(var b=this.contexts,c=b.length,e=0;e<c;e++)b[e].buffer.push(a)};b.prototype._error=function(b){for(var c=this.contexts;0<c.length;){var e=c.shift();e.subscription.unsubscribe();e.buffer=null;e.subscription=null}this.contexts=null;
a.prototype._error.call(this,b)};b.prototype._complete=function(){for(var b=this.contexts;0<b.length;){var c=b.shift();this.destination.next(c.buffer);c.subscription.unsubscribe();c.buffer=null;c.subscription=null}this.contexts=null;a.prototype._complete.call(this)};b.prototype.notifyNext=function(a,b,c,e,f){a?this.closeBuffer(a):this.openBuffer(b)};b.prototype.notifyComplete=function(a){this.closeBuffer(a.context)};b.prototype.openBuffer=function(a){try{var b=this.closingSelector.call(this,a);b&&
this.trySubscribe(b)}catch(c){this._error(c)}};b.prototype.closeBuffer=function(a){var b=this.contexts;if(b&&a){var c=a.subscription;this.destination.next(a.buffer);b.splice(b.indexOf(a),1);this.remove(c);c.unsubscribe()}};b.prototype.trySubscribe=function(a){var b=this.contexts,c=new g.Subscription,e={buffer:[],subscription:c};b.push(e);a=k.subscribeToResult(this,a,e);!a||a.closed?this.closeBuffer(e):(a.context=e,this.add(a),c.add(a))};return b}(a.OuterSubscriber)},{"../OuterSubscriber":7,"../Subscription":14,
"../util/subscribeToResult":341}],201:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=a("../Subscription"),k=a("../util/tryCatch"),e=a("../util/errorObject");b=a("../OuterSubscriber");var f=a("../util/subscribeToResult");c.bufferWhen=function(a){return this.lift(new m(a))};var m=function(){function a(b){this.closingSelector=b}a.prototype.call=
function(a,b){return b._subscribe(new h(a,this.closingSelector))};return a}(),h=function(a){function b(c,e){a.call(this,c);this.closingSelector=e;this.subscribing=!1;this.openBuffer()}l(b,a);b.prototype._next=function(a){this.buffer.push(a)};b.prototype._complete=function(){var b=this.buffer;b&&this.destination.next(b);a.prototype._complete.call(this)};b.prototype._unsubscribe=function(){this.buffer=null;this.subscribing=!1};b.prototype.notifyNext=function(a,b,c,e,f){this.openBuffer()};b.prototype.notifyComplete=
function(){this.subscribing?this.complete():this.openBuffer()};b.prototype.openBuffer=function(){var a=this.closingSubscription;a&&(this.remove(a),a.unsubscribe());(a=this.buffer)&&this.destination.next(a);this.buffer=[];var b=k.tryCatch(this.closingSelector)();b===e.errorObject?this.error(e.errorObject.e):(this.closingSubscription=a=new g.Subscription,this.add(a),this.subscribing=!0,a.add(f.subscribeToResult(this,b)),this.subscribing=!1)};return b}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../Subscription":14,
"../util/errorObject":330,"../util/subscribeToResult":341,"../util/tryCatch":343}],202:[function(a,b,c){var l=a("../Observable"),g=a("../ReplaySubject");c.cache=function(a,b,c){void 0===a&&(a=Number.POSITIVE_INFINITY);void 0===b&&(b=Number.POSITIVE_INFINITY);var m,h=this,n=0,q,r=function(){return m=new g.ReplaySubject(a,b,c)};return new l.Observable(function(a){m||(m=r(),q=h.subscribe(function(a){return m.next(a)},function(a){var b=m;m=null;b.error(a)},function(){return m.complete()}));n++;m||(m=
r());var b=m.subscribe(a);return function(){n--;b&&b.unsubscribe();0===n&&q.unsubscribe()}})}},{"../Observable":5,"../ReplaySubject":8}],203:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../OuterSubscriber");var g=a("../util/subscribeToResult");c._catch=function(a){a=new k(a);var b=this.lift(a);return a.caught=b};var k=function(){function a(b){this.selector=
b}a.prototype.call=function(a,b){return b._subscribe(new e(a,this.selector,this.caught))};return a}(),e=function(a){function b(c,e,g){a.call(this,c);this.selector=e;this.caught=g}l(b,a);b.prototype.error=function(a){if(!this.isStopped){var b=void 0;try{b=this.selector(a,this.caught)}catch(c){this.destination.error(c);return}this.unsubscribe();this.destination.remove(this);g.subscribeToResult(this,b)}};return b}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],204:[function(a,
b,c){var l=a("./combineLatest");c.combineAll=function(a){return this.lift(new l.CombineLatestOperator(a))}},{"./combineLatest":205}],205:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=a("../observable/ArrayObservable"),k=a("../util/isArray");b=a("../OuterSubscriber");var e=a("../util/subscribeToResult"),f={};c.combineLatest=function(){for(var a=
[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];b=null;"function"===typeof a[a.length-1]&&(b=a.pop());1===a.length&&k.isArray(a[0])&&(a=a[0]);a.unshift(this);return(new g.ArrayObservable(a)).lift(new m(b))};var m=function(){function a(b){this.project=b}a.prototype.call=function(a,b){return b._subscribe(new h(a,this.project))};return a}();c.CombineLatestOperator=m;var h=function(a){function b(c,e){a.call(this,c);this.project=e;this.active=0;this.values=[];this.observables=[]}l(b,a);b.prototype._next=
function(a){this.values.push(f);this.observables.push(a)};b.prototype._complete=function(){var a=this.observables,b=a.length;if(0===b)this.destination.complete();else{this.toRespond=this.active=b;for(var c=0;c<b;c++){var f=a[c];this.add(e.subscribeToResult(this,f,f,c))}}};b.prototype.notifyComplete=function(a){0===--this.active&&this.destination.complete()};b.prototype.notifyNext=function(a,b,c,e,h){a=this.values;e=a[c];e=this.toRespond?e===f?--this.toRespond:this.toRespond:0;a[c]=b;0===e&&(this.project?
this._tryProject(a):this.destination.next(a.slice()))};b.prototype._tryProject=function(a){var b;try{b=this.project.apply(this,a)}catch(c){this.destination.error(c);return}this.destination.next(b)};return b}(b.OuterSubscriber);c.CombineLatestSubscriber=h},{"../OuterSubscriber":7,"../observable/ArrayObservable":145,"../util/isArray":331,"../util/subscribeToResult":341}],206:[function(a,b,c){function l(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];b=null;g.isScheduler(a[a.length-1])&&
(b=a.pop());return(new k.ArrayObservable(a,b)).lift(new e.MergeAllOperator(1))}var g=a("../util/isScheduler"),k=a("../observable/ArrayObservable"),e=a("./mergeAll");c.concat=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return l.apply(void 0,[this].concat(a))};c.concatStatic=l},{"../observable/ArrayObservable":145,"../util/isScheduler":337,"./mergeAll":242}],207:[function(a,b,c){var l=a("./mergeAll");c.concatAll=function(){return this.lift(new l.MergeAllOperator(1))}},{"./mergeAll":242}],
208:[function(a,b,c){var l=a("./mergeMap");c.concatMap=function(a,b){return this.lift(new l.MergeMapOperator(a,b,1))}},{"./mergeMap":243}],209:[function(a,b,c){var l=a("./mergeMapTo");c.concatMapTo=function(a,b){return this.lift(new l.MergeMapToOperator(a,b,1))}},{"./mergeMapTo":244}],210:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var h in b)b.hasOwnProperty(h)&&(a[h]=b[h]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=
a("../Subscriber");c.count=function(a){return this.lift(new g(a,this))};var g=function(){function a(b,c){this.predicate=b;this.source=c}a.prototype.call=function(a,b){return b._subscribe(new k(a,this.predicate,this.source))};return a}(),k=function(a){function b(c,f,g){a.call(this,c);this.predicate=f;this.source=g;this.index=this.count=0}l(b,a);b.prototype._next=function(a){this.predicate?this._tryPredicate(a):this.count++};b.prototype._tryPredicate=function(a){var b;try{b=this.predicate(a,this.index++,
this.source)}catch(c){this.destination.error(c);return}b&&this.count++};b.prototype._complete=function(){this.destination.next(this.count);this.destination.complete()};return b}(a.Subscriber)},{"../Subscriber":13}],211:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../OuterSubscriber");var g=a("../util/subscribeToResult");c.debounce=
function(a){return this.lift(new k(a))};var k=function(){function a(b){this.durationSelector=b}a.prototype.call=function(a,b){return b._subscribe(new e(a,this.durationSelector))};return a}(),e=function(a){function b(c,e){a.call(this,c);this.durationSelector=e;this.hasValue=!1;this.durationSubscription=null}l(b,a);b.prototype._next=function(a){try{var b=this.durationSelector.call(this,a);b&&this._tryNext(a,b)}catch(c){this.destination.error(c)}};b.prototype._complete=function(){this.emitValue();this.destination.complete()};
b.prototype._tryNext=function(a,b){var c=this.durationSubscription;this.value=a;this.hasValue=!0;c&&(c.unsubscribe(),this.remove(c));c=g.subscribeToResult(this,b);c.closed||this.add(this.durationSubscription=c)};b.prototype.notifyNext=function(a,b,c,e,f){this.emitValue()};b.prototype.notifyComplete=function(){this.emitValue()};b.prototype.emitValue=function(){if(this.hasValue){var b=this.value,c=this.durationSubscription;c&&(this.durationSubscription=null,c.unsubscribe(),this.remove(c));this.value=
null;this.hasValue=!1;a.prototype._next.call(this,b)}};return b}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],212:[function(a,b,c){function l(a){a.debouncedNext()}var g=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../Subscriber");var k=a("../scheduler/async");c.debounceTime=function(a,b){void 0===b&&(b=k.async);return this.lift(new e(a,
b))};var e=function(){function a(b,c){this.dueTime=b;this.scheduler=c}a.prototype.call=function(a,b){return b._subscribe(new f(a,this.dueTime,this.scheduler))};return a}(),f=function(a){function b(c,e,f){a.call(this,c);this.dueTime=e;this.scheduler=f;this.lastValue=this.debouncedSubscription=null;this.hasValue=!1}g(b,a);b.prototype._next=function(a){this.clearDebounce();this.lastValue=a;this.hasValue=!0;this.add(this.debouncedSubscription=this.scheduler.schedule(l,this.dueTime,this))};b.prototype._complete=
function(){this.debouncedNext();this.destination.complete()};b.prototype.debouncedNext=function(){this.clearDebounce();this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)};b.prototype.clearDebounce=function(){var a=this.debouncedSubscription;null!==a&&(this.remove(a),a.unsubscribe(),this.debouncedSubscription=null)};return b}(b.Subscriber)},{"../Subscriber":13,"../scheduler/async":309}],213:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=
a}for(var h in b)b.hasOwnProperty(h)&&(a[h]=b[h]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=a("../Subscriber");c.defaultIfEmpty=function(a){void 0===a&&(a=null);return this.lift(new g(a))};var g=function(){function a(b){this.defaultValue=b}a.prototype.call=function(a,b){return b._subscribe(new k(a,this.defaultValue))};return a}(),k=function(a){function b(c,f){a.call(this,c);this.defaultValue=f;this.isEmpty=!0}l(b,a);b.prototype._next=function(a){this.isEmpty=!1;this.destination.next(a)};
b.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue);this.destination.complete()};return b}(a.Subscriber)},{"../Subscriber":13}],214:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=a("../scheduler/async"),k=a("../util/isDate");b=a("../Subscriber");var e=a("../Notification");c.delay=function(a,b){void 0===
b&&(b=g.async);var c=k.isDate(a)?+a-b.now():Math.abs(a);return this.lift(new f(c,b))};var f=function(){function a(b,c){this.delay=b;this.scheduler=c}a.prototype.call=function(a,b){return b._subscribe(new m(a,this.delay,this.scheduler))};return a}(),m=function(a){function b(c,e,f){a.call(this,c);this.delay=e;this.scheduler=f;this.queue=[];this.errored=this.active=!1}l(b,a);b.dispatch=function(a){for(var b=a.source,c=b.queue,e=a.scheduler,f=a.destination;0<c.length&&0>=c[0].time-e.now();)c.shift().notification.observe(f);
0<c.length?(b=Math.max(0,c[0].time-e.now()),this.schedule(a,b)):b.active=!1};b.prototype._schedule=function(a){this.active=!0;this.add(a.schedule(b.dispatch,this.delay,{source:this,destination:this.destination,scheduler:a}))};b.prototype.scheduleNotification=function(a){if(!0!==this.errored){var b=this.scheduler;a=new h(b.now()+this.delay,a);this.queue.push(a);!1===this.active&&this._schedule(b)}};b.prototype._next=function(a){this.scheduleNotification(e.Notification.createNext(a))};b.prototype._error=
function(a){this.errored=!0;this.queue=[];this.destination.error(a)};b.prototype._complete=function(){this.scheduleNotification(e.Notification.createComplete())};return b}(b.Subscriber),h=function(){return function(a,b){this.time=a;this.notification=b}}()},{"../Notification":4,"../Subscriber":13,"../scheduler/async":309,"../util/isDate":332}],215:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===
b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../Subscriber");var g=a("../Observable"),k=a("../OuterSubscriber"),e=a("../util/subscribeToResult");c.delayWhen=function(a,b){return b?(new h(this,b)).lift(new f(a)):this.lift(new f(a))};var f=function(){function a(b){this.delayDurationSelector=b}a.prototype.call=function(a,b){return b._subscribe(new m(a,this.delayDurationSelector))};return a}(),m=function(a){function b(c,e){a.call(this,c);this.delayDurationSelector=e;this.completed=!1;this.delayNotifierSubscriptions=
[];this.values=[]}l(b,a);b.prototype.notifyNext=function(a,b,c,e,f){this.destination.next(a);this.removeSubscription(f);this.tryComplete()};b.prototype.notifyError=function(a,b){this._error(a)};b.prototype.notifyComplete=function(a){(a=this.removeSubscription(a))&&this.destination.next(a);this.tryComplete()};b.prototype._next=function(a){try{var b=this.delayDurationSelector(a);b&&this.tryDelay(b,a)}catch(c){this.destination.error(c)}};b.prototype._complete=function(){this.completed=!0;this.tryComplete()};
b.prototype.removeSubscription=function(a){a.unsubscribe();a=this.delayNotifierSubscriptions.indexOf(a);var b=null;-1!==a&&(b=this.values[a],this.delayNotifierSubscriptions.splice(a,1),this.values.splice(a,1));return b};b.prototype.tryDelay=function(a,b){var c=e.subscribeToResult(this,a,b);this.add(c);this.delayNotifierSubscriptions.push(c);this.values.push(b)};b.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()};return b}(k.OuterSubscriber),
h=function(a){function b(c,e){a.call(this);this.source=c;this.subscriptionDelay=e}l(b,a);b.prototype._subscribe=function(a){this.subscriptionDelay.subscribe(new n(a,this.source))};return b}(g.Observable),n=function(a){function b(c,e){a.call(this);this.parent=c;this.source=e;this.sourceSubscribed=!1}l(b,a);b.prototype._next=function(a){this.subscribeToSource()};b.prototype._error=function(a){this.unsubscribe();this.parent.error(a)};b.prototype._complete=function(){this.subscribeToSource()};b.prototype.subscribeToSource=
function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))};return b}(b.Subscriber)},{"../Observable":5,"../OuterSubscriber":7,"../Subscriber":13,"../util/subscribeToResult":341}],216:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var h in b)b.hasOwnProperty(h)&&(a[h]=b[h]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=a("../Subscriber");c.dematerialize=function(){return this.lift(new g)};
var g=function(){function a(){}a.prototype.call=function(a,b){return b._subscribe(new k(a))};return a}(),k=function(a){function b(c){a.call(this,c)}l(b,a);b.prototype._next=function(a){a.observe(this.destination)};return b}(a.Subscriber)},{"../Subscriber":13}],217:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../OuterSubscriber");
var g=a("../util/subscribeToResult");c.distinct=function(a,b){return this.lift(new k(a,b))};var k=function(){function a(b,c){this.compare=b;this.flushes=c}a.prototype.call=function(a,b){return b._subscribe(new e(a,this.compare,this.flushes))};return a}(),e=function(a){function b(c,e,k){a.call(this,c);this.values=[];"function"===typeof e&&(this.compare=e);k&&this.add(g.subscribeToResult(this,k))}l(b,a);b.prototype.notifyNext=function(a,b,c,e,f){this.values.length=0};b.prototype.notifyError=function(a,
b){this._error(a)};b.prototype._next=function(a){var b=this.values,c=b.length;try{for(var e=0;e<c;e++)if(this.compare(b[e],a))return}catch(f){this.destination.error(f);return}this.values.push(a);this.destination.next(a)};b.prototype.compare=function(a,b){return a===b};return b}(b.OuterSubscriber);c.DistinctSubscriber=e},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],218:[function(a,b,c){var l=a("./distinct");c.distinctKey=function(a,b,c){return l.distinct.call(this,function(c,e){return b?
b(c[a],e[a]):c[a]===e[a]},c)}},{"./distinct":217}],219:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../Subscriber");var g=a("../util/tryCatch"),k=a("../util/errorObject");c.distinctUntilChanged=function(a,b){return this.lift(new e(a,b))};var e=function(){function a(b,c){this.compare=b;this.keySelector=c}a.prototype.call=function(a,
b){return b._subscribe(new f(a,this.compare,this.keySelector))};return a}(),f=function(a){function b(c,e,f){a.call(this,c);this.keySelector=f;this.hasKey=!1;"function"===typeof e&&(this.compare=e)}l(b,a);b.prototype.compare=function(a,b){return a===b};b.prototype._next=function(a){var b=a;if(this.keySelector&&(b=g.tryCatch(this.keySelector)(a),b===k.errorObject))return this.destination.error(k.errorObject.e);var c=!1;if(this.hasKey){if(c=g.tryCatch(this.compare)(this.key,b),c===k.errorObject)return this.destination.error(k.errorObject.e)}else this.hasKey=
!0;!1===Boolean(c)&&(this.key=b,this.destination.next(a))};return b}(b.Subscriber)},{"../Subscriber":13,"../util/errorObject":330,"../util/tryCatch":343}],220:[function(a,b,c){var l=a("./distinctUntilChanged");c.distinctUntilKeyChanged=function(a,b){return l.distinctUntilChanged.call(this,function(c,f){return b?b(c[a],f[a]):c[a]===f[a]})}},{"./distinctUntilChanged":219}],221:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&
(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=a("../Subscriber");c._do=function(a,b,c){return this.lift(new k(a,b,c))};var k=function(){function a(b,c,e){this.nextOrObserver=b;this.error=c;this.complete=e}a.prototype.call=function(a,b){return b._subscribe(new e(a,this.nextOrObserver,this.error,this.complete))};return a}(),e=function(a){function b(c,e,k,m){a.call(this,c);c=new g.Subscriber(e,k,m);c.syncErrorThrowable=!0;this.add(c);this.safeSubscriber=c}l(b,a);
b.prototype._next=function(a){var b=this.safeSubscriber;b.next(a);b.syncErrorThrown?this.destination.error(b.syncErrorValue):this.destination.next(a)};b.prototype._error=function(a){var b=this.safeSubscriber;b.error(a);b.syncErrorThrown?this.destination.error(b.syncErrorValue):this.destination.error(a)};b.prototype._complete=function(){var a=this.safeSubscriber;a.complete();a.syncErrorThrown?this.destination.error(a.syncErrorValue):this.destination.complete()};return b}(g.Subscriber)},{"../Subscriber":13}],
222:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../Subscriber");var g=a("../util/ArgumentOutOfRangeError");c.elementAt=function(a,b){return this.lift(new k(a,b))};var k=function(){function a(b,c){this.index=b;this.defaultValue=c;if(0>b)throw new g.ArgumentOutOfRangeError;}a.prototype.call=function(a,b){return b._subscribe(new e(a,
this.index,this.defaultValue))};return a}(),e=function(a){function b(c,e,g){a.call(this,c);this.index=e;this.defaultValue=g}l(b,a);b.prototype._next=function(a){0===this.index--&&(this.destination.next(a),this.destination.complete())};b.prototype._complete=function(){var a=this.destination;0<=this.index&&("undefined"!==typeof this.defaultValue?a.next(this.defaultValue):a.error(new g.ArgumentOutOfRangeError));a.complete()};return b}(b.Subscriber)},{"../Subscriber":13,"../util/ArgumentOutOfRangeError":320}],
223:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=a("../Subscriber");c.every=function(a,b){return this.lift(new g(a,b,this))};var g=function(){function a(b,c,e){this.predicate=b;this.thisArg=c;this.source=e}a.prototype.call=function(a,b){return b._subscribe(new k(a,this.predicate,this.thisArg,this.source))};return a}(),k=function(a){function b(c,
f,g,k){a.call(this,c);this.predicate=f;this.thisArg=g;this.source=k;this.index=0;this.thisArg=g||this}l(b,a);b.prototype.notifyComplete=function(a){this.destination.next(a);this.destination.complete()};b.prototype._next=function(a){var b=!1;try{b=this.predicate.call(this.thisArg,a,this.index++,this.source)}catch(c){this.destination.error(c);return}b||this.notifyComplete(!1)};b.prototype._complete=function(){this.notifyComplete(!0)};return b}(a.Subscriber)},{"../Subscriber":13}],224:[function(a,b,
c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../OuterSubscriber");var g=a("../util/subscribeToResult");c.exhaust=function(){return this.lift(new k)};var k=function(){function a(){}a.prototype.call=function(a,b){return b._subscribe(new e(a))};return a}(),e=function(a){function b(c){a.call(this,c);this.hasSubscription=this.hasCompleted=!1}l(b,a);
b.prototype._next=function(a){this.hasSubscription||(this.hasSubscription=!0,this.add(g.subscribeToResult(this,a)))};b.prototype._complete=function(){this.hasCompleted=!0;this.hasSubscription||this.destination.complete()};b.prototype.notifyComplete=function(a){this.remove(a);this.hasSubscription=!1;this.hasCompleted&&this.destination.complete()};return b}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],225:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=
a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../OuterSubscriber");var g=a("../util/subscribeToResult");c.exhaustMap=function(a,b){return this.lift(new k(a,b))};var k=function(){function a(b,c){this.project=b;this.resultSelector=c}a.prototype.call=function(a,b){return b._subscribe(new e(a,this.project,this.resultSelector))};return a}(),e=function(a){function b(c,e,g){a.call(this,c);this.project=e;this.resultSelector=g;
this.hasCompleted=this.hasSubscription=!1;this.index=0}l(b,a);b.prototype._next=function(a){this.hasSubscription||this.tryNext(a)};b.prototype.tryNext=function(a){var b=this.index++,c=this.destination;try{var e=this.project(a,b);this.hasSubscription=!0;this.add(g.subscribeToResult(this,e,a,b))}catch(f){c.error(f)}};b.prototype._complete=function(){this.hasCompleted=!0;this.hasSubscription||this.destination.complete()};b.prototype.notifyNext=function(a,b,c,e,f){f=this.destination;this.resultSelector?
this.trySelectResult(a,b,c,e):f.next(b)};b.prototype.trySelectResult=function(a,b,c,e){var f=this.resultSelector,g=this.destination;try{var k=f(a,b,c,e);g.next(k)}catch(m){g.error(m)}};b.prototype.notifyError=function(a){this.destination.error(a)};b.prototype.notifyComplete=function(a){this.remove(a);this.hasSubscription=!1;this.hasCompleted&&this.destination.complete()};return b}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],226:[function(a,b,c){var l=this&&this.__extends||
function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=a("../util/tryCatch"),k=a("../util/errorObject");b=a("../OuterSubscriber");var e=a("../util/subscribeToResult");c.expand=function(a,b,c){void 0===b&&(b=Number.POSITIVE_INFINITY);void 0===c&&(c=void 0);b=1>(b||0)?Number.POSITIVE_INFINITY:b;return this.lift(new f(a,b,c))};var f=function(){function a(b,c,e){this.project=b;this.concurrent=
c;this.scheduler=e}a.prototype.call=function(a,b){return b._subscribe(new m(a,this.project,this.concurrent,this.scheduler))};return a}();c.ExpandOperator=f;var m=function(a){function b(c,e,f,g){a.call(this,c);this.project=e;this.concurrent=f;this.scheduler=g;this.active=this.index=0;this.hasCompleted=!1;f<Number.POSITIVE_INFINITY&&(this.buffer=[])}l(b,a);b.dispatch=function(a){a.subscriber.subscribeToProjection(a.result,a.value,a.index)};b.prototype._next=function(a){var c=this.destination;if(c.closed)this._complete();
else{var e=this.index++;if(this.active<this.concurrent){c.next(a);var f=g.tryCatch(this.project)(a,e);f===k.errorObject?c.error(k.errorObject.e):this.scheduler?this.add(this.scheduler.schedule(b.dispatch,0,{subscriber:this,result:f,value:a,index:e})):this.subscribeToProjection(f,a,e)}else this.buffer.push(a)}};b.prototype.subscribeToProjection=function(a,b,c){this.active++;this.add(e.subscribeToResult(this,a,b,c))};b.prototype._complete=function(){(this.hasCompleted=!0,0===this.active)&&this.destination.complete()};
b.prototype.notifyNext=function(a,b,c,e,f){this._next(b)};b.prototype.notifyComplete=function(a){var b=this.buffer;this.remove(a);this.active--;b&&0<b.length&&this._next(b.shift());this.hasCompleted&&0===this.active&&this.destination.complete()};return b}(b.OuterSubscriber);c.ExpandSubscriber=m},{"../OuterSubscriber":7,"../util/errorObject":330,"../util/subscribeToResult":341,"../util/tryCatch":343}],227:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&
(a[g]=b[g]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=a("../Subscriber");c.filter=function(a,b){return this.lift(new g(a,b))};var g=function(){function a(b,c){this.predicate=b;this.thisArg=c}a.prototype.call=function(a,b){return b._subscribe(new k(a,this.predicate,this.thisArg))};return a}(),k=function(a){function b(c,f,g){a.call(this,c);this.predicate=f;this.thisArg=g;this.count=0;this.predicate=f}l(b,a);b.prototype._next=function(a){var b;try{b=this.predicate.call(this.thisArg,
a,this.count++)}catch(c){this.destination.error(c);return}b&&this.destination.next(a)};return b}(a.Subscriber)},{"../Subscriber":13}],228:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../Subscriber");var g=a("../Subscription");c._finally=function(a){return this.lift(new k(a))};var k=function(){function a(b){this.callback=b}a.prototype.call=
function(a,b){return b._subscribe(new e(a,this.callback))};return a}(),e=function(a){function b(c,e){a.call(this,c);this.add(new g.Subscription(e))}l(b,a);return b}(b.Subscriber)},{"../Subscriber":13,"../Subscription":14}],229:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=a("../Subscriber");c.find=function(a,b){if("function"!==typeof a)throw new TypeError("predicate is not a function");
return this.lift(new g(a,this,!1,b))};var g=function(){function a(b,c,e,g){this.predicate=b;this.source=c;this.yieldIndex=e;this.thisArg=g}a.prototype.call=function(a,b){return b._subscribe(new k(a,this.predicate,this.source,this.yieldIndex,this.thisArg))};return a}();c.FindValueOperator=g;var k=function(a){function b(c,f,g,k,l){a.call(this,c);this.predicate=f;this.source=g;this.yieldIndex=k;this.thisArg=l;this.index=0}l(b,a);b.prototype.notifyComplete=function(a){var b=this.destination;b.next(a);
b.complete()};b.prototype._next=function(a){var b=this.predicate,c=this.thisArg,e=this.index++;try{b.call(c||this,a,e,this.source)&&this.notifyComplete(this.yieldIndex?e:a)}catch(f){this.destination.error(f)}};b.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)};return b}(a.Subscriber);c.FindValueSubscriber=k},{"../Subscriber":13}],230:[function(a,b,c){var l=a("./find");c.findIndex=function(a,b){return this.lift(new l.FindValueOperator(a,this,!0,b))}},{"./find":229}],231:[function(a,
b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../Subscriber");var g=a("../util/EmptyError");c.first=function(a,b,c){return this.lift(new k(a,b,c,this))};var k=function(){function a(b,c,e,f){this.predicate=b;this.resultSelector=c;this.defaultValue=e;this.source=f}a.prototype.call=function(a,b){return b._subscribe(new e(a,this.predicate,this.resultSelector,
this.defaultValue,this.source))};return a}(),e=function(a){function b(c,e,g,k,m){a.call(this,c);this.predicate=e;this.resultSelector=g;this.defaultValue=k;this.source=m;this.index=0;this.hasCompleted=!1}l(b,a);b.prototype._next=function(a){var b=this.index++;this.predicate?this._tryPredicate(a,b):this._emit(a,b)};b.prototype._tryPredicate=function(a,b){var c;try{c=this.predicate(a,b,this.source)}catch(e){this.destination.error(e);return}c&&this._emit(a,b)};b.prototype._emit=function(a,b){this.resultSelector?
this._tryResultSelector(a,b):this._emitFinal(a)};b.prototype._tryResultSelector=function(a,b){var c;try{c=this.resultSelector(a,b)}catch(e){this.destination.error(e);return}this._emitFinal(c)};b.prototype._emitFinal=function(a){var b=this.destination;b.next(a);b.complete();this.hasCompleted=!0};b.prototype._complete=function(){var a=this.destination;this.hasCompleted||"undefined"===typeof this.defaultValue?this.hasCompleted||a.error(new g.EmptyError):(a.next(this.defaultValue),a.complete())};return b}(b.Subscriber)},
{"../Subscriber":13,"../util/EmptyError":321}],232:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../Subscriber");var g=a("../Subscription"),k=a("../Observable"),e=a("../Subject"),f=a("../util/Map"),m=a("../util/FastMap");c.groupBy=function(a,b,c){return this.lift(new h(this,a,b,c))};var h=function(){function a(b,c,e,f){this.source=
b;this.keySelector=c;this.elementSelector=e;this.durationSelector=f}a.prototype.call=function(a,b){return b._subscribe(new n(a,this.keySelector,this.elementSelector,this.durationSelector))};return a}(),n=function(a){function b(c,e,f,g){a.call(this,c);this.keySelector=e;this.elementSelector=f;this.durationSelector=g;this.groups=null;this.attemptedToUnsubscribe=!1;this.count=0}l(b,a);b.prototype._next=function(a){var b;try{b=this.keySelector(a)}catch(c){this.error(c);return}this._group(a,b)};b.prototype._group=
function(a,b){var c=this.groups;c||(c=this.groups="string"===typeof b?new m.FastMap:new f.Map);var g=c.get(b),h;if(this.elementSelector)try{h=this.elementSelector(a)}catch(k){this.error(k)}else h=a;if(!g&&(c.set(b,g=new e.Subject),c=new r(b,g,this),this.destination.next(c),this.durationSelector)){c=void 0;try{c=this.durationSelector(new r(b,g))}catch(k){this.error(k);return}this.add(c.subscribe(new q(b,g,this)))}g.closed||g.next(h)};b.prototype._error=function(a){var b=this.groups;b&&(b.forEach(function(b,
c){b.error(a)}),b.clear());this.destination.error(a)};b.prototype._complete=function(){var a=this.groups;a&&(a.forEach(function(a,b){a.complete()}),a.clear());this.destination.complete()};b.prototype.removeGroup=function(a){this.groups.delete(a)};b.prototype.unsubscribe=function(){this.closed||this.attemptedToUnsubscribe||(this.attemptedToUnsubscribe=!0,0===this.count&&a.prototype.unsubscribe.call(this))};return b}(b.Subscriber),q=function(a){function b(c,e,f){a.call(this);this.key=c;this.group=e;
this.parent=f}l(b,a);b.prototype._next=function(a){this._complete()};b.prototype._error=function(a){var b=this.group;b.closed||b.error(a);this.parent.removeGroup(this.key)};b.prototype._complete=function(){var a=this.group;a.closed||a.complete();this.parent.removeGroup(this.key)};return b}(b.Subscriber),r=function(a){function b(c,e,f){a.call(this);this.key=c;this.groupSubject=e;this.refCountSubscription=f}l(b,a);b.prototype._subscribe=function(a){var b=new g.Subscription,c=this.refCountSubscription,
e=this.groupSubject;c&&!c.closed&&b.add(new t(c));b.add(e.subscribe(a));return b};return b}(k.Observable);c.GroupedObservable=r;var t=function(a){function b(c){a.call(this);this.parent=c;c.count++}l(b,a);b.prototype.unsubscribe=function(){var b=this.parent;b.closed||this.closed||(a.prototype.unsubscribe.call(this),--b.count,0===b.count&&b.attemptedToUnsubscribe&&b.unsubscribe())};return b}(g.Subscription)},{"../Observable":5,"../Subject":11,"../Subscriber":13,"../Subscription":14,"../util/FastMap":322,
"../util/Map":324}],233:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../Subscriber");var g=a("../util/noop");c.ignoreElements=function(){return this.lift(new k)};var k=function(){function a(){}a.prototype.call=function(a,b){return b._subscribe(new e(a))};return a}(),e=function(a){function b(){a.apply(this,arguments)}l(b,a);b.prototype._next=
function(a){g.noop()};return b}(b.Subscriber)},{"../Subscriber":13,"../util/noop":338}],234:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=a("../Subscriber");c.isEmpty=function(){return this.lift(new g)};var g=function(){function a(){}a.prototype.call=function(a,b){return b._subscribe(new k(a))};return a}(),k=function(a){function b(c){a.call(this,
c)}l(b,a);b.prototype.notifyComplete=function(a){var b=this.destination;b.next(a);b.complete()};b.prototype._next=function(a){this.notifyComplete(!1)};b.prototype._complete=function(){this.notifyComplete(!0)};return b}(a.Subscriber)},{"../Subscriber":13}],235:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../Subscriber");var g=a("../util/EmptyError");
c.last=function(a,b,c){return this.lift(new k(a,b,c,this))};var k=function(){function a(b,c,e,f){this.predicate=b;this.resultSelector=c;this.defaultValue=e;this.source=f}a.prototype.call=function(a,b){return b._subscribe(new e(a,this.predicate,this.resultSelector,this.defaultValue,this.source))};return a}(),e=function(a){function b(c,e,g,k,m){a.call(this,c);this.predicate=e;this.resultSelector=g;this.defaultValue=k;this.source=m;this.hasValue=!1;this.index=0;"undefined"!==typeof k&&(this.lastValue=
k,this.hasValue=!0)}l(b,a);b.prototype._next=function(a){var b=this.index++;this.predicate?this._tryPredicate(a,b):this.resultSelector?this._tryResultSelector(a,b):(this.lastValue=a,this.hasValue=!0)};b.prototype._tryPredicate=function(a,b){var c;try{c=this.predicate(a,b,this.source)}catch(e){this.destination.error(e);return}c&&(this.resultSelector?this._tryResultSelector(a,b):(this.lastValue=a,this.hasValue=!0))};b.prototype._tryResultSelector=function(a,b){var c;try{c=this.resultSelector(a,b)}catch(e){this.destination.error(e);
return}this.lastValue=c;this.hasValue=!0};b.prototype._complete=function(){var a=this.destination;this.hasValue?(a.next(this.lastValue),a.complete()):a.error(new g.EmptyError)};return b}(b.Subscriber)},{"../Subscriber":13,"../util/EmptyError":321}],236:[function(a,b,c){c.letProto=function(a){return a(this)}},{}],237:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===b?Object.create(b):(c.prototype=
b.prototype,new c)};a=a("../Subscriber");c.map=function(a,b){if("function"!==typeof a)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new g(a,b))};var g=function(){function a(b,c){this.project=b;this.thisArg=c}a.prototype.call=function(a,b){return b._subscribe(new k(a,this.project,this.thisArg))};return a}();c.MapOperator=g;var k=function(a){function b(c,f,g){a.call(this,c);this.project=f;this.count=0;this.thisArg=g||this}l(b,a);b.prototype._next=
function(a){var b;try{b=this.project.call(this.thisArg,a,this.count++)}catch(c){this.destination.error(c);return}this.destination.next(b)};return b}(a.Subscriber)},{"../Subscriber":13}],238:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=a("../Subscriber");c.mapTo=function(a){return this.lift(new g(a))};var g=function(){function a(b){this.value=
b}a.prototype.call=function(a,b){return b._subscribe(new k(a,this.value))};return a}(),k=function(a){function b(c,f){a.call(this,c);this.value=f}l(b,a);b.prototype._next=function(a){this.destination.next(this.value)};return b}(a.Subscriber)},{"../Subscriber":13}],239:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../Subscriber");var g=
a("../Notification");c.materialize=function(){return this.lift(new k)};var k=function(){function a(){}a.prototype.call=function(a,b){return b._subscribe(new e(a))};return a}(),e=function(a){function b(c){a.call(this,c)}l(b,a);b.prototype._next=function(a){this.destination.next(g.Notification.createNext(a))};b.prototype._error=function(a){var b=this.destination;b.next(g.Notification.createError(a));b.complete()};b.prototype._complete=function(){var a=this.destination;a.next(g.Notification.createComplete());
a.complete()};return b}(b.Subscriber)},{"../Notification":4,"../Subscriber":13}],240:[function(a,b,c){var l=a("./reduce");c.max=function(a){return this.lift(new l.ReduceOperator("function"===typeof a?function(b,c){return 0<a(b,c)?b:c}:function(a,b){return a>b?a:b}))}},{"./reduce":258}],241:[function(a,b,c){function l(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];var b=Number.POSITIVE_INFINITY,c=null,l=a[a.length-1];e.isScheduler(l)?(c=a.pop(),1<a.length&&"number"===typeof a[a.length-
1]&&(b=a.pop())):"number"===typeof l&&(b=a.pop());return 1===a.length?a[0]:(new g.ArrayObservable(a,c)).lift(new k.MergeAllOperator(b))}var g=a("../observable/ArrayObservable"),k=a("./mergeAll"),e=a("../util/isScheduler");c.merge=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];a.unshift(this);return l.apply(this,a)};c.mergeStatic=l},{"../observable/ArrayObservable":145,"../util/isScheduler":337,"./mergeAll":242}],242:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=
a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../OuterSubscriber");var g=a("../util/subscribeToResult");c.mergeAll=function(a){void 0===a&&(a=Number.POSITIVE_INFINITY);return this.lift(new k(a))};var k=function(){function a(b){this.concurrent=b}a.prototype.call=function(a,b){return b._subscribe(new e(a,this.concurrent))};return a}();c.MergeAllOperator=k;var e=function(a){function b(c,e){a.call(this,c);this.concurrent=
e;this.hasCompleted=!1;this.buffer=[];this.active=0}l(b,a);b.prototype._next=function(a){this.active<this.concurrent?(this.active++,this.add(g.subscribeToResult(this,a))):this.buffer.push(a)};b.prototype._complete=function(){this.hasCompleted=!0;0===this.active&&0===this.buffer.length&&this.destination.complete()};b.prototype.notifyComplete=function(a){var b=this.buffer;this.remove(a);this.active--;0<b.length?this._next(b.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()};return b}(b.OuterSubscriber);
c.MergeAllSubscriber=e},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],243:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=a("../util/subscribeToResult");a=a("../OuterSubscriber");c.mergeMap=function(a,b,c){void 0===c&&(c=Number.POSITIVE_INFINITY);"number"===typeof b&&(c=b,b=null);return this.lift(new k(a,b,c))};var k=function(){function a(b,
c,e){void 0===e&&(e=Number.POSITIVE_INFINITY);this.project=b;this.resultSelector=c;this.concurrent=e}a.prototype.call=function(a,b){return b._subscribe(new e(a,this.project,this.resultSelector,this.concurrent))};return a}();c.MergeMapOperator=k;var e=function(a){function b(c,e,g,k){void 0===k&&(k=Number.POSITIVE_INFINITY);a.call(this,c);this.project=e;this.resultSelector=g;this.concurrent=k;this.hasCompleted=!1;this.buffer=[];this.index=this.active=0}l(b,a);b.prototype._next=function(a){this.active<
this.concurrent?this._tryNext(a):this.buffer.push(a)};b.prototype._tryNext=function(a){var b,c=this.index++;try{b=this.project(a,c)}catch(e){this.destination.error(e);return}this.active++;this._innerSub(b,a,c)};b.prototype._innerSub=function(a,b,c){this.add(g.subscribeToResult(this,a,b,c))};b.prototype._complete=function(){this.hasCompleted=!0;0===this.active&&0===this.buffer.length&&this.destination.complete()};b.prototype.notifyNext=function(a,b,c,e,f){this.resultSelector?this._notifyResultSelector(a,
b,c,e):this.destination.next(b)};b.prototype._notifyResultSelector=function(a,b,c,e){var f;try{f=this.resultSelector(a,b,c,e)}catch(g){this.destination.error(g);return}this.destination.next(f)};b.prototype.notifyComplete=function(a){var b=this.buffer;this.remove(a);this.active--;0<b.length?this._next(b.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()};return b}(a.OuterSubscriber);c.MergeMapSubscriber=e},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],244:[function(a,
b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../OuterSubscriber");var g=a("../util/subscribeToResult");c.mergeMapTo=function(a,b,c){void 0===c&&(c=Number.POSITIVE_INFINITY);"number"===typeof b&&(c=b,b=null);return this.lift(new k(a,b,c))};var k=function(){function a(b,c,e){void 0===e&&(e=Number.POSITIVE_INFINITY);this.ish=b;this.resultSelector=
c;this.concurrent=e}a.prototype.call=function(a,b){return b._subscribe(new e(a,this.ish,this.resultSelector,this.concurrent))};return a}();c.MergeMapToOperator=k;var e=function(a){function b(c,e,g,k){void 0===k&&(k=Number.POSITIVE_INFINITY);a.call(this,c);this.ish=e;this.resultSelector=g;this.concurrent=k;this.hasCompleted=!1;this.buffer=[];this.index=this.active=0}l(b,a);b.prototype._next=function(a){if(this.active<this.concurrent){var b=this.resultSelector,c=this.index++,e=this.ish,f=this.destination;
this.active++;this._innerSub(e,f,b,a,c)}else this.buffer.push(a)};b.prototype._innerSub=function(a,b,c,e,f){this.add(g.subscribeToResult(this,a,e,f))};b.prototype._complete=function(){this.hasCompleted=!0;0===this.active&&0===this.buffer.length&&this.destination.complete()};b.prototype.notifyNext=function(a,b,c,e,f){f=this.destination;this.resultSelector?this.trySelectResult(a,b,c,e):f.next(b)};b.prototype.trySelectResult=function(a,b,c,e){var f=this.resultSelector,g=this.destination,k;try{k=f(a,
b,c,e)}catch(m){g.error(m);return}g.next(k)};b.prototype.notifyError=function(a){this.destination.error(a)};b.prototype.notifyComplete=function(a){var b=this.buffer;this.remove(a);this.active--;0<b.length?this._next(b.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()};return b}(b.OuterSubscriber);c.MergeMapToSubscriber=e},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],245:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&
(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=a("../util/tryCatch"),k=a("../util/errorObject"),e=a("../util/subscribeToResult");a=a("../OuterSubscriber");c.mergeScan=function(a,b,c){void 0===c&&(c=Number.POSITIVE_INFINITY);return this.lift(new f(a,b,c))};var f=function(){function a(b,c,e){this.project=b;this.seed=c;this.concurrent=e}a.prototype.call=function(a,b){return b._subscribe(new m(a,this.project,this.seed,this.concurrent))};return a}();c.MergeScanOperator=
f;var m=function(a){function b(c,e,f,g){a.call(this,c);this.project=e;this.acc=f;this.concurrent=g;this.hasCompleted=this.hasValue=!1;this.buffer=[];this.index=this.active=0}l(b,a);b.prototype._next=function(a){if(this.active<this.concurrent){var b=this.index++,c=g.tryCatch(this.project)(this.acc,a),e=this.destination;c===k.errorObject?e.error(k.errorObject.e):(this.active++,this._innerSub(c,a,b))}else this.buffer.push(a)};b.prototype._innerSub=function(a,b,c){this.add(e.subscribeToResult(this,a,
b,c))};b.prototype._complete=function(){this.hasCompleted=!0;0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())};b.prototype.notifyNext=function(a,b,c,e,f){a=this.destination;this.acc=b;this.hasValue=!0;a.next(b)};b.prototype.notifyComplete=function(a){var b=this.buffer;this.remove(a);this.active--;0<b.length?this._next(b.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())};
return b}(a.OuterSubscriber);c.MergeScanSubscriber=m},{"../OuterSubscriber":7,"../util/errorObject":330,"../util/subscribeToResult":341,"../util/tryCatch":343}],246:[function(a,b,c){var l=a("./reduce");c.min=function(a){return this.lift(new l.ReduceOperator("function"===typeof a?function(b,c){return 0>a(b,c)?b:c}:function(a,b){return a<b?a:b}))}},{"./reduce":258}],247:[function(a,b,c){var l=a("../observable/MulticastObservable"),g=a("../observable/ConnectableObservable");c.multicast=function(a,b){var c;
c="function"===typeof a?a:function(){return a};return b?new l.MulticastObservable(this,c,b):new g.ConnectableObservable(this,c)}},{"../observable/ConnectableObservable":148,"../observable/MulticastObservable":160}],248:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../Subscriber");var g=a("../Notification");c.observeOn=function(a,b){void 0===
b&&(b=0);return this.lift(new k(a,b))};var k=function(){function a(b,c){void 0===c&&(c=0);this.scheduler=b;this.delay=c}a.prototype.call=function(a,b){return b._subscribe(new e(a,this.scheduler,this.delay))};return a}();c.ObserveOnOperator=k;var e=function(a){function b(c,e,f){void 0===f&&(f=0);a.call(this,c);this.scheduler=e;this.delay=f}l(b,a);b.dispatch=function(a){a.notification.observe(a.destination)};b.prototype.scheduleMessage=function(a){this.add(this.scheduler.schedule(b.dispatch,this.delay,
new f(a,this.destination)))};b.prototype._next=function(a){this.scheduleMessage(g.Notification.createNext(a))};b.prototype._error=function(a){this.scheduleMessage(g.Notification.createError(a))};b.prototype._complete=function(){this.scheduleMessage(g.Notification.createComplete())};return b}(b.Subscriber);c.ObserveOnSubscriber=e;var f=function(){return function(a,b){this.notification=a;this.destination=b}}();c.ObserveOnMessage=f},{"../Notification":4,"../Subscriber":13}],249:[function(a,b,c){var l=
this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=a("../observable/FromObservable"),k=a("../util/isArray");b=a("../OuterSubscriber");var e=a("../util/subscribeToResult");c.onErrorResumeNext=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];1===a.length&&k.isArray(a[0])&&(a=a[0]);return this.lift(new f(a))};c.onErrorResumeNextStatic=function(){for(var a=
[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];b=null;1===a.length&&k.isArray(a[0])&&(a=a[0]);b=a.shift();return(new g.FromObservable(b,null)).lift(new f(a))};var f=function(){function a(b){this.nextSources=b}a.prototype.call=function(a,b){return b._subscribe(new m(a,this.nextSources))};return a}(),m=function(a){function b(c,e){a.call(this,c);this.destination=c;this.nextSources=e}l(b,a);b.prototype.notifyError=function(a,b){this.subscribeToNextSource()};b.prototype.notifyComplete=function(a){this.subscribeToNextSource()};
b.prototype._error=function(a){this.subscribeToNextSource()};b.prototype._complete=function(){this.subscribeToNextSource()};b.prototype.subscribeToNextSource=function(){var a=this.nextSources.shift();a?this.add(e.subscribeToResult(this,a)):this.destination.complete()};return b}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../observable/FromObservable":155,"../util/isArray":331,"../util/subscribeToResult":341}],250:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=
a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=a("../Subscriber");c.pairwise=function(){return this.lift(new g)};var g=function(){function a(){}a.prototype.call=function(a,b){return b._subscribe(new k(a))};return a}(),k=function(a){function b(c){a.call(this,c);this.hasPrev=!1}l(b,a);b.prototype._next=function(a){this.hasPrev?this.destination.next([this.prev,a]):this.hasPrev=!0;this.prev=a};return b}(a.Subscriber)},{"../Subscriber":13}],
251:[function(a,b,c){var l=a("../util/not"),g=a("./filter");c.partition=function(a,b){return[g.filter.call(this,a),g.filter.call(this,l.not(a,b))]}},{"../util/not":339,"./filter":227}],252:[function(a,b,c){function l(a,b){return function(c){var g=c;for(c=0;c<b;c++)if(g=g[a[c]],"undefined"===typeof g)return;return g}}var g=a("./map");c.pluck=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];b=a.length;if(0===b)throw Error("list of properties cannot be empty.");return g.map.call(this,
l(a,b))}},{"./map":237}],253:[function(a,b,c){var l=a("../Subject"),g=a("./multicast");c.publish=function(a){return a?g.multicast.call(this,function(){return new l.Subject},a):g.multicast.call(this,new l.Subject)}},{"../Subject":11,"./multicast":247}],254:[function(a,b,c){var l=a("../BehaviorSubject"),g=a("./multicast");c.publishBehavior=function(a){return g.multicast.call(this,new l.BehaviorSubject(a))}},{"../BehaviorSubject":2,"./multicast":247}],255:[function(a,b,c){var l=a("../AsyncSubject"),
g=a("./multicast");c.publishLast=function(){return g.multicast.call(this,new l.AsyncSubject)}},{"../AsyncSubject":1,"./multicast":247}],256:[function(a,b,c){var l=a("../ReplaySubject"),g=a("./multicast");c.publishReplay=function(a,b,c){void 0===a&&(a=Number.POSITIVE_INFINITY);void 0===b&&(b=Number.POSITIVE_INFINITY);return g.multicast.call(this,new l.ReplaySubject(a,b,c))}},{"../ReplaySubject":8,"./multicast":247}],257:[function(a,b,c){function l(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];
if(1===a.length)if(k.isArray(a[0]))a=a[0];else return a[0];return(new e.ArrayObservable(a)).lift(new m)}var g=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},k=a("../util/isArray"),e=a("../observable/ArrayObservable");b=a("../OuterSubscriber");var f=a("../util/subscribeToResult");c.race=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];1===
a.length&&k.isArray(a[0])&&(a=a[0]);a.unshift(this);return l.apply(this,a)};c.raceStatic=l;var m=function(){function a(){}a.prototype.call=function(a,b){return b._subscribe(new h(a))};return a}();c.RaceOperator=m;var h=function(a){function b(c){a.call(this,c);this.hasFirst=!1;this.observables=[];this.subscriptions=[]}g(b,a);b.prototype._next=function(a){this.observables.push(a)};b.prototype._complete=function(){var a=this.observables,b=a.length;if(0===b)this.destination.complete();else{for(var c=
0;c<b;c++){var e=a[c],e=f.subscribeToResult(this,e,e,c);this.subscriptions&&(this.subscriptions.push(e),this.add(e))}this.observables=null}};b.prototype.notifyNext=function(a,b,c,e,f){if(!this.hasFirst){this.hasFirst=!0;for(a=0;a<this.subscriptions.length;a++)a!==c&&(e=this.subscriptions[a],e.unsubscribe(),this.remove(e));this.subscriptions=null}this.destination.next(b)};return b}(b.OuterSubscriber);c.RaceSubscriber=h},{"../OuterSubscriber":7,"../observable/ArrayObservable":145,"../util/isArray":331,
"../util/subscribeToResult":341}],258:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=a("../Subscriber");c.reduce=function(a,b){return this.lift(new g(a,b))};var g=function(){function a(b,c){this.accumulator=b;this.seed=c}a.prototype.call=function(a,b){return b._subscribe(new k(a,this.accumulator,this.seed))};return a}();c.ReduceOperator=
g;var k=function(a){function b(c,f,g){a.call(this,c);this.accumulator=f;this.hasValue=!1;this.acc=g;this.accumulator=f;this.hasSeed="undefined"!==typeof g}l(b,a);b.prototype._next=function(a){this.hasValue||(this.hasValue=this.hasSeed)?this._tryReduce(a):(this.acc=a,this.hasValue=!0)};b.prototype._tryReduce=function(a){var b;try{b=this.accumulator(this.acc,a)}catch(c){this.destination.error(c);return}this.acc=b};b.prototype._complete=function(){(this.hasValue||this.hasSeed)&&this.destination.next(this.acc);
this.destination.complete()};return b}(a.Subscriber);c.ReduceSubscriber=k},{"../Subscriber":13}],259:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../Subscriber");var g=a("../observable/EmptyObservable");c.repeat=function(a){void 0===a&&(a=-1);return 0===a?new g.EmptyObservable:0>a?this.lift(new k(-1,this)):this.lift(new k(a-1,this))};
var k=function(){function a(b,c){this.count=b;this.source=c}a.prototype.call=function(a,b){return b._subscribe(new e(a,this.count,this.source))};return a}(),e=function(a){function b(c,e,g){a.call(this,c);this.count=e;this.source=g}l(b,a);b.prototype.complete=function(){if(!this.isStopped){var b=this.source,c=this.count;if(0===c)return a.prototype.complete.call(this);-1<c&&(this.count=c-1);this.unsubscribe();this.closed=this.isStopped=!1;b.subscribe(this)}};return b}(b.Subscriber)},{"../Subscriber":13,
"../observable/EmptyObservable":150}],260:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=a("../Subject"),k=a("../util/tryCatch"),e=a("../util/errorObject");b=a("../OuterSubscriber");var f=a("../util/subscribeToResult");c.repeatWhen=function(a){return this.lift(new m(a,this))};var m=function(){function a(b,c){this.notifier=b;this.source=
c}a.prototype.call=function(a,b){return b._subscribe(new h(a,this.notifier,this.source))};return a}(),h=function(a){function b(c,e,f){a.call(this,c);this.notifier=e;this.source=f}l(b,a);b.prototype.complete=function(){if(!this.isStopped){var b=this.notifications,c=this.retries,h=this.retriesSubscription;if(c)this.retriesSubscription=this.notifications=null;else{b=new g.Subject;c=k.tryCatch(this.notifier)(b);if(c===e.errorObject)return a.prototype.complete.call(this);h=f.subscribeToResult(this,c)}this.unsubscribe();
this.closed=!1;this.notifications=b;this.retries=c;this.retriesSubscription=h;b.next()}};b.prototype._unsubscribe=function(){var a=this.notifications,b=this.retriesSubscription;a&&(a.unsubscribe(),this.notifications=null);b&&(b.unsubscribe(),this.retriesSubscription=null);this.retries=null};b.prototype.notifyNext=function(a,b,c,e,f){a=this.notifications;b=this.retries;c=this.retriesSubscription;this.retriesSubscription=this.retries=this.notifications=null;this.unsubscribe();this.closed=this.isStopped=
!1;this.notifications=a;this.retries=b;this.retriesSubscription=c;this.source.subscribe(this)};return b}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../Subject":11,"../util/errorObject":330,"../util/subscribeToResult":341,"../util/tryCatch":343}],261:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=a("../Subscriber");c.retry=function(a){void 0===
a&&(a=-1);return this.lift(new g(a,this))};var g=function(){function a(b,c){this.count=b;this.source=c}a.prototype.call=function(a,b){return b._subscribe(new k(a,this.count,this.source))};return a}(),k=function(a){function b(c,f,g){a.call(this,c);this.count=f;this.source=g}l(b,a);b.prototype.error=function(b){if(!this.isStopped){var c=this.source,f=this.count;if(0===f)return a.prototype.error.call(this,b);-1<f&&(this.count=f-1);this.unsubscribe();this.closed=this.isStopped=!1;c.subscribe(this)}};
return b}(a.Subscriber)},{"../Subscriber":13}],262:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=a("../Subject"),k=a("../util/tryCatch"),e=a("../util/errorObject");b=a("../OuterSubscriber");var f=a("../util/subscribeToResult");c.retryWhen=function(a){return this.lift(new m(a,this))};var m=function(){function a(b,c){this.notifier=b;this.source=
c}a.prototype.call=function(a,b){return b._subscribe(new h(a,this.notifier,this.source))};return a}(),h=function(a){function b(c,e,f){a.call(this,c);this.notifier=e;this.source=f}l(b,a);b.prototype.error=function(b){if(!this.isStopped){var c=this.errors,h=this.retries,l=this.retriesSubscription;if(h)this.retriesSubscription=this.errors=null;else{c=new g.Subject;h=k.tryCatch(this.notifier)(c);if(h===e.errorObject)return a.prototype.error.call(this,e.errorObject.e);l=f.subscribeToResult(this,h)}this.unsubscribe();
this.closed=!1;this.errors=c;this.retries=h;this.retriesSubscription=l;c.next(b)}};b.prototype._unsubscribe=function(){var a=this.errors,b=this.retriesSubscription;a&&(a.unsubscribe(),this.errors=null);b&&(b.unsubscribe(),this.retriesSubscription=null);this.retries=null};b.prototype.notifyNext=function(a,b,c,e,f){a=this.errors;b=this.retries;c=this.retriesSubscription;this.retriesSubscription=this.retries=this.errors=null;this.unsubscribe();this.closed=this.isStopped=!1;this.errors=a;this.retries=
b;this.retriesSubscription=c;this.source.subscribe(this)};return b}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../Subject":11,"../util/errorObject":330,"../util/subscribeToResult":341,"../util/tryCatch":343}],263:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../OuterSubscriber");var g=a("../util/subscribeToResult");c.sample=function(a){return this.lift(new k(a))};
var k=function(){function a(b){this.notifier=b}a.prototype.call=function(a,b){return b._subscribe(new e(a,this.notifier))};return a}(),e=function(a){function b(c,e){a.call(this,c);this.hasValue=!1;this.add(g.subscribeToResult(this,e))}l(b,a);b.prototype._next=function(a){this.value=a;this.hasValue=!0};b.prototype.notifyNext=function(a,b,c,e,f){this.emitValue()};b.prototype.notifyComplete=function(){this.emitValue()};b.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))};
return b}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],264:[function(a,b,c){function l(a){var b=a.period;a.subscriber.notifyNext();this.schedule(a,b)}var g=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../Subscriber");var k=a("../scheduler/async");c.sampleTime=function(a,b){void 0===b&&(b=k.async);return this.lift(new e(a,
b))};var e=function(){function a(b,c){this.period=b;this.scheduler=c}a.prototype.call=function(a,b){return b._subscribe(new f(a,this.period,this.scheduler))};return a}(),f=function(a){function b(c,e,f){a.call(this,c);this.period=e;this.scheduler=f;this.hasValue=!1;this.add(f.schedule(l,e,{subscriber:this,period:e}))}g(b,a);b.prototype._next=function(a){this.lastValue=a;this.hasValue=!0};b.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))};return b}(b.Subscriber)},
{"../Subscriber":13,"../scheduler/async":309}],265:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=a("../Subscriber");c.scan=function(a,b){return this.lift(new g(a,b))};var g=function(){function a(b,c){this.accumulator=b;this.seed=c}a.prototype.call=function(a,b){return b._subscribe(new k(a,this.accumulator,this.seed))};return a}(),k=function(a){function b(c,
f,g){a.call(this,c);this.accumulator=f;this.index=0;this.accumulatorSet=!1;this.seed=g;this.accumulatorSet="undefined"!==typeof g}l(b,a);Object.defineProperty(b.prototype,"seed",{get:function(){return this._seed},set:function(a){this.accumulatorSet=!0;this._seed=a},enumerable:!0,configurable:!0});b.prototype._next=function(a){if(this.accumulatorSet)return this._tryNext(a);this.seed=a;this.destination.next(a)};b.prototype._tryNext=function(a){var b=this.index++,c;try{c=this.accumulator(this.seed,a,
b)}catch(e){this.destination.error(e)}this.seed=c;this.destination.next(c)};return b}(a.Subscriber)},{"../Subscriber":13}],266:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../Subscriber");var g=a("../util/tryCatch"),k=a("../util/errorObject");c.sequenceEqual=function(a,b){return this.lift(new e(a,b))};var e=function(){function a(b,
c){this.compareTo=b;this.comparor=c}a.prototype.call=function(a,b){return b._subscribe(new f(a,this.compareTo,this.comparor))};return a}();c.SequenceEqualOperator=e;var f=function(a){function b(c,e,f){a.call(this,c);this.compareTo=e;this.comparor=f;this._a=[];this._b=[];this._oneComplete=!1;this.add(e.subscribe(new m(c,this)))}l(b,a);b.prototype._next=function(a){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(a),this.checkValues())};b.prototype._complete=function(){this._oneComplete?
this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0};b.prototype.checkValues=function(){for(var a=this._a,b=this._b,c=this.comparor;0<a.length&&0<b.length;){var e=a.shift(),f=b.shift(),h=!1;c?(h=g.tryCatch(c)(e,f),h===k.errorObject&&this.destination.error(k.errorObject.e)):h=e===f;h||this.emit(!1)}};b.prototype.emit=function(a){var b=this.destination;b.next(a);b.complete()};b.prototype.nextB=function(a){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(a),this.checkValues())};
return b}(b.Subscriber);c.SequenceEqualSubscriber=f;var m=function(a){function b(c,e){a.call(this,c);this.parent=e}l(b,a);b.prototype._next=function(a){this.parent.nextB(a)};b.prototype._error=function(a){this.parent.error(a)};b.prototype._complete=function(){this.parent._complete()};return b}(b.Subscriber)},{"../Subscriber":13,"../util/errorObject":330,"../util/tryCatch":343}],267:[function(a,b,c){function l(){return new k.Subject}var g=a("./multicast"),k=a("../Subject");c.share=function(){return g.multicast.call(this,
l).refCount()}},{"../Subject":11,"./multicast":247}],268:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../Subscriber");var g=a("../util/EmptyError");c.single=function(a){return this.lift(new k(a,this))};var k=function(){function a(b,c){this.predicate=b;this.source=c}a.prototype.call=function(a,b){return b._subscribe(new e(a,this.predicate,
this.source))};return a}(),e=function(a){function b(c,e,g){a.call(this,c);this.predicate=e;this.source=g;this.seenValue=!1;this.index=0}l(b,a);b.prototype.applySingleValue=function(a){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=a)};b.prototype._next=function(a){var b=this.predicate;this.index++;b?this.tryNext(a):this.applySingleValue(a)};b.prototype.tryNext=function(a){try{this.predicate(a,this.index,this.source)&&this.applySingleValue(a)}catch(b){this.destination.error(b)}};
b.prototype._complete=function(){var a=this.destination;0<this.index?(a.next(this.seenValue?this.singleValue:void 0),a.complete()):a.error(new g.EmptyError)};return b}(b.Subscriber)},{"../Subscriber":13,"../util/EmptyError":321}],269:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=a("../Subscriber");c.skip=function(a){return this.lift(new g(a))};
var g=function(){function a(b){this.total=b}a.prototype.call=function(a,b){return b._subscribe(new k(a,this.total))};return a}(),k=function(a){function b(c,f){a.call(this,c);this.total=f;this.count=0}l(b,a);b.prototype._next=function(a){++this.count>this.total&&this.destination.next(a)};return b}(a.Subscriber)},{"../Subscriber":13}],270:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):
(c.prototype=b.prototype,new c)};b=a("../OuterSubscriber");var g=a("../util/subscribeToResult");c.skipUntil=function(a){return this.lift(new k(a))};var k=function(){function a(b){this.notifier=b}a.prototype.call=function(a,b){return b._subscribe(new e(a,this.notifier))};return a}(),e=function(a){function b(c,e){a.call(this,c);this.isInnerStopped=this.hasValue=!1;this.add(g.subscribeToResult(this,e))}l(b,a);b.prototype._next=function(b){this.hasValue&&a.prototype._next.call(this,b)};b.prototype._complete=
function(){this.isInnerStopped?a.prototype._complete.call(this):this.unsubscribe()};b.prototype.notifyNext=function(a,b,c,e,f){this.hasValue=!0};b.prototype.notifyComplete=function(){this.isInnerStopped=!0;this.isStopped&&a.prototype._complete.call(this)};return b}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],271:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===
b?Object.create(b):(c.prototype=b.prototype,new c)};a=a("../Subscriber");c.skipWhile=function(a){return this.lift(new g(a))};var g=function(){function a(b){this.predicate=b}a.prototype.call=function(a,b){return b._subscribe(new k(a,this.predicate))};return a}(),k=function(a){function b(c,f){a.call(this,c);this.predicate=f;this.skipping=!0;this.index=0}l(b,a);b.prototype._next=function(a){var b=this.destination;this.skipping&&this.tryCallPredicate(a);this.skipping||b.next(a)};b.prototype.tryCallPredicate=
function(a){try{var b=this.predicate(a,this.index++);this.skipping=Boolean(b)}catch(c){this.destination.error(c)}};return b}(a.Subscriber)},{"../Subscriber":13}],272:[function(a,b,c){var l=a("../observable/ArrayObservable"),g=a("../observable/ScalarObservable"),k=a("../observable/EmptyObservable"),e=a("./concat"),f=a("../util/isScheduler");c.startWith=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];b=a[a.length-1];f.isScheduler(b)?a.pop():b=null;var c=a.length;return 1===c?
e.concatStatic(new g.ScalarObservable(a[0],b),this):1<c?e.concatStatic(new l.ArrayObservable(a,b),this):e.concatStatic(new k.EmptyObservable(b),this)}},{"../observable/ArrayObservable":145,"../observable/EmptyObservable":150,"../observable/ScalarObservable":165,"../util/isScheduler":337,"./concat":206}],273:[function(a,b,c){var l=a("../observable/SubscribeOnObservable");c.subscribeOn=function(a,b){void 0===b&&(b=0);return new l.SubscribeOnObservable(this,b,a)}},{"../observable/SubscribeOnObservable":166}],
274:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../OuterSubscriber");var g=a("../util/subscribeToResult");c._switch=function(){return this.lift(new k)};var k=function(){function a(){}a.prototype.call=function(a,b){return b._subscribe(new e(a))};return a}(),e=function(a){function b(c){a.call(this,c);this.active=0;this.hasCompleted=
!1}l(b,a);b.prototype._next=function(a){this.unsubscribeInner();this.active++;this.add(this.innerSubscription=g.subscribeToResult(this,a))};b.prototype._complete=function(){this.hasCompleted=!0;0===this.active&&this.destination.complete()};b.prototype.unsubscribeInner=function(){this.active=0<this.active?this.active-1:0;var a=this.innerSubscription;a&&(a.unsubscribe(),this.remove(a))};b.prototype.notifyNext=function(a,b,c,e,f){this.destination.next(b)};b.prototype.notifyError=function(a){this.destination.error(a)};
b.prototype.notifyComplete=function(){this.unsubscribeInner();this.hasCompleted&&0===this.active&&this.destination.complete()};return b}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],275:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../OuterSubscriber");var g=a("../util/subscribeToResult");c.switchMap=
function(a,b){return this.lift(new k(a,b))};var k=function(){function a(b,c){this.project=b;this.resultSelector=c}a.prototype.call=function(a,b){return b._subscribe(new e(a,this.project,this.resultSelector))};return a}(),e=function(a){function b(c,e,g){a.call(this,c);this.project=e;this.resultSelector=g;this.index=0}l(b,a);b.prototype._next=function(a){var b,c=this.index++;try{b=this.project(a,c)}catch(e){this.destination.error(e);return}this._innerSub(b,a,c)};b.prototype._innerSub=function(a,b,c){var e=
this.innerSubscription;e&&e.unsubscribe();this.add(this.innerSubscription=g.subscribeToResult(this,a,b,c))};b.prototype._complete=function(){var b=this.innerSubscription;b&&!b.closed||a.prototype._complete.call(this)};b.prototype._unsubscribe=function(){this.innerSubscription=null};b.prototype.notifyComplete=function(b){this.remove(b);this.innerSubscription=null;this.isStopped&&a.prototype._complete.call(this)};b.prototype.notifyNext=function(a,b,c,e,f){this.resultSelector?this._tryNotifyNext(a,b,
c,e):this.destination.next(b)};b.prototype._tryNotifyNext=function(a,b,c,e){var f;try{f=this.resultSelector(a,b,c,e)}catch(g){this.destination.error(g);return}this.destination.next(f)};return b}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],276:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../OuterSubscriber");
var g=a("../util/subscribeToResult");c.switchMapTo=function(a,b){return this.lift(new k(a,b))};var k=function(){function a(b,c){this.observable=b;this.resultSelector=c}a.prototype.call=function(a,b){return b._subscribe(new e(a,this.observable,this.resultSelector))};return a}(),e=function(a){function b(c,e,g){a.call(this,c);this.inner=e;this.resultSelector=g;this.index=0}l(b,a);b.prototype._next=function(a){var b=this.innerSubscription;b&&b.unsubscribe();this.add(this.innerSubscription=g.subscribeToResult(this,
this.inner,a,this.index++))};b.prototype._complete=function(){var b=this.innerSubscription;b&&!b.closed||a.prototype._complete.call(this)};b.prototype._unsubscribe=function(){this.innerSubscription=null};b.prototype.notifyComplete=function(b){this.remove(b);this.innerSubscription=null;this.isStopped&&a.prototype._complete.call(this)};b.prototype.notifyNext=function(a,b,c,e,f){f=this.destination;this.resultSelector?this.tryResultSelector(a,b,c,e):f.next(b)};b.prototype.tryResultSelector=function(a,
b,c,e){var f=this.resultSelector,g=this.destination,k;try{k=f(a,b,c,e)}catch(l){g.error(l);return}g.next(k)};return b}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],277:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../Subscriber");var g=a("../util/ArgumentOutOfRangeError"),k=a("../observable/EmptyObservable");
c.take=function(a){return 0===a?new k.EmptyObservable:this.lift(new e(a))};var e=function(){function a(b){this.total=b;if(0>this.total)throw new g.ArgumentOutOfRangeError;}a.prototype.call=function(a,b){return b._subscribe(new f(a,this.total))};return a}(),f=function(a){function b(c,e){a.call(this,c);this.total=e;this.count=0}l(b,a);b.prototype._next=function(a){var b=this.total;++this.count<=b&&(this.destination.next(a),this.count===b&&(this.destination.complete(),this.unsubscribe()))};return b}(b.Subscriber)},
{"../Subscriber":13,"../observable/EmptyObservable":150,"../util/ArgumentOutOfRangeError":320}],278:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../Subscriber");var g=a("../util/ArgumentOutOfRangeError"),k=a("../observable/EmptyObservable");c.takeLast=function(a){return 0===a?new k.EmptyObservable:this.lift(new e(a))};var e=function(){function a(b){this.total=
b;if(0>this.total)throw new g.ArgumentOutOfRangeError;}a.prototype.call=function(a,b){return b._subscribe(new f(a,this.total))};return a}(),f=function(a){function b(c,e){a.call(this,c);this.total=e;this.ring=[];this.count=0}l(b,a);b.prototype._next=function(a){var b=this.ring,c=this.total,e=this.count++;b.length<c?b.push(a):b[e%c]=a};b.prototype._complete=function(){var a=this.destination,b=this.count;if(0<b)for(var c=this.count>=this.total?this.total:this.count,e=this.ring,f=0;f<c;f++){var g=b++%
c;a.next(e[g])}a.complete()};return b}(b.Subscriber)},{"../Subscriber":13,"../observable/EmptyObservable":150,"../util/ArgumentOutOfRangeError":320}],279:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../OuterSubscriber");var g=a("../util/subscribeToResult");c.takeUntil=function(a){return this.lift(new k(a))};var k=function(){function a(b){this.notifier=
b}a.prototype.call=function(a,b){return b._subscribe(new e(a,this.notifier))};return a}(),e=function(a){function b(c,e){a.call(this,c);this.notifier=e;this.add(g.subscribeToResult(this,e))}l(b,a);b.prototype.notifyNext=function(a,b,c,e,f){this.complete()};b.prototype.notifyComplete=function(){};return b}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],280:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&
(a[g]=b[g]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=a("../Subscriber");c.takeWhile=function(a){return this.lift(new g(a))};var g=function(){function a(b){this.predicate=b}a.prototype.call=function(a,b){return b._subscribe(new k(a,this.predicate))};return a}(),k=function(a){function b(c,f){a.call(this,c);this.predicate=f;this.index=0}l(b,a);b.prototype._next=function(a){var b=this.destination,c;try{c=this.predicate(a,this.index++)}catch(e){b.error(e);return}this.nextOrComplete(a,
c)};b.prototype.nextOrComplete=function(a,b){var c=this.destination;Boolean(b)?c.next(a):c.complete()};return b}(a.Subscriber)},{"../Subscriber":13}],281:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../OuterSubscriber");var g=a("../util/subscribeToResult");c.throttle=function(a){return this.lift(new k(a))};var k=function(){function a(b){this.durationSelector=
b}a.prototype.call=function(a,b){return b._subscribe(new e(a,this.durationSelector))};return a}(),e=function(a){function b(c,e){a.call(this,c);this.destination=c;this.durationSelector=e}l(b,a);b.prototype._next=function(a){this.throttled||this.tryDurationSelector(a)};b.prototype.tryDurationSelector=function(a){var b=null;try{b=this.durationSelector(a)}catch(c){this.destination.error(c);return}this.emitAndThrottle(a,b)};b.prototype.emitAndThrottle=function(a,b){this.add(this.throttled=g.subscribeToResult(this,
b));this.destination.next(a)};b.prototype._unsubscribe=function(){var a=this.throttled;a&&(this.remove(a),this.throttled=null,a.unsubscribe())};b.prototype.notifyNext=function(a,b,c,e,f){this._unsubscribe()};b.prototype.notifyComplete=function(){this._unsubscribe()};return b}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],282:[function(a,b,c){function l(a){a.subscriber.clearThrottle()}var g=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&
(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../Subscriber");var k=a("../scheduler/async");c.throttleTime=function(a,b){void 0===b&&(b=k.async);return this.lift(new e(a,b))};var e=function(){function a(b,c){this.duration=b;this.scheduler=c}a.prototype.call=function(a,b){return b._subscribe(new f(a,this.duration,this.scheduler))};return a}(),f=function(a){function b(c,e,f){a.call(this,c);this.duration=e;this.scheduler=f}g(b,a);b.prototype._next=function(a){this.throttled||
(this.add(this.throttled=this.scheduler.schedule(l,this.duration,{subscriber:this})),this.destination.next(a))};b.prototype.clearThrottle=function(){var a=this.throttled;a&&(a.unsubscribe(),this.remove(a),this.throttled=null)};return b}(b.Subscriber)},{"../Subscriber":13,"../scheduler/async":309}],283:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,
new c)};b=a("../Subscriber");var g=a("../scheduler/async");c.timeInterval=function(a){void 0===a&&(a=g.async);return this.lift(new e(a))};var k=function(){return function(a,b){this.value=a;this.interval=b}}();c.TimeInterval=k;var e=function(){function a(b){this.scheduler=b}a.prototype.call=function(a,b){return b._subscribe(new f(a,this.scheduler))};return a}(),f=function(a){function b(c,e){a.call(this,c);this.scheduler=e;this.lastTime=0;this.lastTime=e.now()}l(b,a);b.prototype._next=function(a){var b=
this.scheduler.now(),c=b-this.lastTime;this.lastTime=b;this.destination.next(new k(a,c))};return b}(b.Subscriber)},{"../Subscriber":13,"../scheduler/async":309}],284:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=a("../scheduler/async"),k=a("../util/isDate");a=a("../Subscriber");c.timeout=function(a,b,c){void 0===b&&(b=null);void 0===
c&&(c=g.async);var f=k.isDate(a);a=f?+a-c.now():Math.abs(a);return this.lift(new e(a,f,b,c))};var e=function(){function a(b,c,e,f){this.waitFor=b;this.absoluteTimeout=c;this.errorToSend=e;this.scheduler=f}a.prototype.call=function(a,b){return b._subscribe(new f(a,this.absoluteTimeout,this.waitFor,this.errorToSend,this.scheduler))};return a}(),f=function(a){function b(c,e,f,g,k){a.call(this,c);this.absoluteTimeout=e;this.waitFor=f;this.errorToSend=g;this.scheduler=k;this._previousIndex=this.index=
0;this._hasCompleted=!1;this.scheduleTimeout()}l(b,a);Object.defineProperty(b.prototype,"previousIndex",{get:function(){return this._previousIndex},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"hasCompleted",{get:function(){return this._hasCompleted},enumerable:!0,configurable:!0});b.dispatchTimeout=function(a){var b=a.subscriber;a=a.index;b.hasCompleted||b.previousIndex!==a||b.notifyTimeout()};b.prototype.scheduleTimeout=function(){var a=this.index;this.scheduler.schedule(b.dispatchTimeout,
this.waitFor,{subscriber:this,index:a});this.index++;this._previousIndex=a};b.prototype._next=function(a){this.destination.next(a);this.absoluteTimeout||this.scheduleTimeout()};b.prototype._error=function(a){this.destination.error(a);this._hasCompleted=!0};b.prototype._complete=function(){this.destination.complete();this._hasCompleted=!0};b.prototype.notifyTimeout=function(){this.error(this.errorToSend||Error("timeout"))};return b}(a.Subscriber)},{"../Subscriber":13,"../scheduler/async":309,"../util/isDate":332}],
285:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=a("../scheduler/async"),k=a("../util/isDate");b=a("../OuterSubscriber");var e=a("../util/subscribeToResult");c.timeoutWith=function(a,b,c){void 0===c&&(c=g.async);var e=k.isDate(a);a=e?+a-c.now():Math.abs(a);return this.lift(new f(a,e,b,c))};var f=function(){function a(b,c,e,f){this.waitFor=
b;this.absoluteTimeout=c;this.withObservable=e;this.scheduler=f}a.prototype.call=function(a,b){return b._subscribe(new m(a,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))};return a}(),m=function(a){function b(c,e,f,g,k){a.call(this);this.destination=c;this.absoluteTimeout=e;this.waitFor=f;this.withObservable=g;this.scheduler=k;this.timeoutSubscription=void 0;this._previousIndex=this.index=0;this._hasCompleted=!1;c.add(this);this.scheduleTimeout()}l(b,a);Object.defineProperty(b.prototype,
"previousIndex",{get:function(){return this._previousIndex},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"hasCompleted",{get:function(){return this._hasCompleted},enumerable:!0,configurable:!0});b.dispatchTimeout=function(a){var b=a.subscriber;a=a.index;b.hasCompleted||b.previousIndex!==a||b.handleTimeout()};b.prototype.scheduleTimeout=function(){var a=this.index;this.scheduler.schedule(b.dispatchTimeout,this.waitFor,{subscriber:this,index:a});this.index++;this._previousIndex=
a};b.prototype._next=function(a){this.destination.next(a);this.absoluteTimeout||this.scheduleTimeout()};b.prototype._error=function(a){this.destination.error(a);this._hasCompleted=!0};b.prototype._complete=function(){this.destination.complete();this._hasCompleted=!0};b.prototype.handleTimeout=function(){if(!this.closed){var a=this.withObservable;this.unsubscribe();this.destination.add(this.timeoutSubscription=e.subscribeToResult(this,a))}};return b}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../scheduler/async":309,
"../util/isDate":332,"../util/subscribeToResult":341}],286:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../Subscriber");var g=a("../scheduler/async");c.timestamp=function(a){void 0===a&&(a=g.async);return this.lift(new e(a))};var k=function(){return function(a,b){this.value=a;this.timestamp=b}}();c.Timestamp=k;var e=function(){function a(b){this.scheduler=
b}a.prototype.call=function(a,b){return b._subscribe(new f(a,this.scheduler))};return a}(),f=function(a){function b(c,e){a.call(this,c);this.scheduler=e}l(b,a);b.prototype._next=function(a){var b=this.scheduler.now();this.destination.next(new k(a,b))};return b}(b.Subscriber)},{"../Subscriber":13,"../scheduler/async":309}],287:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===b?Object.create(b):
(c.prototype=b.prototype,new c)};a=a("../Subscriber");c.toArray=function(){return this.lift(new g)};var g=function(){function a(){}a.prototype.call=function(a,b){return b._subscribe(new k(a))};return a}(),k=function(a){function b(c){a.call(this,c);this.array=[]}l(b,a);b.prototype._next=function(a){this.array.push(a)};b.prototype._complete=function(){this.destination.next(this.array);this.destination.complete()};return b}(a.Subscriber)},{"../Subscriber":13}],288:[function(a,b,c){var l=a("../util/root");
c.toPromise=function(a){var b=this;a||(l.root.Rx&&l.root.Rx.config&&l.root.Rx.config.Promise?a=l.root.Rx.config.Promise:l.root.Promise&&(a=l.root.Promise));if(!a)throw Error("no Promise impl found");return new a(function(a,c){var g;b.subscribe(function(a){return g=a},function(a){return c(a)},function(){return a(g)})})}},{"../util/root":340}],289:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===
b?Object.create(b):(c.prototype=b.prototype,new c)},g=a("../Subject");b=a("../OuterSubscriber");var k=a("../util/subscribeToResult");c.window=function(a){return this.lift(new e(a))};var e=function(){function a(b){this.windowBoundaries=b}a.prototype.call=function(a,b){var c=new f(a),e=b._subscribe(c);e.closed||c.add(k.subscribeToResult(c,this.windowBoundaries));return e};return a}(),f=function(a){function b(c){a.call(this,c);this.window=new g.Subject;c.next(this.window)}l(b,a);b.prototype.notifyNext=
function(a,b,c,e,f){this.openWindow()};b.prototype.notifyError=function(a,b){this._error(a)};b.prototype.notifyComplete=function(a){this._complete()};b.prototype._next=function(a){this.window.next(a)};b.prototype._error=function(a){this.window.error(a);this.destination.error(a)};b.prototype._complete=function(){this.window.complete();this.destination.complete()};b.prototype._unsubscribe=function(){this.window=null};b.prototype.openWindow=function(){var a=this.window;a&&a.complete();var a=this.destination,
b=this.window=new g.Subject;a.next(b)};return b}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../Subject":11,"../util/subscribeToResult":341}],290:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../Subscriber");var g=a("../Subject");c.windowCount=function(a,b){void 0===b&&(b=0);return this.lift(new k(a,b))};var k=function(){function a(b,
c){this.windowSize=b;this.startWindowEvery=c}a.prototype.call=function(a,b){return b._subscribe(new e(a,this.windowSize,this.startWindowEvery))};return a}(),e=function(a){function b(c,e,k){a.call(this,c);this.destination=c;this.windowSize=e;this.startWindowEvery=k;this.windows=[new g.Subject];this.count=0;c.next(this.windows[0])}l(b,a);b.prototype._next=function(a){for(var b=0<this.startWindowEvery?this.startWindowEvery:this.windowSize,c=this.destination,e=this.windowSize,f=this.windows,k=f.length,
l=0;l<k&&!this.closed;l++)f[l].next(a);a=this.count-e+1;0<=a&&0===a%b&&!this.closed&&f.shift().complete();0!==++this.count%b||this.closed||(b=new g.Subject,f.push(b),c.next(b))};b.prototype._error=function(a){var b=this.windows;if(b)for(;0<b.length&&!this.closed;)b.shift().error(a);this.destination.error(a)};b.prototype._complete=function(){var a=this.windows;if(a)for(;0<a.length&&!this.closed;)a.shift().complete();this.destination.complete()};b.prototype._unsubscribe=function(){this.count=0;this.windows=
null};return b}(b.Subscriber)},{"../Subject":11,"../Subscriber":13}],291:[function(a,b,c){function l(a){var b=a.subscriber,c=a.windowTimeSpan,e=a.window;e&&e.complete();a.window=b.openWindow();this.schedule(a,c)}function g(a){var b=a.windowTimeSpan,c=a.subscriber,e=a.scheduler,f=a.windowCreationInterval,g=c.openWindow(),h={action:this,subscription:null};h.subscription=e.schedule(k,b,{subscriber:c,window:g,context:h});this.add(h.subscription);this.schedule(a,f)}function k(a){var b=a.subscriber,c=a.window;
(a=a.context)&&a.action&&a.subscription&&a.action.remove(a.subscription);b.closeWindow(c)}var e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},f=a("../Subject"),m=a("../scheduler/async");a=a("../Subscriber");c.windowTime=function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=m.async);return this.lift(new h(a,b,c))};var h=function(){function a(b,c,e){this.windowTimeSpan=
b;this.windowCreationInterval=c;this.scheduler=e}a.prototype.call=function(a,b){return b._subscribe(new n(a,this.windowTimeSpan,this.windowCreationInterval,this.scheduler))};return a}(),n=function(a){function b(c,e,f,h){a.call(this,c);this.destination=c;this.windowTimeSpan=e;this.windowCreationInterval=f;this.scheduler=h;this.windows=[];if(null!==f&&0<=f){c={subscriber:this,window:this.openWindow(),context:null};var m={windowTimeSpan:e,windowCreationInterval:f,subscriber:this,scheduler:h};this.add(h.schedule(k,
e,c));this.add(h.schedule(g,f,m))}else f={subscriber:this,window:this.openWindow(),windowTimeSpan:e},this.add(h.schedule(l,e,f))}e(b,a);b.prototype._next=function(a){for(var b=this.windows,c=b.length,e=0;e<c;e++){var f=b[e];f.closed||f.next(a)}};b.prototype._error=function(a){for(var b=this.windows;0<b.length;)b.shift().error(a);this.destination.error(a)};b.prototype._complete=function(){for(var a=this.windows;0<a.length;){var b=a.shift();b.closed||b.complete()}this.destination.complete()};b.prototype.openWindow=
function(){var a=new f.Subject;this.windows.push(a);this.destination.next(a);return a};b.prototype.closeWindow=function(a){a.complete();var b=this.windows;b.splice(b.indexOf(a),1)};return b}(a.Subscriber)},{"../Subject":11,"../Subscriber":13,"../scheduler/async":309}],292:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=a("../Subject"),
k=a("../Subscription"),e=a("../util/tryCatch"),f=a("../util/errorObject");b=a("../OuterSubscriber");var m=a("../util/subscribeToResult");c.windowToggle=function(a,b){return this.lift(new h(a,b))};var h=function(){function a(b,c){this.openings=b;this.closingSelector=c}a.prototype.call=function(a,b){return b._subscribe(new n(a,this.openings,this.closingSelector))};return a}(),n=function(a){function b(c,e,f){a.call(this,c);this.openings=e;this.closingSelector=f;this.contexts=[];this.add(this.openSubscription=
m.subscribeToResult(this,e,e))}l(b,a);b.prototype._next=function(a){var b=this.contexts;if(b)for(var c=b.length,e=0;e<c;e++)b[e].window.next(a)};b.prototype._error=function(b){var c=this.contexts;this.contexts=null;if(c)for(var e=c.length,f=-1;++f<e;){var g=c[f];g.window.error(b);g.subscription.unsubscribe()}a.prototype._error.call(this,b)};b.prototype._complete=function(){var b=this.contexts;this.contexts=null;if(b)for(var c=b.length,e=-1;++e<c;){var f=b[e];f.window.complete();f.subscription.unsubscribe()}a.prototype._complete.call(this)};
b.prototype._unsubscribe=function(){var a=this.contexts;this.contexts=null;if(a)for(var b=a.length,c=-1;++c<b;){var e=a[c];e.window.unsubscribe();e.subscription.unsubscribe()}};b.prototype.notifyNext=function(a,b,c,h,l){if(a===this.openings){h=e.tryCatch(this.closingSelector)(b);if(h===f.errorObject)return this.error(f.errorObject.e);a=new g.Subject;b=new k.Subscription;c={window:a,subscription:b};this.contexts.push(c);h=m.subscribeToResult(this,h,c);h.closed?this.closeWindow(this.contexts.length-
1):(h.context=c,b.add(h));this.destination.next(a)}else this.closeWindow(this.contexts.indexOf(a))};b.prototype.notifyError=function(a){this.error(a)};b.prototype.notifyComplete=function(a){a!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(a.context))};b.prototype.closeWindow=function(a){if(-1!==a){var b=this.contexts,c=b[a],e=c.window,c=c.subscription;b.splice(a,1);e.complete();c.unsubscribe()}};return b}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../Subject":11,"../Subscription":14,
"../util/errorObject":330,"../util/subscribeToResult":341,"../util/tryCatch":343}],293:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=a("../Subject"),k=a("../util/tryCatch"),e=a("../util/errorObject");b=a("../OuterSubscriber");var f=a("../util/subscribeToResult");c.windowWhen=function(a){return this.lift(new m(a))};var m=function(){function a(b){this.closingSelector=
b}a.prototype.call=function(a,b){return b._subscribe(new h(a,this.closingSelector))};return a}(),h=function(a){function b(c,e){a.call(this,c);this.destination=c;this.closingSelector=e;this.openWindow()}l(b,a);b.prototype.notifyNext=function(a,b,c,e,f){this.openWindow(f)};b.prototype.notifyError=function(a,b){this._error(a)};b.prototype.notifyComplete=function(a){this.openWindow(a)};b.prototype._next=function(a){this.window.next(a)};b.prototype._error=function(a){this.window.error(a);this.destination.error(a);
this.unsubscribeClosingNotification()};b.prototype._complete=function(){this.window.complete();this.destination.complete();this.unsubscribeClosingNotification()};b.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()};b.prototype.openWindow=function(a){void 0===a&&(a=null);a&&(this.remove(a),a.unsubscribe());(a=this.window)&&a.complete();a=this.window=new g.Subject;this.destination.next(a);a=k.tryCatch(this.closingSelector)();a===e.errorObject?
(a=e.errorObject.e,this.destination.error(a),this.window.error(a)):this.add(this.closingNotification=f.subscribeToResult(this,a))};return b}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../Subject":11,"../util/errorObject":330,"../util/subscribeToResult":341,"../util/tryCatch":343}],294:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("../OuterSubscriber");
var g=a("../util/subscribeToResult");c.withLatestFrom=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];var c;"function"===typeof a[a.length-1]&&(c=a.pop());return this.lift(new k(a,c))};var k=function(){function a(b,c){this.observables=b;this.project=c}a.prototype.call=function(a,b){return b._subscribe(new e(a,this.observables,this.project))};return a}(),e=function(a){function b(c,e,k){a.call(this,c);this.observables=e;this.project=k;this.toRespond=[];c=e.length;this.values=
Array(c);for(k=0;k<c;k++)this.toRespond.push(k);for(k=0;k<c;k++){var l=e[k];this.add(g.subscribeToResult(this,l,l,k))}}l(b,a);b.prototype.notifyNext=function(a,b,c,e,f){this.values[c]=b;a=this.toRespond;0<a.length&&(c=a.indexOf(c),-1!==c&&a.splice(c,1))};b.prototype.notifyComplete=function(){};b.prototype._next=function(a){0===this.toRespond.length&&(a=[a].concat(this.values),this.project?this._tryProject(a):this.destination.next(a))};b.prototype._tryProject=function(a){var b;try{b=this.project.apply(this,
a)}catch(c){this.destination.error(c);return}this.destination.next(b)};return b}(b.OuterSubscriber)},{"../OuterSubscriber":7,"../util/subscribeToResult":341}],295:[function(a,b,c){function l(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];b=a[a.length-1];"function"===typeof b&&a.pop();return(new k.ArrayObservable(a)).lift(new n(b))}var g=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):
(c.prototype=b.prototype,new c)},k=a("../observable/ArrayObservable"),e=a("../util/isArray");b=a("../Subscriber");var f=a("../OuterSubscriber"),m=a("../util/subscribeToResult"),h=a("../symbol/iterator");c.zipProto=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];a.unshift(this);return l.apply(this,a)};c.zipStatic=l;var n=function(){function a(b){this.project=b}a.prototype.call=function(a,b){return b._subscribe(new q(a,this.project))};return a}();c.ZipOperator=n;var q=function(a){function b(c,
e,f){void 0===f&&(f=Object.create(null));a.call(this,c);this.index=0;this.iterators=[];this.active=0;this.project="function"===typeof e?e:null;this.values=f}g(b,a);b.prototype._next=function(a){var b=this.iterators,c=this.index++;e.isArray(a)?b.push(new t(a)):"function"===typeof a[h.$$iterator]?b.push(new r(a[h.$$iterator]())):b.push(new u(this.destination,this,a,c))};b.prototype._complete=function(){var a=this.iterators,b=a.length;this.active=b;for(var c=0;c<b;c++){var e=a[c];e.stillUnsubscribed?
this.add(e.subscribe(e,c)):this.active--}};b.prototype.notifyInactive=function(){this.active--;0===this.active&&this.destination.complete()};b.prototype.checkIterators=function(){for(var a=this.iterators,b=a.length,c=this.destination,e=0;e<b;e++){var f=a[e];if("function"===typeof f.hasValue&&!f.hasValue())return}for(var g=!1,k=[],e=0;e<b;e++){var f=a[e],h=f.next();f.hasCompleted()&&(g=!0);if(h.done){c.complete();return}k.push(h.value)}this.project?this._tryProject(k):c.next(k);g&&c.complete()};b.prototype._tryProject=
function(a){var b;try{b=this.project.apply(this,a)}catch(c){this.destination.error(c);return}this.destination.next(b)};return b}(b.Subscriber);c.ZipSubscriber=q;var r=function(){function a(b){this.iterator=b;this.nextResult=b.next()}a.prototype.hasValue=function(){return!0};a.prototype.next=function(){var a=this.nextResult;this.nextResult=this.iterator.next();return a};a.prototype.hasCompleted=function(){var a=this.nextResult;return a&&a.done};return a}(),t=function(){function a(b){this.array=b;this.length=
this.index=0;this.length=b.length}a.prototype[h.$$iterator]=function(){return this};a.prototype.next=function(a){a=this.index++;var b=this.array;return a<this.length?{value:b[a],done:!1}:{value:null,done:!0}};a.prototype.hasValue=function(){return this.array.length>this.index};a.prototype.hasCompleted=function(){return this.array.length===this.index};return a}(),u=function(a){function b(c,e,f,g){a.call(this,c);this.parent=e;this.observable=f;this.index=g;this.stillUnsubscribed=!0;this.buffer=[];this.isComplete=
!1}g(b,a);b.prototype[h.$$iterator]=function(){return this};b.prototype.next=function(){var a=this.buffer;return 0===a.length&&this.isComplete?{value:null,done:!0}:{value:a.shift(),done:!1}};b.prototype.hasValue=function(){return 0<this.buffer.length};b.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete};b.prototype.notifyComplete=function(){0<this.buffer.length?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()};b.prototype.notifyNext=function(a,
b,c,e,f){this.buffer.push(b);this.parent.checkIterators()};b.prototype.subscribe=function(a,b){return m.subscribeToResult(this,this.observable,this,b)};return b}(f.OuterSubscriber)},{"../OuterSubscriber":7,"../Subscriber":13,"../observable/ArrayObservable":145,"../symbol/iterator":311,"../util/isArray":331,"../util/subscribeToResult":341}],296:[function(a,b,c){var l=a("./zip");c.zipAll=function(a){return this.lift(new l.ZipOperator(a))}},{"./zip":295}],297:[function(a,b,c){var l=this&&this.__extends||
function(a,b){function c(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=function(a){function b(c,f){a.call(this)}l(b,a);b.prototype.schedule=function(a,b){return this};return b}(a("../Subscription").Subscription);c.Action=a},{"../Subscription":14}],298:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===
b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("./AsyncAction");var g=a("../util/AnimationFrame");a=function(a){function b(c,e){a.call(this,c,e);this.scheduler=c;this.work=e}l(b,a);b.prototype.requestAsyncId=function(b,c,e){void 0===e&&(e=0);if(null!==e&&0<e)return a.prototype.requestAsyncId.call(this,b,c,e);b.actions.push(this);return b.scheduled||(b.scheduled=g.AnimationFrame.requestAnimationFrame(b.flush.bind(b,null)))};b.prototype.recycleAsyncId=function(b,c,e){void 0===e&&(e=0);if(null!==
e&&0<e)return a.prototype.recycleAsyncId.call(this,b,c,e);0===b.actions.length&&(g.AnimationFrame.cancelAnimationFrame(c),b.scheduled=void 0)};return b}(b.AsyncAction);c.AnimationFrameAction=a},{"../util/AnimationFrame":319,"./AsyncAction":302}],299:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=function(a){function b(){a.apply(this,arguments)}
l(b,a);b.prototype.flush=function(){this.active=!0;this.scheduled=void 0;var a=this.actions,b,c=-1,g=a.length,k=a.shift();do if(b=k.execute(k.state,k.delay))break;while(++c<g&&(k=a.shift()));this.active=!1;if(b){for(;++c<g&&(k=a.shift());)k.unsubscribe();throw b;}};return b}(a("./AsyncScheduler").AsyncScheduler);c.AnimationFrameScheduler=a},{"./AsyncScheduler":303}],300:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=
b[g]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=a("../util/Immediate");a=function(a){function b(c,e){a.call(this,c,e);this.scheduler=c;this.work=e}l(b,a);b.prototype.requestAsyncId=function(b,c,e){void 0===e&&(e=0);if(null!==e&&0<e)return a.prototype.requestAsyncId.call(this,b,c,e);b.actions.push(this);return b.scheduled||(b.scheduled=g.Immediate.setImmediate(b.flush.bind(b,null)))};b.prototype.recycleAsyncId=function(b,c,e){void 0===e&&(e=0);if(null!==e&&0<e)return a.prototype.recycleAsyncId.call(this,
b,c,e);0===b.actions.length&&(g.Immediate.clearImmediate(c),b.scheduled=void 0)};return b}(a("./AsyncAction").AsyncAction);c.AsapAction=a},{"../util/Immediate":323,"./AsyncAction":302}],301:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=function(a){function b(){a.apply(this,arguments)}l(b,a);b.prototype.flush=function(){this.active=!0;
this.scheduled=void 0;var a=this.actions,b,c=-1,g=a.length,k=a.shift();do if(b=k.execute(k.state,k.delay))break;while(++c<g&&(k=a.shift()));this.active=!1;if(b){for(;++c<g&&(k=a.shift());)k.unsubscribe();throw b;}};return b}(a("./AsyncScheduler").AsyncScheduler);c.AsapScheduler=a},{"./AsyncScheduler":303}],302:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===b?Object.create(b):(c.prototype=
b.prototype,new c)},g=a("../util/root");a=function(a){function b(c,e){a.call(this,c,e);this.scheduler=c;this.work=e;this.pending=!1}l(b,a);b.prototype.schedule=function(a,b){void 0===b&&(b=0);if(this.closed)return this;this.state=a;this.pending=!0;var c=this.id,e=this.scheduler;null!=c&&(this.id=this.recycleAsyncId(e,c,b));this.delay=b;this.id=this.id||this.requestAsyncId(e,this.id,b);return this};b.prototype.requestAsyncId=function(a,b,c){void 0===c&&(c=0);return g.root.setInterval(a.flush.bind(a,
this),c)};b.prototype.recycleAsyncId=function(a,b,c){void 0===c&&(c=0);return null!==c&&this.delay===c?b:(g.root.clearInterval(b),void 0)};b.prototype.execute=function(a,b){if(this.closed)return Error("executing a cancelled action");this.pending=!1;var c=this._execute(a,b);if(c)return c;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))};b.prototype._execute=function(a,b){var c=!1,e=void 0;try{this.work(a)}catch(g){c=!0,e=!!g&&g||Error(g)}if(c)return this.unsubscribe(),
e};b.prototype._unsubscribe=function(){var a=this.id,b=this.scheduler,c=b.actions,e=c.indexOf(this);this.state=this.delay=this.work=null;this.pending=!1;this.scheduler=null;-1!==e&&c.splice(e,1);null!=a&&(this.id=this.recycleAsyncId(b,a,null))};return b}(a("./Action").Action);c.AsyncAction=a},{"../util/root":340,"./Action":297}],303:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):
(c.prototype=b.prototype,new c)};a=function(a){function b(){a.apply(this,arguments);this.actions=[];this.active=!1;this.scheduled=void 0}l(b,a);b.prototype.flush=function(a){var b=this.actions;if(this.active)b.push(a);else{var c;this.active=!0;do if(c=a.execute(a.state,a.delay))break;while(a=b.shift());this.active=!1;if(c){for(;a=b.shift();)a.unsubscribe();throw c;}}};return b}(a("../Scheduler").Scheduler);c.AsyncScheduler=a},{"../Scheduler":10}],304:[function(a,b,c){var l=this&&this.__extends||function(a,
b){function c(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=function(a){function b(c,f){a.call(this,c,f);this.scheduler=c;this.work=f}l(b,a);b.prototype.schedule=function(b,c){void 0===c&&(c=0);if(0<c)return a.prototype.schedule.call(this,b,c);this.delay=c;this.state=b;this.scheduler.flush(this);return this};b.prototype.execute=function(b,c){return 0<c||this.closed?a.prototype.execute.call(this,b,c):this._execute(b,
c)};b.prototype.requestAsyncId=function(b,c,k){void 0===k&&(k=0);return null!==k&&0<k?a.prototype.requestAsyncId.call(this,b,c,k):b.flush(this)};return b}(a("./AsyncAction").AsyncAction);c.QueueAction=a},{"./AsyncAction":302}],305:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=function(a){function b(){a.apply(this,arguments)}l(b,a);return b}(a("./AsyncScheduler").AsyncScheduler);
c.QueueScheduler=a},{"./AsyncScheduler":303}],306:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b=a("./AsyncAction");a=function(a){function b(c,e){var h=this;void 0===c&&(c=g);void 0===e&&(e=Number.POSITIVE_INFINITY);a.call(this,c,function(){return h.frame});this.maxFrames=e;this.frame=0;this.index=-1}l(b,a);b.prototype.flush=function(){for(var a=
this.actions,b=this.maxFrames,c,e;(e=a.shift())&&(this.frame=e.delay)<=b&&!(c=e.execute(e.state,e.delay)););if(c){for(;e=a.shift();)e.unsubscribe();throw c;}};b.frameTimeFactor=10;return b}(a("./AsyncScheduler").AsyncScheduler);c.VirtualTimeScheduler=a;var g=function(a){function b(c,e,g){void 0===g&&(g=c.index+=1);a.call(this,c,e);this.scheduler=c;this.work=e;this.index=g;this.index=c.index=g}l(b,a);b.prototype.schedule=function(c,g){void 0===g&&(g=0);return this.id?this.add(new b(this.scheduler,
this.work)).schedule(c,g):a.prototype.schedule.call(this,c,g)};b.prototype.requestAsyncId=function(a,c,g){void 0===g&&(g=0);this.delay=a.frame+g;a=a.actions;a.push(this);a.sort(b.sortActions);return!0};b.prototype.recycleAsyncId=function(a,b,c){};b.sortActions=function(a,b){return a.delay===b.delay?a.index===b.index?0:a.index>b.index?1:-1:a.delay>b.delay?1:-1};return b}(b.AsyncAction);c.VirtualAction=g},{"./AsyncAction":302,"./AsyncScheduler":303}],307:[function(a,b,c){b=a("./AnimationFrameAction");
a=a("./AnimationFrameScheduler");c.animationFrame=new a.AnimationFrameScheduler(b.AnimationFrameAction)},{"./AnimationFrameAction":298,"./AnimationFrameScheduler":299}],308:[function(a,b,c){b=a("./AsapAction");a=a("./AsapScheduler");c.asap=new a.AsapScheduler(b.AsapAction)},{"./AsapAction":300,"./AsapScheduler":301}],309:[function(a,b,c){b=a("./AsyncAction");a=a("./AsyncScheduler");c.async=new a.AsyncScheduler(b.AsyncAction)},{"./AsyncAction":302,"./AsyncScheduler":303}],310:[function(a,b,c){b=a("./QueueAction");
a=a("./QueueScheduler");c.queue=new a.QueueScheduler(b.QueueAction)},{"./QueueAction":304,"./QueueScheduler":305}],311:[function(a,b,c){a=a("../util/root");b=a.root.Symbol;if("function"===typeof b)b.iterator?c.$$iterator=b.iterator:"function"===typeof b.for&&(c.$$iterator=b.for("iterator"));else if(a.root.Set&&"function"===typeof(new a.root.Set)["@@iterator"])c.$$iterator="@@iterator";else if(a.root.Map){b=Object.getOwnPropertyNames(a.root.Map.prototype);for(var l=0;l<b.length;++l){var g=b[l];if("entries"!==
g&&"size"!==g&&a.root.Map.prototype[g]===a.root.Map.prototype.entries){c.$$iterator=g;break}}}else c.$$iterator="@@iterator"},{"../util/root":340}],312:[function(a,b,c){function l(a){var b=a.Symbol;"function"===typeof b?b.observable?a=b.observable:(a=b("observable"),b.observable=a):a="@@observable";return a}a=a("../util/root");c.getSymbolObservable=l;c.$$observable=l(a.root)},{"../util/root":340}],313:[function(a,b,c){a=a("../util/root").root.Symbol;c.$$rxSubscriber="function"===typeof a&&"function"===
typeof a.for?a.for("rxSubscriber"):"@@rxSubscriber"},{"../util/root":340}],314:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=a("../Observable"),k=a("../Subscription");b=a("./SubscriptionLoggable");a=a("../util/applyMixins");g=function(a){function b(c,f){a.call(this,function(a){var b=this,c=b.logSubscribedFrame();a.add(new k.Subscription(function(){b.logUnsubscribedFrame(c)}));
b.scheduleMessages(a);return a});this.messages=c;this.subscriptions=[];this.scheduler=f}l(b,a);b.prototype.scheduleMessages=function(a){for(var b=this.messages.length,c=0;c<b;c++){var e=this.messages[c];a.add(this.scheduler.schedule(function(a){a.message.notification.observe(a.subscriber)},e.frame,{message:e,subscriber:a}))}};return b}(g.Observable);c.ColdObservable=g;a.applyMixins(g,[b.SubscriptionLoggable])},{"../Observable":5,"../Subscription":14,"../util/applyMixins":328,"./SubscriptionLoggable":317}],
315:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=a("../Subject"),k=a("../Subscription");b=a("./SubscriptionLoggable");a=a("../util/applyMixins");g=function(a){function b(c,f){a.call(this);this.messages=c;this.subscriptions=[];this.scheduler=f}l(b,a);b.prototype._subscribe=function(b){var c=this,f=c.logSubscribedFrame();b.add(new k.Subscription(function(){c.logUnsubscribedFrame(f)}));
return a.prototype._subscribe.call(this,b)};b.prototype.setup=function(){for(var a=this,b=a.messages.length,c=0;c<b;c++)(function(){var b=a.messages[c];a.scheduler.schedule(function(){b.notification.observe(a)},b.frame)})()};return b}(g.Subject);c.HotObservable=g;a.applyMixins(g,[b.SubscriptionLoggable])},{"../Subject":11,"../Subscription":14,"../util/applyMixins":328,"./SubscriptionLoggable":317}],316:[function(a,b,c){a=function(){return function(a,b){void 0===b&&(b=Number.POSITIVE_INFINITY);this.subscribedFrame=
a;this.unsubscribedFrame=b}}();c.SubscriptionLog=a},{}],317:[function(a,b,c){var l=a("./SubscriptionLog");a=function(){function a(){this.subscriptions=[]}a.prototype.logSubscribedFrame=function(){this.subscriptions.push(new l.SubscriptionLog(this.scheduler.now()));return this.subscriptions.length-1};a.prototype.logUnsubscribedFrame=function(a){var b=this.subscriptions;b[a]=new l.SubscriptionLog(b[a].subscribedFrame,this.scheduler.now())};return a}();c.SubscriptionLoggable=a},{"./SubscriptionLog":316}],
318:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=a("../Observable"),k=a("../Notification"),e=a("./ColdObservable"),f=a("./HotObservable"),m=a("./SubscriptionLog"),h=a("../scheduler/VirtualTimeScheduler");a=function(a){function b(c){a.call(this,h.VirtualAction,750);this.assertDeepEqual=c;this.hotObservables=[];this.coldObservables=[];
this.flushTests=[]}l(b,a);b.prototype.createTime=function(a){a=a.indexOf("|");if(-1===a)throw Error('marble diagram for time should have a completion marker "|"');return a*b.frameTimeFactor};b.prototype.createColdObservable=function(a,c,f){if(-1!==a.indexOf("^"))throw Error('cold observable cannot have subscription offset "^"');if(-1!==a.indexOf("!"))throw Error('cold observable cannot have unsubscription marker "!"');a=b.parseMarbles(a,c,f);a=new e.ColdObservable(a,this);this.coldObservables.push(a);
return a};b.prototype.createHotObservable=function(a,c,e){if(-1!==a.indexOf("!"))throw Error('hot observable cannot have unsubscription marker "!"');a=b.parseMarbles(a,c,e);a=new f.HotObservable(a,this);this.hotObservables.push(a);return a};b.prototype.materializeInnerObservable=function(a,b){var c=this,e=[];a.subscribe(function(a){e.push({frame:c.frame-b,notification:k.Notification.createNext(a)})},function(a){e.push({frame:c.frame-b,notification:k.Notification.createError(a)})},function(){e.push({frame:c.frame-
b,notification:k.Notification.createComplete()})});return e};b.prototype.expectObservable=function(a,c){var e=this;void 0===c&&(c=null);var f=[],h={actual:f,ready:!1},l=b.parseMarblesAsSubscriptions(c).unsubscribedFrame,m;this.schedule(function(){m=a.subscribe(function(a){var b=a;a instanceof g.Observable&&(b=e.materializeInnerObservable(b,e.frame));f.push({frame:e.frame,notification:k.Notification.createNext(b)})},function(a){f.push({frame:e.frame,notification:k.Notification.createError(a)})},function(){f.push({frame:e.frame,
notification:k.Notification.createComplete()})})},0);l!==Number.POSITIVE_INFINITY&&this.schedule(function(){return m.unsubscribe()},l);this.flushTests.push(h);return{toBe:function(a,c,e){h.ready=!0;h.expected=b.parseMarbles(a,c,e,!0)}}};b.prototype.expectSubscriptions=function(a){var c={actual:a,ready:!1};this.flushTests.push(c);return{toBe:function(a){a="string"===typeof a?[a]:a;c.ready=!0;c.expected=a.map(function(a){return b.parseMarblesAsSubscriptions(a)})}}};b.prototype.flush=function(){for(var b=
this.hotObservables;0<b.length;)b.shift().setup();a.prototype.flush.call(this);for(b=this.flushTests.filter(function(a){return a.ready});0<b.length;){var c=b.shift();this.assertDeepEqual(c.actual,c.expected)}};b.parseMarblesAsSubscriptions=function(a){if("string"!==typeof a)return new m.SubscriptionLog(Number.POSITIVE_INFINITY);for(var b=a.length,c=-1,e=Number.POSITIVE_INFINITY,f=Number.POSITIVE_INFINITY,g=0;g<b;g++){var k=g*this.frameTimeFactor,h=a[g];switch(h){case "-":case " ":break;case "(":c=
k;break;case ")":c=-1;break;case "^":if(e!==Number.POSITIVE_INFINITY)throw Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");e=-1<c?c:k;break;case "!":if(f!==Number.POSITIVE_INFINITY)throw Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");f=-1<c?c:k;break;default:throw Error("there can only be '^' and '!' markers in a subscription marble diagram. Found instead '"+h+"'.");}}return 0>f?new m.SubscriptionLog(e):
new m.SubscriptionLog(e,f)};b.parseMarbles=function(a,b,c,f){void 0===f&&(f=!1);if(-1!==a.indexOf("!"))throw Error('conventional marble diagrams cannot have the unsubscription marker "!"');for(var g=a.length,h=[],l=a.indexOf("^"),l=-1===l?0:l*-this.frameTimeFactor,m="object"!==typeof b?function(a){return a}:function(a){return f&&b[a]instanceof e.ColdObservable?b[a].messages:b[a]},n=-1,q=0;q<g;q++){var D=q*this.frameTimeFactor+l,F=void 0,L=a[q];switch(L){case "-":case " ":break;case "(":n=D;break;
case ")":n=-1;break;case "|":F=k.Notification.createComplete();break;case "^":break;case "#":F=k.Notification.createError(c||"error");break;default:F=k.Notification.createNext(m(L))}F&&h.push({frame:-1<n?n:D,notification:F})}return h};return b}(h.VirtualTimeScheduler);c.TestScheduler=a},{"../Notification":4,"../Observable":5,"../scheduler/VirtualTimeScheduler":306,"./ColdObservable":314,"./HotObservable":315,"./SubscriptionLog":316}],319:[function(a,b,c){a=a("./root");b=function(){return function(a){a.requestAnimationFrame?
(this.cancelAnimationFrame=a.cancelAnimationFrame.bind(a),this.requestAnimationFrame=a.requestAnimationFrame.bind(a)):a.mozRequestAnimationFrame?(this.cancelAnimationFrame=a.mozCancelAnimationFrame.bind(a),this.requestAnimationFrame=a.mozRequestAnimationFrame.bind(a)):a.webkitRequestAnimationFrame?(this.cancelAnimationFrame=a.webkitCancelAnimationFrame.bind(a),this.requestAnimationFrame=a.webkitRequestAnimationFrame.bind(a)):a.msRequestAnimationFrame?(this.cancelAnimationFrame=a.msCancelAnimationFrame.bind(a),
this.requestAnimationFrame=a.msRequestAnimationFrame.bind(a)):a.oRequestAnimationFrame?(this.cancelAnimationFrame=a.oCancelAnimationFrame.bind(a),this.requestAnimationFrame=a.oRequestAnimationFrame.bind(a)):(this.cancelAnimationFrame=a.clearTimeout.bind(a),this.requestAnimationFrame=function(b){return a.setTimeout(b,1E3/60)})}}();c.RequestAnimationFrameDefinition=b;c.AnimationFrame=new b(a.root)},{"./root":340}],320:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=
a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=function(a){function b(){var c=a.call(this,"argument out of range");this.name=c.name="ArgumentOutOfRangeError";this.stack=c.stack;this.message=c.message}l(b,a);return b}(Error);c.ArgumentOutOfRangeError=a},{}],321:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):
(c.prototype=b.prototype,new c)};a=function(a){function b(){var c=a.call(this,"no elements in sequence");this.name=c.name="EmptyError";this.stack=c.stack;this.message=c.message}l(b,a);return b}(Error);c.EmptyError=a},{}],322:[function(a,b,c){a=function(){function a(){this.values={}}a.prototype.delete=function(a){this.values[a]=null;return!0};a.prototype.set=function(a,b){this.values[a]=b;return this};a.prototype.get=function(a){return this.values[a]};a.prototype.forEach=function(a,b){var c=this.values,
f;for(f in c)c.hasOwnProperty(f)&&null!==c[f]&&a.call(b,c[f],f)};a.prototype.clear=function(){this.values={}};return a}();c.FastMap=a},{}],323:[function(a,b,c){a=a("./root");b=function(){function a(b){this.root=b;b.setImmediate&&"function"===typeof b.setImmediate?(this.setImmediate=b.setImmediate.bind(b),this.clearImmediate=b.clearImmediate.bind(b)):(this.nextHandle=1,this.tasksByHandle={},this.currentlyRunningATask=!1,this.canUseProcessNextTick()?this.setImmediate=this.createProcessNextTickSetImmediate():
this.canUsePostMessage()?this.setImmediate=this.createPostMessageSetImmediate():this.canUseMessageChannel()?this.setImmediate=this.createMessageChannelSetImmediate():this.canUseReadyStateChange()?this.setImmediate=this.createReadyStateChangeSetImmediate():this.setImmediate=this.createSetTimeoutSetImmediate(),b=function e(a){delete e.instance.tasksByHandle[a]},b.instance=this,this.clearImmediate=b)}a.prototype.identify=function(a){return this.root.Object.prototype.toString.call(a)};a.prototype.canUseProcessNextTick=
function(){return"[object process]"===this.identify(this.root.process)};a.prototype.canUseMessageChannel=function(){return Boolean(this.root.MessageChannel)};a.prototype.canUseReadyStateChange=function(){var a=this.root.document;return Boolean(a&&"onreadystatechange"in a.createElement("script"))};a.prototype.canUsePostMessage=function(){var a=this.root;if(a.postMessage&&!a.importScripts){var b=!0,c=a.onmessage;a.onmessage=function(){b=!1};a.postMessage("","*");a.onmessage=c;return b}return!1};a.prototype.partiallyApplied=
function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];c=function m(){var a=m.handler,b=m.args;"function"===typeof a?a.apply(void 0,b):(new Function(""+a))()};c.handler=a;c.args=b;return c};a.prototype.addFromSetImmediateArguments=function(a){this.tasksByHandle[this.nextHandle]=this.partiallyApplied.apply(void 0,a);return this.nextHandle++};a.prototype.createProcessNextTickSetImmediate=function(){var a=function e(){var a=e.instance,b=a.addFromSetImmediateArguments(arguments);a.root.process.nextTick(a.partiallyApplied(a.runIfPresent,
b));return b};a.instance=this;return a};a.prototype.createPostMessageSetImmediate=function(){var a=this.root,b="setImmediate$"+a.Math.random()+"$",c=function m(c){var e=m.instance;c.source===a&&"string"===typeof c.data&&0===c.data.indexOf(b)&&e.runIfPresent(+c.data.slice(b.length))};c.instance=this;a.addEventListener("message",c,!1);c=function h(){var a=h,b=a.messagePrefix,a=a.instance,c=a.addFromSetImmediateArguments(arguments);a.root.postMessage(b+c,"*");return c};c.instance=this;c.messagePrefix=
b;return c};a.prototype.runIfPresent=function(a){if(this.currentlyRunningATask)this.root.setTimeout(this.partiallyApplied(this.runIfPresent,a),0);else{var b=this.tasksByHandle[a];if(b){this.currentlyRunningATask=!0;try{b()}finally{this.clearImmediate(a),this.currentlyRunningATask=!1}}}};a.prototype.createMessageChannelSetImmediate=function(){var a=this,b=new this.root.MessageChannel;b.port1.onmessage=function(b){a.runIfPresent(b.data)};var c=function m(){var a=m,b=a.channel,a=a.instance.addFromSetImmediateArguments(arguments);
b.port2.postMessage(a);return a};c.channel=b;c.instance=this;return c};a.prototype.createReadyStateChangeSetImmediate=function(){var a=function e(){var a=e.instance,b=a.root.document,c=b.documentElement,g=a.addFromSetImmediateArguments(arguments),l=b.createElement("script");l.onreadystatechange=function(){a.runIfPresent(g);l.onreadystatechange=null;c.removeChild(l);l=null};c.appendChild(l);return g};a.instance=this;return a};a.prototype.createSetTimeoutSetImmediate=function(){var a=function e(){var a=
e.instance,b=a.addFromSetImmediateArguments(arguments);a.root.setTimeout(a.partiallyApplied(a.runIfPresent,b),0);return b};a.instance=this;return a};return a}();c.ImmediateDefinition=b;c.Immediate=new b(a.root)},{"./root":340}],324:[function(a,b,c){b=a("./root");a=a("./MapPolyfill");c.Map=b.root.Map||a.MapPolyfill},{"./MapPolyfill":325,"./root":340}],325:[function(a,b,c){a=function(){function a(){this.size=0;this._values=[];this._keys=[]}a.prototype.get=function(a){a=this._keys.indexOf(a);return-1===
a?void 0:this._values[a]};a.prototype.set=function(a,b){var c=this._keys.indexOf(a);-1===c?(this._keys.push(a),this._values.push(b),this.size++):this._values[c]=b;return this};a.prototype.delete=function(a){a=this._keys.indexOf(a);if(-1===a)return!1;this._values.splice(a,1);this._keys.splice(a,1);this.size--;return!0};a.prototype.clear=function(){this._keys.length=0;this.size=this._values.length=0};a.prototype.forEach=function(a,b){for(var c=0;c<this.size;c++)a.call(b,this._values[c],this._keys[c])};
return a}();c.MapPolyfill=a},{}],326:[function(a,b,c){var l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=function(a){function b(){var c=a.call(this,"object unsubscribed");this.name=c.name="ObjectUnsubscribedError";this.stack=c.stack;this.message=c.message}l(b,a);return b}(Error);c.ObjectUnsubscribedError=a},{}],327:[function(a,b,c){var l=this&&this.__extends||
function(a,b){function c(){this.constructor=a}for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=function(a){function b(c){a.call(this);this.errors=c;c=Error.call(this,c?c.length+" errors occurred during unsubscription:\n  "+c.map(function(a,b){return b+1+") "+a.toString()}).join("\n  "):"");this.name=c.name="UnsubscriptionError";this.stack=c.stack;this.message=c.message}l(b,a);return b}(Error);c.UnsubscriptionError=a},{}],328:[function(a,
b,c){c.applyMixins=function(a,b){for(var c=0,e=b.length;c<e;c++)for(var f=b[c],m=Object.getOwnPropertyNames(f.prototype),h=0,n=m.length;h<n;h++){var q=m[h];a.prototype[q]=f.prototype[q]}}},{}],329:[function(a,b,c){var l=a("./root").root.Object;"function"!=typeof l.assign&&function(){l.assign=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];if(void 0===a||null===a)throw new TypeError("cannot convert undefined or null to object");for(var c=l(a),f=b.length,m=0;m<f;m++){var h=b[m];
if(void 0!==h&&null!==h)for(var n in h)h.hasOwnProperty(n)&&(c[n]=h[n])}return c}}();c.assign=l.assign},{"./root":340}],330:[function(a,b,c){c.errorObject={e:{}}},{}],331:[function(a,b,c){c.isArray=Array.isArray||function(a){return a&&"number"===typeof a.length}},{}],332:[function(a,b,c){c.isDate=function(a){return a instanceof Date&&!isNaN(+a)}},{}],333:[function(a,b,c){c.isFunction=function(a){return"function"===typeof a}},{}],334:[function(a,b,c){var l=a("../util/isArray");c.isNumeric=function(a){return!l.isArray(a)&&
0<=a-parseFloat(a)+1}},{"../util/isArray":331}],335:[function(a,b,c){c.isObject=function(a){return null!=a&&"object"===typeof a}},{}],336:[function(a,b,c){c.isPromise=function(a){return a&&"function"!==typeof a.subscribe&&"function"===typeof a.then}},{}],337:[function(a,b,c){c.isScheduler=function(a){return a&&"function"===typeof a.schedule}},{}],338:[function(a,b,c){c.noop=function(){}},{}],339:[function(a,b,c){c.not=function(a,b){function c(){return!c.pred.apply(c.thisArg,arguments)}c.pred=a;c.thisArg=
b;return c}},{}],340:[function(a,b,c){a="undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{};b={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};c.root=b[typeof self]&&self||b[typeof window]&&window;!(a=b[typeof a]&&a)||a.global!==a&&a.window!==a||(c.root=a)},{}],341:[function(a,b,c){var l=a("./root"),g=a("./isArray"),k=a("./isPromise"),e=a("../Observable"),f=a("../symbol/iterator"),m=a("../InnerSubscriber"),h=a("../symbol/observable");
c.subscribeToResult=function(a,b,c,t){var u=new m.InnerSubscriber(a,c,t);if(u.closed)return null;if(b instanceof e.Observable)return b._isScalar?(u.next(b.value),u.complete(),null):b.subscribe(u);if(g.isArray(b)){a=0;for(c=b.length;a<c&&!u.closed;a++)u.next(b[a]);u.closed||u.complete()}else{if(k.isPromise(b))return b.then(function(a){u.closed||(u.next(a),u.complete())},function(a){return u.error(a)}).then(null,function(a){l.root.setTimeout(function(){throw a;})}),u;if("function"===typeof b[f.$$iterator]){b=
b[f.$$iterator]();do{a=b.next();if(a.done){u.complete();break}u.next(a.value);if(u.closed)break}while(1)}else if("function"===typeof b[h.$$observable])if(b=b[h.$$observable](),"function"!==typeof b.subscribe)u.error(Error("invalid observable"));else return b.subscribe(new m.InnerSubscriber(a,c,t));else u.error(new TypeError("unknown type returned"))}return null}},{"../InnerSubscriber":3,"../Observable":5,"../symbol/iterator":311,"../symbol/observable":312,"./isArray":331,"./isPromise":336,"./root":340}],
342:[function(a,b,c){var l=a("../Subscriber"),g=a("../symbol/rxSubscriber");c.toSubscriber=function(a,b,c){if(a){if(a instanceof l.Subscriber)return a;if(a[g.$$rxSubscriber])return a[g.$$rxSubscriber]()}return a||b||c?new l.Subscriber(a,b,c):new l.Subscriber}},{"../Subscriber":13,"../symbol/rxSubscriber":313}],343:[function(a,b,c){function l(){try{return k.apply(this,arguments)}catch(a){return g.errorObject.e=a,g.errorObject}}var g=a("./errorObject"),k;c.tryCatch=function(a){k=a;return l}},{"./errorObject":330}]},
{},[9])(9)});Rx.Observable.always=function(d){return Rx.Observable.never().startWith(d)};Rx.Observable.$watch=function(d,a,b){return Rx.Observable.create(function(c){d.$on("$destroy",c.complete.bind(c));return d.$watch(a,c.next.bind(c),b)})};Rx.Observable.prototype.accumulate=function(){return this.scan(function(d,a){return d.concat(a)},[])};Rx.Observable.prototype.accumulateLatest=function(){return this.accumulate().switchMap(function(d){return Rx.Observable.combineLatest(d)})};
Rx.ConnectableObservable.prototype.persist=function(){this.connect();return this};Rx.Observable.fromPendingPromise=function(d){return Rx.Observable.create(function(a){a.next({pending:!0,value:null,error:null});d.then(function(b){a.next({pending:!1,value:b,error:null});a.complete()},function(b){a.next({pending:!1,value:null,error:b});a.complete()})})};window.StopWatch=function(d){d&&d.auto_start&&this.start()};
StopWatch.prototype={_time_elapsed:0,start_time:null,get time_elapsed(){var d=this._time_elapsed;this.start_time&&(d+=performance.now()-this.start_time);return d},start:function(){this.start_time||(this.start_time=performance.now())},stop:function(){this.start_time&&(this._time_elapsed+=performance.now()-this.start_time,this.start_time=null)}};
(function(){var d=new Rx.Subject,a=window.SessionTracking={on_page:Rx.Observable.always(!0),page_visible:Rx.Observable.fromEvent(document,"visibilitychange").map(function(){return"visible"===document.visibilityState}).startWith("visible"===document.visibilityState),page_focused:Rx.Observable.merge(Rx.Observable.fromEvent(window,"blur").mapTo(!1),Rx.Observable.fromEvent(window,"focus").mapTo(!0)).startWith(document.hasFocus()),with_stopwatch:function(a){var c=new StopWatch;return a.scan(function(a,
b){b?a.start():a.stop();return a},c).publishBehavior(c).persist()},track:function(a,c){var l=this.with_stopwatch(c).map(function(c){return{metric:a,get duration(){return c.time_elapsed/1E3}}});d.next(l)}};Rx.Observable.fromEvent(window,"pagehide").withLatestFrom(d.accumulateLatest(),function(a,c){return c}).first().subscribe(function(a){a=_.chain(a).groupBy("metric").mapValues(function(a){return _.sum(_.map(a,"duration"))}).value();app.tracking.track_with_delayed_handling("Page Session End",a)});
a.track("Time On Page",a.on_page);a.track("Time On Page When Visible",a.page_visible);a.track("Time On Page When Focused",a.page_focused)})();angular.module("genius").service("SessionTracking",["$window",function(d){return d.SessionTracking}]);angular.module("genius").service("ShimInnerHTMLProp",["$window",function(d){return _.once(function(){var a=document.createElementNS("http://www.w3.org/2000/svg","svg");_.isUndefined(a.innerHTML)&&d.GeniusShimInnerHtml()})}]);
angular.module("genius").factory("signed_out_created_content",["$window","Session",function(d,a){var b=d.sessionStorage,c={};return{add:function(c,d){if(!a.user_signed_in){var k=this.get();k[c]=k[c]||[];k[c].push(d);if(b)try{b.setItem("signed_out_created_content",JSON.stringify(k))}catch(e){if("QuotaExceededError"!==e.name)throw e;}}},get:function(){return b?JSON.parse(b.getItem("signed_out_created_content")||"{}"):c},clear:function(){c={};b.removeItem("signed_out_created_content")}}}]);
angular.module("genius").service("SongService",["$q","$http","AppConfig","Session","querystring",function(d,a,b,c,l){var g=function(a){return _(a).pick("id title updated_by_human_at spotify_uuid youtube_url soundcloud_url custom_header_image_url release_date_components albums tags featured_video youtube_start custom_song_art_image_url recording_location custom_performances".split(" ")).merge(["producer_artists","featured_artists","writer_artists"].reduce(function(b,c){a[c]&&(b[c]=_.map(a[c],function(a){return _.pick(a,
"name")}));return b},{})).tap(function(b){a.primary_artist&&(b.primary_artist=a.primary_artist.name);a.primary_tag&&(b.primary_tag_id=a.primary_tag.id);a.song_relationships&&(b.song_relationships_by_id=[],_.each(a.song_relationships,function(a){b.song_relationships_by_id.push({type:a.type,song_ids:_.compact(_.map(a.songs,"id"))})}))}).omit(_.isUndefined).value()};return{autocomplete_api_endpoint:b.api_root_url+"/search",autocomplete_options:{parse:function(a){return _.map(a.response.hits,"result").map(function(a){return{data:[a.title+
" | "+a.primary_artist.name,a],value:a,result:a}})},formatItem:function(a){return a[1].title+"<br>"+a[1].primary_artist.name}},autocomplete:function(c){return a.get(b.api_root_url+"/search/song",{params:{q:c}}).then(function(a){return _.map(_.get(a,"data.response.sections[0].hits",[]),"result")})},count_view:function(c){return a.post(b.api_root_url+"/songs/"+c+"/count_view")},load_contributor_data:function(c){return a.get(b.api_root_url+"/songs/"+c+"/contributors").then(function(a){return a.data.response.contributors})},
load_iq_earners:function(c,d){var f=l.stringify(d);return a.get(b.api_root_url+"/songs/"+c+"/iq_earners?"+f).then(function(a){return a.data.response.contributors})},load_annotation_open_data:function(c){return a.get(b.api_root_url+"/songs/"+c+"/annotation_open_data").then(function(a){return a.data.response.annotation_open_data})},load_song:function(c){return a.get(b.api_root_url+"/songs/"+c,{params:{no_lyrics:!0,text_format:"html,markdown"}}).then(function(a){return a.data.response.song})},load_lyrics:function(c){return a.get(b.api_root_url+
"/songs/"+c+"/lyrics").then(function(a){return a.data.response.song_lyrics})},load_questions:function(c,d){return a.get(b.api_root_url+"/songs/"+c+"/questions",{params:_.extend(d,{text_format:"html,markdown"})}).then(function(a){return a.data.response})},videos:function(c,d){return a.get(b.api_root_url+"/songs/"+c+"/videos",{params:d}).then(function(a){return a.data.response.videos})},perform_action:function(g,e,f){return a.put(b.api_root_url+"/songs/"+g+"/"+e,f,{params:{text_format:c.user_signed_in?
"html,markdown":"html"}}).then(function(a){return a.data.response.song},function(a){return d.reject(Error(a.data.meta.message))})},delete:function(c){return a.delete(b.api_root_url+"/songs/"+c)},update:function(c,e){var f=g(e);return a.put(b.api_root_url+"/songs/"+c,{song:f},{params:{text_format:"html,markdown"}}).then(function(a){return a.data.response.song},function(a){return d.reject(_.set(a.data.response,"message",a.data.meta.message))})},save_lyrics:function(c,e){return a.put(b.api_root_url+
"/songs/"+c.id+"/lyrics",{lyrics:{body:{html:e}},client_timestamps:_.pick(c,["updated_by_human_at","lyrics_updated_at"])}).then(function(a){return a.data.response.song_lyrics},function(a){return d.reject(a.data)})},correct_lyrics:function(c,e){return a.post(b.api_root_url+"/songs/"+c.id+"/correction",{correction:e}).then(function(a){return a.data.response.song_lyrics},function(a){return d.reject(a.data.meta)})},line_items:function(c,d){return a.get(b.api_root_url+"/songs/"+c+"/activity_stream/line_items",
{params:{text_format:"html",page:d}}).then(function(a){return a.data.response})},for_artist:function(c,d){return a.get(b.api_root_url+"/artists/"+c+"/songs",{params:d}).then(function(a){return a.data.response})},search_with_artist:function(c,d){return a.get(b.api_root_url+"/artists/"+c+"/songs/search",{params:d||{}}).then(function(a){return a.data.response})},hot:function(c){return a.get(b.api_root_url+"/songs/hot",{params:c||{}}).then(function(a){return a.data.response})}}}]);
angular.module("genius").service("Soundcloud",["$sce","$http","querystring",function(d,a,b){var c={auto_play:!1,buying:!1,liking:!1,download:!1,sharing:!1,show_artwork:!1,show_comments:!1,show_playcount:!1,show_user:!1,hide_related:!0,visual:!1},l=function(c){return a.get("https://soundcloud.com/oembed",{params:{url:c,format:"json"}}).then(function(a){a=(new DOMParser).parseFromString(a.data.html,"text/html").querySelector("iframe").src.split("?")[1];return b.parse(a)})};return{oembed_url_for_src:function(a){return l(a).then(function(a){return a.url})},
player_url_for_src:function(a){return l(a).then(function(a){return d.trustAsResourceUrl("https://w.soundcloud.com/player/?"+b.stringify(_.extend(a,c)))})}}}]);angular.module("genius").service("SpotifyAnnotationService",["$http",function(d){return{save_song:function(a,b,c){return d.post("/spotify_annotations/bulk_update",{song_id:a,spotify_annotations:c,spotify_song:{note:b.note,lock_version:b.lock_version,finalized:b.finalized}})},load_song:function(a){return d.get("/songs/"+a+"/spotify_annotations")}}}]);
angular.module("genius").service("SpotifyBridge",["SpotifyLocal","SpotifyRemote",function(d,a){return/local_bridge/.test(document.location.search)?d:a}]);
angular.module("genius").service("SpotifyLocal",["$q","$http","$rootScope",function(d,a,b){var c,l=b.$new(),g=_.once(function(){return d(function(a){var b=new EventSource("http://localhost:5115/stream");b.onopen=function(){l.$emit("ready",{ready:!0});a(b);l.$apply()};b.onerror=function(){l.$emit("error");l.$apply()};b.onmessage=function(a){c||(k({data:JSON.parse(a.data)}),l.$apply())}})}),k=function(a){l.$emit("seek",{playing:"playing"===a.data.playerState,position:a.data.playerPosition,track_uri:_.get(a.data.currentTrack,
"id")});l.$emit("playing",{playing:"playing"===a.data.playerState,track_uri:_.get(a.data.currentTrack,"id")})};return{$on:function(a,b){g();l.$on(a,b)},playpause:function(b){c=!0;return g().then(function(){return a.post("http://localhost:5115/playpause",{trackId:b}).then(k).finally(function(){c=!1})})},seek:function(b,d){c=!0;return g().then(function(){l.$emit("seek",{position:d,track_uri:b});return a.post("http://localhost:5115/seek",{trackId:b,playerPosition:d}).then(k).finally(function(){c=!1})})}}}]);
angular.module("genius").service("SpotifyPlayback",["$rootScope","SpotifyBridge",function(d,a){var b=function(b){this.position=0;this.duration=b.duration;this.spotify_uuid=b.provider_id;this.track_uri="spotify:track:"+this.spotify_uuid;this.emitter=d.$new();a.$on("seek",function(a,b){b.track_uri===this.track_uri&&(this.position=b.position,this.emitter.$emit("state",this.state))}.bind(this));a.$on("playing",function(a,b){this.playing=b.track_uri===this.track_uri&&b.playing;this.emitter.$emit("state",
this.state);_.isUndefined(b.position)||(this.position=b.position)}.bind(this))};Object.defineProperties(b.prototype,{type:{value:"spotify"},$on:{value:function(a,b){return this.emitter.$on(a,b)}},state:{get:function(){return{position:this.position,percentage:this.position/this.duration,time_elapsed:this.position,time_remaining:this.duration-this.position,is_loading:!1,is_playing:this.playing}}},api:{get:function(){return{play:function(){this.state.is_playing||a.seek(this.track_uri,this.position||
0)}.bind(this),pause:function(){a.pause()},playpause:function(){this.state.is_playing?this.api.pause():this.api.play()}.bind(this),seek_to:function(a){this.api.seek_to_position(this.duration*a)}.bind(this),seek_to_position:function(b){var d=!this.state.is_playing;this.position=b;a.seek(this.track_uri,this.position);d&&this.api.pause()}.bind(this)}}}});return b}]);
angular.module("genius").service("SpotifyRemote",["$q","$window","$rootScope","$interval","timestamp_for_displayFilter","getScript",function(d,a,b,c,l,g){var k=b.$new(),e,f,m,h=function(a,b){f=(new Date).getTime();m=a;k.$emit("seek",{position:a,track_uri:b})},n=_.once(function(){var b=d.defer();g("https://d2b1xqaw2ss8na.cloudfront.net/static/js/remote-control-bridge.js",{cache:!0}).then(function(){var c=new a.Spotify.RemoteControlBridgeInterface;c.init({remoteBridgeUrl:"https://embed.spotify.com/remote-control-bridge/",
targetOrigin:"https://embed.spotify.com"});c.attach(function(a){if("player-status"===a.key){e=a.data.track.track_resource.uri;k.is_playing=a.data.status;var d;_.isUndefined(a.data.playing_position)||(d=1E3*a.data.playing_position);k.$emit("playing",{playing:a.data.status,track_uri:e,position:d});k.is_playing&&a.data.playing_position&&h(d,e)}else"client-error"===a.key?k.$emit("error"):"client-connected"===a.key?(b.resolve(c),k.$emit("ready",{ready:!0})):"client-disconnected"===a.key&&k.$emit("ready",
{ready:!1});k.$apply()})});return b.promise}),q;k.$watch("is_playing",function(a){c.cancel(q);a&&(q=c(function(){var a=(new Date).getTime()-f;k.$emit("seek",{position:a+m,track_uri:e})},50))});return{$on:function(a,b){n();k.$on(a,b)},pause:function(){n().then(function(a){a.pause()})},playpause:function(a){n().then(function(b){b.playPauseTrack(a.replace(/^spotify:track:/,""),"track")})},seek:function(a,b){n().then(function(c){var d=l(b,{skip_millis:!0});h(b,a);k.is_playing=!1;c.playSpotifyURI(a+"#"+
d)})}}}]);angular.module("genius").service("SpotifyService",["$http",function(d){return{load_artist_metadata:function(a){return d.get("https://api.spotify.com/v1/artists/"+a).then(function(a){return a.data})}}}]);angular.module("genius").service("StopWatch",["$window",function(d){return d.StopWatch}]);angular.module("genius").service("string_to_symbol_array",function(){var d=/[\uD800-\uDBFF][\uDC00-\uDFFF]|[\u0000-\uFFFF]/g;return function(a){return a.match(d)||[]}});
angular.module("genius").service("TagService",["$http","AppConfig",function(d,a){return{autocomplete:function(b){return d.get(a.api_root_url+"/tags/autocomplete",{params:{q:b}}).then(function(a){return a.data.response.tags})},primary:function(){return d.get(a.api_root_url+"/tags/home").then(function(a){return a.data.response.tags})}}}]);
angular.module("genius").service("TargetElementService",["$window",function(d){var a={global_message:".global_messages",cloudflare_unavailable_alert:"#cf_alert_div"};return{get_element:function(b){return d.$(a[b])}}}]);
(function(d,a){"function"===typeof define&&define.amd?define(a):"object"===typeof exports?module.exports=a(require,exports,module):d.Tether=a()})(this,function(d,a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function l(a){var b=(getComputedStyle(a)||{}).position,c=[];if("fixed"===b)return[a];for(;(a=a.parentNode)&&a&&1===a.nodeType;){var d=void 0;try{d=getComputedStyle(a)}catch(e){}if("undefined"===typeof d||null===d)return c.push(a),c;var f=d;
/(auto|scroll)/.test(f.overflow+f.overflowY+f.overflowX)&&("absolute"!==b||0<=["relative","absolute","fixed"].indexOf(d.position))&&c.push(a)}c.push(document.body);return c}function g(){D&&document.body.removeChild(D);D=null}function k(a){var b=void 0;a===document?(b=document,a=document.documentElement):b=a.ownerDocument;var c=b.documentElement,d={};a=a.getBoundingClientRect();for(var e in a)d[e]=a[e];e=K();d.top-=e.top;d.left-=e.left;"undefined"===typeof d.width&&(d.width=document.body.scrollWidth-
d.left-d.right);"undefined"===typeof d.height&&(d.height=document.body.scrollHeight-d.top-d.bottom);d.top-=c.clientTop;d.left-=c.clientLeft;d.right=b.body.clientWidth-d.width-d.left;d.bottom=b.body.clientHeight-d.height-d.top;return d}function e(a){return a.offsetParent||document.documentElement}function f(){var a=document.createElement("div");a.style.width="100%";a.style.height="200px";var b=document.createElement("div");m(b.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",
width:"200px",height:"150px",overflow:"hidden"});b.appendChild(a);document.body.appendChild(b);var c=a.offsetWidth;b.style.overflow="scroll";a=a.offsetWidth;c===a&&(a=b.clientWidth);document.body.removeChild(b);b=c-a;return{width:b,height:b}}function m(){var a=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],b=[];Array.prototype.push.apply(b,arguments);b.slice(1).forEach(function(b){if(b)for(var c in b)({}).hasOwnProperty.call(b,c)&&(a[c]=b[c])});return a}function h(a,b){if("undefined"!==
typeof a.classList)b.split(" ").forEach(function(b){b.trim()&&a.classList.remove(b)});else{var c=new RegExp("(^| )"+b.split(" ").join("|")+"( |$)","gi"),c=r(a).replace(c," ");a.setAttribute("class",c)}}function n(a,b){if("undefined"!==typeof a.classList)b.split(" ").forEach(function(b){b.trim()&&a.classList.add(b)});else{h(a,b);var c=r(a)+(" "+b);a.setAttribute("class",c)}}function q(a,b){if("undefined"!==typeof a.classList)return a.classList.contains(b);var c=r(a);return(new RegExp("(^| )"+b+"( |$)",
"gi")).test(c)}function r(a){return a.className instanceof SVGAnimatedString?a.className.baseVal:a.className}function t(a,b,c){c.forEach(function(c){-1===b.indexOf(c)&&q(a,c)&&h(a,c)});b.forEach(function(b){q(a,b)||n(a,b)})}function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function u(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,
enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function x(a,b){var c=2>=arguments.length||void 0===arguments[2]?1:arguments[2];return a+c>=b&&b>=a-c}function w(){return"undefined"!==typeof performance&&"undefined"!==typeof performance.now?performance.now():+new Date}function v(){for(var a={top:0,left:0},b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];c.forEach(function(b){var c=b.top;b=b.left;"string"===typeof c&&(c=parseFloat(c,
10));"string"===typeof b&&(b=parseFloat(b,10));a.top+=c;a.left+=b});return a}function C(a,b){"string"===typeof a.left&&-1!==a.left.indexOf("%")&&(a.left=parseFloat(a.left,10)/100*b.width);"string"===typeof a.top&&-1!==a.top.indexOf("%")&&(a.top=parseFloat(a.top,10)/100*b.height);return a}function E(a,b){"scrollParent"===b?b=a.scrollParents[0]:"window"===b&&(b=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]);b===document&&(b=b.documentElement);"undefined"!==typeof b.nodeType&&
function(){var a=k(b),c=getComputedStyle(b);b=[a.left,a.top,a.width+a.left,a.height+a.top];sb.forEach(function(a,d){a=a[0].toUpperCase()+a.substr(1);b[d]="Top"===a||"Left"===a?b[d]+parseFloat(c["border"+a+"Width"]):b[d]-parseFloat(c["border"+a+"Width"])})}();return b}var y=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,
d);return b}}(),B=void 0;"undefined"===typeof B&&(B={modules:[]});var D=null,F=function(){var a=0;return function(){return++a}}(),L={},K=function(){var a=D;a||(a=document.createElement("div"),a.setAttribute("data-tether-id",F()),m(a.style,{top:0,left:0,position:"absolute"}),document.body.appendChild(a),D=a);var b=a.getAttribute("data-tether-id");if("undefined"===typeof L[b]){L[b]={};var a=a.getBoundingClientRect(),c;for(c in a)L[b][c]=a[c];A(function(){delete L[b]})}return L[b]},J=[],A=function(a){J.push(a)},
O=function(){for(var a=void 0;a=J.pop();)a()};a=function(){function a(){c(this,a)}y(a,[{key:"on",value:function(a,b,c){var d=3>=arguments.length||void 0===arguments[3]?!1:arguments[3];"undefined"===typeof this.bindings&&(this.bindings={});"undefined"===typeof this.bindings[a]&&(this.bindings[a]=[]);this.bindings[a].push({handler:b,ctx:c,once:d})}},{key:"once",value:function(a,b,c){this.on(a,b,c,!0)}},{key:"off",value:function(a,b){if("undefined"===typeof this.bindings||"undefined"===typeof this.bindings[a])if("undefined"===
typeof b)delete this.bindings[a];else for(var c=0;c<this.bindings[a].length;)this.bindings[a][c].handler===b?this.bindings[a].splice(c,1):++c}},{key:"trigger",value:function(a){if("undefined"!==typeof this.bindings&&this.bindings[a]){for(var b=0,c=arguments.length,d=Array(1<c?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];for(;b<this.bindings[a].length;){var f=this.bindings[a][b],c=f.handler,e=f.once,f=f.ctx;"undefined"===typeof f&&(f=this);c.apply(f,d);e?this.bindings[a].splice(b,1):++b}}}}]);return a}();
B.Utils={getScrollParents:l,getBounds:k,getOffsetParent:e,extend:m,addClass:n,removeClass:h,hasClass:q,updateClasses:t,defer:A,flush:O,uniqueId:F,Evented:a,getScrollBarSize:f,removeUtilElements:g};"use strict";var T=function(){return function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){var c=[],d=!0,e=!1,f=void 0;try{for(var g=a[Symbol.iterator](),h;!(d=(h=g.next()).done)&&(c.push(h.value),!b||c.length!==b);d=!0);}catch(k){e=!0,f=k}finally{try{if(!d&&g["return"])g["return"]()}finally{if(e)throw f;
}}return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),y=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),p=function(a,b,c){var d=!0;for(;d;)if(null===a&&(a=Function.prototype),d=Object.getOwnPropertyDescriptor(a,b),void 0===d){a=Object.getPrototypeOf(a);if(null===a)break;
d=!0}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}};if("undefined"===typeof B)throw Error("You must include the utils.js file before tether.js");d=B.Utils;var l=d.getScrollParents,k=d.getBounds,e=d.getOffsetParent,m=d.extend,n=d.addClass,h=d.removeClass,t=d.updateClasses,A=d.defer,O=d.flush,f=d.getScrollBarSize,g=d.removeUtilElements,W=function(){if("undefined"===typeof document)return"";for(var a=document.createElement("div"),b=["transform","webkitTransform","OTransform",
"MozTransform","msTransform"],c=0;c<b.length;++c){var d=b[c];if(void 0!==a.style[d])return d}}(),P=[],ga=function(){P.forEach(function(a){a.position(!1)});O()};(function(){var a=null,b=null,c=null,d=function Oa(){"undefined"!==typeof b&&16<b?(b=Math.min(b-16,250),c=setTimeout(Oa,250)):"undefined"!==typeof a&&10>w()-a||(null!=c&&(clearTimeout(c),c=null),a=w(),ga(),b=w()-a)};"undefined"!==typeof window&&"undefined"!==typeof window.addEventListener&&["resize","scroll","touchmove"].forEach(function(a){window.addEventListener(a,
d)})})();var aa={center:"center",left:"right",right:"left"},ya={middle:"middle",top:"bottom",bottom:"top"},ka={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},Ga=function(a,b){var c=a.left,d=a.top;"auto"===c&&(c=aa[b.left]);"auto"===d&&(d=ya[b.top]);return{left:c,top:d}},va=function(a){var b=a.left,c=a.top;"undefined"!==typeof ka[a.left]&&(b=ka[a.left]);"undefined"!==typeof ka[a.top]&&(c=ka[a.top]);return{left:b,top:c}},Za=function(a){a=a.split(" ");a=T(a,2);return{top:a[0],left:a[1]}};
d=function(a){function b(a){var d=this;c(this,b);p(Object.getPrototypeOf(b.prototype),"constructor",this).call(this);this.position=this.position.bind(this);P.push(this);this.history=[];this.setOptions(a,!1);B.modules.forEach(function(a){"undefined"!==typeof a.initialize&&a.initialize.call(d)});this.position()}u(b,a);y(b,[{key:"getClass",value:function(){var a=0>=arguments.length||void 0===arguments[0]?"":arguments[0],b=this.options.classes;return"undefined"!==typeof b&&b[a]?this.options.classes[a]:
this.options.classPrefix?this.options.classPrefix+"-"+a:a}},{key:"setOptions",value:function(a){var b=this,c=1>=arguments.length||void 0===arguments[1]?!0:arguments[1],d=this.options=m({offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"},a),e=d.target,f=d.targetModifier;this.element=d.element;this.target=e;this.targetModifier=f;"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,
this.targetModifier="scroll-handle");["element","target"].forEach(function(a){if("undefined"===typeof b[a])throw Error("Tether Error: Both element and target must be defined");"undefined"!==typeof b[a].jquery?b[a]=b[a][0]:"string"===typeof b[a]&&(b[a]=document.querySelector(b[a]))});n(this.element,this.getClass("element"));!1!==this.options.addTargetClasses&&n(this.target,this.getClass("target"));if(!this.options.attachment)throw Error("Tether Error: You must provide an attachment");this.targetAttachment=
Za(this.options.targetAttachment);this.attachment=Za(this.options.attachment);this.offset=Za(this.options.offset);this.targetOffset=Za(this.options.targetOffset);"undefined"!==typeof this.scrollParents&&this.disable();this.scrollParents="scroll-handle"===this.targetModifier?[this.target]:l(this.target);!1!==this.options.enabled&&this.enable(c)}},{key:"getTargetBounds",value:function(){if("undefined"!==typeof this.targetModifier){if("visible"===this.targetModifier){if(this.target===document.body)return{top:pageYOffset,
left:pageXOffset,height:innerHeight,width:innerWidth};var a=k(this.target),b={height:a.height,width:a.width,top:a.top,left:a.left};b.height=Math.min(b.height,a.height-(pageYOffset-a.top));b.height=Math.min(b.height,a.height-(a.top+a.height-(pageYOffset+innerHeight)));b.height=Math.min(innerHeight,b.height);b.height-=2;b.width=Math.min(b.width,a.width-(pageXOffset-a.left));b.width=Math.min(b.width,a.width-(a.left+a.width-(pageXOffset+innerWidth)));b.width=Math.min(innerWidth,b.width);b.width-=2;b.top<
pageYOffset&&(b.top=pageYOffset);b.left<pageXOffset&&(b.left=pageXOffset);return b}if("scroll-handle"===this.targetModifier){var c=this.target;c===document.body?(c=document.documentElement,a={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):a=k(c);var d=getComputedStyle(c),b=0;if(c.scrollWidth>c.clientWidth||0<=[d.overflow,d.overflowX].indexOf("scroll")||this.target!==document.body)b=15;var e=a.height-parseFloat(d.borderTopWidth)-parseFloat(d.borderBottomWidth)-b,b={width:15,
height:e/c.scrollHeight*e*.975,left:a.left+a.width-parseFloat(d.borderLeftWidth)-15},f=0;408>e&&this.target===document.body&&(f=-1.1E-4*Math.pow(e,2)-.00727*e+22.58);this.target!==document.body&&(b.height=Math.max(b.height,24));b.top=this.target.scrollTop/(c.scrollHeight-e)*(e-b.height-f)+a.top+parseFloat(d.borderTopWidth);this.target===document.body&&(b.height=Math.max(b.height,24));return b}}else return k(this.target)}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(a,
b){"undefined"===typeof this._cache&&(this._cache={});"undefined"===typeof this._cache[a]&&(this._cache[a]=b.call(this));return this._cache[a]}},{key:"enable",value:function(){var a=this,b=0>=arguments.length||void 0===arguments[0]?!0:arguments[0];!1!==this.options.addTargetClasses&&n(this.target,this.getClass("enabled"));n(this.element,this.getClass("enabled"));this.enabled=!0;this.scrollParents.forEach(function(b){b!==document&&b.addEventListener("scroll",a.position)});b&&this.position()}},{key:"disable",
value:function(){var a=this;h(this.target,this.getClass("enabled"));h(this.element,this.getClass("enabled"));this.enabled=!1;"undefined"!==typeof this.scrollParents&&this.scrollParents.forEach(function(b){b.removeEventListener("scroll",a.position)})}},{key:"destroy",value:function(){var a=this;this.disable();P.forEach(function(b,c){b===a&&P.splice(c,1)});0===P.length&&g()}},{key:"updateAttachClasses",value:function(a,b){var c=this;a=a||this.attachment;b=b||this.targetAttachment;"undefined"!==typeof this._addAttachClasses&&
this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length);"undefined"===typeof this._addAttachClasses&&(this._addAttachClasses=[]);var d=this._addAttachClasses;a.top&&d.push(this.getClass("element-attached")+"-"+a.top);a.left&&d.push(this.getClass("element-attached")+"-"+a.left);b.top&&d.push(this.getClass("target-attached")+"-"+b.top);b.left&&d.push(this.getClass("target-attached")+"-"+b.left);var e=[];"left top bottom right middle center".split(" ").forEach(function(a){e.push(c.getClass("element-attached")+
"-"+a);e.push(c.getClass("target-attached")+"-"+a)});A(function(){"undefined"!==typeof c._addAttachClasses&&(t(c.element,c._addAttachClasses,e),!1!==c.options.addTargetClasses&&t(c.target,c._addAttachClasses,e),delete c._addAttachClasses)})}},{key:"position",value:function(){var a=this,b=0>=arguments.length||void 0===arguments[0]?!0:arguments[0];if(this.enabled){this.clearCache();var c=Ga(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,c);var d=this.cache("element-bounds",
function(){return k(a.element)}),g=d.width,h=d.height;0===g&&0===h&&"undefined"!==typeof this.lastSize?(h=this.lastSize,g=h.width,h=h.height):this.lastSize={width:g,height:h};for(var l=this.cache("target-bounds",function(){return a.getTargetBounds()}),m=C(va(this.attachment),{width:g,height:h}),n=C(va(c),l),q=C(this.offset,{width:g,height:h}),r=C(this.targetOffset,l),m=v(m,q),n=v(n,r),p=l.left+n.left-m.left,t=l.top+n.top-m.top,u=0;u<B.modules.length;++u){var x=B.modules[u].position.call(this,{left:p,
top:t,targetAttachment:c,targetPos:l,elementPos:d,offset:m,targetOffset:n,manualOffset:q,manualTargetOffset:r,scrollbarSize:y,attachment:this.attachment});if(!1===x)return!1;"undefined"!==typeof x&&"object"===typeof x&&(t=x.top,p=x.left)}var w={page:{top:t,left:p},viewport:{top:t-pageYOffset,bottom:pageYOffset-t-h+innerHeight,left:p-pageXOffset,right:pageXOffset-p-g+innerWidth}},y=void 0;document.body.scrollWidth>window.innerWidth&&(y=this.cache("scrollbar-size",f),w.viewport.bottom-=y.height);document.body.scrollHeight>
window.innerHeight&&(y=this.cache("scrollbar-size",f),w.viewport.right-=y.width);if(-1===["","static"].indexOf(document.body.style.position)||-1===["","static"].indexOf(document.body.parentElement.style.position))w.page.bottom=document.body.scrollHeight-t-h,w.page.right=document.body.scrollWidth-p-g;"undefined"!==typeof this.options.optimizations&&!1!==this.options.optimizations.moveElement&&"undefined"===typeof this.targetModifier&&function(){var b=a.cache("target-offsetparent",function(){return e(a.target)}),
c=a.cache("target-offsetparent-bounds",function(){return k(b)}),d=getComputedStyle(b),f={};["Top","Left","Bottom","Right"].forEach(function(a){f[a.toLowerCase()]=parseFloat(d["border"+a+"Width"])});c.right=document.body.scrollWidth-c.left-c.width+f.right;c.bottom=document.body.scrollHeight-c.top-c.height+f.bottom;w.page.top>=c.top+f.top&&w.page.bottom>=c.bottom&&w.page.left>=c.left+f.left&&w.page.right>=c.right&&(w.offset={top:w.page.top-c.top+b.scrollTop-f.top,left:w.page.left-c.left+b.scrollLeft-
f.left})}();this.move(w);this.history.unshift(w);3<this.history.length&&this.history.pop();b&&O();return!0}}},{key:"move",value:function(a){var b=this;if("undefined"!==typeof this.element.parentNode){var c={},d;for(d in a){c[d]={};for(var f in a[d]){for(var g=!1,h=0;h<this.history.length;++h){var k=this.history[h];if("undefined"!==typeof k[d]&&!x(k[d][f],a[d][f])){g=!0;break}}g||(c[d][f]=!0)}}var l={top:"",left:"",right:"",bottom:""},n=function(a,c){if(!1!==("undefined"!==typeof b.options.optimizations?
b.options.optimizations.gpu:null)){var d=void 0,e=void 0;a.top?(l.top=0,d=c.top):(l.bottom=0,d=-c.bottom);a.left?(l.left=0,e=c.left):(l.right=0,e=-c.right);l[W]="translateX("+Math.round(e)+"px) translateY("+Math.round(d)+"px)";"msTransform"!==W&&(l[W]+=" translateZ(0)")}else a.top?l.top=c.top+"px":l.bottom=c.bottom+"px",a.left?l.left=c.left+"px":l.right=c.right+"px"},q=!1;(c.page.top||c.page.bottom)&&(c.page.left||c.page.right)?(l.position="absolute",n(c.page,a.page)):(c.viewport.top||c.viewport.bottom)&&
(c.viewport.left||c.viewport.right)?(l.position="fixed",n(c.viewport,a.viewport)):"undefined"!==typeof c.offset&&c.offset.top&&c.offset.left?function(){l.position="absolute";var d=b.cache("target-offsetparent",function(){return e(b.target)});e(b.element)!==d&&A(function(){b.element.parentNode.removeChild(b.element);d.appendChild(b.element)});n(c.offset,a.offset);q=!0}():(l.position="absolute",n({top:!0,left:!0},a.page));if(!q){d=!0;for(g=this.element.parentNode;g&&1===g.nodeType&&"BODY"!==g.tagName;){if("static"!==
getComputedStyle(g).position){d=!1;break}g=g.parentNode}d||(this.element.parentNode.removeChild(this.element),document.body.appendChild(this.element))}var r={};d=!1;for(f in l)g=l[f],this.element.style[f]!==g&&(d=!0,r[f]=g);d&&A(function(){m(b.element.style,r)})}}}]);return b}(a);d.modules=[];B.position=ga;a=m(d,B);"use strict";T=function(){return function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){var c=[],d=!0,e=!1,f=void 0;try{for(var g=a[Symbol.iterator](),h;!(d=(h=g.next()).done)&&
(c.push(h.value),!b||c.length!==b);d=!0);}catch(k){e=!0,f=k}finally{try{if(!d&&g["return"])g["return"]()}finally{if(e)throw f;}}return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}();d=B.Utils;var k=d.getBounds,m=d.extend,t=d.updateClasses,A=d.defer,sb=["left","top","right","bottom"];B.modules.push({position:function(a){var b=this,c=a.top,d=a.left,e=a.targetAttachment;if(!this.options.constraints)return!0;a=this.cache("element-bounds",function(){return k(b.element)});
var f=a.height,g=a.width;0===g&&0===f&&"undefined"!==typeof this.lastSize&&(a=this.lastSize,g=a.width,f=a.height);a=this.cache("target-bounds",function(){return b.getTargetBounds()});var h=a.height,l=a.width,n=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(a){var b=a.outOfBoundsClass;a=a.pinnedClass;b&&n.push(b);a&&n.push(a)});n.forEach(function(a){["left","top","right","bottom"].forEach(function(b){n.push(a+"-"+b)})});var q=[],r=m({},e),p=m({},
this.attachment);this.options.constraints.forEach(function(a){var k=a.to,m=a.attachment;a=a.pin;"undefined"===typeof m&&(m="");var n=void 0,t=void 0;0<=m.indexOf(" ")?(t=m.split(" "),m=T(t,2),t=m[0],n=m[1]):n=t=m;k=E(b,k);if("target"===t||"both"===t)c<k[1]&&"top"===r.top&&(c+=h,r.top="bottom"),c+f>k[3]&&"bottom"===r.top&&(c-=h,r.top="top");"together"===t&&("top"===r.top&&("bottom"===p.top&&c<k[1]?(c+=h,r.top="bottom",c+=f,p.top="top"):"top"===p.top&&c+f>k[3]&&c-(f-h)>=k[1]&&(c-=f-h,r.top="bottom",
p.top="bottom")),"bottom"===r.top&&("top"===p.top&&c+f>k[3]?(c-=h,r.top="top",c-=f,p.top="bottom"):"bottom"===p.top&&c<k[1]&&c+(2*f-h)<=k[3]&&(c+=f-h,r.top="top",p.top="top")),"middle"===r.top&&(c+f>k[3]&&"top"===p.top?(c-=f,p.top="bottom"):c<k[1]&&"bottom"===p.top&&(c+=f,p.top="top")));if("target"===n||"both"===n)d<k[0]&&"left"===r.left&&(d+=l,r.left="right"),d+g>k[2]&&"right"===r.left&&(d-=l,r.left="left");"together"===n&&(d<k[0]&&"left"===r.left?"right"===p.left?(d+=l,r.left="right",d+=g,p.left=
"left"):"left"===p.left&&(d+=l,r.left="right",d-=g,p.left="right"):d+g>k[2]&&"right"===r.left?"left"===p.left?(d-=l,r.left="left",d-=g,p.left="right"):"right"===p.left&&(d-=l,r.left="left",d+=g,p.left="left"):"center"===r.left&&(d+g>k[2]&&"left"===p.left?(d-=g,p.left="right"):d<k[0]&&"right"===p.left&&(d+=g,p.left="left")));if("element"===t||"both"===t)c<k[1]&&"bottom"===p.top&&(c+=f,p.top="top"),c+f>k[3]&&"top"===p.top&&(c-=f,p.top="bottom");if("element"===n||"both"===n)d<k[0]&&("right"===p.left?
(d+=g,p.left="left"):"center"===p.left&&(d+=g/2,p.left="left")),d+g>k[2]&&("left"===p.left?(d-=g,p.left="right"):"center"===p.left&&(d-=g/2,p.left="right"));"string"===typeof a?a=a.split(",").map(function(a){return a.trim()}):!0===a&&(a=["top","left","right","bottom"]);a=a||[];var u=[],x=[];c<k[1]&&(0<=a.indexOf("top")?(c=k[1],u.push("top")):x.push("top"));c+f>k[3]&&(0<=a.indexOf("bottom")?(c=k[3]-f,u.push("bottom")):x.push("bottom"));d<k[0]&&(0<=a.indexOf("left")?(d=k[0],u.push("left")):x.push("left"));
d+g>k[2]&&(0<=a.indexOf("right")?(d=k[2]-g,u.push("right")):x.push("right"));u.length&&function(){var a=void 0,a="undefined"!==typeof b.options.pinnedClass?b.options.pinnedClass:b.getClass("pinned");q.push(a);u.forEach(function(b){q.push(a+"-"+b)})}();x.length&&function(){var a=void 0,a="undefined"!==typeof b.options.outOfBoundsClass?b.options.outOfBoundsClass:b.getClass("out-of-bounds");q.push(a);x.forEach(function(b){q.push(a+"-"+b)})}();if(0<=u.indexOf("left")||0<=u.indexOf("right"))p.left=r.left=
!1;if(0<=u.indexOf("top")||0<=u.indexOf("bottom"))p.top=r.top=!1;if(r.top!==e.top||r.left!==e.left||p.top!==b.attachment.top||p.left!==b.attachment.left)b.updateAttachClasses(p,r),b.trigger("update",{attachment:p,targetAttachment:r})});A(function(){!1!==b.options.addTargetClasses&&t(b.target,q,n);t(b.element,q,n)});return{top:c,left:d}}});"use strict";d=B.Utils;k=d.getBounds;t=d.updateClasses;A=d.defer;B.modules.push({position:function(a){var b=this,c=a.top,d=a.left,e=this.cache("element-bounds",
function(){return k(b.element)});a=e.height;var e=e.width,f=this.getTargetBounds(),g=c+a,h=d+e,l=[];c<=f.bottom&&g>=f.top&&["left","right"].forEach(function(a){var b=f[a];b!==d&&b!==h||l.push(a)});d<=f.right&&h>=f.left&&["top","bottom"].forEach(function(a){var b=f[a];b!==c&&b!==g||l.push(a)});var m=[],n=[];m.push(this.getClass("abutted"));["left","top","right","bottom"].forEach(function(a){m.push(b.getClass("abutted")+"-"+a)});l.length&&n.push(this.getClass("abutted"));l.forEach(function(a){n.push(b.getClass("abutted")+
"-"+a)});A(function(){!1!==b.options.addTargetClasses&&t(b.target,n,m);t(b.element,n,m)});return!0}});"use strict";T=function(){return function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){var c=[],d=!0,e=!1,f=void 0;try{for(var g=a[Symbol.iterator](),h;!(d=(h=g.next()).done)&&(c.push(h.value),!b||c.length!==b);d=!0);}catch(k){e=!0,f=k}finally{try{if(!d&&g["return"])g["return"]()}finally{if(e)throw f;}}return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");
}}();B.modules.push({position:function(a){var b=a.top;a=a.left;if(this.options.shift){var c=this.options.shift;"function"===typeof this.options.shift&&(c=this.options.shift.call(this,{top:b,left:a}));var d=void 0,e=void 0;"string"===typeof c?(c=c.split(" "),c[1]=c[1]||c[0],c=T(c,2),d=c[0],e=c[1],d=parseFloat(d,10),e=parseFloat(e,10)):(d=c.top,e=c.left);return{top:b+d,left:a+e}}}});return a});
(function(d,a){"function"===typeof define&&define.amd?define(["tether"],a):"object"===typeof exports?module.exports=a(require("tether")):d.Drop=a(d.Tether)})(this,function(d){function a(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function b(a){a=
a.split(" ");var b=k(a,2);a=b[0];b=b[1];0<=["left","right"].indexOf(a)&&(b=[b,a],a=b[0],b=b[1]);return[a,b].join(" ")}function c(a,b){for(var c=void 0,d=[];-1!==(c=a.indexOf(b));)d.push(a.splice(c,1));return d}function l(){var f=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],k=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return new (g.apply(C,[null].concat(b)))};m(k,{createContext:l,drops:[],defaults:{}});var x={classPrefix:"drop",defaults:{position:"bottom left",
openOn:"click",beforeClose:null,constrainToScrollParent:!0,constrainToWindow:!0,classes:"",remove:!1,openDelay:0,closeDelay:50,focusDelay:null,blurDelay:null,hoverOpenDelay:null,hoverCloseDelay:null,loadContentOnDemand:!1,tetherOptions:{}}};m(k,x,f);m(k.defaults,x.defaults,f.defaults);"undefined"===typeof v[k.classPrefix]&&(v[k.classPrefix]=[]);k.updateBodyClasses=function(){for(var a=!1,b=v[k.classPrefix],c=b.length,d=0;d<c;++d)if(b[d].isOpened()){a=!0;break}a?h(document.body,k.classPrefix+"-open"):
n(document.body,k.classPrefix+"-open")};var C=function(f){function g(a){if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");var b;a:{var c=Object.getPrototypeOf(g.prototype),d="constructor";b=this;var e=!0;for(;e;)if(null===c&&(c=Function.prototype),e=Object.getOwnPropertyDescriptor(c,d),void 0===e){c=Object.getPrototypeOf(c);if(null===c)break;e=!0}else{if("value"in e){b=e.value;break a}d=e.get;b=void 0===d?void 0:d.call(b);break a}b=void 0}b.call(this);this.options=m({},
k.defaults,a);this.target=this.options.target;if("undefined"===typeof this.target)throw Error("Drop Error: You must provide a target.");a="data-"+k.classPrefix;if(b=this.target.getAttribute(a))this.options.content=b;b=["position","openOn"];for(d=0;d<b.length;++d)(c=this.target.getAttribute(a+"-"+b[d]))&&(this.options[b[d]]=c);this.options.classes&&!1!==this.options.addTargetClasses&&h(this.target,this.options.classes);k.drops.push(this);v[k.classPrefix].push(this);this._boundEvents=[];this.bindMethods();
this.setupElements();this.setupEvents();this.setupTether()}a(g,f);e(g,[{key:"_on",value:function(a,b,c){this._boundEvents.push({element:a,event:b,handler:c});a.addEventListener(b,c)}},{key:"bindMethods",value:function(){this.transitionEndHandler=this._transitionEndHandler.bind(this)}},{key:"setupElements",value:function(){var a=this;this.drop=document.createElement("div");h(this.drop,k.classPrefix);this.options.classes&&h(this.drop,this.options.classes);this.content=document.createElement("div");
h(this.content,k.classPrefix+"-content");if("function"===typeof this.options.content){var b=function(){var b=a.options.content.call(a,a);if("string"===typeof b)a.content.innerHTML=b;else if("object"===typeof b)a.content.innerHTML="",a.content.appendChild(b);else throw Error("Drop Error: Content function should return a string or HTMLElement.");};if(this.options.loadContentOnDemand)this.on("beforeOpen",b.bind(this));else b(),this.on("open",b.bind(this))}else"object"===typeof this.options.content?this.content.appendChild(this.options.content):
this.content.innerHTML=this.options.content;this.drop.appendChild(this.content)}},{key:"setupTether",value:function(){var a=this.options.position.split(" ");a[0]=w[a[0]];var a=a.join(" "),c=[];this.options.constrainToScrollParent?c.push({to:"scrollParent",pin:"top, bottom",attachment:"together none"}):c.push({to:"scrollParent"});!1!==this.options.constrainToWindow?c.push({to:"window",attachment:"together"}):c.push({to:"window"});a={element:this.drop,target:this.target,attachment:b(a),targetAttachment:b(this.options.position),
classPrefix:k.classPrefix,offset:"0 0",targetOffset:"0 0",enabled:!1,constraints:c,addTargetClasses:this.options.addTargetClasses};!1!==this.options.tetherOptions&&(this.tether=new d(m({},a,this.options.tetherOptions)))}},{key:"setupEvents",value:function(){var a=this;if(this.options.openOn)if("always"===this.options.openOn)setTimeout(this.open.bind(this));else{var b=this.options.openOn.split(" ");if(0<=b.indexOf("click"))for(var c=function(b){a.toggle(b);b.preventDefault()},d=function(b){a.isOpened()&&
(b.target===a.drop||a.drop.contains(b.target)||b.target===a.target||a.target.contains(b.target)||a.close(b))},e=0;e<t.length;++e){var f=t[e];this._on(this.target,f,c);this._on(document,f,d)}var g=null,k=null,c=function(b){null!==k?clearTimeout(k):g=setTimeout(function(){a.open(b);g=null},("focus"===b.type?a.options.focusDelay:a.options.hoverOpenDelay)||a.options.openDelay)},d=function(b){null!==g?clearTimeout(g):k=setTimeout(function(){a.close(b);k=null},("blur"===b.type?a.options.blurDelay:a.options.hoverCloseDelay)||
a.options.closeDelay)};0<=b.indexOf("hover")&&(this._on(this.target,"mouseover",c),this._on(this.drop,"mouseover",c),this._on(this.target,"mouseout",d),this._on(this.drop,"mouseout",d));0<=b.indexOf("focus")&&(this._on(this.target,"focus",c),this._on(this.drop,"focus",c),this._on(this.target,"blur",d),this._on(this.drop,"blur",d))}}},{key:"isOpened",value:function(){if(this.drop)return q(this.drop,k.classPrefix+"-open")}},{key:"toggle",value:function(a){this.isOpened()?this.close(a):this.open(a)}},
{key:"open",value:function(a){var b=this;this.isOpened()||(this.drop.parentNode||document.body.appendChild(this.drop),"undefined"!==typeof this.tether&&this.tether.enable(),h(this.drop,k.classPrefix+"-open"),h(this.drop,k.classPrefix+"-open-transitionend"),setTimeout(function(){b.drop&&h(b.drop,k.classPrefix+"-after-open")}),this.trigger("beforeOpen"),"undefined"!==typeof this.tether&&this.tether.position(),this.trigger("open"),k.updateBodyClasses())}},{key:"_transitionEndHandler",value:function(a){a.target===
a.currentTarget&&(q(this.drop,k.classPrefix+"-open")||n(this.drop,k.classPrefix+"-open-transitionend"),this.drop.removeEventListener(u,this.transitionEndHandler))}},{key:"beforeCloseHandler",value:function(a){var b=!0;this.isClosing||"function"!==typeof this.options.beforeClose||(this.isClosing=!0,b=!1!==this.options.beforeClose(a,this));this.isClosing=!1;return b}},{key:"close",value:function(a){this.isOpened()&&this.beforeCloseHandler(a)&&(n(this.drop,k.classPrefix+"-open"),n(this.drop,k.classPrefix+
"-after-open"),this.drop.addEventListener(u,this.transitionEndHandler),this.trigger("close"),"undefined"!==typeof this.tether&&this.tether.disable(),k.updateBodyClasses(),this.options.remove&&this.remove(a))}},{key:"remove",value:function(a){this.close(a);this.drop.parentNode&&this.drop.parentNode.removeChild(this.drop)}},{key:"position",value:function(){this.isOpened()&&"undefined"!==typeof this.tether&&this.tether.position()}},{key:"destroy",value:function(){this.remove();"undefined"!==typeof this.tether&&
this.tether.destroy();for(var a=0;a<this._boundEvents.length;++a){var b=this._boundEvents[a];b.element.removeEventListener(b.event,b.handler)}this._boundEvents=[];this.target=this.content=this.drop=this.tether=null;c(v[k.classPrefix],this);c(k.drops,this)}}]);return g}(r);return k}var g=Function.prototype.bind,k=function(){return function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){var c=[],d=!0,e=!1,f=void 0;try{for(var g=a[Symbol.iterator](),k;!(d=(k=g.next()).done)&&(c.push(k.value),
!b||c.length!==b);d=!0);}catch(h){e=!0,f=h}finally{try{if(!d&&g["return"])g["return"]()}finally{if(e)throw f;}}return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),e=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),f=d.Utils,m=f.extend,h=f.addClass,n=f.removeClass,q=f.hasClass,
r=f.Evented,t=["click"];"ontouchstart"in document.documentElement&&t.push("touchstart");var f={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"},u="",x;for(x in f)({}).hasOwnProperty.call(f,x)&&"undefined"!==typeof document.createElement("p").style[x]&&(u=f[x]);var w={left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle",center:"center"},v={},C=l();document.addEventListener("DOMContentLoaded",function(){C.updateBodyClasses()});
return C});angular.module("genius").service("TetherDrop",["$window",function(d){return d.Drop}]);angular.module("genius").service("TitleService",["$document",function(d){return{update_count:function(a){d[0].title=d[0].title.replace(/^(\(\d+\) )?/,0<a?"("+a+") ":"")}}}]);
angular.module("genius").service("TopBarIndicatorsLoader",["EagerLoader","$http","Session",function(d,a,b){var c=new d;d=function(){b.user_signed_in&&a.get("/top_bar_indicators",{retries:2}).then(function(a){for(var b in a.data)c.loaded(b,a.data[b])})};d();return{listen_for:c.listen_for.bind(c),refresh:d}}]);angular.module("genius").service("Tracking",["$window",function(d){return d.app.tracking}]);
angular.module("genius").service("Twitter",["$window","querystring",function(d,a){return{share:function(b){b="https://twitter.com/intent/tweet?"+a.stringify({url:b.url,text:b.message});d.open(b)}}}]);
angular.module("genius").service("UserService",["Api","$http","AppConfig","$q",function(d,a,b,c){var l=function(a){var b=Error(a.data.meta.message);_.extend(b,_.pick(a,"status","statusText"));return c.reject(_.extend(b,a.data.response))},g={autocomplete_api_endpoint:b.api_root_url+"/users/autocomplete",transform_autocomplete_results:function(a){return a.response.users},contribution_opportunity_assignments:function(a){return d.get("/users/:id/contribution_opportunity_assignments",{id:a})},accomplishments:function(c,
d){return a.get(b.api_root_url+"/users/"+c+"/accomplishments",{params:d}).then(function(a){return a.data.response})},autocomplete:function(b){var c=this;return a.get(this.autocomplete_api_endpoint,{params:{q:b}}).then(function(a){return c.transform_autocomplete_results(a.data)})},load:function(c){return a.get(b.api_root_url+"/users/"+c).then(function(a){return a.data.response.user})},impersonate:function(b){return a.post("/users/impersonate",{login:b})},autocomplete_options:{parse:function(a){a=g.transform_autocomplete_results(a);
return _.map(a,function(a){return{data:[a.login],value:a.login,result:a.login}})}},load_followers_by_artist:function(c,d){return a.get(b.api_root_url+"/artists/"+c+"/followers",{params:d}).then(function(a){return a.data.response})},load_followers_by_user:function(c,d){return a.get(b.api_root_url+"/users/"+c+"/followers",{params:d}).then(function(a){return a.data.response})},load_followed_users:function(c,d){return a.get(b.api_root_url+"/users/"+c+"/followed_users",{params:d}).then(function(a){return a.data.response})},
load_contributions:function(c,d,f){return a.get(b.api_root_url+"/users/"+c+"/contributions"+(d?"/"+d:""),{params:f}).then(function(a){return a.data.response})},update:function(c,d){return a.put(b.api_root_url+"/users/"+c,d,{params:{text_format:"html,markdown"}}).then(function(a){return a.data.response}).catch(function(a){return l(a)})},load_recent_signups:function(c,d){d.spam_state=c;return a.get(b.api_root_url+"/users/recent_signups",{params:d}).then(function(a){return a.data.response})},add_role:function(c,
d){return a.put(b.api_root_url+"/users/"+c+"/roles/"+d).then(function(a){return a.data.response}).catch(function(a){return l(a)})},remove_role:function(c,d){return a.delete(b.api_root_url+"/users/"+c+"/roles/"+d).then(function(a){return a.data.response}).catch(function(a){return l(a)})},associate_with_artist:function(c,d){return a.put(b.api_root_url+"/users/"+c+"/artist",d).then(function(a){return a.data.response}).catch(function(a){return l(a)})},dissociate_from_artist:function(c){return a.delete(b.api_root_url+
"/users/"+c+"/artist").then(function(a){return a.data.response}).catch(function(a){return l(a)})},penalty_box:function(c){return a.put(b.api_root_url+"/users/"+c+"/penalty_box").then(function(a){return a.data.response}).catch(function(a){return l(a)})},unpenalty_box:function(c){return a.delete(b.api_root_url+"/users/"+c+"/penalty_box").then(function(a){return a.data.response}).catch(function(a){return l(a)})},update_spam_state:function(c,d){return a.put(b.api_root_url+"/users/"+c+"/spam",d).then(function(a){return a.data.response}).catch(function(a){return l(a)})},
mass_delete_unreviewed_activity:function(c){return a.delete(b.api_root_url+"/users/"+c+"/unreviewed_activity").then(function(a){return a.data.response}).catch(function(a){return l(a)})},delete_votes:function(c,d){return a.delete(b.api_root_url+"/users/"+c+"/"+d).then(function(a){return a.data.response}).catch(function(a){return l(a)})},airbrake_errors:function(c,d){return a.get(b.api_root_url+"/users/"+c+"/airbrake_errors",{params:d}).then(function(a){return a.data.response})},other_users_with_ip:function(c,
d){return a.get(b.api_root_url+"/users/"+c+"/other_users_with_ip",{params:d}).then(function(a){return a.data.response})},get_slug:function(a){return _(this.get_path(a).split("/")).last()},get_path:function(a){return(new URL(a.url)).pathname},activity_line_items:function(c,d){return a.get(b.api_root_url+"/users/"+c+"/activity_stream/line_items",{params:d}).then(function(a){return a.data.response})},spam_status:function(c){return a.get(b.api_root_url+"/users/"+c+"/spam_status").then(function(a){return a.data.response})},
logout:function(){return a.delete("/logout")}};return g}]);angular.module("genius").service("VideoService",["$http","AppConfig",function(d,a){return{index:function(b){return d.get(a.api_root_url+"/videos",{params:b}).then(function(a){return a.data.response})},for_context:function(b){return d.get(a.api_root_url+"/videos/for_context",{params:b}).then(function(a){return a.data.response})}}}]);
angular.module("genius").service("VoteService",["AppConfig","querystring","$http",function(d,a,b){return{load_voters:function(c,l){var g=_.set({},c+"_id",l);return b.get(d.api_root_url+"/voters?"+a.stringify(g)).then(function(a){return a.data.response.voters})},submit_vote:function(a,l,g){a=_.set({direction:g||"middle"},a+"_id",l);return b.post(d.api_root_url+"/votes",a)}}}]);
angular.module("genius").service("wait_for_global",["$q","$window",function(d,a){return function(b,c){c=_.defaults(c||{},{timeout:1E3});return d(function(d,g){var k;setTimeout(function(){clearInterval(k);g(Error("timed out waiting for '"+b+"' to load"))},c.timeout);k=setInterval(function(){var c=_.get(a,b);c&&(clearInterval(k),d(c))},50)})}}]);
!function(){function d(c){if(!c)throw Error("No options passed to Waypoint constructor");if(!c.element)throw Error("No element option passed to Waypoint constructor");if(!c.handler)throw Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+a;this.options=d.Adapter.extend({},d.defaults,c);this.element=this.options.element;this.adapter=new d.Adapter(this.element);this.callback=c.handler;this.axis=this.options.horizontal?"horizontal":"vertical";this.enabled=this.options.enabled;
this.triggerPoint=null;this.group=d.Group.findOrCreate({name:this.options.group,axis:this.axis});this.context=d.Context.findOrCreateByElement(this.options.context);d.offsetAliases[this.options.offset]&&(this.options.offset=d.offsetAliases[this.options.offset]);this.group.add(this);this.context.add(this);b[this.key]=this;a+=1}var a=0,b={};d.prototype.queueTrigger=function(a){this.group.queueTrigger(this,a)};d.prototype.trigger=function(a){this.enabled&&this.callback&&this.callback.apply(this,a)};d.prototype.destroy=
function(){this.context.remove(this);this.group.remove(this);delete b[this.key]};d.prototype.disable=function(){return this.enabled=!1,this};d.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this};d.prototype.next=function(){return this.group.next(this)};d.prototype.previous=function(){return this.group.previous(this)};d.invokeAll=function(a){var d=[],g;for(g in b)d.push(b[g]);g=0;for(var k=d.length;k>g;g++)d[g][a]()};d.destroyAll=function(){d.invokeAll("destroy")};d.disableAll=
function(){d.invokeAll("disable")};d.enableAll=function(){d.invokeAll("enable")};d.refreshAll=function(){d.Context.refreshAll()};d.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight};d.viewportWidth=function(){return document.documentElement.clientWidth};d.adapters=[];d.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0};d.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},
"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}};window.Waypoint=d}();
(function(){function d(a){window.setTimeout(a,1E3/60)}function a(a){this.element=a;this.Adapter=l.Adapter;this.adapter=new this.Adapter(a);this.key="waypoint-context-"+b;this.didResize=this.didScroll=!1;this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()};this.waypoints={vertical:{},horizontal:{}};a.waypointContextKey=this.key;c[a.waypointContextKey]=this;b+=1;this.createThrottledScrollHandler();this.createThrottledResizeHandler()}var b=0,c={},l=window.Waypoint,g=window.onload;
a.prototype.add=function(a){this.waypoints[a.options.horizontal?"horizontal":"vertical"][a.key]=a;this.refresh()};a.prototype.checkEmpty=function(){var a=this.Adapter.isEmptyObject(this.waypoints.horizontal),b=this.Adapter.isEmptyObject(this.waypoints.vertical);a&&b&&(this.adapter.off(".waypoints"),delete c[this.key])};a.prototype.createThrottledResizeHandler=function(){function a(){b.handleResize();b.didResize=!1}var b=this;this.adapter.on("resize.waypoints",function(){b.didResize||(b.didResize=
!0,l.requestAnimationFrame(a))})};a.prototype.createThrottledScrollHandler=function(){function a(){b.handleScroll();b.didScroll=!1}var b=this;this.adapter.on("scroll.waypoints",function(){b.didScroll&&!l.isTouch||(b.didScroll=!0,l.requestAnimationFrame(a))})};a.prototype.handleResize=function(){l.Context.refreshAll()};a.prototype.handleScroll=function(){var a={},b={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),
oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},c;for(c in b){var d=b[c],g=d.newScroll>d.oldScroll?d.forward:d.backward,l;for(l in this.waypoints[c]){var q=this.waypoints[c][l],r=d.oldScroll<q.triggerPoint,t=d.newScroll>=q.triggerPoint,u=!r&&!t;(r&&t||u)&&(q.queueTrigger(g),a[q.group.id]=q.group)}}for(var x in a)a[x].flushTriggers();this.oldScroll={x:b.horizontal.newScroll,y:b.vertical.newScroll}};a.prototype.innerHeight=function(){return this.element==this.element.window?l.viewportHeight():
this.adapter.innerHeight()};a.prototype.remove=function(a){delete this.waypoints[a.axis][a.key];this.checkEmpty()};a.prototype.innerWidth=function(){return this.element==this.element.window?l.viewportWidth():this.adapter.innerWidth()};a.prototype.destroy=function(){var a=[],b;for(b in this.waypoints)for(var c in this.waypoints[b])a.push(this.waypoints[b][c]);b=0;for(c=a.length;c>b;b++)a[b].destroy()};a.prototype.refresh=function(){var a,b=(a=this.element==this.element.window)?void 0:this.adapter.offset(),
c={};this.handleScroll();a={horizontal:{contextOffset:a?0:b.left,contextScroll:a?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:a?0:b.top,contextScroll:a?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var d in a){var b=a[d],g;for(g in this.waypoints[d]){var n,q,r,t=this.waypoints[d][g];r=t.options.offset;
n=t.triggerPoint;q=0;var u=null==n;t.element!==t.element.window&&(q=t.adapter.offset()[b.offsetProp]);"function"==typeof r?r=r.apply(t):"string"==typeof r&&(r=parseFloat(r),-1<t.options.offset.indexOf("%")&&(r=Math.ceil(b.contextDimension*r/100)));t.triggerPoint=q+(b.contextScroll-b.contextOffset)-r;n=n<b.oldScroll;q=t.triggerPoint>=b.oldScroll;r=n&&q;n=!n&&!q;!u&&r?(t.queueTrigger(b.backward),c[t.group.id]=t.group):!u&&n?(t.queueTrigger(b.forward),c[t.group.id]=t.group):u&&b.oldScroll>=t.triggerPoint&&
(t.queueTrigger(b.forward),c[t.group.id]=t.group)}}return l.requestAnimationFrame(function(){for(var a in c)c[a].flushTriggers()}),this};a.findOrCreateByElement=function(b){return a.findByElement(b)||new a(b)};a.refreshAll=function(){for(var a in c)c[a].refresh()};a.findByElement=function(a){return c[a.waypointContextKey]};window.onload=function(){g&&g();a.refreshAll()};l.requestAnimationFrame=function(a){(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||
d).call(window,a)};l.Context=a})();
(function(){function d(a,b){return a.triggerPoint-b.triggerPoint}function a(a,b){return b.triggerPoint-a.triggerPoint}function b(a){this.name=a.name;this.axis=a.axis;this.id=this.name+"-"+this.axis;this.waypoints=[];this.clearTriggerQueues();c[this.axis][this.name]=this}var c={vertical:{},horizontal:{}},l=window.Waypoint;b.prototype.add=function(a){this.waypoints.push(a)};b.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}};b.prototype.flushTriggers=function(){for(var b in this.triggerQueues){var c=
this.triggerQueues[b];c.sort("up"===b||"left"===b?a:d);for(var e=0,f=c.length;f>e;e+=1){var l=c[e];(l.options.continuous||e===c.length-1)&&l.trigger([b])}}this.clearTriggerQueues()};b.prototype.next=function(a){this.waypoints.sort(d);a=l.Adapter.inArray(a,this.waypoints);return a===this.waypoints.length-1?null:this.waypoints[a+1]};b.prototype.previous=function(a){this.waypoints.sort(d);return(a=l.Adapter.inArray(a,this.waypoints))?this.waypoints[a-1]:null};b.prototype.queueTrigger=function(a,b){this.triggerQueues[b].push(a)};
b.prototype.remove=function(a){a=l.Adapter.inArray(a,this.waypoints);-1<a&&this.waypoints.splice(a,1)};b.prototype.first=function(){return this.waypoints[0]};b.prototype.last=function(){return this.waypoints[this.waypoints.length-1]};b.findOrCreate=function(a){return c[a.axis][a.name]||new b(a)};l.Group=b})();
(function(){function d(b){this.$element=a(b)}var a=window.jQuery,b=window.Waypoint;a.each("innerHeight innerWidth off offset on outerHeight outerWidth scrollLeft scrollTop".split(" "),function(a,b){d.prototype[b]=function(){var a=Array.prototype.slice.call(arguments);return this.$element[b].apply(this.$element,a)}});a.each(["extend","inArray","isEmptyObject"],function(b,l){d[l]=a[l]});b.adapters.push({name:"jquery",Adapter:d});b.Adapter=d})();
(function(){function d(b){return function(c,d){var g=[],k=c;return b.isFunction(c)&&(k=b.extend({},d),k.handler=c),this.each(function(){var c=b.extend({},k,{element:this});"string"==typeof c.context&&(c.context=b(this).closest(c.context)[0]);g.push(new a(c))}),g}}var a=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=d(window.jQuery));window.Zepto&&(window.Zepto.fn.waypoint=d(window.Zepto))})();
!function(){function d(c){this.options=a.extend({},b.defaults,d.defaults,c);this.element=this.options.element;this.$element=a(this.element);this.createWrapper();this.createWaypoint()}var a=window.jQuery,b=window.Waypoint;d.prototype.createWaypoint=function(){var c=this.options.handler;this.waypoint=new b(a.extend({},this.options,{element:this.wrapper,handler:a.proxy(function(a){var b=-1<this.options.direction.indexOf(a),d=b?this.$element.outerHeight(!0):"";this.$wrapper.height(d);this.$element.toggleClass(this.options.stuckClass,
b);c&&c.call(this,a)},this)}))};d.prototype.createWrapper=function(){this.options.wrapper&&this.$element.wrap(this.options.wrapper);this.$wrapper=this.$element.parent();this.wrapper=this.$wrapper[0]};d.prototype.destroy=function(){this.$element.parent()[0]===this.wrapper&&(this.waypoint.destroy(),this.$element.removeClass(this.options.stuckClass),this.options.wrapper&&this.$element.unwrap())};d.defaults={wrapper:'<div class="sticky-wrapper" />',stuckClass:"stuck",direction:"down right"};b.Sticky=
d}();angular.module("genius").service("Waypoint",["$window",function(d){return d.Waypoint}]);
angular.module("genius").service("WebAnnotator",["Api",function(d){return{load_web_page:function(a){return d.returning("web_page").get("/web_pages/:id",{id:a})},protect_web_page:function(a){return d.returning("web_page").post("/web_pages/:id/protect",{id:a})},unprotect_web_page:function(a){return d.returning("web_page").post("/web_pages/:id/unprotect",{id:a})},publish_web_page_drafts:function(a){return d.returning("web_page").post("/web_pages/:id/publish_drafts",{id:a})},load_user_roles:function(a,
b){return d.returning("user_web_page_roles").get("/:type/:id/user_roles",{type:a,id:b})},create_user_role:function(a,b,c){return d.returning("user_web_page_role").post("/:type/:id/user_roles",{type:a,id:b,user_web_page_role:c})},update_user_role:function(a,b){return d.returning("user_web_page_role").put("/user_web_page_roles/:id",{id:a,user_web_page_role:b})},destroy_user_role:function(a){return d.delete("/user_web_page_roles/:id",{id:a})}}}]);
angular.module("genius").service("WebAudioPlayback",["$interval","$document","$rootScope",function(d,a,b){var c=function(c){this.emitter=b.$new();this.audio=a[0].createElement("audio");this.audio.src=c.cached_audio_url;d(function(){this.emitter.$emit("state",this.state)}.bind(this),50)};Object.defineProperties(c.prototype,{type:{value:"web_audio"},$on:{value:function(a,b){return this.emitter.$on(a,b)}},src:{get:function(){return this.audio.currentSrc}},duration:{get:function(){return 1E3*this.audio.duration}},
position:{get:function(){return 1E3*this.audio.currentTime}},playing:{get:function(){return!this.audio.paused}},state:{get:function(){return{position:this.position,percentage:this.position/this.duration,time_elapsed:this.position,time_remaining:this.duration-this.position,is_loading:!1,is_playing:this.playing}}},api:{get:function(){var a=this;return{play:function(){a.audio.play()},pause:function(){a.audio.pause()},playpause:function(){a.audio.paused?a.audio.play():a.audio.pause()}.bind(this),seek_to:function(a){this.api.seek_to_position(this.duration*
a)}.bind(this),seek_to_position:function(b){a.audio.currentTime=b/1E3}.bind(this)}}}});return c}]);angular.module("genius").service("ZeroClipboard",["$window",function(d){var a;a="https://assets.genius.com/flash/ZeroClipboard.swf?1479924659".replace("https:",window.location.protocol);ZeroClipboard.config({swfPath:a});return d.ZeroClipboard}]);angular.module("genius").value("currentFlashMessages",[]);angular.module("genius").value("PreloadCache",{});
(function e$$0(a,b,c){function l(e,f){if(!b[e]){if(!a[e]){var k="function"==typeof require&&require;if(!f&&k)return k(e,!0);if(g)return g(e,!0);k=Error("Cannot find module '"+e+"'");throw k.code="MODULE_NOT_FOUND",k;}k=b[e]={exports:{}};a[e][0].call(k.exports,function(b){var c=a[e][1][b];return l(c?c:b)},k,k.exports,e$$0,a,b,c)}return b[e].exports}for(var g="function"==typeof require&&require,k=0;k<c.length;k++)l(c[k]);return l})({1:[function(d,a,b){function c(a){return!0}a.exports=function(a,b){var d=
[];b=b||c;do d.push(a),a=a.parentNode;while(a&&a.tagName&&b(a));return d.slice(1)}},{}],2:[function(d,a,b){function c(a){return!isNaN(parseInt(a))&&isFinite(a)}function l(a,b){if(a===b)return!1;for(var c=null,d=[a].concat(k["default"](a)).reverse(),f=[b].concat(k["default"](b)).reverse();d[0]===f[0];)c=d.shift(),f.shift();d=d[0];f=f[0];d=e["default"](c.childNodes,d);c=e["default"](c.childNodes,f);return d>c}b.__esModule=!0;b["default"]=function(a,b){if(a.whatToShow!==h)throw Error(f);var d=0,e=a.referenceNode,
g=null;if(c(b))g={forward:function(){return d<b},backward:function(){return d>b}};else if(b.nodeType===n)g={forward:l(e,b)?function(){return!1}:function(){return e!==b},backward:function(){return e!=b||!a.pointerBeforeReferenceNode}};else throw Error(m);for(;g.forward()&&null!==(e=a.nextNode());)d+=e.nodeValue.length;for(;g.backward()&&null!==(e=a.previousNode());)d-=e.nodeValue.length;return d};var g=d("ancestors"),k=g&&g.__esModule?g:{"default":g},e=(d=d("index-of"))&&d.__esModule?d:{"default":d},
f="Argument 1 of seek must use filter NodeFilter.SHOW_TEXT.",m="Argument 2 of seek must be a number or a Text Node.",h=4,n=3;a.exports=b["default"]},{ancestors:1,"index-of":4}],3:[function(d,a,b){function c(a){return a&&a.nodeType===g}function l(a){if(c(a))return a;if(c(a.ownerDocument))return a.ownerDocument;if(c(a.document))return a.document;if(a.parentNode)return l(a.parentNode);if(a.commonAncestorContainer)return l(a.commonAncestorContainer);if(a.startContainer)return l(a.startContainer);if(a.anchorNode)return l(a.anchorNode)}
a.exports=l;var g=9},{}],4:[function(d,a,b){a.exports=function(a,b,d){d=d||0;if(null==a)return-1;var k=a.length;d=0>d?k+d:d;if(d>=a.length)return-1;for(;d<k;){if(a[d]===b)return d;d++}return-1}},{}],5:[function(d,a,b){a.exports=d("./lib/xpath")},{"./lib/xpath":7}],6:[function(d,a,b){b.__esModule=!0;d=function l(a,b){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.message=a;this.name=b;this.stack=Error().stack};b["default"]=d;d.prototype=Error();d.prototype.toString=
function(){return this.name+": "+this.message};a.exports=b["default"]},{}],7:[function(d,a,b){function c(a){switch(a.nodeName){case "#text":return"text()";case "#comment":return"comment()";case "#cdata-section":return"cdata-section()";default:return a.nodeName.toLowerCase()}}function l(a,b,d){try{var f=a.replace(/\/(?!\.)([^\/:\(]+)(?=\/|$)/g,"/_default_:$1");return document.evaluate(f,b,d,e,null).singleNodeValue}catch(g){for(a=a.split("/");b;){d=a.shift();if(void 0===d)break;if("."!==d)a:{for(f=
d.split(/[\[\]]/),d=f[0],f=f[1],d=d.replace("_default_:",""),f=f?parseInt(f):1,b=b.firstChild;b;b=b.nextSibling)if(c(b)===d&&0===--f)break a;b=null}}return b}}b.__esModule=!0;b.fromNode=function(a){for(var b=1>=arguments.length||void 0===arguments[1]?document:arguments[1],d="/";a!==b;){if(!a)throw new k["default"]("The supplied node is not contained by the root node.","InvalidNodeTypeError");for(var e="/"+c(a)+"[",f=a,g=f.nodeName,l=1;f=f.previousSibling;)f.nodeName===g&&(l+=1);d=e+l+"]"+d;a=a.parentNode}return d.replace(/\/$/,
"")};b.toNode=function(a){var b=1>=arguments.length||void 0===arguments[1]?document:arguments[1],c=2>=arguments.length||void 0===arguments[2]?null:arguments[2];"function"===typeof b&&(c=b,b=document);b!==document&&(a=a.replace(/^\//,"./"));null===c&&document.lookupNamespaceURI&&function(){var a=g["default"](b).documentElement,d=a.lookupNamespaceURI(null)||f;c=function(b){return{_default_:d}[b]||a.lookupNamespaceURI(b)}}();return l(a,b,c)};var g=(a=d("get-document"))&&a.__esModule?a:{"default":a},
k=(d=d("./dom-exception"))&&d.__esModule?d:{"default":d},e=9,f="http://www.w3.org/1999/xhtml"},{"./dom-exception":6,"get-document":3}],8:[function(d,a,b){a.exports=d("./lib/range")},{"./lib/range":9}],9:[function(d,a,b){b.__esModule=!0;b.fromRange=function(a,b){var c=a.startOffset,d=a.endContainer,k=a.endOffset,l=g.fromNode(a.startContainer,b),d=g.fromNode(d,b);return{start:l,end:d,startOffset:c,endOffset:k}};b.toRange=function(a,b,d,h,n){function q(a){a=Error("The "+a+" node was not found.");a.name=
"NotFoundError";return a}function r(a){a=Error("There is no text at the requested "+a+" offset.");a.name="IndexSizeError";return a}var t=c["default"](n);a=g.toNode(a,n);if(null===a)throw q("start");var u=t.createNodeIterator(a,k);b-=l["default"](u,b);a=u.referenceNode;if(!u.pointerBeforeReferenceNode){if(0<b)throw r("start");b+=a.length}d=g.toNode(d,n);if(null===d)throw q("end");n=t.createNodeIterator(d,k);h-=l["default"](n,h);d=n.referenceNode;if(!n.pointerBeforeReferenceNode){if(0<h)throw r("end");
h+=d.length}t=t.createRange();t.setStart(a,b);t.setEnd(d,h);return t};var c=(a=d("get-document"))&&a.__esModule?a:{"default":a},l=(a=d("dom-seek"))&&a.__esModule?a:{"default":a},g=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b}(d("simple-xpath-position")),k=4},{"dom-seek":2,"get-document":3,"simple-xpath-position":5}],10:[function(d,a,b){window.XpathRange=d("xpath-range")},{"xpath-range":8}]},
{},[10]);angular.module("genius").value("XpathRange",window.XpathRange);
(function(){window["com.genius.Genius"].require.define({"back_page/annotation_loader":function(d,a,b){var c={},l=function(a){_.each(a,function(a){c[a]||(c[a]=$.Deferred())})},g=function(a){var b=_.reject(a,function(a){return c[a]});if(!b.length)return _.pick(c,Array.prototype.slice.apply(a));l(b);$.ajax({url:"/annotations/bulk_standalone",data:{annotation_ids:b},dataType:"json"}).done(function(a){_.each(a,function(a,b){c[b].resolve($(a))})});return _.pick(c,Array.prototype.slice.apply(a))};b.exports=
{load:function(a){g([a]);return c[a]},add_to_cache:function(a,b){l([a]);c[a].resolve(b).promise()},fetch_annotations:g}}})})();
(function(){window["com.genius.Genius"].require.define({"back_page/tracking":function(d,a,b){var c=window.app.tracking,l,g=[],k=$.Deferred();b.exports={is_lyrics:function(){this.is_lyrics=!0},track_page_load:function(a){l=a;l.offsite_lyrics=Boolean(this.is_lyrics);c.start_tracking();c.track("Wrapped Web Page Load",l);k.resolve()},track_annotated_page:function(){k.then(function(){c.track("Annotated Web Page Load",l)})},track_open_annotation:function(a){k.then(function(){var b=a.referent_id;a.from_permalink&&
c.set_annotation_opened_from_permalink(b);c.track("Open Annotation",_.extend({},l,{annotation_id:b}))})},track_engaged_annotation_view:function(a){k.then(function(){var b=a.referent_id;-1===g.indexOf(b)&&(g.push(b),c.track("Engaged Annotation View",_.extend({},l,{annotation_id:b,annotator_login:a.annotator_login,skip_counters:!0})))})},track_filter_change:function(a,b,d){k.then(function(){c.track("Offsite Filter Selection",_.extend({},l,d,{filter_type:a,filter_args:b}))})}}}})})();
(function(){window["com.genius.Genius"].require.define({"back_page/referents":function(d,a,b){var c=[],l={},g,k=!1,e=a("back_page/annotation_loader"),f=a("shared/universal/annotation_filter"),m=a("back_page/tracking"),h=f.ALL,n="all";b.exports={initialize:function(a){this.back_page=a;app.parent_channel.bind("close",this.close.bind(this))},open:function(){k||(k=!0,this.update_referent_offsets().then(function(){app.parent_channel.notify({method:"show_back_page"})}))},close:function(){if(!k||!this.back_page.confirm_no_dirty_fields())return!1;
k=!1;this.close_overlay();g=null;this.update_url_state();app.parent_channel.notify({method:"hide_back_page"});return!0},update_url_state:function(){var a={};h.filter_string!==n&&(a.filter=h.filter_string);g&&(a.annotation_id=g.id);app.parent_channel.notify({method:"update_url_state",params:a})},add:function(a){a.forEach(function(a){var b=l[a.id];b?_.extend(b,a):(a.hidden=!h.test(a),l[a.id]=a,c.push(a))}.bind(this));this.update_referent_offsets()},remove:function(a){c=_.reject(c,function(b){return b.id===
a});delete l[a];app.parent_channel.notify({method:"referent_deleted",params:a});this.back_page.remove_referent(a);g&&g.id===a&&(g=null);c.length?this.ensure_active_referent():this.close()},sort:function(){c=c.sort(function(a,b){if(a.anchor_offset&&b.anchor_offset){var c=a.anchor_offset.top-b.anchor_offset.top;0===c&&(c=a.anchor_offset.left-b.anchor_offset.left);return c}return a.anchor_offset?-1:b.anchor_offset?1:a.id-b.id});this.back_page.update(c)},update_referent_offsets:function(){var a=$.Deferred();
app.parent_channel.call({method:"get_referent_offsets",success:function(b){_.each(b,function(a,b){l[b].anchor_offset=a});this.sort();a.resolve()}.bind(this)});return a.promise()},display:function(a,b){this.open();var c=this.set_active_referent(a,b);this.ensure_current_filter_allows_referent(a);return c},activate:function(a,b){if(k)return this.set_active_referent(a,b)},feature:function(a){l[a].featured=!0;this.apply_filter()},unfeature:function(a){l[a].featured=!1;this.apply_filter()},set_default_filter_string:function(a){n=
a},set_active_referent:function(a,b){g=l[a];this.back_page.activate_referent(a,b);app.parent_channel.notify({method:"activate_referent",params:a});this.update_url_state();var c=e.load(a).then(function(b){this.back_page.hydrate_placeholder(a,b);setTimeout(function(){g&&g.id===a&&m.track_engaged_annotation_view({referent_id:a,annotator_login:g.annotator_login})}.bind(this),1E3)}.bind(this));this.back_page.load_nearby_annotations(a);return c},preload_first_page:function(){var a=_.map(c.slice(0,6),function(a){return a.id});
return this.back_page.load_annotations(a)},ensure_active_referent:function(){g||c.length&&this.set_active_referent(this.back_page.referent_id_in_active_zone()||c[0].id)},filter_by_filter_string:function(a,b){h=new f(a);this.back_page.update_selected_filter(a).done(function(){this.update_url_state()}.bind(this));this.apply_filter();b&&m.track_filter_change(h.filter_type,h.filter_args.join(":"),b)},apply_filter:function(){var a=[],b=[];c.forEach(function(c){c.hidden=!h.test(c);c.hidden?(b.push(c.id),
c===g&&(g=null)):a.push(c.id)});this.back_page.update(c);this.ensure_active_referent();app.parent_channel.notify({method:"update_referent_visibility",params:{visible:a,hidden:b}})},ensure_current_filter_allows_referent:function(a){a=l[a];h.test(a)||this.filter_by_filter_string("annotator:"+a.annotator_login,{reason:"Annotation Permalink"})},close_overlay:function(){if(!this.back_page.confirm_no_dirty_fields())return!1;k&&this.ensure_active_referent();this.back_page.close_overlay();return!0},load_drafts:function(a){$.get(a).then(function(a){app.parent_channel.notify({method:"draft_referents_loaded",
params:{referents:a}})})}}}})})();
(function(){window["com.genius.Genius"].require.define({"back_page/back_page":function(d,a,b){var c=a("back_page/annotation_loader"),l=$(window).height(),g=.35*l,k=$(window).width()/2,e,f=_.memoize(function(){var a=$(".back_page-filter_menu")[0];return a?a.getBoundingClientRect().bottom:45}),m=$.Deferred(),h={referents:a("back_page/referents"),initialize:function(){this.referents.initialize(this);window.onbeforeunload=function(){if($("textarea:focus, textarea.dirty").length)return n};$(document).on("click",
".back_page-close_button",function(){h.referents.close()});$(document).on("click",".overlay_close_button",function(){(!$(".annotations_for_back_page").contents().length||Modernizr.touch?h.referents.close():h.referents.close_overlay())&&app.parent_channel.notify({method:"reset_referent_in_progress"})});if(!Modernizr.touch)$(document).on("scroll",function(){t();r()});$(document).on("click",".referent_content",function(){h.referents.activate($(this).closest(".annotation_container").attr("data-genius-referent-id"));
return!1});$(".back_page-filter_menu").length?m.resolve():$(function(){$(".back_page-filter_menu_container").on("auto_load_url:loaded",m.resolve.bind(m))});$(document).on("click",".filter_menu-filter",function(){var a=$(this).attr("data-filter");h.referents.filter_by_filter_string(a,{reason:"Menu Selection"})});$(document).on("click",".annotations_for_back_page .annotation_container",function(){h.referents.activate($(this).attr("data-genius-referent-id"))});$(document).on("click","html, .annotations_for_back_page",
function(a){$(a.target).is($(this))&&$(document.body).is(".cont-web_pages.act-back_page")&&h.referents.close()});$(document).on("annotation:deleted",".annotation_unit",function(){var a=Number($(this).closest("[data-genius-referent-id]").attr("data-genius-referent-id"));h.referents.remove(a);return!1});$(document).on("annotation:featured",".annotation_unit",function(){var a=Number($(this).closest("[data-genius-referent-id]").attr("data-genius-referent-id"));h.referents.feature(a);return!1});$(document).on("annotation:unfeatured",
".annotation_unit",function(){var a=Number($(this).closest("[data-genius-referent-id]").attr("data-genius-referent-id"));h.referents.unfeature(a);return!1})},activate_referent:function(a,b){b=b||{};var c=$('[data-genius-referent-id="'+a+'"]');c.length&&(c.addClass("active").siblings().removeClass("active"),void 0===b.align_with_vertical_offset||Modernizr.touch||u(c,b.align_with_vertical_offset))},update_selected_filter:function(a){var b=$.Deferred();m.done(function(){var c=$('.filter_menu-filter[data-filter="'+
a+'"]');b.resolve();c.addClass("filter_menu-filter--selected");$(".filter_menu-filter--selected").not(c).removeClass("filter_menu-filter--selected");$(".filter_menu-selected_filter").html(c.html()).find(".filter_menu-filter-annotation_count").remove();$(".filter_menu-list").removeClass("filter_menu--open")});return b.promise()},hydrate_placeholder:function(a,b){var c=$('.referent_placeholder[data-genius-referent-id="'+a+'"]');c.length&&$(document).retainingScrollPosition($(".annotation_container.active"),
function(){b.toggleClass("anchorless",c.hasClass("anchorless"));b.toggleClass("active",c.hasClass("active"));b.toggleClass("annotation_container--hidden",c.hasClass("annotation_container--hidden"));c.replaceWith(b);app.setup_embedded_annotation(b);!Modernizr.touch&&b.nextAll(".active").length&&0>b[0].getBoundingClientRect().top&&b.addClass("annotation_container--fixed_placeholder_height")})},load_annotations:function(a){$.each(c.fetch_annotations(a),function(a,b){b.done(function(b){h.hydrate_placeholder(a,
b)})})},load_nearby_annotations:_.debounce(function(a){a=$('[data-genius-referent-id="'+a+'"]');var b=[];a.is(".referent_placeholder")&&b.push(a.attr("data-genius-referent-id"));a.prevAll(":visible").slice(0,2).filter(".referent_placeholder").each(function(a,c){b.push($(c).attr("data-genius-referent-id"))});a.nextAll(":visible").slice(0,4).filter(".referent_placeholder").each(function(a,c){b.push($(c).attr("data-genius-referent-id"))});b.length&&this.load_annotations(b)},500),remove_referent:function(a){a=
$('[data-genius-referent-id="'+a+'"]');a.slideUp("fast",a.remove.bind(a))},update:function(a){$(function(){var b=$("#annotations"),c=b.children().filter(".active"),d={};b.children().each(function(){var a=$(this);d[a.attr("data-genius-referent-id")]=a});a.forEach(function(a,c){var e=d[a.id];e||(e=$("<div class='referent_placeholder' data-genius-referent-id='"+a.id+"'><em class='referent_content-loading_text'>Loading:</em> <span class='referent_content-referent'>"+a.fragment+"</span></div>\n").appendTo(b));
e.index()!==c&&(e.find("iframe").cache_iframe_contents(),0===c?b.prepend(e.detach()):b.children().eq(c-1).after(e.detach()));e.toggleClass("anchorless",!a.anchor_offset);e.toggleClass("annotation_container--hidden",a.hidden)});c.is(":visible")&&(u(c),this.load_nearby_annotations(Number(c.attr("data-genius-referent-id"))))}.bind(this))},populate_overlay:function(a){$("#back_page_overlay").addClass("active").find(".contents").html(a)},close_overlay:function(){$("#back_page_overlay").removeClass("active")},
referent_id_in_active_zone:function(){var a=q(k,g);if(a.length)return Number(a.attr("data-genius-referent-id"))},confirm_no_dirty_fields:function(){return $("textarea.dirty").length?confirm(n)?($("textarea.dirty").trigger("dirtyable:changed",!1),!0):!1:!0}},n="Looks like you're in the middle of something. Do you want to leave without finishing?",q=function(a,b){return $(document.elementFromPoint(a,b)).closest(".annotation_container:not(.active), .referent_placeholder:not(.active)")},r=_.throttle(function(){$(document).retainingScrollPosition($(".annotation_container.active, .referent_placeholder.active"),
function(){var a=q(k,f()+1);a.add(a.nextAll(".annotation_container--fixed_placeholder_height")).removeClass("annotation_container--fixed_placeholder_height")})},100),t=_.throttle(function(){if(e)e=!1;else{var a=h.referent_id_in_active_zone();a&&h.referents.activate(a);a=$(document).scrollTop();50>$("body").prop("scrollHeight")-(l+a)&&h.referents.activate($("[data-genius-referent-id]:visible:last").attr("data-genius-referent-id"));50>a&&h.referents.activate($("[data-genius-referent-id]:visible:first").attr("data-genius-referent-id"))}},
100),u=function(a,b){b=b||0;e=!0;var c=f(),d=window.innerHeight-a.outerHeight(),c=Math.max(c,Math.min(d,b-250));$(window).scrollTop(a.offset().top-c)};b.exports=h}})})();(function(){window["com.genius.Genius"].require.define({"back_page/show_signup_prompt":function(d,a,b){var c=a("back_page/back_page");b.exports=function(){app.set_desired_location_cookie({fallback:$(".embedded_annotation").attr("data-path")});$.cookie("attempted_offsite_signup",!0,{path:"/",expires:1});c.populate_overlay($($("#new_user_session").text()))}}})})();
(function(){window.app=window.app||{};var d=require("back_page/show_signup_prompt"),a=require("shared/universal/tweet_composer");$.extend(window.app,{on_ajax_complete:function(){app.set_up_timeago()},on_ajax_error:function(){}});var b=function(){$(".show_credits").on("click",function(){var a=$(this),b=$(a.toggleClass("pressed").attr("data-target"));b.toggle();b.hasClass("loading")&&$.ajax_with_retry({url:"/annotations/full_credits",data:{annotation_id:b.attr("data-id")},success:function(a){b.html(a).removeClass("loading")}})})};
app.setup_embedded_annotation=function(b){b.length&&(app.setup_embedly(b),app.set_up_mentions_autocomplete(),app.set_up_timeago(),app.load_vidyard_players(),app.pusher=app.angular_inject_get__deprecated("Pusher").pusher,CURRENT_USER&&app.pusher().subscribe(b.attr("data-pusher-channel")).bind("referent-image-changed",function(a){b.find(".compose_tweet_wrapper .loading_with_indicator").replaceWith($("<img>",{src:a}))}),window.chrome&&WRAP_GENIUS_HOST===(new URL(document.referrer)).hostname&&$(".extension_link").css("display",
"block"),b.find(".annotation_unit").each(function(){var b=$(this);b.find(".twitter_button.tweet_composer").length&&new a(b)}))};app.set_up_embedded_annotations=function(){b();app.setup_zeroclipboard();app.set_up_disable_annotation_draft_status_button();$(document).on("click","a:not([target])",function(){$(this).attr("target","_blank");return!0});$(document).on("click",".current_user_is_anonymous .requires_user",function(){d();return!1});$(document).on("click",".delete_annotation",function(){if(!confirm("Are you sure?"))return!1;
var a=$(this),b=a.closest(".annotation_unit");app.delete_annotation(a.attr("href"));a=$.Event("annotation:deleted");b.trigger(a);a.isDefaultPrevented()||(b.siblings(".annotation_unit").length?b.remove():b.closest(".annotation_container").slideUp("fast"));return!1})};$(window).on("keydown",function(a){$(a.target).acts_like_input()||app.parent_channel.notify({method:"window_keydown",params:a.which})});$(function(){app.set_up_embedded_annotations();app.process_auto_load_containers()})})();
window.app=window.app||{};
$.extend(window.app,{set_up_mentions_autocomplete:function(){$("textarea[data-mentions-autocomplete]").each(function(){var d=$(this),a=!1;d.atwho({at:"@",data:JSON.parse(d.attr("data-mentions-seed-data")||"[]"),displayTpl:'<li data-value="${value}">${name}</li>',insertTpl:"@${value}",callbacks:{sorter:function(b,c,d){return a?(a=!1,c):$.fn.atwho.default.callbacks.sorter(b,c,d)},remoteFilter:function(){var b=null,c={};return function(d,g){b&&b.abort();d=d||"";if(!(1>d.length||" "===d[0]))if(d in c)a=
!0,g(c[d]);else{var k=this;$.doTimeout("mentions_autocomplete",200,function(){b=$.ajax({url:k.$inputor.attr("data-mentions-autocomplete-url"),dataType:"json",data:{q:d},success:function(b){a=!0;c[d]=b;g(b)}})})}}}()}})})}});
Backbone.View.attach(".voting_links",{events:{"click a.vote":"on_click_vote_button","click .votes_total":"toggle_voters_panel"},initialize:function(){var d=this;d.$vote_total=d.$el.find(".votes_total");d.$vote_total.on("qtip:beforeContentUpdate",function(a,b){var c=$(b).attr("data-votes-total");c&&d.update_vote_total(parseInt(c,10))})},on_click_vote_button:function(d){var a=$(d.target);(CURRENT_USER||"up"===a.attr("data-direction"))&&this.submit_vote(a);d.preventDefault()},toggle_voters_panel:function(d){d=
$(d.target);if(d.closest(".embedded_annotation").length){d=d.attr("tooltip__deprecated");var a=this.$el.attr("data-voteable-id"),b=$(".votes_for_"+a);b.toggle();b.is(":visible")&&(b.text("Loading..."),$.ajax_with_retry({type:"GET",url:d,success:function(a){b.html(a)}}));return!1}},submit_vote:function(d){var a=d.hasClass("toggled")?"middle":d.attr("data-direction"),b=this.$el.clone();this.increment_vote_count_by(this.voting_delta_for(d));d.toggleClass("toggled").siblings(".vote").removeClass("toggled");
$.ajax({type:"POST",url:d.data("href"),data:{direction:a},alert_on_error:!1}).done(function(a){this.$el.replaceWith(a)}.bind(this)).error(function(){this.$el.replaceWith(b)}.bind(this))},voting_delta_for:function(d){var a="up"===d.attr("data-direction")?1:-1;d.hasClass("toggled")?a*=-1:d.siblings(".vote").hasClass("toggled")&&(a*=2);return a},increment_vote_count_by:function(d){var a=parseInt(this.$vote_total.text(),10);this.update_vote_total(a+d)},update_vote_total:function(d){var a,b;0>d?(b="downvote",
a=d.toString()):(a="+"+d,b=0<d?"upvote":"neutral");this.$vote_total.removeClass("downvote upvote no_votes neutral").addClass(b).text(a)}});Backbone.View.attach(".comment_unit",{events:{"click .destroy_comment":function(d){this.destroy_comment($(d.target));return!1}},destroy_comment:function(d){app.ajaxQueue.add({type:"post",url:d.attr("href"),data:{_method:"delete"}});d.parents(".comment_unit").slideUp("fast",this.notify_resize.bind(this))},notify_resize:function(){this.$el.trigger("genius:resized")}});
Backbone.View.attach(".comment_section",{events:{"submit form.comment":function(d){this.submit_comment($(d.target));return!1}},initialize:function(){this.ANIMATION_SPEED=150;this.ANIMATION_END_EVENT="animationend webkitAnimationEnd";this.$comment_container=this.$el.find(".comment_container");app.setup_embedly(this.$comment_container);this.set_up_show_all_comments();this.set_up_show_needs_improvement();this.set_up_animation_handlers()},set_up_animation_handlers:function(){this.$comment_container.on(this.ANIMATION_END_EVENT,
".comment_unit",function(){$(this).removeClass("comment_unit--new")})},set_up_show_all_comments:function(){this.$comment_container.on("click",".show_all_comments",function(){$(this).addClass("pressed").siblings(".comment_unit").show();app.setup_embedly();return!1})},set_up_show_needs_improvement:function(){var d=this.$el.find(".reasons");this.$el.parents(".annotation_unit").on("click","[data-show-needs-improvement]",function(){d.slideDown(this.ANIMATION_SPEED)})},render_new_comment:function(d){var a=
Hogan.compile($("#new_comment_template").html());return d.allows_reason?$(a.render(d)).hide().prependTo(this.$comment_container).slideDown(this.ANIMATION_SPEED):$(a.render(d)).appendTo(this.$comment_container)},render_post_comment_message:function(d,a,b){d.remove();d=$($("#post_comment_message").html());this.$comment_container.append(d);d.find("[name='user[login]']").val(a);d.find("[name='user[email]']").val(b);d.find("#user_password").focus()},submit_comment:function(d){var a=d.validate({rules:{"comment[body]":{maxlength:5E4,
required:{depends:function(){var a=d.find('input[name="comment[reason]"]:checked');return!a.length||"other"===a.val()}}},"comment[name]":{maxlength:255}},messages:{"comment[body]":{maxlength:"Your comment is too long."},"comment[name]":{maxlength:"Your name is too long."}}});if(a.form()){var b="new_comment_"+(new Date).getTime();d.submitWithAjaxQueue({complete:function(a){CURRENT_USER&&$("#"+b).find("a.destroy_comment").attr("href","/comments/"+a.responseText).removeClass("loading");this.notify_resize()}.bind(this)});
var c=d.find("[name='comment[reason]']:checked"),a=d.find("[name='comment[name]']").val(),l=d.find("[name='comment[email]']").val(),g=c.data("is-other")?null:c.val(),k=c.data("inline-reason"),e=d.find("[name='allows_reason']").length,f=c.data("reason-context-url"),c=d.find("[name='comment[body]']").val(),g=this.render_new_comment({identifier:b,name:a,reason:g,inline_reason:k,allows_reason:e,reason_context_url:f,body:"",timestamp:(new Date).toISOString()});app.markdown_to_html(c,g.find(".body"),function(a){$(a).find("a").attr("target",
"_blank")});this.reset_interface(d);this.notify_resize();window.top!==window||CURRENT_USER||this.render_post_comment_message(d,a,l);window._gaq&&_gaq.push(["_trackEvent","Comments","Create comment"])}else a.showErrors(),this.notify_resize()},reset_interface:function(d){var a=d.find('input[name="comment[reason]"]:checked');d=d.find('textarea[name="comment[body]"]');a.prop("checked",!1);d.val("")},notify_resize:function(){this.$el.trigger("genius:resized")}});"use strict";
(function(){var d=function(){var a={},c=function(c,d,k){c=c.split(".");for(var e=0;e<c.length-1;e++)k[c[e]]||(k[c[e]]={}),k=k[c[e]];k[c[e]]="function"===typeof d?d.isClass?d:function(){return d.apply(a,arguments)}:d};return{extend:function(d,g,k){"function"===typeof d&&(k=g,g=d,d="");d&&(d+=".");g=g.call(a);for(var e in g){var f=d+e,m=g[e],h=k;c(f,m,a);h&&c(f,m,window.filepicker)}},internal:function(c){c.apply(a,arguments)}}}();if(window.filepicker)for(var a in d)window.filepicker[a]=d[a];else window.filepicker=
d})();"use strict";
filepicker.extend("comm",function(){var d=this,a=function(a){if(a.origin===d.urls.BASE||a.origin===d.urls.DIALOG_BASE)a=d.json.parse(a.data),d.handlers.run(a)},b=!1,c=function(){if(!b)if(b=!0,window.addEventListener)window.addEventListener("message",a,!1);else if(window.attachEvent)window.attachEvent("onmessage",a);else throw new d.FilepickerException("Unsupported browser");};return{openChannel:function(){if(void 0===window.frames.filepicker_comm_iframe){c();var a;a=document.createElement("iframe");a.id=
a.name="filepicker_comm_iframe";a.src=d.urls.COMM;a.style.display="none";document.body.appendChild(a)}void 0===window.frames.fpapi_comm_iframe&&(c(),a=document.createElement("iframe"),a.id=a.name="fpapi_comm_iframe",a.src=d.urls.API_COMM,a.style.display="none",document.body.appendChild(a))},closeChannel:function(){if(window.removeEventListener)window.removeEventListener("message",a,!1);else if(window.attachEvent)window.detachEvent("onmessage",a);else throw new d.FilepickerException("Unsupported browser");
if(b){b=!1;for(var c=document.getElementsByName("filepicker_comm_iframe"),g=0;g<c.length;g++)c[g].parentNode.removeChild(c[g]);try{delete window.frames.filepicker_comm_iframe}catch(k){}c=document.getElementsByName("fpapi_comm_iframe");for(g=0;g<c.length;g++)c[g].parentNode.removeChild(c[g]);try{delete window.frames.fpapi_comm_iframe}catch(k){}}}}});"use strict";
filepicker.extend("comm_fallback",function(){var d=this,a="",b=function(){c()},c=function(){if(void 0===window.frames.host_comm_iframe){var b;b=document.createElement("iframe");b.id=b.name="host_comm_iframe";a=b.src=d.urls.constructHostCommFallback();b.style.display="none";var c=function(){a=b.contentWindow.location.href;if(void 0===window.frames.filepicker_comm_iframe){var c;c=document.createElement("iframe");c.id=c.name="filepicker_comm_iframe";c.src=d.urls.FP_COMM_FALLBACK+"?host_url="+encodeURIComponent(a);
c.style.display="none";document.body.appendChild(c)}l||(l=!0,g=window.setInterval(e,200))};b.attachEvent?b.attachEvent("onload",c):b.onload=c;document.body.appendChild(b)}},l=!1,g,k="",e=function(){var a=window.frames.filepicker_comm_iframe;if(a&&(a=a.frames.host_comm_iframe)&&((a=a.location.hash)&&"#"===a.charAt(0)&&(a=a.substr(1)),a!==k&&(k=a))){var b;try{b=d.json.parse(a)}catch(c){}b&&d.handlers.run(b)}},f=function(){window.clearInterval(g);if(l){l=!1;for(var a=document.getElementsByName("filepicker_comm_iframe"),
b=0;b<a.length;b++)a[b].parentNode.removeChild(a[b]);try{delete window.frames.filepicker_comm_iframe}catch(c){}a=document.getElementsByName("host_comm_iframe");for(b=0;b<a.length;b++)a[b].parentNode.removeChild(a[b]);try{delete window.frames.host_comm_iframe}catch(c){}}},m=!("postMessage"in window);m&&(d.comm={openChannel:b,closeChannel:f});return{openChannel:b,closeChannel:f,isEnabled:m}});"use strict";
filepicker.extend("cookies",function(){var d=this,a=function(a){return function(c){"ThirdPartyCookies"===c.type&&(d.cookies.THIRD_PARTY_COOKIES=!!c.payload,a&&"function"===typeof a&&a(!!c.payload))}};return{checkThirdParty:function(b){b=a(b);d.handlers.attach("cookies",b);d.comm.openChannel()}}});"use strict";
filepicker.extend("handlers",function(){var d={};return{attach:function(a,b){d.hasOwnProperty(a)?d[a].push(b):d[a]=[b];return b},detach:function(a,b){var c=d[a];if(c)if(b){for(var l=0;l<c.length;l++)if(c[l]===b){c.splice(l,1);break}0===c.length&&delete d[a]}else delete d[a]},run:function(a){var b=a.id;if(d.hasOwnProperty(b)){for(var b=d[b],c=0;c<b.length;c++)b[c](a);return!0}return!1}}});"use strict";
filepicker.extend("exporter",function(){var d=this,a=function(a){if(a.mimetype&&a.extension)throw d.FilepickerException("Error: Cannot pass in both mimetype and extension parameters to the export function");a.services&&!d.util.isArray(a.services)?a.services=[a.services]:a.service&&(a.services=[a.service]);if(a.services)for(var b=0;b<a.services.length;b++){var c=(""+a.services[b]).replace(" ",""),e=d.services[c];a.services[b]=void 0===e?c:e}a.openTo&&(a.openTo=d.services[a.openTo]||a.openTo);d.util.setDefault(a,
"container",d.browser.openInModal()?"modal":"window")},b=function(a,b){return function(c){if("filepickerUrl"===c.type){if(c.error)d.util.console.error(c.error),b(d.errors.FPError(132));else{var e={};e.url=c.payload.url;e.filename=c.payload.data.filename;e.mimetype=c.payload.data.type;e.size=c.payload.data.size;e.client=c.payload.data.client;e.isWriteable=!0;a(e)}d.modal.close()}}},c=function(l,g,k,e){a(g);var f={close:function(){d.modal.close()}};if(g.debug)return setTimeout(function(){k({id:1,url:"https://www.filepicker.io/api/file/-nBq2onTSemLBxlcBWn1",
filename:"test.png",mimetype:"image/png",size:58979,client:"computer"})},1),f;if(void 0===d.cookies.THIRD_PARTY_COOKIES){var m=!1;d.cookies.checkThirdParty(function(){m||(c(l,g,k,e),m=!0)});return f}var h=d.util.getId(),n=!1;d.window.open(g.container,d.urls.constructExportUrl(l,g,h),function(){n||(n=!0,e(d.errors.FPError(131)))});d.handlers.attach(h,b(function(a){n=!0;k(a)},function(a){n=!0;e(a)}));return f};return{createExporter:c}});"use strict";
filepicker.extend("modal",function(){function d(){var b=a();b&&(b.style.overflow=l)}function a(){try{return document.getElementsByTagName("html")[0]}catch(a){return null}}var b=this,c=a();if(c)var l=c.style.overflow;var g=function(a){var b=document.createElement("div");b.className="fp__close";var c=document.createElement("a");c.appendChild(document.createTextNode("X"));b.appendChild(c);c.onclick=k(a);document.onkeydown=function(b){b=b||window.event;27===b.keyCode&&k(a)()};return b},k=function(a,c){c=
!!c;return function(){if(!b.uploading||c||window.confirm('You are currently uploading. If you choose "OK", the window will close and your upload will not finish. Do you want to stop uploading and close the window?')){b.uploading=!1;document.onkeydown=null;d();var g=document.getElementById("filepicker_shade");g&&document.body.removeChild(g);(g=document.getElementById("filepicker_dialog_container"))&&document.body.removeChild(g);try{delete window.frames[b.window.WINDOW_NAME]}catch(h){}a&&a()}}};return{generate:function(c,
d){var l=document.head||document.getElementsByTagName("head")[0],h=document.createElement("style");h.type="text/css";h.styleSheet?h.styleSheet.cssText=".fp__overlay {top: 0;right: 0;bottom: 0;left: 0;z-index: 1000;background: rgba(0, 0, 0, 0.8);}.fp__close {top: 104px; right: 108px; width: 35px; height: 35px; z-index: 20; cursor: pointer}@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__close {top: 15px; right: 12px;}}.fp__close a {text-indent: -9999px; overflow: hidden; display: block; width: 100%; height: 100%; background: url(https://d1zyh3sbxittvg.cloudfront.net/close.png) 50% 50% no-repeat;}.fp__close a:hover {background-color: rgba(0,0,0, .02); opacity: .8;}@media screen and (max-width: 768px), screen and (max-height: 500px) {top: 14px; right: 14px;}.fp__copy {display: none;}.fp__container {-webkit-overflow-scrolling: touch; overflow: hidden; min-height: 300px; top: 100px;right: 100px;bottom: 100px;left: 100px;background: #eee; box-sizing:content-box; -webkit-box-sizing:content-box; -moz-box-sizing:content-box;}@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__copy {bottom: 0; left: 0; right: 0; height: 20px; background: #333;}}@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__copy a {margin-left: 5px;}}@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__container {top: 0;right: 0;bottom: 0;left: 0;}}.fp__overlay, .fp__close, .fp__copy, .fp__container {position: fixed;}":
h.appendChild(document.createTextNode(".fp__overlay {top: 0;right: 0;bottom: 0;left: 0;z-index: 1000;background: rgba(0, 0, 0, 0.8);}.fp__close {top: 104px; right: 108px; width: 35px; height: 35px; z-index: 20; cursor: pointer}@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__close {top: 15px; right: 12px;}}.fp__close a {text-indent: -9999px; overflow: hidden; display: block; width: 100%; height: 100%; background: url(https://d1zyh3sbxittvg.cloudfront.net/close.png) 50% 50% no-repeat;}.fp__close a:hover {background-color: rgba(0,0,0, .02); opacity: .8;}@media screen and (max-width: 768px), screen and (max-height: 500px) {top: 14px; right: 14px;}.fp__copy {display: none;}.fp__container {-webkit-overflow-scrolling: touch; overflow: hidden; min-height: 300px; top: 100px;right: 100px;bottom: 100px;left: 100px;background: #eee; box-sizing:content-box; -webkit-box-sizing:content-box; -moz-box-sizing:content-box;}@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__copy {bottom: 0; left: 0; right: 0; height: 20px; background: #333;}}@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__copy a {margin-left: 5px;}}@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__container {top: 0;right: 0;bottom: 0;left: 0;}}.fp__overlay, .fp__close, .fp__copy, .fp__container {position: fixed;}"));
l.appendChild(h);h=document.createElement("div");h.id="filepicker_shade";h.className="fp__overlay";h.onclick=k(d);var n=document.createElement("div");n.id="filepicker_dialog_container";n.className="fp__container";var q=g(d),l=document.createElement("iframe");l.name=b.window.WINDOW_NAME;l.id=b.window.WINDOW_NAME;l.style.width="100%";l.style.height="100%";l.style.border="none";l.style.position="relative";l.setAttribute("border",0);l.setAttribute("frameborder",0);l.setAttribute("frameBorder",0);l.setAttribute("marginwidth",
0);l.setAttribute("marginheight",0);l.src=c;n.appendChild(l);h.appendChild(q);h.appendChild(n);document.body.appendChild(h);if(h=a())h.style.overflow="hidden";return l},close:k(function(){}),hide:function(){var a=document.getElementById("filepicker_shade");a&&(a.hidden=!0);if(a=document.getElementById("filepicker_dialog_container"))a.hidden=!0;d()}}});"use strict";
filepicker.extend("picker",function(){function d(b,c){if("filepickerProgress"===b.type)a.uploading=!0,c&&c(b.payload.data);else if("notUploading"===b.type)a.uploading=!1;else if("closeModal"===b.type)a.modal.close();else if("hideModal"===b.type)a.modal.hide();else if("filepickerUrl"===b.type||"serverHttpError"===b.type)return!1;return!0}var a=this,b=function(b){var c=function(c,d,e){b[d]?a.util.isArray(b[d])||(b[d]=[b[d]]):b[c]?b[d]=[b[c]]:e&&(b[d]=e)};c("service","services");c("mimetype","mimetypes");
c("extension","extensions");if(b.services)for(c=0;c<b.services.length;c++){var d=(""+b.services[c]).replace(" ","");void 0!==a.services[d]&&(d=a.services[d]);b.services[c]=d}if(b.mimetypes&&b.extensions)throw a.FilepickerException("Error: Cannot pass in both mimetype and extension parameters to the pick function");b.mimetypes||b.extensions||(b.mimetypes=["*/*"]);b.openTo&&(b.openTo=a.services[b.openTo]||b.openTo);a.util.setDefault(b,"container",a.browser.openInModal()?"modal":"window")},c=function(b,
c,f){return function(g){d(g,f)||(a.uploading=!1,g.error?(a.util.console.error(g.error),g.error.code?c(a.errors.FPError(g.error.code)):(c(a.errors.FPError(102)),a.modal.close())):(g=e(g.payload),b(g),a.modal.close()))}},l=function(b,c,e){return function(f){d(f,e)||(a.uploading=!1,f.error?(a.util.console.error(f.error),c(a.errors.FPError(102))):(f.payload.data.url=f.payload.url,b(f.payload.data)),a.modal.close())}},g=function(b){b=b||function(){};return function(c){"uploading"===c.type&&(a.uploading=
!!c.payload,b(a.uploading))}},k=function(a,b,c){a[c]&&(b[c]=a[c])},e=function(a){var b={},c=a.url;c&&c.url&&(c=c.url);b.url=c;a=a.url.data||a.data;b.filename=a.filename;b.mimetype=a.type;b.size=a.size;void 0!==a.cropped&&(b.cropped=a.cropped);void 0!==a.rotated&&(b.rotated=a.rotated);void 0!==a.converted&&(b.converted=a.converted);k(a,b,"id");k(a,b,"key");k(a,b,"container");k(a,b,"path");k(a,b,"client");b.isWriteable=!0;return b},f=function(b,c,f){return function(g){if(!d(g,f)){a.uploading=!1;if(g.error)a.util.console.error(g.error),
c(a.errors.FPError(102));else{var k=[];a.util.isArray(g.payload)||(g.payload=[g.payload]);for(var l=0;l<g.payload.length;l++){var m=e(g.payload[l]);k.push(m)}b(k)}a.modal.close()}}},m=function(d,e,k,r,t,u,x){b(d);var w={close:function(){a.modal.close()}};if(d.debug){var v={id:1,url:"https://www.filepicker.io/api/file/-nBq2onTSemLBxlcBWn1",filename:"test.png",mimetype:"image/png",size:58979,client:"computer"},C;C=r||d.storeLocation?[v,v,v]:v;setTimeout(function(){e(C)},1);return w}if(void 0===a.cookies.THIRD_PARTY_COOKIES){var E=
!1;a.cookies.checkThirdParty(function(){E||(m(d,e,k,!!r,t,u),E=!0)});return w}var v=a.util.getId(),y=!1,B=function(a){"window"===d.container&&(window.onbeforeunload=null);y=!0;e(a)},D=function(a){y=!0;k(a)};x?(x=a.urls.constructConvertUrl(d,v),B=c(B,D,u)):r?(x=a.urls.constructPickUrl(d,v,!0),B=f(B,D,u)):t?(x=a.urls.constructPickFolderUrl(d,v),B=l(B,D,u)):(x=a.urls.constructPickUrl(d,v,!1),B=c(B,D,u));a.window.open(d.container,x,function(){y||(y=!0,k(a.errors.FPError(101)))});a.handlers.attach(v,B);
var F=v+"-upload";a.handlers.attach(F,g(function(){a.handlers.detach(F)}));return w};return{createPicker:m}});"use strict";
filepicker.extend("window",function(){var d=this;return{open:function(a,b,c){c=c||function(){};!a&&d.browser.openInModal()?a="modal":a||(a="window");if("window"===a){a="filepicker_dialog"+d.util.getId();window.onbeforeunload=function(){return"Filepicker upload does not complete."};var l=window.open(b,a,"left=100,top=100,height=600,width=800,menubar=no,toolbar=no,location=no,personalbar=no,status=no,resizable=yes,scrollbars=yes,dependent=yes,dialog=yes");l||(window.onbeforeunload=null,window.alert("Please disable your popup blocker to upload files."));
var g=window.setInterval(function(){if(!l||l.closed)window.onbeforeunload=null,window.clearInterval(g),c()},100)}else if("modal"===a)d.modal.generate(b,c);else{var k=document.getElementById(a);if(!k)throw new d.FilepickerException('Container "'+a+'" not found. This should either be set to "window","modal", or the ID of an iframe that is currently in the document.');k.src=b}},WINDOW_NAME:"filepicker_dialog"}});"use strict";
filepicker.extend("conversions",function(){var d=this,a={align:"string",blurAmount:"number",crop:"string or array",crop_first:"boolean",compress:"boolean",exif:"string or boolean",filter:"string",fit:"string",format:"string",height:"number",policy:"string",quality:"number",page:"number",rotate:"string or number",secure:"boolean",sharpenAmount:"number",signature:"string",storeAccess:"string",storeContainer:"string",storeRegion:"string",storeLocation:"string",storePath:"string",text:"string",text_align:"string",
text_color:"string",text_font:"string",text_padding:"number",text_size:"number",watermark:"string",watermark_position:"string",watermark_size:"number",width:"number"},b={w:"width",h:"height"},c=function(b){var c,k;for(k in b){c=!1;for(var e in a)if(k===e&&(c=!0,-1===a[e].indexOf(d.util.typeOf(b[k]))))throw new d.FilepickerException("Conversion parameter "+k+" is not the right type: "+b[k]+". Should be a "+a[e]);if(!c)throw new d.FilepickerException("Conversion parameter "+k+" is not a valid parameter.");
}};return{convert:function(a,b,k,e,f){c(b);b.crop&&d.util.isArray(b.crop)&&(b.crop=b.crop.join(","));d.ajax.post(a+"/convert",{data:b,json:!0,success:function(a){k(d.util.standardizeFPFile(a))},error:function(a,b,c){"not_found"===a?e(new d.errors.FPError(141)):"bad_params"===a?e(new d.errors.FPError(142)):"not_authorized"===a?e(new d.errors.FPError(403)):e(new d.errors.FPError(143))},progress:f})},mapRestParams:function(c){var d={},k;for(k in c)d[b[k]||k]=c[k],"number"===a[b[k]||k]&&(d[b[k]||k]=Number(c[k]));
return d}}});"use strict";
filepicker.extend("errors",function(){var d=this,a=function(b){if(this===window)return new a(b);this.code=b;filepicker.debug?(b=filepicker.error_map[this.code],this.message=b.message,this.moreInfo=b.moreInfo,this.toString=function(){return"FPError "+this.code+": "+this.message+". For help, see "+this.moreInfo}):this.toString=function(){return"FPError "+this.code+". Include filepicker_debug.js for more info"};return this};a.isClass=!0;return{FPError:a,handleError:function(a){filepicker.debug&&d.util.console.error(a.toString())}}},
!0);"use strict";
filepicker.extend(function(){var d=this;d.API_VERSION="v2";var a=function(a){this.text=a;this.toString=function(){return"FilepickerException: "+this.text};return this};a.isClass=!0;var b=function(a,b,c,f,l){l(10);d.store(a,function(a){l(50);d.read(a,b,c,f,function(a){l(50+a/2)})},f)},c=function(a,b,c,f){d.util.checkApiKey();"function"===typeof b&&(f=c,c=b,b={});b=b?d.util.clone(b):{};c=c||function(){};f=f||d.errors.handleError;var l;if("string"===typeof a&&d.util.isUrl(a))l=a;else if(a.url)l=a.url,
b.mimetype||b.extension||(b.mimetype=a.mimetype),b.suggestedFilename||(b.suggestedFilename=a.filename);else throw new d.FilepickerException("Invalid file to export: "+a+". Not a valid url or FPFile object. You may want to use filepicker.store() to get an FPFile to export");b.suggestedFilename&&(b.suggestedFilename=encodeURI(b.suggestedFilename));return d.exporter.createExporter(l,b,c,f)},l=function(a,b,c,f){d.util.checkApiKey();"function"===typeof b&&(f=c,c=b,b={});b=b||{};c=c||function(){};f=f||
d.errors.handleError;if(!d.util.isFPUrl(d.util.getFPUrl(a)))if(a.url)a=a.url;else throw new d.FilepickerException("Invalid file to get metadata for: "+a+". Not a filepicker url or FPFile object.");a=d.util.getFPUrl(a);d.files.stat(d.util.trimConvert(a),b,c,f)};return{setKey:function(a){d.apikey=a},setResponsiveOptions:function(a){return d.responsiveImages.setResponsiveOptions(a)},pick:function(a,b,c,f){d.util.checkApiKey();"function"===typeof a&&(c=b,b=a,a={});a=a||{};c=c||d.errors.handleError;return d.picker.createPicker(a,
b||function(){},c,!1,!1,f)},pickFolder:function(a,b,c,f){d.util.checkApiKey();"function"===typeof a&&(c=b,b=a,a={});a=a||{};c=c||d.errors.handleError;return d.picker.createPicker(a,b||function(){},c,!1,!0,f)},pickMultiple:function(a,b,c,f){d.util.checkApiKey();"function"===typeof a&&(f=c,c=b,b=a,a={});a=a||{};c=c||d.errors.handleError;return d.picker.createPicker(a,b||function(){},c,!0,!1,f)},pickAndStore:function(a,b,c,f,l){d.util.checkApiKey();if(!a||!b||"function"===typeof a||"function"===typeof a)throw new d.FilepickerException("Not all required parameters given, missing picker or store options");
f=f||d.errors.handleError;var h=!!a.multiple;a=a?d.util.clone(a):{};a.storeLocation=b.location||"S3";a.storePath=b.path;a.storeContainer=b.storeContainer||b.container;a.storeRegion=b.storeRegion;a.storeAccess=b.access||"private";if(h&&a.storePath&&"/"!==a.storePath.charAt(a.storePath.length-1))throw new d.FilepickerException(NaN/0);b=c;h||(b=function(a){c([a])});return d.picker.createPicker(a,b,f,h,!1,l)},read:function(a,c,e,f,l){d.util.checkApiKey();if(!a)throw new d.FilepickerException("No input given - nothing to read!");
"function"===typeof c&&(l=f,f=e,e=c,c={});c=c||{};e=e||function(){};f=f||d.errors.handleError;l=l||function(){};if("string"===typeof a)d.util.isFPUrl(a)?d.files.readFromFPUrl(a,c,e,f,l):d.files.readFromUrl(a,c,e,f,l);else if(d.util.isFileInputElement(a))a.files?0===a.files.length?f(new d.errors.FPError(115)):d.files.readFromFile(a.files[0],c,e,f,l):b(a,c,e,f,l);else if(d.util.isFile(a))d.files.readFromFile(a,c,e,f,l);else if(a.url)d.files.readFromFPUrl(a.url,c,e,f,l);else throw new d.FilepickerException("Cannot read given input: "+
a+". Not a url, file input, DOM File, or FPFile object.");},write:function(a,b,c,f,l,h){d.util.checkApiKey();if(!a)throw new d.FilepickerException("No fpfile given - nothing to write to!");if(void 0===b||null===b)throw new d.FilepickerException("No input given - nothing to write!");"function"===typeof c&&(h=l,l=f,f=c,c={});c=c||{};f=f||function(){};l=l||d.errors.handleError;h=h||function(){};if(!d.util.isFPUrl(d.util.getFPUrl(a)))if(a.url)a=a.url;else throw new d.FilepickerException("Invalid file to write to: "+
a+". Not a filepicker url or FPFile object.");a=d.util.trimConvert(d.util.getFPUrl(a));if("string"===typeof b)d.files.writeDataToFPUrl(a,b,c,f,l,h);else if(d.util.isFileInputElement(b))b.files?0===b.files.length?l(new d.errors.FPError(115)):d.files.writeFileToFPUrl(a,b.files[0],c,f,l,h):d.files.writeFileInputToFPUrl(a,b,c,f,l,h);else if(d.util.isFile(b))d.files.writeFileToFPUrl(a,b,c,f,l,h);else if(b.url)d.files.writeUrlToFPUrl(a,b.url,c,f,l,h);else throw new d.FilepickerException("Cannot read from given input: "+
b+". Not a string, file input, DOM File, or FPFile object.");},writeUrl:function(a,b,c,f,l,h){d.util.checkApiKey();if(!a)throw new d.FilepickerException("No fpfile given - nothing to write to!");if(void 0===b||null===b)throw new d.FilepickerException("No input given - nothing to write!");"function"===typeof c&&(h=l,l=f,f=c,c={});c=c||{};f=f||function(){};l=l||d.errors.handleError;h=h||function(){};if(!d.util.isFPUrl(d.util.getFPUrl(a)))if(a.url)a=a.url;else throw new d.FilepickerException("Invalid file to write to: "+
a+". Not a filepicker url or FPFile object.");a=d.util.getFPUrl(a);d.files.writeUrlToFPUrl(d.util.trimConvert(a),b,c,f,l,h)},"export":c,exportFile:c,processImage:function(a,b,c,f,l){var h;d.util.checkApiKey();"function"===typeof b&&(f=c,c=b,b={});b=b||{};c=c||function(){};f=f||d.errors.handleError;if("string"===typeof a)h=a;else if(a.url)h=a.url,b.filename||(b.filename=a.filename);else throw new d.FilepickerException("Invalid file to convert: "+a+". Not a valid url or FPFile object or not filepicker url. You can convert only filepicker url images.");
b.convertUrl=h;b.multiple=!1;b.services=["CONVERT","COMPUTER"];b.backgroundUpload=!0;b.hide=!1;return d.picker.createPicker(b,c,f,!1,!1,l,!0)},store:function(a,b,c,f,l){d.util.checkApiKey();"function"===typeof b&&(l=f,f=c,c=b,b={});b=b?d.util.clone(b):{};c=c||function(){};f=f||d.errors.handleError;l=l||function(){};if("string"===typeof a)d.files.storeData(a,b,c,f,l);else if(d.util.isFileInputElement(a))a.files?0===a.files.length?f(new d.errors.FPError(115)):d.files.storeFile(a.files[0],b,c,f,l):d.files.storeFileInput(a,
b,c,f,l);else if(d.util.isFile(a))d.files.storeFile(a,b,c,f,l);else if(a.url)b.filename||(b.filename=a.filename),d.files.storeUrl(a.url,b,c,f,l);else throw new d.FilepickerException("Cannot store given input: "+a+". Not a string, file input, DOM File, or FPFile object.");},storeUrl:function(a,b,c,f,l){d.util.checkApiKey();"function"===typeof b&&(l=f,f=c,c=b,b={});b=b||{};f=f||d.errors.handleError;d.files.storeUrl(a,b,c||function(){},f,l||function(){})},stat:l,metadata:l,remove:function(a,b,c,f){d.util.checkApiKey();
"function"===typeof b&&(f=c,c=b,b={});b=b||{};c=c||function(){};f=f||d.errors.handleError;if(!d.util.isFPUrl(d.util.getFPUrl(a)))if(a.url)a=a.url;else throw new d.FilepickerException("Invalid file to remove: "+a+". Not a filepicker url or FPFile object.");a=d.util.getFPUrl(a);d.files.remove(d.util.trimConvert(a),b,c,f)},convert:function(a,b,c,f,l,h){d.util.checkApiKey();if(!a)throw new d.FilepickerException("No fpfile given - nothing to convert!");"function"===typeof c&&(h=l,l=f,f=c,c={});b=b?d.util.clone(b):
{};c=c||{};f=f||function(){};l=l||d.errors.handleError;h=h||function(){};c.location&&(b.storeLocation=c.location);c.path&&(b.storePath=c.path);c.container&&(b.storeContainer=c.container);b.storeAccess=c.access||"private";if(d.util.isFPUrl(d.util.getFPUrl(a)))c=a;else if(a.url){if(c=a.url,!d.mimetypes.matchesMimetype(a.mimetype,"image/*")&&!d.mimetypes.matchesMimetype(a.mimetype,"application/pdf")){l(new d.errors.FPError(142));return}}else throw new d.FilepickerException("Invalid file to convert: "+
a+". Not a filepicker url or FPFile object.");c=d.util.getFPUrl(c);if(-1<c.indexOf("/convert")){a=d.util.parseUrl(c).params;a=d.conversions.mapRestParams(a);a.crop&&d.util.setDefault(a,"crop_first",!0);for(var n in a)d.util.setDefault(b,n,a[n])}d.conversions.convert(d.util.trimConvert(c),b,f,l,h)},constructWidget:function(a){return d.widgets.constructWidget(a)},makeDropPane:function(a,b){return d.dragdrop.makeDropPane(a,b)},FilepickerException:a,responsive:function(){d.responsiveImages.update.apply(null,
arguments)},version:"2.4.11"}},!0);"use strict";
filepicker.extend("mimetypes",function(){var d=this,a={".stl":"application/sla",".hbs":"text/html",".pdf":"application/pdf",".jpg":"image/jpeg",".jpeg":"image/jpeg",".jpe":"image/jpeg",".imp":"application/x-impressionist",".vob":"video/dvd"},b="application/octet-stream application/download application/force-download octet/stream application/unknown application/x-download application/x-msdownload application/x-secure-download".split(" ");return{getMimetype:function(c){if(c.type){for(var d=c.type,d=
d.toLowerCase(),g=!1,k=0;k<b.length;k++)g=g||d===b[k];if(!g)return c.type}return(d=(c.name||c.fileName).match(/\.\w*$/))?a[d[0].toLowerCase()]||"":c.type?c.type:""},matchesMimetype:function(a,l){if(!a)return"*/*"===l;a=d.util.trim(a).toLowerCase();l=d.util.trim(l).toLowerCase();for(var g=0;g<b.length;g++)if(a===b[g])return!0;var g=a.split("/"),k=l.split("/");return"*"===k[0]?!0:k[0]!==g[0]?!1:"*"===k[1]?!0:k[1]===g[1]}}});"use strict";
filepicker.extend("services",function(){return{COMPUTER:1,DROPBOX:2,FACEBOOK:3,GITHUB:4,GMAIL:5,IMAGE_SEARCH:6,URL:7,WEBCAM:8,GOOGLE_DRIVE:9,SEND_EMAIL:10,INSTAGRAM:11,FLICKR:12,VIDEO:13,EVERNOTE:14,PICASA:15,WEBDAV:16,FTP:17,ALFRESCO:18,BOX:19,SKYDRIVE:20,GDRIVE:21,CUSTOMSOURCE:22,CLOUDDRIVE:23,GENERIC:24,CONVERT:25,AUDIO:26}},!0);"use strict";
filepicker.extend("urls",function(){function d(c,d){return"?key="+l.apikey+"&id="+d+"&referrer="+window.location.hostname+"&iframe="+("window"!==c.container)+"&version="+l.API_VERSION+(c.services?"&s="+c.services.join(","):"")+(void 0!==c.container?"&container="+c.container:"modal")+(c.openTo?"&loc="+c.openTo:"")+"&language="+(c.language||l.browser.getLanguage())+(void 0!==c.mobile?"&mobile="+c.mobile:"")+(void 0!==c.backgroundUpload?"&bu="+c.backgroundUpload:"")+(c.cropRatio?"&cratio="+c.cropRatio:
"")+(c.cropDim?"&cdim="+c.cropDim.join(","):"")+(c.cropMax?"&cmax="+c.cropMax.join(","):"")+(c.cropMin?"&cmin="+c.cropMin.join(","):"")+(void 0!==c.cropForce?"&cforce="+c.cropForce:"")+(void 0!==c.hide?"&hide="+c.hide:"")+(c.customCss?"&css="+encodeURIComponent(c.customCss):"")+(c.customText?"&text="+encodeURIComponent(c.customText):"")+(c.imageMin?"&imin="+c.imageMin.join(","):"")+(c.imageMax?"&imax="+c.imageMax.join(","):"")+(c.imageDim?"&idim="+c.imageDim.join(","):"")+(c.imageQuality?"&iq="+c.imageQuality:
"")+(c.noFileReader?"&nfl="+c.noFileReader:"")+(l.util.isCanvasSupported()?"":"&canvas=false")+(c.redirectUrl?"&redirect_url="+c.redirectUrl:"")+(c.showClose&&"modal"!==c.container?"&showClose="+c.showClose:"")+a(c)+"&plugin="+b()}function a(a){return(a.signature?"&signature="+a.signature:"")+(a.policy?"&policy="+a.policy:"")}function b(){return filepicker.plugin||"js_lib"}function c(a){a=a||[];var b=[],c,d;for(c in a)for(d in q)a[c]===q[d]&&a.hasOwnProperty(c)&&b.push(a[c]);b.length||b.push("crop");
return"&co="+b.join(",")}var l=this,g="https://www.filepicker.io";window.filepicker.hostname&&(g=window.filepicker.hostname);var k=g.replace("www","dialog"),e=k+"/dialog/open/",f=k+"/dialog/save/",m=k+"/dialog/process/",h=k+"/dialog/folder/",n=g+"/api/store/",q=["crop","rotate","filter"];return{BASE:g,DIALOG_BASE:k,API_COMM:g+"/dialog/comm_iframe/",COMM:k+"/dialog/comm_iframe/",FP_COMM_FALLBACK:k+"/dialog/comm_hash_iframe/",STORE:n,PICK:e,EXPORT:f,constructPickUrl:function(a,b,f){return e+d(a,b)+
(f?"&multi="+!!f:"")+(void 0!==a.mimetypes?"&m="+a.mimetypes.join(","):"")+(void 0!==a.extensions?"&ext="+a.extensions.join(","):"")+(a.maxSize?"&maxSize="+a.maxSize:"")+(a.customSourceContainer?"&customSourceContainer="+a.customSourceContainer:"")+(a.customSourcePath?"&customSourcePath="+a.customSourcePath:"")+(a.maxFiles?"&maxFiles="+a.maxFiles:"")+(void 0!==a.folders?"&folders="+a.folders:"")+(a.storeLocation?"&storeLocation="+a.storeLocation:"")+(a.storePath?"&storePath="+a.storePath:"")+(a.storeContainer?
"&storeContainer="+a.storeContainer:"")+(a.storeRegion?"&storeRegion="+a.storeRegion:"")+(a.storeAccess?"&storeAccess="+a.storeAccess:"")+(a.webcam&&a.webcam.webcamDim?"&wdim="+a.webcam.webcamDim.join(","):"")+(a.webcamDim?"&wdim="+a.webcamDim.join(","):"")+(a.webcam&&a.webcam.videoRes?"&videoRes="+a.webcam.videoRes:"")+(a.webcam&&a.webcam.videoLen?"&videoLen="+a.webcam.videoLen:"")+(a.webcam&&a.webcam.audioLen?"&audioLen="+a.webcam.audioLen:"")+c(a.conversions)},constructConvertUrl:function(a,b){var e=
a.convertUrl;if(0<=e.indexOf("&")||0<=e.indexOf("?"))e=encodeURIComponent(e);return m+d(a,b)+"&curl="+e+c(a.conversions)},constructPickFolderUrl:function(a,b){return h+d(a,b)},constructExportUrl:function(a,b,c){if(0<=a.indexOf("&")||0<=a.indexOf("?"))a=encodeURIComponent(a);return f+d(b,c)+"&url="+a+(void 0!==b.mimetype?"&m="+b.mimetype:"")+(void 0!==b.extension?"&ext="+b.extension:"")+(b.suggestedFilename?"&defaultSaveasName="+b.suggestedFilename:"")},constructWriteUrl:function(c,d){return c+"?nonce=fp"+
(d.base64decode?"&base64decode=true":"")+(d.mimetype?"&mimetype="+d.mimetype:"")+a(d)+"&plugin="+b()},constructStoreUrl:function(c){return n+c.location+"?key="+l.apikey+(c.base64decode?"&base64decode=true":"")+(c.mimetype?"&mimetype="+c.mimetype:"")+(c.filename?"&filename="+encodeURIComponent(c.filename):"")+(c.path?"&path="+c.path:"")+(c.container?"&container="+c.container:"")+(c.access?"&access="+c.access:"")+a(c)+"&plugin="+b()},constructHostCommFallback:function(){return l.util.parseUrl(window.location.href).origin+
"/404"},getPlugin:b}});"use strict";
filepicker.extend("ajax",function(){var d=this,a=function(b,c){var e=[],f;for(f in b){var l=b[f];c&&(f=c+". + key + ");var h;switch(d.util.typeOf(l)){case "object":h=a(l,f);break;case "array":h={};for(var n=0;n<l.length;n++)h[n]=l[n];h=a(h,f);break;default:h=f+"="+encodeURIComponent(l)}null!==l&&e.push(h)}return e.join("&")},b=function(){try{return new window.XMLHttpRequest}catch(a){try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(b){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(c){return null}}}},c=
function(c,k){c=c||"";var e=k.method?k.method.toUpperCase():"POST",f=k.success||function(){},m=k.error||function(){},h=void 0===k.async?!0:k.async,n=k.data||null,q=void 0===k.processData?!0:k.processData,r=k.headers||{},t=d.util.parseUrl(c),u=window.location.protocol+"//"+window.location.host!==t.origin,x=!1;c+=(0<=c.indexOf("?")?"&":"?")+"plugin="+d.urls.getPlugin();n&&q&&(n=a(k.data));var w;if(k.xhr)w=k.xhr;else if(w=b(),!w)return k.error("Ajax not allowed"),w;if(u&&window.XDomainRequest&&!("withCredentials"in
w))return new l(c,k);k.progress&&w.upload&&w.upload.addEventListener("progress",function(a){a.lengthComputable&&k.progress(Math.round(95*a.loaded/a.total))},!1);w.onreadystatechange=function(){if(4==w.readyState&&!x){k.progress&&k.progress(100);if(200<=w.status&&300>w.status){var a=w.responseText;if(k.json)try{a=d.json.decode(a)}catch(b){v.call(w,"Invalid json: "+a);return}f(a,w.status,w)}else v.call(w,w.responseText);x=!0}};var v=function(a){x||(k.progress&&k.progress(100),x=!0,400==this.status?
m("bad_params",this.status,this):403==this.status?m("not_authorized",this.status,this):404==this.status?m("not_found",this.status,this):u?4==this.readyState&&0===this.status?m("CORS_not_allowed",this.status,this):m("CORS_error",this.status,this):m(a,this.status,this))};w.onerror=v;n&&"GET"==e&&(c+=(-1!==c.indexOf("?")?"&":"?")+n,n=null);w.open(e,c,h);k.json?w.setRequestHeader("Accept","application/json, text/javascript"):w.setRequestHeader("Accept","text/javascript, text/html, application/xml, text/xml, */*");
h=r["Content-Type"]||r["content-type"];n&&q&&("POST"==e||"PUT"==e)&&void 0===h&&w.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8");if(r)for(var C in r)w.setRequestHeader(C,r[C]);w.send(n);return w},l=function(b,c){if(!window.XDomainRequest)return null;var e=c.method?c.method.toUpperCase():"POST",f=c.success||function(){},l=c.error||function(){},h=c.data||{};"http:"==window.location.protocol?b=b.replace("https:","http:"):"https:"==window.location.protocol&&(b=b.replace("http:",
"https:"));if(c.async)throw new d.FilepickerException("Asyncronous Cross-domain requests are not supported");"GET"!==e&&"POST"!==e&&(h._method=e,e="POST");!1!==c.processData&&(h=h?a(h):null);h&&"GET"==e&&(b+=(0<=b.indexOf("?")?"&":"?")+h,h=null);b+=(0<=b.indexOf("?")?"&":"?")+"_xdr=true&_cacheBust="+d.util.getId();var n=new window.XDomainRequest;n.onload=function(){var a=n.responseText;c.progress&&c.progress(100);if(c.json)try{a=d.json.decode(a)}catch(b){l("Invalid json: "+a,200,n);return}f(a,200,
n)};n.onerror=function(){c.progress&&c.progress(100);l(n.responseText||"CORS_error",this.status||500,this)};n.onprogress=function(){};n.ontimeout=function(){};n.timeout=3E4;n.open(e,b,!0);n.send(h);return n};return{get:function(a,b){b.method="GET";c(a,b)},post:function(a,b){b.method="POST";a+=(0<=a.indexOf("?")?"&":"?")+"_cacheBust="+d.util.getId();c(a,b)},request:c}});"use strict";
filepicker.extend("files",function(){var d=this,a=function(a,b,c,e,f){!0!==b.cache&&(b._cacheBust=d.util.getId());d.ajax.get(a,{data:b,headers:{"X-NO-STREAM":!0},success:c,error:function(a,b,c){"CORS_not_allowed"===a?e(new d.errors.FPError(113)):"CORS_error"===a?e(new d.errors.FPError(114)):"not_found"===a?e(new d.errors.FPError(115)):"bad_params"===a?e(new d.errors.FPError(400)):"not_authorized"===a?e(new d.errors.FPError(403)):e(new d.errors.FPError(118))},progress:f})},b=function(a,b,k,e,f){d.util.setDefault(b,
"location","S3");b.filename||(b.filename=a.name||a.fileName);c(a,d.urls.constructStoreUrl(b),function(a){k(d.util.standardizeFPFile(a))},function(a,b,c){"not_found"===a?e(new d.errors.FPError(121)):"bad_params"===a?e(new d.errors.FPError(122)):"not_authorized"===a?e(new d.errors.FPError(403)):(d.util.console.error(a),e(new d.errors.FPError(123)))},f)},c=function(a,b,c,e,f){a.files&&(a=a.files[0]);if(window.FormData&&window.XMLHttpRequest){var m=new window.FormData;m.append("fileUpload",a);d.ajax.post(b,
{json:!0,processData:!1,data:m,success:c,error:e,progress:f})}else d.iframeAjax.post(b,{data:a,json:!0,success:c,error:e})};return{readFromUrl:a,readFromFile:function(a,b,c,e,f){if(window.File&&window.FileReader&&window.FileList&&window.Blob){var m=!!b.base64encode,h=!!b.asText,n=new FileReader;n.onprogress=function(a){a.lengthComputable&&f(Math.round(a.loaded/a.total*100))};n.onload=function(a){f(100);m?c(d.base64.encode(a.target.result,h)):c(a.target.result)};n.onerror=function(a){switch(a.target.error.code){case a.target.error.NOT_FOUND_ERR:e(new d.errors.FPError(115));
break;case a.target.error.NOT_READABLE_ERR:e(new d.errors.FPError(116));break;case a.target.error.ABORT_ERR:e(new d.errors.FPError(117));break;default:e(new d.errors.FPError(118))}};h||!n.readAsBinaryString?n.readAsText(a):n.readAsBinaryString(a)}else f(10),d.files.storeFile(a,{},function(a){f(50);d.files.readFromFPUrl(a.url,b,c,e,function(a){f(50+a/2)})},e,function(a){f(a/2)})},readFromFPUrl:function(b,c,k,e,f){var m=void 0===c.base64encode;m&&(c.base64encode=!0);c.base64encode=!1!==c.base64encode;
a.call(this,b,c,function(a){m&&(a=d.base64.decode(a,!!c.asText));k(a)},e,f)},writeDataToFPUrl:function(a,b,c,e,f,m){var h=c.mimetype||"text/plain";d.ajax.post(d.urls.constructWriteUrl(a,c),{headers:{"Content-Type":h},data:b,processData:!1,json:!0,success:function(a){e(d.util.standardizeFPFile(a))},error:function(a,b,c){"not_found"===a?f(new d.errors.FPError(121)):"bad_params"===a?f(new d.errors.FPError(122)):"not_authorized"===a?f(new d.errors.FPError(403)):f(new d.errors.FPError(123))},progress:m})},
writeFileToFPUrl:function(a,b,k,e,f,m){k.mimetype=b.type;c(b,d.urls.constructWriteUrl(a,k),function(a){e(d.util.standardizeFPFile(a))},function(a,b,c){"not_found"===a?f(new d.errors.FPError(121)):"bad_params"===a?f(new d.errors.FPError(122)):"not_authorized"===a?f(new d.errors.FPError(403)):f(new d.errors.FPError(123))},m)},writeFileInputToFPUrl:function(a,b,k,e,f,m){c(b,d.urls.constructWriteUrl(a,k),function(a){e(d.util.standardizeFPFile(a))},function(a,b,c){"not_found"===a?f(new d.errors.FPError(121)):
"bad_params"===a?f(new d.errors.FPError(122)):"not_authorized"===a?f(new d.errors.FPError(403)):f(new d.errors.FPError(123))},m)},writeUrlToFPUrl:function(a,b,c,e,f,m){d.ajax.post(d.urls.constructWriteUrl(a,c),{data:{url:b},json:!0,success:function(a){e(d.util.standardizeFPFile(a))},error:function(a,b,c){"not_found"===a?f(new d.errors.FPError(121)):"bad_params"===a?f(new d.errors.FPError(122)):"not_authorized"===a?f(new d.errors.FPError(403)):f(new d.errors.FPError(123))},progress:m})},storeFileInput:function(a,
c,k,e,f){if(a.files)0===a.files.length?e(new d.errors.FPError(115)):b(a.files[0],c,k,e,f);else{d.util.setDefault(c,"location","S3");c.filename||(c.filename=a.value.replace("C:\\fakepath\\","")||a.name);var m=a.name;a.name="fileUpload";d.iframeAjax.post(d.urls.constructStoreUrl(c),{data:a,processData:!1,json:!0,success:function(b){a.name=m;k(d.util.standardizeFPFile(b))},error:function(a,b,c){"not_found"===a?e(new d.errors.FPError(121)):"bad_params"===a?e(new d.errors.FPError(122)):"not_authorized"===
a?e(new d.errors.FPError(403)):e(new d.errors.FPError(123))}})}},storeFile:b,storeUrl:function(a,b,c,e,f){d.util.setDefault(b,"location","S3");d.ajax.post(d.urls.constructStoreUrl(b),{data:{url:d.util.getFPUrl(a)},json:!0,success:function(a){c(d.util.standardizeFPFile(a))},error:function(a,b,c){"not_found"===a?e(new d.errors.FPError(151)):"bad_params"===a?e(new d.errors.FPError(152)):"not_authorized"===a?e(new d.errors.FPError(403)):e(new d.errors.FPError(153))},progress:f})},storeData:function(a,
b,c,e,f){d.util.setDefault(b,"location","S3");d.util.setDefault(b,"mimetype","text/plain");d.ajax.post(d.urls.constructStoreUrl(b),{headers:{"Content-Type":b.mimetype},data:a,processData:!1,json:!0,success:function(a){c(d.util.standardizeFPFile(a))},error:function(a,b,c){"not_found"===a?e(new d.errors.FPError(121)):"bad_params"===a?e(new d.errors.FPError(122)):"not_authorized"===a?e(new d.errors.FPError(403)):e(new d.errors.FPError(123))},progress:f})},stat:function(a,b,c,e){var f=["uploaded","modified",
"created"];!0!==b.cache&&(b._cacheBust=d.util.getId());d.ajax.get(a+"/metadata",{json:!0,data:b,success:function(a){for(var b=0;b<f.length;b++)a[f[b]]&&(a[f[b]]=new Date(a[f[b]]));c(a)},error:function(a,b,c){"not_found"===a?e(new d.errors.FPError(161)):"bad_params"===a?e(new d.errors.FPError(400)):"not_authorized"===a?e(new d.errors.FPError(403)):e(new d.errors.FPError(162))}})},remove:function(a,b,c,e){b.key=d.apikey;d.ajax.post(a+"/remove",{data:b,success:function(a){c()},error:function(a,b,c){"not_found"===
a?e(new d.errors.FPError(171)):"bad_params"===a?e(new d.errors.FPError(400)):"not_authorized"===a?e(new d.errors.FPError(403)):e(new d.errors.FPError(172))}})}}});"use strict";
filepicker.extend("iframeAjax",function(){var d=this,a=[],b=!1,c=function(c,e){if(b)a.push({url:c,options:e});else{c+=(0<=c.indexOf("?")?"&":"?")+"plugin="+d.urls.getPlugin()+"&_cacheBust="+d.util.getId();c+="&Content-Type=text%2Fhtml";d.comm.openChannel();var f;try{f=document.createElement('<iframe name="ajax_iframe">')}catch(t){f=document.createElement("iframe")}f.id=f.name="ajax_iframe";f.style.display="none";var m=function(){b=!1};f.attachEvent?(f.attachEvent("onload",m),f.attachEvent("onerror",
m)):f.onerror=f.onload=m;f.id="ajax_iframe";f.name="ajax_iframe";f.style.display="none";f.onerror=f.onload=function(){b=!1};document.body.appendChild(f);d.handlers.attach("upload",l(e));var h=document.createElement("form");h.method=e.method||"GET";h.action=c;h.target="ajax_iframe";f=e.data;if(d.util.isFileInputElement(f)||d.util.isFile(f))h.encoding=h.enctype="multipart/form-data";document.body.appendChild(h);if(d.util.isFile(f)){f=g(f);if(!f)throw d.FilepickerException("Couldn't find corresponding file input.");
f={fileUpload:f}}else d.util.isFileInputElement(f)?(m=f,f={},f.fileUpload=m):f&&d.util.isElement(f)&&"INPUT"===f.tagName?(m=f,f={},f[m.name]=m):!1!==e.processData&&(f={data:f});f.format="iframe";var n={},q;for(q in f)if(m=f[q],d.util.isElement(m)&&"INPUT"===m.tagName)n[q]={par:m.parentNode,sib:m.nextSibling,name:m.name,input:m,focused:m===document.activeElement},m.name=q,h.appendChild(m);else{var r=document.createElement("input");r.name=q;r.value=m;h.appendChild(r)}b=!0;window.setTimeout(function(){h.submit();
for(var a in n){var b=n[a];b.par.insertBefore(b.input,b.sib);b.input.name=b.name;b.focused&&b.input.focus()}h.parentNode.removeChild(h)},1)}},l=function(g){var e=g.success||function(){},f=g.error||function(){};return function(g){"Upload"===g.type&&(b=!1,g=g.payload,g.error?f(g.error):e(g),d.handlers.detach("upload"),0<a.length&&(g=a.shift(),c(g.url,g.options)))}},g=function(a){for(var b=document.getElementsByTagName("input"),c=0;c<b.length;c++){var d=b[0];if("file"===d.type&&d.files&&d.files.length)for(var g=
0;g<d.files.length;g++)if(d.files[g]===a)return d}return null};return{get:function(a,b){b.method="GET";c(a,b)},post:function(a,b){b.method="POST";a+=(0<=a.indexOf("?")?"&":"?")+"_cacheBust="+d.util.getId();c(a,b)},request:c}});"use strict";
filepicker.extend("base64",function(){return{encode:function(d,a){var b="",c,l,g,k,e,f,m=0;if(a||void 0===a){l=d.replace(/\r\n/g,"\n");g="";for(k=0;k<l.length;k++)c=l.charCodeAt(k),128>c?g+=String.fromCharCode(c):(127<c&&2048>c?g+=String.fromCharCode(c>>6|192):(g+=String.fromCharCode(c>>12|224),g+=String.fromCharCode(c>>6&63|128)),g+=String.fromCharCode(c&63|128));d=g}for(;m<d.length;)c=d.charCodeAt(m),l=d.charCodeAt(m+1),g=d.charCodeAt(m+2),m+=3,k=c>>2,c=(c&3)<<4|l>>4,e=(l&15)<<2|g>>6,f=g&63,isNaN(l)?
e=f=64:isNaN(g)&&(f=64),b=b+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(k)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f);return b},decode:function(d,a){a=a||void 0===a;var b="",c,l,g,k,e,f=0;for(d=d.replace(/[^A-Za-z0-9\+\/\=]/g,"");f<d.length;)c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(d.charAt(f)),
l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(d.charAt(f+1)),k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(d.charAt(f+2)),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(d.charAt(f+3)),f+=4,c=c<<2|l>>4,l=(l&15)<<4|k>>2,g=(k&3)<<6|e,b+=String.fromCharCode(c),64!=k&&(b+=String.fromCharCode(l)),64!=e&&(b+=String.fromCharCode(g));if(a){k="";for(c=f=e=0;e<b.length;)f=b.charCodeAt(e),128>f?(k+=String.fromCharCode(f),
e++):191<f&&224>f?(c=b.charCodeAt(e+1),k+=String.fromCharCode((f&31)<<6|c&63),e+=2):(c=b.charCodeAt(e+1),c3=b.charCodeAt(e+2),k+=String.fromCharCode((f&15)<<12|(c&63)<<6|c3&63),e+=3);b=k}return b}}},!0);"use strict";
filepicker.extend("browser",function(){var d=function(){return!!(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i))};return{getLanguage:function(){var a=window.navigator.userLanguage||window.navigator.language;void 0===a&&(a="en");return a=a.replace("-","_").toLowerCase()},openInModal:function(){return!(d()||navigator.userAgent.match(/Android/i))||!!window.navigator.standalone},isMobile:function(){return d()||!!navigator.userAgent.match(/Android/i)}}});
"use strict";
filepicker.extend("conversionsUtil",function(){var d=this,a=d.urls.BASE.replace("www","process")+"/";return{CONVERSION_DOMAIN:a,parseUrl:function(b){if(!b)return{url:null,optionsDict:{}};b=b.replace(a,"");var c=b.substring(b.indexOf("/http")+1);b=b.replace("/"+c,"");var d=b.substring(0,b.indexOf("/"));b=b.replace(d+"/","");b=b.split("/");var g={},k,e,f,m,h;for(m in b)if(k=b[m].split("="),1<k.length)for(h in g[k[0]]={},e=k[1].split(","),e)f=e[h].split(":"),1<f.length&&(g[k[0]][f[0]]=f[1]);else b[m]&&
(g[b[m]]=null);return{url:c,apikey:d,optionsDict:g}},buildUrl:function(b,c,l){l=a+l;var g,k,e;c=c||{};for(g in c)for(k in l+="/"+g,(e=d.util.objectKeys(c[g]||{}).length)&&(l+="="),c[g])l+=k+":"+c[g][k],0!==--e&&(l+=",");return l+("/"+b)}}});"use strict";
filepicker.extend("json",function(){var d=this,a={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},b=function(b){return a[b]||"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)},c=function(a){a=a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");return/^[\],:{}\s]*$/.test(a)},l=function(a){if(window.JSON&&window.JSON.stringify)return window.JSON.stringify(a);
a&&a.toJSON&&(a=a.toJSON());var c=[];switch(d.util.typeOf(a)){case "string":return'"'+a.replace(/[\x00-\x1f\\"]/g,b)+'"';case "array":for(var f=0;f<a.length;f++)c.push(l(a[f]));return"["+c+"]";case "object":case "hash":for(var g in a)(f=l(a[g]))&&c.push(l(g)+":"+f);return"{"+c+"}";case "number":case "boolean":return""+a;case "null":return"null";default:return"null"}},g=function(a,b){if(!a||"string"!==d.util.typeOf(a))return null;if(window.JSON&&window.JSON.parse)return window.JSON.parse(a);if(b&&
!c(a))throw Error("JSON could not decode the input; security is enabled and the value is not secure.");return eval("("+a+")")};return{validate:c,encode:l,stringify:l,decode:g,parse:g}});"use strict";
filepicker.extend("util",function(){var d=/^(http|https)\:.*\/\//i;return{trim:function(a){return a.replace(/^\s+|\s+$/g,"")},trimConvert:function(a){return a.replace(/\/convert\b.*/,"")},parseUrl:function(a){a&&"/"!==a.charAt(0)||(a=window.location.protocol+"//"+window.location.host+a);var b=document.createElement("a");b.href=a;for(var c=-1===b.hostname.indexOf(":")?b.hostname:b.host,d=b.protocol.replace(":",""),g=b.port,k=b.search,e={},f=b.search.replace(/^\?/,"").split("&"),m=f.length,h=0,n;h<
m;h++)f[h]&&(n=f[h].split("="),e[n[0]]=n[1]);b={source:a,protocol:d,host:c,port:g,query:k,params:e,file:(b.pathname.match(/\/([^\/?#]+)$/i)||[void 0,""])[1],hash:b.hash.replace("#",""),path:b.pathname.replace(/^([^\/])/,"/$1"),relative:(b.href.match(/tps?:\/\/[^\/]+(.+)/)||[void 0,""])[1],segments:b.pathname.replace(/^\//,"").split("/")};b.origin=b.protocol+"://"+b.host+(b.port?":"+b.port:"");b.rawUrl=(b.origin+b.path).replace("/convert","");return b},isUrl:function(a){return!!a.match(d)},endsWith:function(a,
b){return-1!==a.indexOf(b,a.length-b.length)},appendQueryToUrl:function(a,b,c){return a+(0<=a.indexOf("?")?"&":"?")+b+"="+c}}});"use strict";
filepicker.extend("util",function(){var d=this,a=function(a){return a&&"[object Array]"===Object.prototype.toString.call(a)},b=function(a){return a&&"[object File]"===Object.prototype.toString.call(a)},c=function(a){return"object"===typeof window.HTMLElement?a instanceof window.HTMLElement:a&&"object"===typeof a&&1===a.nodeType&&"string"===typeof a.nodeName},l=function(a){return function(){if(window.console&&"function"===typeof window.console[a])try{window.console[a].apply(window.console,arguments)}catch(b){window.alert(Array.prototype.join.call(arguments,
","))}}},g={};g.log=l("log");g.error=l("error");return{isArray:a,isFile:b,isElement:c,isFileInputElement:function(a){return c(a)&&"INPUT"===a.tagName&&"file"===a.type},getId:function(){return(new Date).getTime().toString()},setDefault:function(a,b,c){void 0===a[b]&&(a[b]=c)},typeOf:function(c){return null===c?"null":a(c)?"array":b(c)?"file":typeof c},addOnLoad:function(a){if(window.jQuery)window.jQuery(function(){a()});else if(window.addEventListener)window.addEventListener("load",a,!1);else if(window.attachEvent)window.attachEvent("onload",
a);else if(window.onload){var b=window.onload;window.onload=function(){b();a()}}else window.onload=a},isFPUrl:function(a){return"string"===typeof a&&a.match(d.urls.BASE+"/api/file/")},getFPUrl:function(a){if("string"===typeof a){var b=a.match(/(?:cdn.filestackcontent.com|cdn.filepicker.io)[\S]*\/([\S]{20,})/);if(b&&1<b.length)return d.urls.BASE+"/api/file/"+b[1]}return a},isFPUrlCdn:function(a){return"string"===typeof a&&a.match("/api/file/")},console:g,clone:function(a){var b={},c;for(c in a)b[c]=
a[c];return b},standardizeFPFile:function(a){var b={};b.url=a.url;b.filename=a.filename||a.name;b.mimetype=a.mimetype||a.type;b.size=a.size;b.key=a.key||a.s3_key;b.isWriteable=!(!a.isWriteable&&!a.writeable);return b},isCanvasSupported:function(){try{var a=document.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))}catch(b){return!1}},extend:function(a,b){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},checkApiKey:function(){if(!d.apikey)throw new d.FilepickerException("API Key not found");
},objectKeys:function(a){return"function"!==typeof Object.keys?function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);return b}:Object.keys(a)}}});"use strict";filepicker.extend("windowUtils",function(){return{getWidth:function(){return document.documentElement.clientWidth||document.body&&document.body.clientWidth||1024},getHeight:function(){return document.documentElement.clientHeight||document.body&&document.body.clientHeight||768}}});"use strict";
filepicker.extend("dragdrop",function(){var d=this,a=function(){return(!!window.FileReader||0<=navigator.userAgent.indexOf("Safari"))&&"draggable"in document.createElement("span")};return{enabled:a,makeDropPane:function(b,c){function l(a){var b=C(0,1),c=d.util.clone(a);c.name=c.filename;D([c])?b(a):d.files.remove(a.url,t,function(){},function(){})}if(!b)throw new d.FilepickerException("No DOM element found to create drop pane");if(b.jquery){if(0===b.length)throw new d.FilepickerException("No DOM element found to create drop pane");
b=b[0]}if(!a())return d.util.console.error("Your browser doesn't support drag-drop functionality"),!1;c=c||{};var g=c.dragEnter||function(){},k=c.dragLeave||function(){},e=c.onStart||function(){},f=c.onSuccess||function(){},m=c.onError||function(){},h=c.onProgress||function(){},n=c.mimetypes;n||(n=c.mimetype?[c.mimetype]:["*/*"]);"string"===d.util.typeOf(n)&&(n=n.split(","));var q=c.extensions;q||c.extension&&(q=[c.extension]);"string"===d.util.typeOf(q)&&(q=q.replace(/ /g,"").split(","));if(q)for(var r=
0;r<q.length;r++)q[r]=q[r].toLowerCase();var t={location:c.location,path:c.path,container:c.container,access:c.access,policy:c.policy,signature:c.signature},u=function(){return b&&"disabled"!==(b.getAttribute("disabled")||"enabled")};b.addEventListener("dragenter",function(a){u()&&g();a.stopPropagation();a.preventDefault();return!1},!1);b.addEventListener("dragleave",function(a){u()&&k();a.stopPropagation();a.preventDefault();return!1},!1);b.addEventListener("dragover",function(a){a.dataTransfer.dropEffect=
"copy";a.preventDefault();return!1},!1);b.addEventListener("drop",function(a){a.stopPropagation();a.preventDefault();if(!u())return!1;var c;a:{var f,g;if(a.dataTransfer.items)for(f=a.dataTransfer.items,g=0;g<f.length;g++)if((c=f[g]&&f[g].webkitGetAsEntry?f[g].webkitGetAsEntry():void 0)&&c.isDirectory){m("WrongType","Uploading a folder is not allowed");c=!0;break a}c=!1}if(c)return!1;c=a.dataTransfer.files;var h;if((a=a.dataTransfer)&&"function"===typeof a.getData){h=a.getData("text");try{h=h||a.getData("text/html")}catch(k){d.util.console.error(k)}h&&
!d.util.isUrl(h)&&(h=(h=h.match(/<img.*?src="(.*?)"/i))&&1<h.length?h[1]:null)}if(c.length){if(h=c.length,D(c))for(e(c),b.setAttribute("disabled","disabled"),a=0;a<c.length;a++)d.store(c[a],t,C(a,h),E,y(a,h))}else h?(c=y(0,1),d.storeUrl(h,l,E,c)):m("NoFilesFound","No files uploaded");return!1});var x=function(){b.setAttribute("disabled","enabled");window.$&&window.$(b).prop("disabled",!1)},w={},v=[],C=function(a,b){return function(d){c.multiple?(v.push(d),v.length===b?(f(v),v=[],w={}):(w[a]=100,B(b))):
f([d]);x()}},E=function(a){m("UploadError",a.toString());x()},y=function(a,b){return function(c){w[a]=c;B(b)}},B=function(a){var b=0,c;for(c in w)b+=w[c];h(b/a)},D=function(a){if(0<a.length){if(1<a.length&&!c.multiple)return m("TooManyFiles","Only one file at a time"),!1;if(0<c.maxFiles&&a.length>c.maxFiles)return m("TooManyFiles","Only "+c.maxFiles+" files at a time"),!1;for(var b,e,f,g=0;g<a.length;g++){b=!1;e=a[g];f=e.name||e.fileName||"Unknown file";for(var h=0;h<n.length;h++){var k=d.mimetypes.getMimetype(e);
b=b||d.mimetypes.matchesMimetype(k,n[h])}if(!b)return m("WrongType",f+" isn't the right type of file"),!1;if(q){b=!1;for(h=0;h<q.length;h++)b=b||d.util.endsWith(f,q[h]);if(!b)return m("WrongType",f+" isn't the right type of file"),!1}if(e.size&&c.maxSize&&e.size>c.maxSize)return m("WrongSize",f+" is too large ("+e.size+" Bytes)"),!1}return!0}m("NoFilesFound","No files uploaded");return!1};return!0}}});"use strict";
filepicker.extend("responsiveImages",function(){function d(b){var c=document.querySelectorAll("img[data-fp-src]"),d,e;for(e=0;e<c.length;e++)d=c[e],(a(d)||!0===b)&&g(d)}function a(a){var c=a.getAttribute("src"),d=a.getAttribute("data-fp-on-resize")||m().onResize||"all";return c&&"all"!==d?"none"===d?!1:(a=l(c).width<b(a).width)&&"up"===d||!a&&"down"===d?!0:!1:!0}function b(a){var c={};if(null===a.parentNode)return c.width=n.windowUtils.getWidth(),c.height=n.windowUtils.getWidth(),c;if(a.alt&&!a.fpAltCheck)return a.parentNode.fpAltCheck=
!0,b(a.parentNode);c.width=a.offsetWidth;c.height=a.offsetHeight;return c.width?c:b(a.parentNode)}function c(a,b){var c=a.getAttribute("src")||a.getAttribute("data-fp-src");c!==b&&(a.src=b,c&&(a.onerror=function(){a.src=c;a.onerror=null}))}function l(a){return n.conversionsUtil.parseUrl(a).optionsDict.resize||{}}function g(a){var b=a.getAttribute("data-fp-src")||a.getAttribute("src"),d=a.getAttribute("data-fp-apikey")||n.apikey,e=m();n.apikey||(n.setKey(d),n.util.checkApiKey());c(a,n.conversionsUtil.buildUrl(b,
k(a,e),d))}function k(a,c){c=c||{};var d=b(a),e=a.getAttribute("data-fp-pixel-round")||c.pixelRound||10,d={resize:{width:h(d.width,e)}};if(e=c.signature||a.getAttribute("data-fp-signature"))d.security={signature:e,policy:c.policy||a.getAttribute("data-fp-policy")};return d}function e(a){window.addEventListener?window.addEventListener("resize",a,!1):window.attachEvent&&window.attachEvent("onresize",a)}function f(a){window.removeEventListener?window.removeEventListener("resize",a,!1):window.detachEvent&&
window.detachEvent("onresize",a)}function m(){return n.responsiveOptions||{}}function h(a,b){var c=0===b?1:b;return Math.ceil(a/c)*c}var n=this,q=function(a,b){var c;return function(){var d=this,e=arguments;clearTimeout(c);c=setTimeout(function(){c=null;a.apply(d,e)},b)}}(function(){d()},200);return{activate:function(){d();e(q)},deactivate:function(){f(q)},update:function(a){if(void 0!==a)if("IMG"===a.nodeName)g(a);else throw new n.FilepickerException("Passed object is not an image");else d(!0)},
setResponsiveOptions:function(a){a=a||{};if("object"!==typeof a)throw new n.FilepickerException("Responsive options must be an object.");n.responsiveOptions=a},getResponsiveOptions:m,getElementDims:b,replaceSrc:c,getCurrentResizeParams:l,construct:g,constructParams:k,shouldConstruct:a,roundWithStep:h,addWindowResizeEvent:e,removeWindowResizeEvent:f}});"use strict";
filepicker.extend("widgets",function(){var d=this,a=function(a,b){var c;if(document.createEvent)c=document.createEvent("Event"),c.initEvent("change",!0,!1),c.fpfile=b?b[0]:void 0,c.fpfiles=b,a.dispatchEvent(c);else if(document.createEventObject)c=document.createEventObject("Event"),c.eventPhase=2,c.currentTarget=c.srcElement=c.target=a,c.fpfile=b?b[0]:void 0,c.fpfiles=b,a.fireEvent("onchange",c);else if(a.onchange)a.onchange(b)},b=function(a,b,c){for(var d in c){var e=c[d],f=a,g=b.getAttribute(d);
g&&(f[e]=g)}},c=function(a,c){c=c||"pick";var e={},f={"data-fp-mimetypes":"mimetypes","data-fp-extensions":"extensions","data-fp-maxSize":"maxSize","data-fp-maxFiles":"maxFiles","data-fp-store-location":"storeLocation","data-fp-store-path":"storePath","data-fp-store-container":"storeContainer","data-fp-store-region":"storeRegion","data-fp-store-access":"storeAccess","data-fp-image-quality":"imageQuality","data-fp-image-dim":"imageDim","data-fp-image-max":"imageMax","data-fp-image-min":"imageMin"},
g={"data-fp-video-recording-resolution":"videoRes","data-fp-webcam-dim":"webcamDim","data-fp-video-length":"videoLen","data-fp-audio-length":"audioLen"};b(e,a,{"data-fp-container":"container","data-fp-mimetype":"mimetype","data-fp-extension":"extension","data-fp-openTo":"openTo","data-fp-debug":"debug","data-fp-signature":"signature","data-fp-policy":"policy","data-fp-language":"language","data-fp-background-upload":"backgroundUpload","data-fp-hide":"hide","data-fp-custom-css":"customCss","data-fp-crop-force":"cropForce",
"data-fp-crop-ratio":"cropRatio","data-fp-crop-dim":"cropDim","data-fp-crop-max":"cropMax","data-fp-crop-min":"cropMin","data-fp-show-close":"showClose","data-fp-conversions":"conversions","data-fp-custom-text":"customText","data-fp-custom-source-container":"customSourceContainer","data-fp-custom-source-path":"customSourcePath"});"export"===c?(f=a.getAttribute("data-fp-suggestedFilename"))&&(e.suggestedFilename=f):"pick"===c&&(b(e,a,f),e.webcam={},b(e.webcam,a,g));if(f=a.getAttribute("data-fp-services")){f=
f.split(",");for(g=0;g<f.length;g++)f[g]=d.services[f[g].replace(" ","")]||f[g];e.services=f}if(f=a.getAttribute("data-fp-service"))e.service=d.services[f.replace(" ","")]||f;var f="extensions mimetypes imageDim imageMin imageMax cropDim cropMax cropMin webcamDim conversions".split(" "),h;for(h in f)g=f[h],e[g]&&(e[g]=e[g].split(","));(h=a.getAttribute("data-fp-apikey"))&&d.setKey(h);e.folders="true"===a.getAttribute("data-fp-folders");return e},l=function(b){var e=document.createElement("button");
e.setAttribute("type","button");e.innerHTML=b.getAttribute("data-fp-button-text")||"Pick File";e.className=b.getAttribute("data-fp-button-class")||b.className||"fp__btn";b.style.display="none";var f=c(b);"true"===b.getAttribute("data-fp-multiple")?e.onclick=function(){e.blur();d.pickMultiple(f,function(c){for(var d=[],e=0;e<c.length;e++)d.push(c[e].url);b.value=d.join();a(b,c)});return!1}:e.onclick=function(){e.blur();d.pick(f,function(c){b.value=c.url;a(b,[c])});return!1};b.parentNode.insertBefore(e,
b.nextSibling)},g=function(b){var e=b.getAttribute("data-fp-url");if(!e)return!0;var f=document.createElement("button");f.setAttribute("type","button");f.innerHTML=b.getAttribute("data-fp-button-text")||"Convert File";f.className=b.getAttribute("data-fp-button-class")||b.className||"fp__btn";b.style.display="none";var g=c(b,"convert");f.onclick=function(){f.blur();d.processImage(e,g,function(c){b.value=c.url;a(b,[c])});return!1};b.parentNode.insertBefore(f,b.nextSibling)},k=function(b){var g=document.createElement("div");
g.className=b.getAttribute("data-fp-class")||b.className;g.style.padding="1px";b.style.display="none";b.parentNode.insertBefore(g,b.nextSibling);var h=document.createElement("button");h.setAttribute("type","button");h.innerHTML=b.getAttribute("data-fp-button-text")||"Pick File";h.className=b.getAttribute("data-fp-button-class")||"fp__btn";g.appendChild(h);var k=document.createElement("div");f(k);k.innerHTML=b.getAttribute("data-fp-drag-text")||"Or drop files here";k.className=b.getAttribute("data-fp-drag-class")||
"";g.appendChild(k);var l=c(b),g="true"===b.getAttribute("data-fp-multiple");d.dragdrop.enabled()?m(k,g,l,b):k.innerHTML="&nbsp;";k.onclick=g?h.onclick=function(){h.blur();d.pickMultiple(l,function(c){for(var d=[],f=[],g=0;g<c.length;g++)d.push(c[g].url),f.push(c[g].filename);b.value=d.join();e(b,k,f.join(", "));a(b,c)});return!1}:h.onclick=function(){h.blur();d.pick(l,function(c){b.value=c.url;e(b,k,c.filename);a(b,[c])});return!1}},e=function(b,c,e){c.innerHTML=e;c.style.padding="2px 4px";c.style.cursor=
"default";c.style.width="";e=document.createElement("span");e.innerHTML="X";e.style.borderRadius="8px";e.style.fontSize="14px";e.style.cssFloat="right";e.style.padding="0 3px";e.style.color="#600";e.style.cursor="pointer";var g=function(e){e||(e=window.event);e.cancelBubble=!0;e.stopPropagation&&e.stopPropagation();f(c);c.innerHTML=d.dragdrop.enabled?b.getAttribute("data-fp-drag-text")||"Or drop files here":"&nbsp;";b.value="";a(b);return!1};e.addEventListener?e.addEventListener("click",g,!1):e.attachEvent&&
e.attachEvent("onclick",g);c.appendChild(e)},f=function(a){a.style.border="1px dashed #AAA";a.style.display="inline-block";a.style.margin="0 0 0 4px";a.style.borderRadius="3px";a.style.backgroundColor="#F3F3F3";a.style.color="#333";a.style.fontSize="14px";a.style.lineHeight="22px";a.style.padding="2px 4px";a.style.verticalAlign="middle";a.style.cursor="pointer";a.style.overflow="hidden"},m=function(b,c,f,g){var h=b.innerHTML,k;d.dragdrop.makeDropPane(b,{multiple:c,maxSize:f.maxSize,mimetypes:f.mimetypes,
mimetype:f.mimetype,extensions:f.extensions,extension:f.extension,location:f.storeLocation,path:f.storePath,container:f.storeContainer,region:f.storeRegion,access:f.storeAccess,policy:f.policy,signature:f.signature,dragEnter:function(){b.innerHTML="Drop to upload";b.style.backgroundColor="#E0E0E0";b.style.border="1px solid #000"},dragLeave:function(){b.innerHTML=h;b.style.backgroundColor="#F3F3F3";b.style.border="1px dashed #AAA"},onError:function(a,c){"TooManyFiles"===a?b.innerHTML=c:"WrongType"===
a?b.innerHTML=c:"NoFilesFound"===a?b.innerHTML=c:"UploadError"===a&&(b.innerHTML="Oops! Had trouble uploading.")},onStart:function(a){a=document.createElement("div");a.style.height=b.offsetHeight-2+"px";a.style.backgroundColor="#0E90D2";a.style.width="2%";a.style.borderRadius="3px";b.style.width=b.offsetWidth+"px";b.style.padding="0";b.style.border="1px solid #AAA";b.style.backgroundColor="#F3F3F3";b.style.boxShadow="inset 0 1px 2px rgba(0, 0, 0, 0.1)";b.innerHTML="";b.appendChild(a);k=a},onProgress:function(a){k&&
(k.style.width=a+"%")},onSuccess:function(c){for(var d=[],f=[],h=0;h<c.length;h++)d.push(c[h].url),f.push(c[h].filename);g.value=d.join();e(g,b,f.join(", "));a(g,c)}})},h=function(a){a.onclick=function(){var b=a.getAttribute("data-fp-url");if(!b)return!0;var e=c(a,"export");d.exportFile(b,e);return!1}},n=function(a){var b=a.getAttribute("data-fp-url"),c=a.getAttribute("data-fp-custom-css");if((b=d.util.getFPUrl(b))&&d.util.isFPUrl(b))b=b.replace("api/file/","api/preview/");else return!0;var e=document.createElement("iframe");
c&&(b=d.util.appendQueryToUrl(b,"css",c));e.src=b;e.width="100%";e.height="100%";a.appendChild(e)};return{constructPickWidget:l,constructDragWidget:k,constructExportWidget:h,buildWidgets:function(){if(document.querySelectorAll){var a,b=document.querySelectorAll('input[type="filepicker"]');for(a=0;a<b.length;a++)l(b[a]);b=document.querySelectorAll('input[type="filepicker-dragdrop"]');for(a=0;a<b.length;a++)k(b[a]);b=document.querySelectorAll('input[type="filepicker-convert"]');for(a=0;a<b.length;a++)g(b[a]);
var b=[],c=document.querySelectorAll("button[data-fp-url]");for(a=0;a<c.length;a++)b.push(c[a]);c=document.querySelectorAll("a[data-fp-url]");for(a=0;a<c.length;a++)b.push(c[a]);c=document.querySelectorAll('input[type="button"][data-fp-url]');for(a=0;a<c.length;a++)b.push(c[a]);for(a=0;a<b.length;a++)h(b[a]);b=document.querySelectorAll('[type="filepicker-preview"][data-fp-url]');for(a=0;a<b.length;a++)n(b[a]);try{var d=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");
e.type="text/css";e.styleSheet?e.styleSheet.cssText='.fp__btn{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:inline-block;height:34px;padding:4px 30px 5px 40px;position:relative;margin-bottom:0;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-family:"Open Sans", sans-serif;font-size:12px;font-weight:600;line-height:1.42857143;color:#fff;text-align:center;white-space:nowrap;background:#ef4925;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAVCAYAAABLy77vAAAABGdBTUEAALGPC/xhBQAAAJRJREFUOBHNUcEWgCAIy14fbl9egK5MRarHQS7ocANmOCgWh1gdNERig1CgwPlLxkZuE80ndHlU+4Lda1zz0m01dSKtcz0h7qpQb7WR+HyrqRPxahzwwMqqkEVs6qnv+86NQAbcJlK/X+vMeMe7XcBOYaRzcbItUR7/8QgcykmElQrQPErnmxNxl2yyiwcgEvQUocIJaE6yERwqXDIAAAAASUVORK5CYII=");background-repeat:no-repeat;background-position:15px 6px;border:1px solid transparent;border-radius:17px}.fp__btn:hover{background-color:#d64533}.fp__btn::after{position:absolute;content:"";top:15px;right:14px;width:7px;height:4px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAYAAAA1BOUGAAAABGdBTUEAALGPC/xhBQAAAGlJREFUCB1j/P//vw4DA4MiEKOD+0xAkatA/AJNBsS/ysTIyPgfyDgHxO+hCkD0Oag4RAhoPDsQm4NoqCIGBiBnAhBjAxNAkkxAvBZNFsQHuQesmxPIOQZVAKI54UZDFYgABbcBsQhMAgDIVGYSqZsn6wAAAABJRU5ErkJggg==");}.fp__btn:hover::after{background-position:0 -4px;}.fp__btn:active,.fp__btn:focus{outline:none}@media only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2 / 1), only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2){.fp__btn{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAqCAYAAADbCvnoAAAABGdBTUEAALGPC/xhBQAAAQFJREFUWAntWEESwjAIbBwfHl+upNoRNjKUJhk5kIvZQGG7bHOwPGltgdYtEJedShKyJnLHhEILz1Zi9HCOzFI7FUqFLAWseDgPdfeQ9QZ4b1j53nstnEJJyBqx20NeT1gEMB5uZG6Fzn5lV5UMp1ASQhMjdnvoqjewsYbDjcytEH5lsxULp1AS0sx8nJfVnjganf3NkVlKhVPIfQ9Zb6jF0atK3mNriXwpicPHvIeyr3sTDA53VgpgH8BvMu1ZCCz7ew/7MPwlE4CQJPNnQj2ZX4SYlEPbVpsvKFZ5TOwhcRoUTQiwwhVjArPEqVvRhMCneMXzDk9lwYphIwrZZOihF32oehMAa1qSAAAAAElFTkSuQmCC");background-size:18px 21px}.fp__btn::after{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAQCAYAAAAmlE46AAAABGdBTUEAALGPC/xhBQAAANpJREFUKBWVkU8KglAYxJ/u3HuBwmUX8BqepKN4ka4RguDOVYu2QVCrhIJ6/caekqLiGxi+PzPD58PAWrszxmygD84h7hpePFLy1mEQBJamgvcVYXkqZXTR0LwpJWw0z0Ba6bymDcrI4kkp4EvzCNoVztNKfVATwoOiyx/NDup1SVqPQVBbDDeK3txBb9JuHfhNW3HWjZhDX+SGRAgPHkl5f0+kieBxRVieaPD5LGJ4WghLiwehbkBI4HUirF3S+SYrhhQ2f2H16aR5vMSYwbdjNtYXZ0J7cc70BXnFMHIGznzEAAAAAElFTkSuQmCC");background-size:7px 8px;}}':
e.appendChild(document.createTextNode('.fp__btn{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:inline-block;height:34px;padding:4px 30px 5px 40px;position:relative;margin-bottom:0;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-family:"Open Sans", sans-serif;font-size:12px;font-weight:600;line-height:1.42857143;color:#fff;text-align:center;white-space:nowrap;background:#ef4925;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAVCAYAAABLy77vAAAABGdBTUEAALGPC/xhBQAAAJRJREFUOBHNUcEWgCAIy14fbl9egK5MRarHQS7ocANmOCgWh1gdNERig1CgwPlLxkZuE80ndHlU+4Lda1zz0m01dSKtcz0h7qpQb7WR+HyrqRPxahzwwMqqkEVs6qnv+86NQAbcJlK/X+vMeMe7XcBOYaRzcbItUR7/8QgcykmElQrQPErnmxNxl2yyiwcgEvQUocIJaE6yERwqXDIAAAAASUVORK5CYII=");background-repeat:no-repeat;background-position:15px 6px;border:1px solid transparent;border-radius:17px}.fp__btn:hover{background-color:#d64533}.fp__btn::after{position:absolute;content:"";top:15px;right:14px;width:7px;height:4px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAYAAAA1BOUGAAAABGdBTUEAALGPC/xhBQAAAGlJREFUCB1j/P//vw4DA4MiEKOD+0xAkatA/AJNBsS/ysTIyPgfyDgHxO+hCkD0Oag4RAhoPDsQm4NoqCIGBiBnAhBjAxNAkkxAvBZNFsQHuQesmxPIOQZVAKI54UZDFYgABbcBsQhMAgDIVGYSqZsn6wAAAABJRU5ErkJggg==");}.fp__btn:hover::after{background-position:0 -4px;}.fp__btn:active,.fp__btn:focus{outline:none}@media only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2 / 1), only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2){.fp__btn{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAqCAYAAADbCvnoAAAABGdBTUEAALGPC/xhBQAAAQFJREFUWAntWEESwjAIbBwfHl+upNoRNjKUJhk5kIvZQGG7bHOwPGltgdYtEJedShKyJnLHhEILz1Zi9HCOzFI7FUqFLAWseDgPdfeQ9QZ4b1j53nstnEJJyBqx20NeT1gEMB5uZG6Fzn5lV5UMp1ASQhMjdnvoqjewsYbDjcytEH5lsxULp1AS0sx8nJfVnjganf3NkVlKhVPIfQ9Zb6jF0atK3mNriXwpicPHvIeyr3sTDA53VgpgH8BvMu1ZCCz7ew/7MPwlE4CQJPNnQj2ZX4SYlEPbVpsvKFZ5TOwhcRoUTQiwwhVjArPEqVvRhMCneMXzDk9lwYphIwrZZOihF32oehMAa1qSAAAAAElFTkSuQmCC");background-size:18px 21px}.fp__btn::after{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAQCAYAAAAmlE46AAAABGdBTUEAALGPC/xhBQAAANpJREFUKBWVkU8KglAYxJ/u3HuBwmUX8BqepKN4ka4RguDOVYu2QVCrhIJ6/caekqLiGxi+PzPD58PAWrszxmygD84h7hpePFLy1mEQBJamgvcVYXkqZXTR0LwpJWw0z0Ba6bymDcrI4kkp4EvzCNoVztNKfVATwoOiyx/NDup1SVqPQVBbDDeK3txBb9JuHfhNW3HWjZhDX+SGRAgPHkl5f0+kieBxRVieaPD5LGJ4WghLiwehbkBI4HUirF3S+SYrhhQ2f2H16aR5vMSYwbdjNtYXZ0J7cc70BXnFMHIGznzEAAAAAElFTkSuQmCC");background-size:7px 8px;}}'));
d.appendChild(e)}catch(f){}}},constructWidget:function(a){a.jquery&&(a=a[0]);var b=a.getAttribute("type");"filepicker"===b?l(a):"filepicker-dragdrop"===b?k(a):"filepicker-preview"===b?n(a):a.getAttribute("data-fp-src")?d.responsiveImages.construct(a):h(a)}}});"use strict";
(function(){filepicker.internal(function(){this.util.addOnLoad(this.cookies.checkThirdParty);this.util.addOnLoad(this.widgets.buildWidgets);this.util.addOnLoad(this.responsiveImages.activate)});delete filepicker.internal;delete filepicker.extend;var d=filepicker._queue||[],a,b=d.length;if(b)for(var c=0;c<b;c++)a=d[c],filepicker[a[0]].apply(filepicker,a[1]);filepicker._queue&&delete filepicker._queue})();
(function(){window.app=window.app||{};var d=require("back_page/annotation_loader"),a=require("back_page/back_page");app.setup_annotation_form=function(b,c){c=c||{};var l=!!c.autofocus;$("#container").addClass("active");var g=b.referent.fragment_as_text.match(/[^\s]+/g).length<MAX_REFERENT_LENGTH;$("form#new_annotation").data("payload",b).toggle(g);var k=$(".new-embedded-annotation-container");if(g){k.find(".referent_content-referent").text($.html_to_text(b.referent.fragment));var e=b.referent.context_for_display;
k.find(".referent_content-context_before").text($.html_to_text(e.before_html));k.find(".referent_content-context_after").text($.html_to_text(e.after_html))}k.find(".validation_message").toggle(!g);k.find("a:not([target])").attr("target","_blank");k.on("submit","#new_annotation",function(b){var c=$(this),e=c.data("payload");$.post(c.attr("action"),c.serialize()+"&"+$.param(e),function(b){b=$(b);var c=$.extend(e.referent,{id:Number(b.attr("data-genius-referent-id")),path:b.attr("data-path"),api_path:b.attr("data-api-path"),
annotator_id:Number(b.attr("data-annotator-id")),featured:!0});d.add_to_cache(c.id,b);app.parent_channel.call({method:"finalize_new_annotation",params:c,success:function(b){c.anchor_offset=b.anchor_offset;a.referents.add([c]);a.referents.close_overlay();a.referents.activate(c.id,{align_with_vertical_offset:b.scroll_offset})},error:function(a,b){throw a+" "+b;}})});b.stopImmediatePropagation();return!1});$("#annotation_body").on("focus",function(){$(this).closest(".new-embedded-annotation-container").addClass("active")});
if(l)$(window).one("frame_visible",function(){$("#annotation_body").focus()});$(".web_annotator_signup, .web_annotator_login, .new-embedded-annotation-container .embedded_signup a").on("click",function(){var a=b.referent.range,c=new Date((new Date).getTime()+6E5);$.cookie("new_annotation_referent_range",JSON.stringify(a),{expires:c});app.set_desired_location_cookie()})}})();
(function(){window["com.genius.Genius"].require.define({"back_page/performance_report":function(d,a,b){var c=function(a,b,c){return"mark"===a.entryType&&0===a.name.indexOf("genius.")?(c=c||0,[{event:a.name.slice(7),timestamp:parseInt(a.startTime)+c,window:b}]):"resource"===a.entryType&&-1!==a.name.indexOf(document.location.host)&&-1!==a.name.indexOf(".js")?(c=c||0,[{event:"start "+a.name,timestamp:parseInt(a.startTime+c),window:b},{event:"finish "+a.name,timestamp:parseInt(a.responseEnd+c),window:b}]):
[]};d=function(a){var b=$.Deferred(),c=$.Deferred();this.back_page_data=b.promise();this.host_page_data=c.promise();b.resolve({timing:window.performance.timing,entries:window.performance.getEntries()});a.call({method:"performance_timing",success:function(a){c.resolve({timing:a[0],entries:a[1]})}})};_.extend(d.prototype,{observations:function(){return $.when(this.host_page_data,this.back_page_data).pipe(function(a,b){var d=[],e=-a.timing.navigationStart,f=b.timing.navigationStart-a.timing.navigationStart,
m;for(m in a.timing)d.push({event:m,timestamp:a.timing[m]+e,window:"host"}),d.push({event:m,timestamp:b.timing[m]+e,window:"back"});a.entries.forEach(function(a){d.push.apply(d,c(a,"host"))});b.entries.forEach(function(a){d.push.apply(d,c(a,"back",f))});return d.sort(function(a,b){return a.timestamp-b.timestamp}).filter(function(a){return 0<=a.timestamp})})},print_observations:function(){this.observations().then(function(a){a.forEach(function(a){console.debug(a.window,a.event,a.timestamp)})})}});
b.exports=d}})})();
(function(){var d=require("jschannel"),a=require("back_page/annotation_loader"),b=require("back_page/back_page"),c=require("back_page/tracking"),l;app.parent_channel=d.build({window:window.parent,origin:"*",scope:"com.genius.Genius",onReady:function(){window.performance.mark("genius.omniframeChannelReady")}});app.parent_channel.bind("track_page_load",function(a,b){c.track_page_load(b)});app.parent_channel.bind("track_annotated_page",function(){c.track_annotated_page()});app.parent_channel.bind("add_referents",function(a,
c){b.referents.add(c)});app.parent_channel.bind("all_referents_added",function(){b.referents.preload_first_page()});app.parent_channel.bind("display_annotation",function(a,d){b.referents.display(d.referent_id,{align_with_vertical_offset:d.referent_offset}).done(function(){if(l){var b=l,c=$(".annotation_container[data-id="+b.annotation_id+"]"),d=c.find(".annotation_explainer_message"),h=Hogan.compile($("#underlying_link_content").html());d.html(h.render(b));c.addClass("display_underlying_link");l=
null}a.complete()}).fail(function(b){404===b.status&&a.error(Error())});c.track_open_annotation(d);a.delayReturn(!0)});app.parent_channel.bind("fetch_annotation",function(b,c){a.load(c)});app.parent_channel.bind("new_annotation",function(a,c){c=c||{};var d=c.payload||{},f=!!c.autofocus;b.populate_overlay($($("#new_embedded_annotation").text()));app.setup_annotation_form(d,{autofocus:f});b.referents.open()});app.parent_channel.bind("frame_visible",function(){$(window).trigger("frame_visible")});app.parent_channel.bind("display_underlying_link",
function(a,b){l=b});app.set_up_autogrow();app.set_up_dirtyable_inputs();b.initialize();$(document).on("click","[data-return-to-referring-page]",function(){$.cookie("desired_location",document.referrer,{path:"/"});return!0});$(function(){var a=$.cookie("new_annotation_referent_range");a&&app.parent_channel.notify({method:"resume_new_annotation",params:JSON.parse(a)});$.removeCookie("new_annotation_referent_range")})})();
$(function(){filepicker.setKey(FILEPICKER_API_KEY);var d=function(a){return"http://s3.amazonaws.com/"+S3_IMAGE_BUCKET+"/"+encodeURIComponent(a)};$(".upload_photo").live("click",function(){filepicker.pickAndStore({mimetypes:["image/jpeg","image/png","image/gif"],services:"COMPUTER URL FACEBOOK INSTAGRAM IMAGE_SEARCH WEBCAM".split(" "),policy:FILEPICKER_POLICY,signature:FILEPICKER_SIGNATURE},{},function(a){var b=$(".user_avatar_"+CURRENT_USER.id);b.wrap('<div class="loading_with_indicator">');var c=
d(a[0].key);$.ajax_with_retry({url:"/account",type:"POST",data:{_method:"put",user:{photo_url:c}},success:function(){b.attr("src",c).unwrap();$("#avatar_solicitation").remove()}})});return!1});$(document).on("click",".image_adder",function(){var a=$(this);filepicker.pickAndStore({mimetypes:["image/jpeg","image/png","image/gif"],services:["IMAGE_SEARCH","COMPUTER"],openTo:"IMAGE_SEARCH",policy:FILEPICKER_POLICY,signature:FILEPICKER_SIGNATURE},{},function(b){b=d(b[0].key);a.closest("[data-filepicker-form]").find("[data-filepicker-target]").insertAtCursor(b)});
return!1})});window.performance.mark("genius.finishScriptEvaluation");
